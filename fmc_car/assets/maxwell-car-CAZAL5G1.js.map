{"version":3,"file":"maxwell-car-CAZAL5G1.js","sources":["../../node_modules/.pnpm/three-stdlib@2.34.0_three@0.148.0/node_modules/three-stdlib/misc/WebGL.js","../../node_modules/.pnpm/fflate@0.6.10/node_modules/fflate/esm/browser.js","../../node_modules/.pnpm/three-stdlib@2.34.0_three@0.148.0/node_modules/three-stdlib/objects/GroundProjectedEnv.js","../../node_modules/.pnpm/three-stdlib@2.34.0_three@0.148.0/node_modules/three-stdlib/utils/SkeletonUtils.js","../../node_modules/.pnpm/three-stdlib@2.34.0_three@0.148.0/node_modules/three-stdlib/loaders/RGBELoader.js","../../node_modules/.pnpm/three-stdlib@2.34.0_three@0.148.0/node_modules/three-stdlib/loaders/EXRLoader.js","../../node_modules/.pnpm/@react-three+drei@9.117.2_@react-three+fiber@8.9.2_react-dom@18.3.1_react@18.3.1__react@18.3._wa2lcjuzzuirksswee2mlzxiny/node_modules/@react-three/drei/helpers/constants.js","../../node_modules/.pnpm/@react-three+drei@9.117.2_@react-three+fiber@8.9.2_react-dom@18.3.1_react@18.3.1__react@18.3._wa2lcjuzzuirksswee2mlzxiny/node_modules/@react-three/drei/core/Clone.js","../../node_modules/.pnpm/@react-three+drei@9.117.2_@react-three+fiber@8.9.2_react-dom@18.3.1_react@18.3.1__react@18.3._wa2lcjuzzuirksswee2mlzxiny/node_modules/@react-three/drei/core/CubeCamera.js","../../node_modules/.pnpm/stats.js@0.17.0/node_modules/stats.js/build/stats.min.js","../../node_modules/.pnpm/@react-three+drei@9.117.2_@react-three+fiber@8.9.2_react-dom@18.3.1_react@18.3.1__react@18.3._wa2lcjuzzuirksswee2mlzxiny/node_modules/@react-three/drei/helpers/useEffectfulState.js","../../node_modules/.pnpm/@react-three+drei@9.117.2_@react-three+fiber@8.9.2_react-dom@18.3.1_react@18.3.1__react@18.3._wa2lcjuzzuirksswee2mlzxiny/node_modules/@react-three/drei/core/Stats.js","../../node_modules/.pnpm/@react-three+drei@9.117.2_@react-three+fiber@8.9.2_react-dom@18.3.1_react@18.3.1__react@18.3._wa2lcjuzzuirksswee2mlzxiny/node_modules/@react-three/drei/materials/ConvolutionMaterial.js","../../node_modules/.pnpm/@react-three+drei@9.117.2_@react-three+fiber@8.9.2_react-dom@18.3.1_react@18.3.1__react@18.3._wa2lcjuzzuirksswee2mlzxiny/node_modules/@react-three/drei/materials/BlurPass.js","../../node_modules/.pnpm/@react-three+drei@9.117.2_@react-three+fiber@8.9.2_react-dom@18.3.1_react@18.3.1__react@18.3._wa2lcjuzzuirksswee2mlzxiny/node_modules/@react-three/drei/materials/MeshReflectorMaterial.js","../../node_modules/.pnpm/@react-three+drei@9.117.2_@react-three+fiber@8.9.2_react-dom@18.3.1_react@18.3.1__react@18.3._wa2lcjuzzuirksswee2mlzxiny/node_modules/@react-three/drei/core/MeshReflectorMaterial.js","../../node_modules/.pnpm/@monogrid+gainmap-js@3.0.6_three@0.148.0/node_modules/@monogrid/gainmap-js/dist/QuadRenderer-B3h-sJtp.js","../../node_modules/.pnpm/@monogrid+gainmap-js@3.0.6_three@0.148.0/node_modules/@monogrid/gainmap-js/dist/decode.js","../../node_modules/.pnpm/@react-three+drei@9.117.2_@react-three+fiber@8.9.2_react-dom@18.3.1_react@18.3.1__react@18.3._wa2lcjuzzuirksswee2mlzxiny/node_modules/@react-three/drei/helpers/environment-assets.js","../../node_modules/.pnpm/@react-three+drei@9.117.2_@react-three+fiber@8.9.2_react-dom@18.3.1_react@18.3.1__react@18.3._wa2lcjuzzuirksswee2mlzxiny/node_modules/@react-three/drei/core/useEnvironment.js","../../node_modules/.pnpm/@react-three+drei@9.117.2_@react-three+fiber@8.9.2_react-dom@18.3.1_react@18.3.1__react@18.3._wa2lcjuzzuirksswee2mlzxiny/node_modules/@react-three/drei/core/Environment.js","../../node_modules/.pnpm/@react-three+drei@9.117.2_@react-three+fiber@8.9.2_react-dom@18.3.1_react@18.3.1__react@18.3._wa2lcjuzzuirksswee2mlzxiny/node_modules/@react-three/drei/core/Lightformer.js","../../src/example/maxwell-car/enum/enum.js","../../src/example/maxwell-car/context/maxwell-car-context.js","../../src/example/maxwell-car/maxwell-car-three/maxwell-car-base-env/maxwell-car-base-env.jsx","../../node_modules/.pnpm/postprocessing@6.29.3_three@0.148.0/node_modules/postprocessing/build/postprocessing.esm.js","../../node_modules/.pnpm/@react-three+postprocessing@2.6.2_@react-three+fiber@8.9.2_react-dom@18.3.1_react@18.3.1__rea_jzq73k52zan722dulb4vy5hkuy/node_modules/@react-three/postprocessing/dist/index.js","../../src/example/maxwell-car/maxwell-car-three/maxwell-effects/maxwell-effects.jsx","../../node_modules/.pnpm/three@0.148.0/node_modules/three/examples/jsm/loaders/DRACOLoader.js","../../node_modules/.pnpm/three@0.148.0/node_modules/three/examples/jsm/loaders/GLTFLoader.js","../../src/example/maxwell-car/maxwell-car-three/material/loadingMaterial/shader/loadingMaterial.fs.glsl","../../src/example/maxwell-car/maxwell-car-three/material/loadingMaterial/shader/loadingMaterial.vs.glsl","../../src/example/maxwell-car/maxwell-car-three/material/loadingMaterial/loadingMaterial.js","../../src/example/maxwell-car/hooks/useProcessModelShaders.js","../../src/example/maxwell-car/utils/utils.js","../../src/example/maxwell-car/maxwell-car-three/maxwell-particle-aggregation/maxwell-particle-aggregation.jsx","../../src/example/maxwell-car/hooks/useDynamicLightformers.js","../../src/example/maxwell-car/maxwell-car-three/maxwell-mix-env-map/maxwell-mix-env-map.jsx","../../src/example/maxwell-car/maxwell-car-three/maxwell-hoda/maxwell-hoda-re.jsx","../../src/example/maxwell-car/maxwell-car-three/maxwell-lightformers/maxwell-lightformers.jsx","../../src/example/maxwell-car/maxwell-car-three/maxwell-road-scene/maxwell-road-scene.jsx","../../src/example/maxwell-car/maxwell-car-three/maxwell-ground/maxwell-ground.jsx","../../src/example/maxwell-car/maxwell-car-three/maxwell-text/maxwell-text.jsx","../../src/example/maxwell-car/maxwell-car-three/maxwll-room-scene/maxwll-room-scene.jsx","../../src/example/maxwell-car/maxwell-car-three/maxwell-tech-scene/maxwell-tech-scene.jsx","../../src/example/maxwell-car/maxwell-car-three/maxwell-scene-manager/maxwell-scene-manager.jsx","../../src/example/maxwell-car/maxwell-car-three/maxwell-car-three.jsx","../../src/example/maxwell-car/views/maxwell-home/maxwell-home.jsx","../../src/example/maxwell-car/maxwell-car.jsx"],"sourcesContent":["let webGLAvailable, webGL2Available;\nfunction isWebGLAvailable() {\n  var _a;\n  if (webGLAvailable !== void 0)\n    return webGLAvailable;\n  try {\n    let gl;\n    const canvas = document.createElement(\"canvas\");\n    webGLAvailable = !!(window.WebGLRenderingContext && (gl = canvas.getContext(\"webgl\")));\n    if (gl)\n      (_a = gl.getExtension(\"WEBGL_lose_context\")) == null ? void 0 : _a.loseContext();\n    return webGLAvailable;\n  } catch (e) {\n    return webGLAvailable = false;\n  }\n}\nfunction isWebGL2Available() {\n  var _a;\n  if (webGL2Available !== void 0)\n    return webGL2Available;\n  try {\n    let gl;\n    const canvas = document.createElement(\"canvas\");\n    webGL2Available = !!(window.WebGL2RenderingContext && (gl = canvas.getContext(\"webgl2\")));\n    if (gl)\n      (_a = gl.getExtension(\"WEBGL_lose_context\")) == null ? void 0 : _a.loseContext();\n    return webGL2Available;\n  } catch (e) {\n    return webGL2Available = false;\n  }\n}\nfunction getWebGLErrorMessage() {\n  return getErrorMessage(1);\n}\nfunction getWebGL2ErrorMessage() {\n  return getErrorMessage(2);\n}\nfunction getErrorMessage(version) {\n  const names = {\n    1: \"WebGL\",\n    2: \"WebGL 2\"\n  };\n  const contexts = {\n    1: window.WebGLRenderingContext,\n    2: window.WebGL2RenderingContext\n  };\n  const element = document.createElement(\"div\");\n  element.id = \"webglmessage\";\n  element.style.fontFamily = \"monospace\";\n  element.style.fontSize = \"13px\";\n  element.style.fontWeight = \"normal\";\n  element.style.textAlign = \"center\";\n  element.style.background = \"#fff\";\n  element.style.color = \"#000\";\n  element.style.padding = \"1.5em\";\n  element.style.width = \"400px\";\n  element.style.margin = \"5em auto 0\";\n  let message = 'Your $0 does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">$1</a>';\n  if (contexts[version]) {\n    message = message.replace(\"$0\", \"graphics card\");\n  } else {\n    message = message.replace(\"$0\", \"browser\");\n  }\n  message = message.replace(\"$1\", names[version]);\n  element.innerHTML = message;\n  return element;\n}\nexport {\n  getErrorMessage,\n  getWebGL2ErrorMessage,\n  getWebGLErrorMessage,\n  isWebGL2Available,\n  isWebGLAvailable\n};\n//# sourceMappingURL=WebGL.js.map\n","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Some of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar wk = (function (c, id, msg, transfer, cb) {\n    var w = new Worker(ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([c], { type: 'text/javascript' }))));\n    w.onerror = function (e) { return cb(e.error, null); };\n    w.onmessage = function (e) { return cb(null, e.data); };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new u32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >>> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >>> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >>> 8) | ((x & 0x00FF) << 8)) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i)\n        ++l[cd[i] - 1];\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 0; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >>> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i) {\n            if (cd[i]) {\n                co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\n            }\n        }\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p / 8) | 0) + (p & 7 && 1); };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n    // source length\n    var sl = dat.length;\n    if (!sl || (st && !st.l && sl < 5))\n        return buf || new u8(0);\n    // have to estimate size\n    var noBuf = !buf || st;\n    // no state\n    var noSt = !st || st.i;\n    if (!st)\n        st = {};\n    // Assumes roughly 33% compression ratio average\n    if (!buf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            st.f = final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                // ensure size\n                if (noBuf)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >>> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                throw 'invalid block type';\n            if (pos > tbts) {\n                if (noSt)\n                    throw 'unexpected EOF';\n                break;\n            }\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17;\n        if (noBuf)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var lpos = pos;\n        for (;; lpos = pos) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n            pos += c & 15;\n            if (pos > tbts) {\n                if (noSt)\n                    throw 'unexpected EOF';\n                break;\n            }\n            if (!c)\n                throw 'invalid length/literal';\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lpos = pos, lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n                if (!d)\n                    throw 'invalid distance';\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\n                }\n                if (pos > tbts) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                if (noBuf)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                for (; bt < end; bt += 4) {\n                    buf[bt] = buf[bt - dt];\n                    buf[bt + 1] = buf[bt + 1 - dt];\n                    buf[bt + 2] = buf[bt + 2 - dt];\n                    buf[bt + 3] = buf[bt + 3 - dt];\n                }\n                bt = end;\n            }\n        }\n        st.l = lm, st.p = lpos, st.b = bt;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n    d[o + 2] |= v >>> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return [et, 0];\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return [v, 1];\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return [new u8(tr), mbt];\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return [cl.subarray(0, cli), s];\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >>> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a[0], mlb = _a[1];\n    var _b = hTree(df, 15), ddt = _b[0], mdb = _b[1];\n    var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\n    var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        lcfreq[lclt[i] & 31]++;\n    for (var i = 0; i < lcdt.length; ++i)\n        lcfreq[lcdt[i] & 31]++;\n    var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n    if (flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >>> 5) & 127), p += clct[i] >>> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        if (syms[i] > 255) {\n            var len = (syms[i] >>> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (syms[i] >>> 23) & 31), p += fleb[len];\n            var dst = syms[i] & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (syms[i] >>> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\n    var s = dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var pos = 0;\n    if (!lvl || s < 8) {\n        for (var i = 0; i <= s; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e < s) {\n                // write full block\n                pos = wfblk(w, pos, dat.subarray(i, e));\n            }\n            else {\n                // write final block\n                w[i] = lst;\n                pos = wfblk(w, pos, dat.subarray(i, s));\n            }\n        }\n    }\n    else {\n        var opt = deo[lvl - 1];\n        var n = opt >>> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = new u16(32768), head = new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new u32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n        var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\n        for (; i < s; ++i) {\n            // hash value\n            // deopt when i > s - 3 - at end, deopt acceptable\n            var hv = hsh(i);\n            // index mod 32768    previous index mod\n            var imod = i & 32767, pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = (imod - pimod) & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = (i - dif + j + 32768) & 32767;\n                                    var pti = prev[ti];\n                                    var cd = (ti - pti + 32768) & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += (imod - pimod + 32768) & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one Uint32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        // this is the easiest way to avoid needing to maintain state\n        if (!lst && pos & 7)\n            pos = wfblk(w, pos + 1, et);\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new Int32Array(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && -306674912) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = -1;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return ~c; }\n    };\n};\n// Alder32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 2655, l);\n                for (; i < e; ++i)\n                    m += n += d[i];\n                n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\n            }\n            a = n, b = m;\n        },\n        d: function () {\n            a %= 65521, b %= 65521;\n            return (a & 255) << 24 | (a >>> 8) << 16 | (b & 255) << 8 | (b >>> 8);\n        }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, !st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/ /g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return [fnStr, td];\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k] instanceof u8 || v[k] instanceof u16 || v[k] instanceof u32)\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    var _a;\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            _a = wcln(fns[i], fnStr, td_1), fnStr = _a[0], td_1 = _a[1];\n        ch[id] = wcln(fns[m], fnStr, td_1);\n    }\n    var td = mrg({}, ch[id][1]);\n    return wk(ch[id][0] + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, u32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, hMap, max, bits, bits16, shft, slc, inflt, inflateSync, pbf, gu8]; };\nvar bDflt = function () { return [u8, u16, u32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zlv]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get u8\nvar gu8 = function (o) { return o && o.size && new u8(o.size); };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) { return strm.push(ev.data[0], ev.data[1]); };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.push = function (d, f) {\n        if (t)\n            throw 'stream finished';\n        if (!strm.ondata)\n            throw 'no stream handler';\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16) | (d[b + 3] << 24)) >>> 0; };\nvar b8 = function (d, b) { return b4(d, b) + (b4(d, b + 4) * 4294967296); };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        throw 'invalid gzip data';\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += d[10] | (d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return ((d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16) | (d[l - 1] << 24)) >>> 0;\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + ((o.filename && (o.filename.length + 1)) || 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (fl ? (32 - 2 * fl) : 1);\n};\n// zlib valid\nvar zlv = function (d) {\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        throw 'invalid zlib data';\n    if (d[1] & 32)\n        throw 'invalid zlib data: preset dictionaries not supported';\n};\nfunction AsyncCmpStrm(opts, cb) {\n    if (!cb && typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n// zlib footer: -4 to -0 is Adler32\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (!cb && typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, !f), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        this.d = final;\n        this.p(chunk, final || false);\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    return dopt(data, opts || {}, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an inflation stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Inflate(cb) {\n        this.s = {};\n        this.p = new u8(0);\n        this.ondata = cb;\n    }\n    Inflate.prototype.e = function (c) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        var l = this.p.length;\n        var n = new u8(l + c.length);\n        n.set(this.p), n.set(c, l), this.p = n;\n    };\n    Inflate.prototype.c = function (final) {\n        this.d = this.s.i = final || false;\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.o, this.s);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) | 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous inflation stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncInflate(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, 0, function () {\n            var strm = new Inflate();\n            onmessage = astrm(strm);\n        }, 7);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gu8(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, out) {\n    return inflt(data, out);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        this.c.p(c);\n        this.l += c.length;\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, !f);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a GUNZIP stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Gunzip(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            var s = this.p.length > 3 ? gzs(this.p) : 4;\n            if (s >= this.p.length && !final)\n                return;\n            this.p = this.p.subarray(s), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 8)\n                throw 'invalid gzip stream';\n            this.p = this.p.subarray(0, -8);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous GUNZIP stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncGunzip(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, 0, function () {\n            var strm = new Gunzip();\n            onmessage = astrm(strm);\n        }, 9);\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param out Where to write the data. GZIP already encodes the output size, so providing this doesn't save memory.\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, out) {\n    return inflt(data.subarray(gzs(data), -8), out || new u8(gzl(data)));\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        this.c.p(c);\n        var raw = dopt(c, this.o, this.v && 2, f && 4, !f);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates a Zlib decompression stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Unzlib(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 2 && !final)\n                return;\n            this.p = this.p.subarray(2), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                throw 'invalid zlib stream';\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous Zlib decompression stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncUnzlib(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, 0, function () {\n            var strm = new Unzlib();\n            onmessage = astrm(strm);\n        }, 11);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gu8(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, out) {\n    return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    /**\n     * Creates a decompression stream\n     * @param cb The callback to call whenever data is decompressed\n     */\n    function Decompress(cb) {\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no stream handler';\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                var _this_1 = this;\n                var cb = function () { _this_1.ondata.apply(_this_1, arguments); };\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(cb)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(cb)\n                        : new this.Z(cb);\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    /**\n   * Creates an asynchronous decompression stream\n   * @param cb The callback to call whenever data is decompressed\n   */\n    function AsyncDecompress(cb) {\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, out) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, out)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, out)\n            : unzlibSync(data, out);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k;\n        if (val instanceof u8)\n            t[n] = [val, o];\n        else if (Array.isArray(val))\n            t[n] = [val[0], mrg(o, val[1])];\n        else\n            fltn(val, n + '/', t, o);\n    }\n};\n// text encoder\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/ new TextEncoder();\n// text decoder\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\n// text decoder stream\nvar tds = 0;\ntry {\n    td.decode(et, { stream: true });\n    tds = 1;\n}\ncatch (e) { }\n// decode UTF8\nvar dutf8 = function (d) {\n    for (var r = '', i = 0;;) {\n        var c = d[i++];\n        var eb = (c > 127) + (c > 223) + (c > 239);\n        if (i + eb > d.length)\n            return [r, slc(d, i - 1)];\n        if (!eb)\n            r += String.fromCharCode(c);\n        else if (eb == 3) {\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n        }\n        else if (eb & 1)\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\n        else\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\n    }\n};\n/**\n * Streaming UTF-8 decoding\n */\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is decoded\n     */\n    function DecodeUTF8(cb) {\n        this.ondata = cb;\n        if (tds)\n            this.t = new TextDecoder();\n        else\n            this.p = et;\n    }\n    /**\n     * Pushes a chunk to be decoded from UTF-8 binary\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    DecodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no callback';\n        final = !!final;\n        if (this.t) {\n            this.ondata(this.t.decode(chunk, { stream: true }), final);\n            if (final) {\n                if (this.t.decode().length)\n                    throw 'invalid utf-8 data';\n                this.t = null;\n            }\n            return;\n        }\n        if (!this.p)\n            throw 'stream finished';\n        var dat = new u8(this.p.length + chunk.length);\n        dat.set(this.p);\n        dat.set(chunk, this.p.length);\n        var _a = dutf8(dat), ch = _a[0], np = _a[1];\n        if (final) {\n            if (np.length)\n                throw 'invalid utf-8 data';\n            this.p = null;\n        }\n        else\n            this.p = np;\n        this.ondata(ch, final);\n    };\n    return DecodeUTF8;\n}());\nexport { DecodeUTF8 };\n/**\n * Streaming UTF-8 encoding\n */\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is encoded\n     */\n    function EncodeUTF8(cb) {\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be encoded to UTF-8\n     * @param chunk The string data to push\n     * @param final Whether this is the last chunk\n     */\n    EncodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no callback';\n        if (this.d)\n            throw 'stream finished';\n        this.ondata(strToU8(chunk), this.d = final || false);\n    };\n    return EncodeUTF8;\n}());\nexport { EncodeUTF8 };\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    if (latin1) {\n        var ar_1 = new u8(str.length);\n        for (var i = 0; i < str.length; ++i)\n            ar_1[i] = str.charCodeAt(i);\n        return ar_1;\n    }\n    if (te)\n        return te.encode(str);\n    var l = str.length;\n    var ar = new u8(str.length + (str.length >> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >> 18)), w(128 | ((c >> 12) & 63)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >> 12)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    if (latin1) {\n        var r = '';\n        for (var i = 0; i < dat.length; i += 16384)\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n        return r;\n    }\n    else if (td)\n        return td.decode(dat);\n    else {\n        var _a = dutf8(dat), out = _a[0], ext = _a[1];\n        if (ext.length)\n            throw 'invalid utf-8 data';\n        return out;\n    }\n}\n;\n// deflate bit flag\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n};\n// extra field length\nvar exfl = function (ex) {\n    var le = 0;\n    if (ex) {\n        for (var k in ex) {\n            var l = ex[k].length;\n            if (l > 65535)\n                throw 'extra field too long';\n            le += l + 4;\n        }\n    }\n    return le;\n};\n// write zip header\nvar wzh = function (d, b, f, fn, u, c, ce, co) {\n    var fl = fn.length, ex = f.extra, col = co && co.length;\n    var exl = exfl(ex);\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b++] = 20, d[b++] = f.os;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (f.flag << 1) | (c == null && 8), d[b++] = u && 8;\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        throw 'date not in range 1980-2099';\n    wbytes(d, b, (y << 25) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >>> 1)), b += 4;\n    if (c != null) {\n        wbytes(d, b, f.crc);\n        wbytes(d, b + 4, c);\n        wbytes(d, b + 8, f.size);\n    }\n    wbytes(d, b + 12, fl);\n    wbytes(d, b + 14, exl), b += 16;\n    if (ce != null) {\n        wbytes(d, b, col);\n        wbytes(d, b + 6, f.attrs);\n        wbytes(d, b + 10, ce), b += 14;\n    }\n    d.set(fn, b);\n    b += fl;\n    if (exl) {\n        for (var k in ex) {\n            var exf = ex[k], l = exf.length;\n            wbytes(d, b, +k);\n            wbytes(d, b + 2, l);\n            d.set(exf, b + 4), b += 4 + l;\n        }\n    }\n    if (col)\n        d.set(co, b), b += col;\n    return b;\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\nvar ZipPassThrough = /*#__PURE__*/ (function () {\n    /**\n     * Creates a pass-through stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     */\n    function ZipPassThrough(filename) {\n        this.filename = filename;\n        this.c = crc();\n        this.size = 0;\n        this.compression = 0;\n    }\n    /**\n     * Processes a chunk and pushes to the output stream. You can override this\n     * method in a subclass for custom behavior, but by default this passes\n     * the data through. You must call this.ondata(err, chunk, final) at some\n     * point in this method.\n     * @param chunk The chunk to process\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.process = function (chunk, final) {\n        this.ondata(null, chunk, final);\n    };\n    /**\n     * Pushes a chunk to be added. If you are subclassing this with a custom\n     * compression algorithm, note that you must push data from the source\n     * file only, pre-compression.\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no callback - add to ZIP archive before pushing';\n        this.c.p(chunk);\n        this.size += chunk.length;\n        if (final)\n            this.crc = this.c.d();\n        this.process(chunk, final || false);\n    };\n    return ZipPassThrough;\n}());\nexport { ZipPassThrough };\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\nvar ZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function ZipDeflate(filename, opts) {\n        var _this_1 = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new Deflate(opts, function (dat, final) {\n            _this_1.ondata(null, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n    }\n    ZipDeflate.prototype.process = function (chunk, final) {\n        try {\n            this.d.push(chunk, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return ZipDeflate;\n}());\nexport { ZipDeflate };\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function AsyncZipDeflate(filename, opts) {\n        var _this_1 = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\n            _this_1.ondata(err, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n        this.terminate = this.d.terminate;\n    }\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\n        this.d.push(chunk, final);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return AsyncZipDeflate;\n}());\nexport { AsyncZipDeflate };\n// TODO: Better tree shaking\n/**\n * A zippable archive to which files can incrementally be added\n */\nvar Zip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an empty ZIP archive to which files can be added\n     * @param cb The callback to call whenever data for the generated ZIP archive\n     *           is available\n     */\n    function Zip(cb) {\n        this.ondata = cb;\n        this.u = [];\n        this.d = 1;\n    }\n    /**\n     * Adds a file to the ZIP archive\n     * @param file The file stream to add\n     */\n    Zip.prototype.add = function (file) {\n        var _this_1 = this;\n        if (this.d & 2)\n            throw 'stream finished';\n        var f = strToU8(file.filename), fl = f.length;\n        var com = file.comment, o = com && strToU8(com);\n        var u = fl != file.filename.length || (o && (com.length != o.length));\n        var hl = fl + exfl(file.extra) + 30;\n        if (fl > 65535)\n            throw 'filename too long';\n        var header = new u8(hl);\n        wzh(header, 0, file, f, u);\n        var chks = [header];\n        var pAll = function () {\n            for (var _i = 0, chks_1 = chks; _i < chks_1.length; _i++) {\n                var chk = chks_1[_i];\n                _this_1.ondata(null, chk, false);\n            }\n            chks = [];\n        };\n        var tr = this.d;\n        this.d = 0;\n        var ind = this.u.length;\n        var uf = mrg(file, {\n            f: f,\n            u: u,\n            o: o,\n            t: function () {\n                if (file.terminate)\n                    file.terminate();\n            },\n            r: function () {\n                pAll();\n                if (tr) {\n                    var nxt = _this_1.u[ind + 1];\n                    if (nxt)\n                        nxt.r();\n                    else\n                        _this_1.d = 1;\n                }\n                tr = 1;\n            }\n        });\n        var cl = 0;\n        file.ondata = function (err, dat, final) {\n            if (err) {\n                _this_1.ondata(err, dat, final);\n                _this_1.terminate();\n            }\n            else {\n                cl += dat.length;\n                chks.push(dat);\n                if (final) {\n                    var dd = new u8(16);\n                    wbytes(dd, 0, 0x8074B50);\n                    wbytes(dd, 4, file.crc);\n                    wbytes(dd, 8, cl);\n                    wbytes(dd, 12, file.size);\n                    chks.push(dd);\n                    uf.c = cl, uf.b = hl + cl + 16, uf.crc = file.crc, uf.size = file.size;\n                    if (tr)\n                        uf.r();\n                    tr = 1;\n                }\n                else if (tr)\n                    pAll();\n            }\n        };\n        this.u.push(uf);\n    };\n    /**\n     * Ends the process of adding files and prepares to emit the final chunks.\n     * This *must* be called after adding all desired files for the resulting\n     * ZIP file to work properly.\n     */\n    Zip.prototype.end = function () {\n        var _this_1 = this;\n        if (this.d & 2) {\n            if (this.d & 1)\n                throw 'stream finishing';\n            throw 'stream finished';\n        }\n        if (this.d)\n            this.e();\n        else\n            this.u.push({\n                r: function () {\n                    if (!(_this_1.d & 1))\n                        return;\n                    _this_1.u.splice(-1, 1);\n                    _this_1.e();\n                },\n                t: function () { }\n            });\n        this.d = 3;\n    };\n    Zip.prototype.e = function () {\n        var bt = 0, l = 0, tl = 0;\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\n        }\n        var out = new u8(tl + 22);\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n            var f = _c[_b];\n            wzh(out, bt, f, f.f, f.u, f.c, l, f.o);\n            bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\n        }\n        wzf(out, bt, this.u.length, tl, l);\n        this.ondata(null, out, true);\n        this.d = 2;\n    };\n    /**\n     * A method to terminate any internal workers used by the stream. Subsequent\n     * calls to add() will fail.\n     */\n    Zip.prototype.terminate = function () {\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            f.t();\n        }\n        this.d = 2;\n    };\n    return Zip;\n}());\nexport { Zip };\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                var l = f.c.length;\n                wzh(out, tot, f, f.f, f.u, l);\n                var badd = 30 + f.f.length + exfl(f.extra);\n                var loc = tot + badd;\n                out.set(f.c, loc);\n                wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\n            }\n            catch (e) {\n                return cb(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cb(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), size = file.length;\n        c.p(file);\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        var compression = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = mrg(p, {\n                    size: size,\n                    crc: c.d(),\n                    c: d,\n                    f: f,\n                    m: m,\n                    u: s != fn.length || (m && (com.length != ms)),\n                    compression: compression\n                });\n                o += 30 + s + exl + l;\n                tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (s > 65535)\n            cbl('filename too long', null);\n        if (!compression)\n            cbl(null, file);\n        else if (size < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var compression = p.level == 0 ? 0 : 8;\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        if (s > 65535)\n            throw 'filename too long';\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push(mrg(p, {\n            size: file.length,\n            crc: c.d(),\n            c: d,\n            f: f,\n            m: m,\n            u: s != fn.length || (m && (com.length != ms)),\n            o: o,\n            compression: compression\n        }));\n        o += 30 + s + exl + l;\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\n        var badd = 30 + f.f.length + exfl(f.extra);\n        out.set(f.c, f.o + badd);\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Streaming pass-through decompression for ZIP archives\n */\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\n    function UnzipPassThrough() {\n    }\n    UnzipPassThrough.prototype.push = function (data, final) {\n        this.ondata(null, data, final);\n    };\n    UnzipPassThrough.compression = 0;\n    return UnzipPassThrough;\n}());\nexport { UnzipPassThrough };\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\nvar UnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function UnzipInflate() {\n        var _this_1 = this;\n        this.i = new Inflate(function (dat, final) {\n            _this_1.ondata(null, dat, final);\n        });\n    }\n    UnzipInflate.prototype.push = function (data, final) {\n        try {\n            this.i.push(data, final);\n        }\n        catch (e) {\n            this.ondata(e, data, final);\n        }\n    };\n    UnzipInflate.compression = 8;\n    return UnzipInflate;\n}());\nexport { UnzipInflate };\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function AsyncUnzipInflate(_, sz) {\n        var _this_1 = this;\n        if (sz < 320000) {\n            this.i = new Inflate(function (dat, final) {\n                _this_1.ondata(null, dat, final);\n            });\n        }\n        else {\n            this.i = new AsyncInflate(function (err, dat, final) {\n                _this_1.ondata(err, dat, final);\n            });\n            this.terminate = this.i.terminate;\n        }\n    }\n    AsyncUnzipInflate.prototype.push = function (data, final) {\n        if (this.i.terminate)\n            data = slc(data, 0);\n        this.i.push(data, final);\n    };\n    AsyncUnzipInflate.compression = 8;\n    return AsyncUnzipInflate;\n}());\nexport { AsyncUnzipInflate };\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\nvar Unzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a ZIP decompression stream\n     * @param cb The callback to call whenever a file in the ZIP archive is found\n     */\n    function Unzip(cb) {\n        this.onfile = cb;\n        this.k = [];\n        this.o = {\n            0: UnzipPassThrough\n        };\n        this.p = et;\n    }\n    /**\n     * Pushes a chunk to be unzipped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzip.prototype.push = function (chunk, final) {\n        var _this_1 = this;\n        if (!this.onfile)\n            throw 'no callback';\n        if (!this.p)\n            throw 'stream finished';\n        if (this.c > 0) {\n            var len = Math.min(this.c, chunk.length);\n            var toAdd = chunk.subarray(0, len);\n            this.c -= len;\n            if (this.d)\n                this.d.push(toAdd, !this.c);\n            else\n                this.k[0].push(toAdd);\n            chunk = chunk.subarray(len);\n            if (chunk.length)\n                return this.push(chunk, final);\n        }\n        else {\n            var f = 0, i = 0, is = void 0, buf = void 0;\n            if (!this.p.length)\n                buf = chunk;\n            else if (!chunk.length)\n                buf = this.p;\n            else {\n                buf = new u8(this.p.length + chunk.length);\n                buf.set(this.p), buf.set(chunk, this.p.length);\n            }\n            var l = buf.length, oc = this.c, add = oc && this.d;\n            var _loop_2 = function () {\n                var _a;\n                var sig = b4(buf, i);\n                if (sig == 0x4034B50) {\n                    f = 1, is = i;\n                    this_1.d = null;\n                    this_1.c = 0;\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\n                    if (l > i + 30 + fnl + es) {\n                        var chks_2 = [];\n                        this_1.k.unshift(chks_2);\n                        f = 2;\n                        var sc_1 = b4(buf, i + 18), su_1 = b4(buf, i + 22);\n                        var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n                        if (sc_1 == 4294967295) {\n                            _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\n                        }\n                        else if (dd)\n                            sc_1 = -1;\n                        i += es;\n                        this_1.c = sc_1;\n                        var d_1;\n                        var file_1 = {\n                            name: fn_1,\n                            compression: cmp_1,\n                            start: function () {\n                                if (!file_1.ondata)\n                                    throw 'no callback';\n                                if (!sc_1)\n                                    file_1.ondata(null, et, true);\n                                else {\n                                    var ctr = _this_1.o[cmp_1];\n                                    if (!ctr)\n                                        throw 'unknown compression type ' + cmp_1;\n                                    d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\n                                    d_1.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\n                                    for (var _i = 0, chks_3 = chks_2; _i < chks_3.length; _i++) {\n                                        var dat = chks_3[_i];\n                                        d_1.push(dat, false);\n                                    }\n                                    if (_this_1.k[0] == chks_2 && _this_1.c)\n                                        _this_1.d = d_1;\n                                    else\n                                        d_1.push(et, true);\n                                }\n                            },\n                            terminate: function () {\n                                if (d_1 && d_1.terminate)\n                                    d_1.terminate();\n                            }\n                        };\n                        if (sc_1 >= 0)\n                            file_1.size = sc_1, file_1.originalSize = su_1;\n                        this_1.onfile(file_1);\n                    }\n                    return \"break\";\n                }\n                else if (oc) {\n                    if (sig == 0x8074B50) {\n                        is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                    else if (sig == 0x2014B50) {\n                        is = i -= 4, f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                }\n            };\n            var this_1 = this;\n            for (; i < l - 4; ++i) {\n                var state_1 = _loop_2();\n                if (state_1 === \"break\")\n                    break;\n            }\n            this.p = et;\n            if (oc < 0) {\n                var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\n                if (add)\n                    add.push(dat, !!f);\n                else\n                    this.k[+(f == 2)].push(dat);\n            }\n            if (f & 2)\n                return this.push(buf.subarray(i), final);\n            this.p = buf.subarray(i);\n        }\n        if (final) {\n            if (this.c)\n                throw 'invalid zip file';\n            this.p = null;\n        }\n    };\n    /**\n     * Registers a decoder with the stream, allowing for files compressed with\n     * the compression type provided to be expanded correctly\n     * @param decoder The decoder constructor\n     */\n    Unzip.prototype.register = function (decoder) {\n        this.o[decoder.compression] = decoder;\n    };\n    return Unzip;\n}());\nexport { Unzip };\n/**\n * Asynchronously decompresses a ZIP archive\n * @param data The raw compressed ZIP file\n * @param cb The callback to call with the decompressed files\n * @returns A function that can be used to immediately terminate the unzipping\n */\nexport function unzip(data, cb) {\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cb('invalid zip file', null);\n            return;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (!lft)\n        cb(null, {});\n    var c = lft;\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50) {\n            cb('invalid zip file', null);\n            return;\n        }\n        c = lft = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    var _loop_3 = function (i) {\n        var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                files[fn] = d;\n                if (!--lft)\n                    cb(null, files);\n            }\n        };\n        if (!c_1)\n            cbl(null, slc(data, b, b + sc));\n        else if (c_1 == 8) {\n            var infl = data.subarray(b, b + sc);\n            if (sc < 320000) {\n                try {\n                    cbl(null, inflateSync(infl, new u8(su)));\n                }\n                catch (e) {\n                    cbl(e, null);\n                }\n            }\n            else\n                term.push(inflate(infl, { size: su }, cbl));\n        }\n        else\n            cbl('unknown compression type ' + c_1, null);\n    };\n    for (var i = 0; i < c; ++i) {\n        _loop_3(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @returns The decompressed files\n */\nexport function unzipSync(data) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            throw 'invalid zip file';\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50)\n            throw 'invalid zip file';\n        c = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!c_2)\n            files[fn] = slc(data, b, b + sc);\n        else if (c_2 == 8)\n            files[fn] = inflateSync(data.subarray(b, b + sc), new u8(su));\n        else\n            throw 'unknown compression type ' + c_2;\n    }\n    return files;\n}\n","import { Mesh, REVISION, IcosahedronGeometry, ShaderMaterial, DoubleSide } from \"three\";\nconst isCubeTexture = (def) => def && def.isCubeTexture;\nclass GroundProjectedEnv extends Mesh {\n  constructor(texture, options) {\n    var _a, _b;\n    const isCubeMap = isCubeTexture(texture);\n    const w = (_b = isCubeMap ? (_a = texture.image[0]) == null ? void 0 : _a.width : texture.image.width) != null ? _b : 1024;\n    const cubeSize = w / 4;\n    const _lodMax = Math.floor(Math.log2(cubeSize));\n    const _cubeSize = Math.pow(2, _lodMax);\n    const width = 3 * Math.max(_cubeSize, 16 * 7);\n    const height = 4 * _cubeSize;\n    const defines = [\n      isCubeMap ? \"#define ENVMAP_TYPE_CUBE\" : \"\",\n      `#define CUBEUV_TEXEL_WIDTH ${1 / width}`,\n      `#define CUBEUV_TEXEL_HEIGHT ${1 / height}`,\n      `#define CUBEUV_MAX_MIP ${_lodMax}.0`\n    ];\n    const vertexShader = (\n      /* glsl */\n      `\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        `\n    );\n    const fragmentShader = defines.join(\"\\n\") + /* glsl */\n    `\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <${parseInt(REVISION.replace(/\\D+/g, \"\")) >= 154 ? \"colorspace_fragment\" : \"encodings_fragment\"}>\n        }\n        `;\n    const uniforms = {\n      map: { value: texture },\n      height: { value: (options == null ? void 0 : options.height) || 15 },\n      radius: { value: (options == null ? void 0 : options.radius) || 100 }\n    };\n    const geometry = new IcosahedronGeometry(1, 16);\n    const material = new ShaderMaterial({\n      uniforms,\n      fragmentShader,\n      vertexShader,\n      side: DoubleSide\n    });\n    super(geometry, material);\n  }\n  set radius(radius) {\n    this.material.uniforms.radius.value = radius;\n  }\n  get radius() {\n    return this.material.uniforms.radius.value;\n  }\n  set height(height) {\n    this.material.uniforms.height.value = height;\n  }\n  get height() {\n    return this.material.uniforms.height.value;\n  }\n}\nexport {\n  GroundProjectedEnv\n};\n//# sourceMappingURL=GroundProjectedEnv.js.map\n","import { Vector3, Quaternion, Matrix4, AnimationMixer, VectorKeyframeTrack, QuaternionKeyframeTrack, AnimationClip, SkeletonHelper } from \"three\";\nfunction retarget(target, source, options = {}) {\n  const pos = new Vector3(), quat = new Quaternion(), scale = new Vector3(), bindBoneMatrix = new Matrix4(), relativeMatrix = new Matrix4(), globalMatrix = new Matrix4();\n  options.preserveMatrix = options.preserveMatrix !== void 0 ? options.preserveMatrix : true;\n  options.preservePosition = options.preservePosition !== void 0 ? options.preservePosition : true;\n  options.preserveHipPosition = options.preserveHipPosition !== void 0 ? options.preserveHipPosition : false;\n  options.useTargetMatrix = options.useTargetMatrix !== void 0 ? options.useTargetMatrix : false;\n  options.hip = options.hip !== void 0 ? options.hip : \"hip\";\n  options.names = options.names || {};\n  const sourceBones = source.isObject3D ? source.skeleton.bones : getBones(source), bones = target.isObject3D ? target.skeleton.bones : getBones(target);\n  let bindBones, bone, name, boneTo, bonesPosition;\n  if (target.isObject3D) {\n    target.skeleton.pose();\n  } else {\n    options.useTargetMatrix = true;\n    options.preserveMatrix = false;\n  }\n  if (options.preservePosition) {\n    bonesPosition = [];\n    for (let i = 0; i < bones.length; i++) {\n      bonesPosition.push(bones[i].position.clone());\n    }\n  }\n  if (options.preserveMatrix) {\n    target.updateMatrixWorld();\n    target.matrixWorld.identity();\n    for (let i = 0; i < target.children.length; ++i) {\n      target.children[i].updateMatrixWorld(true);\n    }\n  }\n  if (options.offsets) {\n    bindBones = [];\n    for (let i = 0; i < bones.length; ++i) {\n      bone = bones[i];\n      name = options.names[bone.name] || bone.name;\n      if (options.offsets[name]) {\n        bone.matrix.multiply(options.offsets[name]);\n        bone.matrix.decompose(bone.position, bone.quaternion, bone.scale);\n        bone.updateMatrixWorld();\n      }\n      bindBones.push(bone.matrixWorld.clone());\n    }\n  }\n  for (let i = 0; i < bones.length; ++i) {\n    bone = bones[i];\n    name = options.names[bone.name] || bone.name;\n    boneTo = getBoneByName(name, sourceBones);\n    globalMatrix.copy(bone.matrixWorld);\n    if (boneTo) {\n      boneTo.updateMatrixWorld();\n      if (options.useTargetMatrix) {\n        relativeMatrix.copy(boneTo.matrixWorld);\n      } else {\n        relativeMatrix.copy(target.matrixWorld).invert();\n        relativeMatrix.multiply(boneTo.matrixWorld);\n      }\n      scale.setFromMatrixScale(relativeMatrix);\n      relativeMatrix.scale(scale.set(1 / scale.x, 1 / scale.y, 1 / scale.z));\n      globalMatrix.makeRotationFromQuaternion(quat.setFromRotationMatrix(relativeMatrix));\n      if (target.isObject3D) {\n        const boneIndex = bones.indexOf(bone), wBindMatrix = bindBones ? bindBones[boneIndex] : bindBoneMatrix.copy(target.skeleton.boneInverses[boneIndex]).invert();\n        globalMatrix.multiply(wBindMatrix);\n      }\n      globalMatrix.copyPosition(relativeMatrix);\n    }\n    if (bone.parent && bone.parent.isBone) {\n      bone.matrix.copy(bone.parent.matrixWorld).invert();\n      bone.matrix.multiply(globalMatrix);\n    } else {\n      bone.matrix.copy(globalMatrix);\n    }\n    if (options.preserveHipPosition && name === options.hip) {\n      bone.matrix.setPosition(pos.set(0, bone.position.y, 0));\n    }\n    bone.matrix.decompose(bone.position, bone.quaternion, bone.scale);\n    bone.updateMatrixWorld();\n  }\n  if (options.preservePosition) {\n    for (let i = 0; i < bones.length; ++i) {\n      bone = bones[i];\n      name = options.names[bone.name] || bone.name;\n      if (name !== options.hip) {\n        bone.position.copy(bonesPosition[i]);\n      }\n    }\n  }\n  if (options.preserveMatrix) {\n    target.updateMatrixWorld(true);\n  }\n}\nfunction retargetClip(target, source, clip, options = {}) {\n  options.useFirstFramePosition = options.useFirstFramePosition !== void 0 ? options.useFirstFramePosition : false;\n  options.fps = options.fps !== void 0 ? options.fps : 30;\n  options.names = options.names || [];\n  if (!source.isObject3D) {\n    source = getHelperFromSkeleton(source);\n  }\n  const numFrames = Math.round(clip.duration * (options.fps / 1e3) * 1e3), delta = 1 / options.fps, convertedTracks = [], mixer = new AnimationMixer(source), bones = getBones(target.skeleton), boneDatas = [];\n  let positionOffset, bone, boneTo, boneData, name;\n  mixer.clipAction(clip).play();\n  mixer.update(0);\n  source.updateMatrixWorld();\n  for (let i = 0; i < numFrames; ++i) {\n    const time = i * delta;\n    retarget(target, source, options);\n    for (let j = 0; j < bones.length; ++j) {\n      name = options.names[bones[j].name] || bones[j].name;\n      boneTo = getBoneByName(name, source.skeleton);\n      if (boneTo) {\n        bone = bones[j];\n        boneData = boneDatas[j] = boneDatas[j] || { bone };\n        if (options.hip === name) {\n          if (!boneData.pos) {\n            boneData.pos = {\n              times: new Float32Array(numFrames),\n              values: new Float32Array(numFrames * 3)\n            };\n          }\n          if (options.useFirstFramePosition) {\n            if (i === 0) {\n              positionOffset = bone.position.clone();\n            }\n            bone.position.sub(positionOffset);\n          }\n          boneData.pos.times[i] = time;\n          bone.position.toArray(boneData.pos.values, i * 3);\n        }\n        if (!boneData.quat) {\n          boneData.quat = {\n            times: new Float32Array(numFrames),\n            values: new Float32Array(numFrames * 4)\n          };\n        }\n        boneData.quat.times[i] = time;\n        bone.quaternion.toArray(boneData.quat.values, i * 4);\n      }\n    }\n    mixer.update(delta);\n    source.updateMatrixWorld();\n  }\n  for (let i = 0; i < boneDatas.length; ++i) {\n    boneData = boneDatas[i];\n    if (boneData) {\n      if (boneData.pos) {\n        convertedTracks.push(\n          new VectorKeyframeTrack(\n            \".bones[\" + boneData.bone.name + \"].position\",\n            boneData.pos.times,\n            boneData.pos.values\n          )\n        );\n      }\n      convertedTracks.push(\n        new QuaternionKeyframeTrack(\n          \".bones[\" + boneData.bone.name + \"].quaternion\",\n          boneData.quat.times,\n          boneData.quat.values\n        )\n      );\n    }\n  }\n  mixer.uncacheAction(clip);\n  return new AnimationClip(clip.name, -1, convertedTracks);\n}\nfunction clone(source) {\n  const sourceLookup = /* @__PURE__ */ new Map();\n  const cloneLookup = /* @__PURE__ */ new Map();\n  const clone2 = source.clone();\n  parallelTraverse(source, clone2, function(sourceNode, clonedNode) {\n    sourceLookup.set(clonedNode, sourceNode);\n    cloneLookup.set(sourceNode, clonedNode);\n  });\n  clone2.traverse(function(node) {\n    if (!node.isSkinnedMesh)\n      return;\n    const clonedMesh = node;\n    const sourceMesh = sourceLookup.get(node);\n    const sourceBones = sourceMesh.skeleton.bones;\n    clonedMesh.skeleton = sourceMesh.skeleton.clone();\n    clonedMesh.bindMatrix.copy(sourceMesh.bindMatrix);\n    clonedMesh.skeleton.bones = sourceBones.map(function(bone) {\n      return cloneLookup.get(bone);\n    });\n    clonedMesh.bind(clonedMesh.skeleton, clonedMesh.bindMatrix);\n  });\n  return clone2;\n}\nfunction getBoneByName(name, skeleton) {\n  for (let i = 0, bones = getBones(skeleton); i < bones.length; i++) {\n    if (name === bones[i].name)\n      return bones[i];\n  }\n}\nfunction getBones(skeleton) {\n  return Array.isArray(skeleton) ? skeleton : skeleton.bones;\n}\nfunction getHelperFromSkeleton(skeleton) {\n  const source = new SkeletonHelper(skeleton.bones[0]);\n  source.skeleton = skeleton;\n  return source;\n}\nfunction parallelTraverse(a, b, callback) {\n  callback(a, b);\n  for (let i = 0; i < a.children.length; i++) {\n    parallelTraverse(a.children[i], b.children[i], callback);\n  }\n}\nconst SkeletonUtils = { retarget, retargetClip, clone };\nexport {\n  SkeletonUtils\n};\n//# sourceMappingURL=SkeletonUtils.js.map\n","import { DataTextureLoader, HalfFloatType, FloatType, DataUtils, LinearFilter } from \"three\";\nclass RGBELoader extends DataTextureLoader {\n  constructor(manager) {\n    super(manager);\n    this.type = HalfFloatType;\n  }\n  // adapted from http://www.graphics.cornell.edu/~bjw/rgbe.html\n  parse(buffer) {\n    const rgbe_read_error = 1, rgbe_write_error = 2, rgbe_format_error = 3, rgbe_memory_error = 4, rgbe_error = function(rgbe_error_code, msg) {\n      switch (rgbe_error_code) {\n        case rgbe_read_error:\n          throw new Error(\"THREE.RGBELoader: Read Error: \" + (msg || \"\"));\n        case rgbe_write_error:\n          throw new Error(\"THREE.RGBELoader: Write Error: \" + (msg || \"\"));\n        case rgbe_format_error:\n          throw new Error(\"THREE.RGBELoader: Bad File Format: \" + (msg || \"\"));\n        default:\n        case rgbe_memory_error:\n          throw new Error(\"THREE.RGBELoader: Memory Error: \" + (msg || \"\"));\n      }\n    }, RGBE_VALID_PROGRAMTYPE = 1, RGBE_VALID_FORMAT = 2, RGBE_VALID_DIMENSIONS = 4, NEWLINE = \"\\n\", fgets = function(buffer2, lineLimit, consume) {\n      const chunkSize = 128;\n      lineLimit = !lineLimit ? 1024 : lineLimit;\n      let p = buffer2.pos, i = -1, len = 0, s = \"\", chunk = String.fromCharCode.apply(null, new Uint16Array(buffer2.subarray(p, p + chunkSize)));\n      while (0 > (i = chunk.indexOf(NEWLINE)) && len < lineLimit && p < buffer2.byteLength) {\n        s += chunk;\n        len += chunk.length;\n        p += chunkSize;\n        chunk += String.fromCharCode.apply(null, new Uint16Array(buffer2.subarray(p, p + chunkSize)));\n      }\n      if (-1 < i) {\n        if (false !== consume)\n          buffer2.pos += len + i + 1;\n        return s + chunk.slice(0, i);\n      }\n      return false;\n    }, RGBE_ReadHeader = function(buffer2) {\n      const magic_token_re = /^#\\?(\\S+)/, gamma_re = /^\\s*GAMMA\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/, exposure_re = /^\\s*EXPOSURE\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/, format_re = /^\\s*FORMAT=(\\S+)\\s*$/, dimensions_re = /^\\s*\\-Y\\s+(\\d+)\\s+\\+X\\s+(\\d+)\\s*$/, header = {\n        valid: 0,\n        string: \"\",\n        comments: \"\",\n        programtype: \"RGBE\",\n        format: \"\",\n        gamma: 1,\n        exposure: 1,\n        width: 0,\n        height: 0\n      };\n      let line, match;\n      if (buffer2.pos >= buffer2.byteLength || !(line = fgets(buffer2))) {\n        rgbe_error(rgbe_read_error, \"no header found\");\n      }\n      if (!(match = line.match(magic_token_re))) {\n        rgbe_error(rgbe_format_error, \"bad initial token\");\n      }\n      header.valid |= RGBE_VALID_PROGRAMTYPE;\n      header.programtype = match[1];\n      header.string += line + \"\\n\";\n      while (true) {\n        line = fgets(buffer2);\n        if (false === line)\n          break;\n        header.string += line + \"\\n\";\n        if (\"#\" === line.charAt(0)) {\n          header.comments += line + \"\\n\";\n          continue;\n        }\n        if (match = line.match(gamma_re)) {\n          header.gamma = parseFloat(match[1]);\n        }\n        if (match = line.match(exposure_re)) {\n          header.exposure = parseFloat(match[1]);\n        }\n        if (match = line.match(format_re)) {\n          header.valid |= RGBE_VALID_FORMAT;\n          header.format = match[1];\n        }\n        if (match = line.match(dimensions_re)) {\n          header.valid |= RGBE_VALID_DIMENSIONS;\n          header.height = parseInt(match[1], 10);\n          header.width = parseInt(match[2], 10);\n        }\n        if (header.valid & RGBE_VALID_FORMAT && header.valid & RGBE_VALID_DIMENSIONS)\n          break;\n      }\n      if (!(header.valid & RGBE_VALID_FORMAT)) {\n        rgbe_error(rgbe_format_error, \"missing format specifier\");\n      }\n      if (!(header.valid & RGBE_VALID_DIMENSIONS)) {\n        rgbe_error(rgbe_format_error, \"missing image size specifier\");\n      }\n      return header;\n    }, RGBE_ReadPixels_RLE = function(buffer2, w2, h2) {\n      const scanline_width = w2;\n      if (\n        // run length encoding is not allowed so read flat\n        scanline_width < 8 || scanline_width > 32767 || // this file is not run length encoded\n        2 !== buffer2[0] || 2 !== buffer2[1] || buffer2[2] & 128\n      ) {\n        return new Uint8Array(buffer2);\n      }\n      if (scanline_width !== (buffer2[2] << 8 | buffer2[3])) {\n        rgbe_error(rgbe_format_error, \"wrong scanline width\");\n      }\n      const data_rgba = new Uint8Array(4 * w2 * h2);\n      if (!data_rgba.length) {\n        rgbe_error(rgbe_memory_error, \"unable to allocate buffer space\");\n      }\n      let offset = 0, pos = 0;\n      const ptr_end = 4 * scanline_width;\n      const rgbeStart = new Uint8Array(4);\n      const scanline_buffer = new Uint8Array(ptr_end);\n      let num_scanlines = h2;\n      while (num_scanlines > 0 && pos < buffer2.byteLength) {\n        if (pos + 4 > buffer2.byteLength) {\n          rgbe_error(rgbe_read_error);\n        }\n        rgbeStart[0] = buffer2[pos++];\n        rgbeStart[1] = buffer2[pos++];\n        rgbeStart[2] = buffer2[pos++];\n        rgbeStart[3] = buffer2[pos++];\n        if (2 != rgbeStart[0] || 2 != rgbeStart[1] || (rgbeStart[2] << 8 | rgbeStart[3]) != scanline_width) {\n          rgbe_error(rgbe_format_error, \"bad rgbe scanline format\");\n        }\n        let ptr = 0, count;\n        while (ptr < ptr_end && pos < buffer2.byteLength) {\n          count = buffer2[pos++];\n          const isEncodedRun = count > 128;\n          if (isEncodedRun)\n            count -= 128;\n          if (0 === count || ptr + count > ptr_end) {\n            rgbe_error(rgbe_format_error, \"bad scanline data\");\n          }\n          if (isEncodedRun) {\n            const byteValue = buffer2[pos++];\n            for (let i = 0; i < count; i++) {\n              scanline_buffer[ptr++] = byteValue;\n            }\n          } else {\n            scanline_buffer.set(buffer2.subarray(pos, pos + count), ptr);\n            ptr += count;\n            pos += count;\n          }\n        }\n        const l = scanline_width;\n        for (let i = 0; i < l; i++) {\n          let off = 0;\n          data_rgba[offset] = scanline_buffer[i + off];\n          off += scanline_width;\n          data_rgba[offset + 1] = scanline_buffer[i + off];\n          off += scanline_width;\n          data_rgba[offset + 2] = scanline_buffer[i + off];\n          off += scanline_width;\n          data_rgba[offset + 3] = scanline_buffer[i + off];\n          offset += 4;\n        }\n        num_scanlines--;\n      }\n      return data_rgba;\n    };\n    const RGBEByteToRGBFloat = function(sourceArray, sourceOffset, destArray, destOffset) {\n      const e = sourceArray[sourceOffset + 3];\n      const scale = Math.pow(2, e - 128) / 255;\n      destArray[destOffset + 0] = sourceArray[sourceOffset + 0] * scale;\n      destArray[destOffset + 1] = sourceArray[sourceOffset + 1] * scale;\n      destArray[destOffset + 2] = sourceArray[sourceOffset + 2] * scale;\n      destArray[destOffset + 3] = 1;\n    };\n    const RGBEByteToRGBHalf = function(sourceArray, sourceOffset, destArray, destOffset) {\n      const e = sourceArray[sourceOffset + 3];\n      const scale = Math.pow(2, e - 128) / 255;\n      destArray[destOffset + 0] = DataUtils.toHalfFloat(Math.min(sourceArray[sourceOffset + 0] * scale, 65504));\n      destArray[destOffset + 1] = DataUtils.toHalfFloat(Math.min(sourceArray[sourceOffset + 1] * scale, 65504));\n      destArray[destOffset + 2] = DataUtils.toHalfFloat(Math.min(sourceArray[sourceOffset + 2] * scale, 65504));\n      destArray[destOffset + 3] = DataUtils.toHalfFloat(1);\n    };\n    const byteArray = new Uint8Array(buffer);\n    byteArray.pos = 0;\n    const rgbe_header_info = RGBE_ReadHeader(byteArray);\n    const w = rgbe_header_info.width, h = rgbe_header_info.height, image_rgba_data = RGBE_ReadPixels_RLE(byteArray.subarray(byteArray.pos), w, h);\n    let data, type;\n    let numElements;\n    switch (this.type) {\n      case FloatType:\n        numElements = image_rgba_data.length / 4;\n        const floatArray = new Float32Array(numElements * 4);\n        for (let j = 0; j < numElements; j++) {\n          RGBEByteToRGBFloat(image_rgba_data, j * 4, floatArray, j * 4);\n        }\n        data = floatArray;\n        type = FloatType;\n        break;\n      case HalfFloatType:\n        numElements = image_rgba_data.length / 4;\n        const halfArray = new Uint16Array(numElements * 4);\n        for (let j = 0; j < numElements; j++) {\n          RGBEByteToRGBHalf(image_rgba_data, j * 4, halfArray, j * 4);\n        }\n        data = halfArray;\n        type = HalfFloatType;\n        break;\n      default:\n        throw new Error(\"THREE.RGBELoader: Unsupported type: \" + this.type);\n    }\n    return {\n      width: w,\n      height: h,\n      data,\n      header: rgbe_header_info.string,\n      gamma: rgbe_header_info.gamma,\n      exposure: rgbe_header_info.exposure,\n      type\n    };\n  }\n  setDataType(value) {\n    this.type = value;\n    return this;\n  }\n  load(url, onLoad, onProgress, onError) {\n    function onLoadCallback(texture, texData) {\n      switch (texture.type) {\n        case FloatType:\n        case HalfFloatType:\n          if (\"colorSpace\" in texture)\n            texture.colorSpace = \"srgb-linear\";\n          else\n            texture.encoding = 3e3;\n          texture.minFilter = LinearFilter;\n          texture.magFilter = LinearFilter;\n          texture.generateMipmaps = false;\n          texture.flipY = true;\n          break;\n      }\n      if (onLoad)\n        onLoad(texture, texData);\n    }\n    return super.load(url, onLoadCallback, onProgress, onError);\n  }\n}\nexport {\n  RGBELoader\n};\n//# sourceMappingURL=RGBELoader.js.map\n","import { Texture, DataTextureLoader, HalfFloatType, FloatType, RGBAFormat, RedFormat, LinearFilter, DataUtils } from \"three\";\nimport { unzlibSync } from \"fflate\";\nconst hasColorSpace = \"colorSpace\" in new Texture();\nclass EXRLoader extends DataTextureLoader {\n  constructor(manager) {\n    super(manager);\n    this.type = HalfFloatType;\n  }\n  parse(buffer) {\n    const USHORT_RANGE = 1 << 16;\n    const BITMAP_SIZE = USHORT_RANGE >> 3;\n    const HUF_ENCBITS = 16;\n    const HUF_DECBITS = 14;\n    const HUF_ENCSIZE = (1 << HUF_ENCBITS) + 1;\n    const HUF_DECSIZE = 1 << HUF_DECBITS;\n    const HUF_DECMASK = HUF_DECSIZE - 1;\n    const NBITS = 16;\n    const A_OFFSET = 1 << NBITS - 1;\n    const MOD_MASK = (1 << NBITS) - 1;\n    const SHORT_ZEROCODE_RUN = 59;\n    const LONG_ZEROCODE_RUN = 63;\n    const SHORTEST_LONG_RUN = 2 + LONG_ZEROCODE_RUN - SHORT_ZEROCODE_RUN;\n    const ULONG_SIZE = 8;\n    const FLOAT32_SIZE = 4;\n    const INT32_SIZE = 4;\n    const INT16_SIZE = 2;\n    const INT8_SIZE = 1;\n    const STATIC_HUFFMAN = 0;\n    const DEFLATE = 1;\n    const UNKNOWN = 0;\n    const LOSSY_DCT = 1;\n    const RLE = 2;\n    const logBase = Math.pow(2.7182818, 2.2);\n    function reverseLutFromBitmap(bitmap, lut) {\n      var k = 0;\n      for (var i = 0; i < USHORT_RANGE; ++i) {\n        if (i == 0 || bitmap[i >> 3] & 1 << (i & 7)) {\n          lut[k++] = i;\n        }\n      }\n      var n = k - 1;\n      while (k < USHORT_RANGE)\n        lut[k++] = 0;\n      return n;\n    }\n    function hufClearDecTable(hdec) {\n      for (var i = 0; i < HUF_DECSIZE; i++) {\n        hdec[i] = {};\n        hdec[i].len = 0;\n        hdec[i].lit = 0;\n        hdec[i].p = null;\n      }\n    }\n    const getBitsReturn = { l: 0, c: 0, lc: 0 };\n    function getBits(nBits, c, lc, uInt8Array2, inOffset) {\n      while (lc < nBits) {\n        c = c << 8 | parseUint8Array(uInt8Array2, inOffset);\n        lc += 8;\n      }\n      lc -= nBits;\n      getBitsReturn.l = c >> lc & (1 << nBits) - 1;\n      getBitsReturn.c = c;\n      getBitsReturn.lc = lc;\n    }\n    const hufTableBuffer = new Array(59);\n    function hufCanonicalCodeTable(hcode) {\n      for (var i = 0; i <= 58; ++i)\n        hufTableBuffer[i] = 0;\n      for (var i = 0; i < HUF_ENCSIZE; ++i)\n        hufTableBuffer[hcode[i]] += 1;\n      var c = 0;\n      for (var i = 58; i > 0; --i) {\n        var nc = c + hufTableBuffer[i] >> 1;\n        hufTableBuffer[i] = c;\n        c = nc;\n      }\n      for (var i = 0; i < HUF_ENCSIZE; ++i) {\n        var l = hcode[i];\n        if (l > 0)\n          hcode[i] = l | hufTableBuffer[l]++ << 6;\n      }\n    }\n    function hufUnpackEncTable(uInt8Array2, inDataView, inOffset, ni, im, iM, hcode) {\n      var p = inOffset;\n      var c = 0;\n      var lc = 0;\n      for (; im <= iM; im++) {\n        if (p.value - inOffset.value > ni)\n          return false;\n        getBits(6, c, lc, uInt8Array2, p);\n        var l = getBitsReturn.l;\n        c = getBitsReturn.c;\n        lc = getBitsReturn.lc;\n        hcode[im] = l;\n        if (l == LONG_ZEROCODE_RUN) {\n          if (p.value - inOffset.value > ni) {\n            throw \"Something wrong with hufUnpackEncTable\";\n          }\n          getBits(8, c, lc, uInt8Array2, p);\n          var zerun = getBitsReturn.l + SHORTEST_LONG_RUN;\n          c = getBitsReturn.c;\n          lc = getBitsReturn.lc;\n          if (im + zerun > iM + 1) {\n            throw \"Something wrong with hufUnpackEncTable\";\n          }\n          while (zerun--)\n            hcode[im++] = 0;\n          im--;\n        } else if (l >= SHORT_ZEROCODE_RUN) {\n          var zerun = l - SHORT_ZEROCODE_RUN + 2;\n          if (im + zerun > iM + 1) {\n            throw \"Something wrong with hufUnpackEncTable\";\n          }\n          while (zerun--)\n            hcode[im++] = 0;\n          im--;\n        }\n      }\n      hufCanonicalCodeTable(hcode);\n    }\n    function hufLength(code) {\n      return code & 63;\n    }\n    function hufCode(code) {\n      return code >> 6;\n    }\n    function hufBuildDecTable(hcode, im, iM, hdecod) {\n      for (; im <= iM; im++) {\n        var c = hufCode(hcode[im]);\n        var l = hufLength(hcode[im]);\n        if (c >> l) {\n          throw \"Invalid table entry\";\n        }\n        if (l > HUF_DECBITS) {\n          var pl = hdecod[c >> l - HUF_DECBITS];\n          if (pl.len) {\n            throw \"Invalid table entry\";\n          }\n          pl.lit++;\n          if (pl.p) {\n            var p = pl.p;\n            pl.p = new Array(pl.lit);\n            for (var i = 0; i < pl.lit - 1; ++i) {\n              pl.p[i] = p[i];\n            }\n          } else {\n            pl.p = new Array(1);\n          }\n          pl.p[pl.lit - 1] = im;\n        } else if (l) {\n          var plOffset = 0;\n          for (var i = 1 << HUF_DECBITS - l; i > 0; i--) {\n            var pl = hdecod[(c << HUF_DECBITS - l) + plOffset];\n            if (pl.len || pl.p) {\n              throw \"Invalid table entry\";\n            }\n            pl.len = l;\n            pl.lit = im;\n            plOffset++;\n          }\n        }\n      }\n      return true;\n    }\n    const getCharReturn = { c: 0, lc: 0 };\n    function getChar(c, lc, uInt8Array2, inOffset) {\n      c = c << 8 | parseUint8Array(uInt8Array2, inOffset);\n      lc += 8;\n      getCharReturn.c = c;\n      getCharReturn.lc = lc;\n    }\n    const getCodeReturn = { c: 0, lc: 0 };\n    function getCode(po, rlc, c, lc, uInt8Array2, inDataView, inOffset, outBuffer, outBufferOffset, outBufferEndOffset) {\n      if (po == rlc) {\n        if (lc < 8) {\n          getChar(c, lc, uInt8Array2, inOffset);\n          c = getCharReturn.c;\n          lc = getCharReturn.lc;\n        }\n        lc -= 8;\n        var cs = c >> lc;\n        var cs = new Uint8Array([cs])[0];\n        if (outBufferOffset.value + cs > outBufferEndOffset) {\n          return false;\n        }\n        var s = outBuffer[outBufferOffset.value - 1];\n        while (cs-- > 0) {\n          outBuffer[outBufferOffset.value++] = s;\n        }\n      } else if (outBufferOffset.value < outBufferEndOffset) {\n        outBuffer[outBufferOffset.value++] = po;\n      } else {\n        return false;\n      }\n      getCodeReturn.c = c;\n      getCodeReturn.lc = lc;\n    }\n    function UInt16(value) {\n      return value & 65535;\n    }\n    function Int16(value) {\n      var ref = UInt16(value);\n      return ref > 32767 ? ref - 65536 : ref;\n    }\n    const wdec14Return = { a: 0, b: 0 };\n    function wdec14(l, h) {\n      var ls = Int16(l);\n      var hs = Int16(h);\n      var hi = hs;\n      var ai = ls + (hi & 1) + (hi >> 1);\n      var as = ai;\n      var bs = ai - hi;\n      wdec14Return.a = as;\n      wdec14Return.b = bs;\n    }\n    function wdec16(l, h) {\n      var m = UInt16(l);\n      var d = UInt16(h);\n      var bb = m - (d >> 1) & MOD_MASK;\n      var aa = d + bb - A_OFFSET & MOD_MASK;\n      wdec14Return.a = aa;\n      wdec14Return.b = bb;\n    }\n    function wav2Decode(buffer2, j, nx, ox, ny, oy, mx) {\n      var w14 = mx < 1 << 14;\n      var n = nx > ny ? ny : nx;\n      var p = 1;\n      var p2;\n      while (p <= n)\n        p <<= 1;\n      p >>= 1;\n      p2 = p;\n      p >>= 1;\n      while (p >= 1) {\n        var py = 0;\n        var ey = py + oy * (ny - p2);\n        var oy1 = oy * p;\n        var oy2 = oy * p2;\n        var ox1 = ox * p;\n        var ox2 = ox * p2;\n        var i00, i01, i10, i11;\n        for (; py <= ey; py += oy2) {\n          var px = py;\n          var ex = py + ox * (nx - p2);\n          for (; px <= ex; px += ox2) {\n            var p01 = px + ox1;\n            var p10 = px + oy1;\n            var p11 = p10 + ox1;\n            if (w14) {\n              wdec14(buffer2[px + j], buffer2[p10 + j]);\n              i00 = wdec14Return.a;\n              i10 = wdec14Return.b;\n              wdec14(buffer2[p01 + j], buffer2[p11 + j]);\n              i01 = wdec14Return.a;\n              i11 = wdec14Return.b;\n              wdec14(i00, i01);\n              buffer2[px + j] = wdec14Return.a;\n              buffer2[p01 + j] = wdec14Return.b;\n              wdec14(i10, i11);\n              buffer2[p10 + j] = wdec14Return.a;\n              buffer2[p11 + j] = wdec14Return.b;\n            } else {\n              wdec16(buffer2[px + j], buffer2[p10 + j]);\n              i00 = wdec14Return.a;\n              i10 = wdec14Return.b;\n              wdec16(buffer2[p01 + j], buffer2[p11 + j]);\n              i01 = wdec14Return.a;\n              i11 = wdec14Return.b;\n              wdec16(i00, i01);\n              buffer2[px + j] = wdec14Return.a;\n              buffer2[p01 + j] = wdec14Return.b;\n              wdec16(i10, i11);\n              buffer2[p10 + j] = wdec14Return.a;\n              buffer2[p11 + j] = wdec14Return.b;\n            }\n          }\n          if (nx & p) {\n            var p10 = px + oy1;\n            if (w14)\n              wdec14(buffer2[px + j], buffer2[p10 + j]);\n            else\n              wdec16(buffer2[px + j], buffer2[p10 + j]);\n            i00 = wdec14Return.a;\n            buffer2[p10 + j] = wdec14Return.b;\n            buffer2[px + j] = i00;\n          }\n        }\n        if (ny & p) {\n          var px = py;\n          var ex = py + ox * (nx - p2);\n          for (; px <= ex; px += ox2) {\n            var p01 = px + ox1;\n            if (w14)\n              wdec14(buffer2[px + j], buffer2[p01 + j]);\n            else\n              wdec16(buffer2[px + j], buffer2[p01 + j]);\n            i00 = wdec14Return.a;\n            buffer2[p01 + j] = wdec14Return.b;\n            buffer2[px + j] = i00;\n          }\n        }\n        p2 = p;\n        p >>= 1;\n      }\n      return py;\n    }\n    function hufDecode(encodingTable, decodingTable, uInt8Array2, inDataView, inOffset, ni, rlc, no, outBuffer, outOffset) {\n      var c = 0;\n      var lc = 0;\n      var outBufferEndOffset = no;\n      var inOffsetEnd = Math.trunc(inOffset.value + (ni + 7) / 8);\n      while (inOffset.value < inOffsetEnd) {\n        getChar(c, lc, uInt8Array2, inOffset);\n        c = getCharReturn.c;\n        lc = getCharReturn.lc;\n        while (lc >= HUF_DECBITS) {\n          var index = c >> lc - HUF_DECBITS & HUF_DECMASK;\n          var pl = decodingTable[index];\n          if (pl.len) {\n            lc -= pl.len;\n            getCode(pl.lit, rlc, c, lc, uInt8Array2, inDataView, inOffset, outBuffer, outOffset, outBufferEndOffset);\n            c = getCodeReturn.c;\n            lc = getCodeReturn.lc;\n          } else {\n            if (!pl.p) {\n              throw \"hufDecode issues\";\n            }\n            var j;\n            for (j = 0; j < pl.lit; j++) {\n              var l = hufLength(encodingTable[pl.p[j]]);\n              while (lc < l && inOffset.value < inOffsetEnd) {\n                getChar(c, lc, uInt8Array2, inOffset);\n                c = getCharReturn.c;\n                lc = getCharReturn.lc;\n              }\n              if (lc >= l) {\n                if (hufCode(encodingTable[pl.p[j]]) == (c >> lc - l & (1 << l) - 1)) {\n                  lc -= l;\n                  getCode(\n                    pl.p[j],\n                    rlc,\n                    c,\n                    lc,\n                    uInt8Array2,\n                    inDataView,\n                    inOffset,\n                    outBuffer,\n                    outOffset,\n                    outBufferEndOffset\n                  );\n                  c = getCodeReturn.c;\n                  lc = getCodeReturn.lc;\n                  break;\n                }\n              }\n            }\n            if (j == pl.lit) {\n              throw \"hufDecode issues\";\n            }\n          }\n        }\n      }\n      var i = 8 - ni & 7;\n      c >>= i;\n      lc -= i;\n      while (lc > 0) {\n        var pl = decodingTable[c << HUF_DECBITS - lc & HUF_DECMASK];\n        if (pl.len) {\n          lc -= pl.len;\n          getCode(pl.lit, rlc, c, lc, uInt8Array2, inDataView, inOffset, outBuffer, outOffset, outBufferEndOffset);\n          c = getCodeReturn.c;\n          lc = getCodeReturn.lc;\n        } else {\n          throw \"hufDecode issues\";\n        }\n      }\n      return true;\n    }\n    function hufUncompress(uInt8Array2, inDataView, inOffset, nCompressed, outBuffer, nRaw) {\n      var outOffset = { value: 0 };\n      var initialInOffset = inOffset.value;\n      var im = parseUint32(inDataView, inOffset);\n      var iM = parseUint32(inDataView, inOffset);\n      inOffset.value += 4;\n      var nBits = parseUint32(inDataView, inOffset);\n      inOffset.value += 4;\n      if (im < 0 || im >= HUF_ENCSIZE || iM < 0 || iM >= HUF_ENCSIZE) {\n        throw \"Something wrong with HUF_ENCSIZE\";\n      }\n      var freq = new Array(HUF_ENCSIZE);\n      var hdec = new Array(HUF_DECSIZE);\n      hufClearDecTable(hdec);\n      var ni = nCompressed - (inOffset.value - initialInOffset);\n      hufUnpackEncTable(uInt8Array2, inDataView, inOffset, ni, im, iM, freq);\n      if (nBits > 8 * (nCompressed - (inOffset.value - initialInOffset))) {\n        throw \"Something wrong with hufUncompress\";\n      }\n      hufBuildDecTable(freq, im, iM, hdec);\n      hufDecode(freq, hdec, uInt8Array2, inDataView, inOffset, nBits, iM, nRaw, outBuffer, outOffset);\n    }\n    function applyLut(lut, data, nData) {\n      for (var i = 0; i < nData; ++i) {\n        data[i] = lut[data[i]];\n      }\n    }\n    function predictor(source) {\n      for (var t = 1; t < source.length; t++) {\n        var d = source[t - 1] + source[t] - 128;\n        source[t] = d;\n      }\n    }\n    function interleaveScalar(source, out) {\n      var t1 = 0;\n      var t2 = Math.floor((source.length + 1) / 2);\n      var s = 0;\n      var stop = source.length - 1;\n      while (true) {\n        if (s > stop)\n          break;\n        out[s++] = source[t1++];\n        if (s > stop)\n          break;\n        out[s++] = source[t2++];\n      }\n    }\n    function decodeRunLength(source) {\n      var size = source.byteLength;\n      var out = new Array();\n      var p = 0;\n      var reader = new DataView(source);\n      while (size > 0) {\n        var l = reader.getInt8(p++);\n        if (l < 0) {\n          var count = -l;\n          size -= count + 1;\n          for (var i = 0; i < count; i++) {\n            out.push(reader.getUint8(p++));\n          }\n        } else {\n          var count = l;\n          size -= 2;\n          var value = reader.getUint8(p++);\n          for (var i = 0; i < count + 1; i++) {\n            out.push(value);\n          }\n        }\n      }\n      return out;\n    }\n    function lossyDctDecode(cscSet, rowPtrs, channelData, acBuffer, dcBuffer, outBuffer) {\n      var dataView = new DataView(outBuffer.buffer);\n      var width = channelData[cscSet.idx[0]].width;\n      var height = channelData[cscSet.idx[0]].height;\n      var numComp = 3;\n      var numFullBlocksX = Math.floor(width / 8);\n      var numBlocksX = Math.ceil(width / 8);\n      var numBlocksY = Math.ceil(height / 8);\n      var leftoverX = width - (numBlocksX - 1) * 8;\n      var leftoverY = height - (numBlocksY - 1) * 8;\n      var currAcComp = { value: 0 };\n      var currDcComp = new Array(numComp);\n      var dctData = new Array(numComp);\n      var halfZigBlock = new Array(numComp);\n      var rowBlock = new Array(numComp);\n      var rowOffsets = new Array(numComp);\n      for (let comp2 = 0; comp2 < numComp; ++comp2) {\n        rowOffsets[comp2] = rowPtrs[cscSet.idx[comp2]];\n        currDcComp[comp2] = comp2 < 1 ? 0 : currDcComp[comp2 - 1] + numBlocksX * numBlocksY;\n        dctData[comp2] = new Float32Array(64);\n        halfZigBlock[comp2] = new Uint16Array(64);\n        rowBlock[comp2] = new Uint16Array(numBlocksX * 64);\n      }\n      for (let blocky = 0; blocky < numBlocksY; ++blocky) {\n        var maxY = 8;\n        if (blocky == numBlocksY - 1)\n          maxY = leftoverY;\n        var maxX = 8;\n        for (let blockx = 0; blockx < numBlocksX; ++blockx) {\n          if (blockx == numBlocksX - 1)\n            maxX = leftoverX;\n          for (let comp2 = 0; comp2 < numComp; ++comp2) {\n            halfZigBlock[comp2].fill(0);\n            halfZigBlock[comp2][0] = dcBuffer[currDcComp[comp2]++];\n            unRleAC(currAcComp, acBuffer, halfZigBlock[comp2]);\n            unZigZag(halfZigBlock[comp2], dctData[comp2]);\n            dctInverse(dctData[comp2]);\n          }\n          {\n            csc709Inverse(dctData);\n          }\n          for (let comp2 = 0; comp2 < numComp; ++comp2) {\n            convertToHalf(dctData[comp2], rowBlock[comp2], blockx * 64);\n          }\n        }\n        let offset2 = 0;\n        for (let comp2 = 0; comp2 < numComp; ++comp2) {\n          const type2 = channelData[cscSet.idx[comp2]].type;\n          for (let y2 = 8 * blocky; y2 < 8 * blocky + maxY; ++y2) {\n            offset2 = rowOffsets[comp2][y2];\n            for (let blockx = 0; blockx < numFullBlocksX; ++blockx) {\n              const src = blockx * 64 + (y2 & 7) * 8;\n              dataView.setUint16(offset2 + 0 * INT16_SIZE * type2, rowBlock[comp2][src + 0], true);\n              dataView.setUint16(offset2 + 1 * INT16_SIZE * type2, rowBlock[comp2][src + 1], true);\n              dataView.setUint16(offset2 + 2 * INT16_SIZE * type2, rowBlock[comp2][src + 2], true);\n              dataView.setUint16(offset2 + 3 * INT16_SIZE * type2, rowBlock[comp2][src + 3], true);\n              dataView.setUint16(offset2 + 4 * INT16_SIZE * type2, rowBlock[comp2][src + 4], true);\n              dataView.setUint16(offset2 + 5 * INT16_SIZE * type2, rowBlock[comp2][src + 5], true);\n              dataView.setUint16(offset2 + 6 * INT16_SIZE * type2, rowBlock[comp2][src + 6], true);\n              dataView.setUint16(offset2 + 7 * INT16_SIZE * type2, rowBlock[comp2][src + 7], true);\n              offset2 += 8 * INT16_SIZE * type2;\n            }\n          }\n          if (numFullBlocksX != numBlocksX) {\n            for (let y2 = 8 * blocky; y2 < 8 * blocky + maxY; ++y2) {\n              const offset3 = rowOffsets[comp2][y2] + 8 * numFullBlocksX * INT16_SIZE * type2;\n              const src = numFullBlocksX * 64 + (y2 & 7) * 8;\n              for (let x2 = 0; x2 < maxX; ++x2) {\n                dataView.setUint16(offset3 + x2 * INT16_SIZE * type2, rowBlock[comp2][src + x2], true);\n              }\n            }\n          }\n        }\n      }\n      var halfRow = new Uint16Array(width);\n      var dataView = new DataView(outBuffer.buffer);\n      for (var comp = 0; comp < numComp; ++comp) {\n        channelData[cscSet.idx[comp]].decoded = true;\n        var type = channelData[cscSet.idx[comp]].type;\n        if (channelData[comp].type != 2)\n          continue;\n        for (var y = 0; y < height; ++y) {\n          const offset2 = rowOffsets[comp][y];\n          for (var x = 0; x < width; ++x) {\n            halfRow[x] = dataView.getUint16(offset2 + x * INT16_SIZE * type, true);\n          }\n          for (var x = 0; x < width; ++x) {\n            dataView.setFloat32(offset2 + x * INT16_SIZE * type, decodeFloat16(halfRow[x]), true);\n          }\n        }\n      }\n    }\n    function unRleAC(currAcComp, acBuffer, halfZigBlock) {\n      var acValue;\n      var dctComp = 1;\n      while (dctComp < 64) {\n        acValue = acBuffer[currAcComp.value];\n        if (acValue == 65280) {\n          dctComp = 64;\n        } else if (acValue >> 8 == 255) {\n          dctComp += acValue & 255;\n        } else {\n          halfZigBlock[dctComp] = acValue;\n          dctComp++;\n        }\n        currAcComp.value++;\n      }\n    }\n    function unZigZag(src, dst) {\n      dst[0] = decodeFloat16(src[0]);\n      dst[1] = decodeFloat16(src[1]);\n      dst[2] = decodeFloat16(src[5]);\n      dst[3] = decodeFloat16(src[6]);\n      dst[4] = decodeFloat16(src[14]);\n      dst[5] = decodeFloat16(src[15]);\n      dst[6] = decodeFloat16(src[27]);\n      dst[7] = decodeFloat16(src[28]);\n      dst[8] = decodeFloat16(src[2]);\n      dst[9] = decodeFloat16(src[4]);\n      dst[10] = decodeFloat16(src[7]);\n      dst[11] = decodeFloat16(src[13]);\n      dst[12] = decodeFloat16(src[16]);\n      dst[13] = decodeFloat16(src[26]);\n      dst[14] = decodeFloat16(src[29]);\n      dst[15] = decodeFloat16(src[42]);\n      dst[16] = decodeFloat16(src[3]);\n      dst[17] = decodeFloat16(src[8]);\n      dst[18] = decodeFloat16(src[12]);\n      dst[19] = decodeFloat16(src[17]);\n      dst[20] = decodeFloat16(src[25]);\n      dst[21] = decodeFloat16(src[30]);\n      dst[22] = decodeFloat16(src[41]);\n      dst[23] = decodeFloat16(src[43]);\n      dst[24] = decodeFloat16(src[9]);\n      dst[25] = decodeFloat16(src[11]);\n      dst[26] = decodeFloat16(src[18]);\n      dst[27] = decodeFloat16(src[24]);\n      dst[28] = decodeFloat16(src[31]);\n      dst[29] = decodeFloat16(src[40]);\n      dst[30] = decodeFloat16(src[44]);\n      dst[31] = decodeFloat16(src[53]);\n      dst[32] = decodeFloat16(src[10]);\n      dst[33] = decodeFloat16(src[19]);\n      dst[34] = decodeFloat16(src[23]);\n      dst[35] = decodeFloat16(src[32]);\n      dst[36] = decodeFloat16(src[39]);\n      dst[37] = decodeFloat16(src[45]);\n      dst[38] = decodeFloat16(src[52]);\n      dst[39] = decodeFloat16(src[54]);\n      dst[40] = decodeFloat16(src[20]);\n      dst[41] = decodeFloat16(src[22]);\n      dst[42] = decodeFloat16(src[33]);\n      dst[43] = decodeFloat16(src[38]);\n      dst[44] = decodeFloat16(src[46]);\n      dst[45] = decodeFloat16(src[51]);\n      dst[46] = decodeFloat16(src[55]);\n      dst[47] = decodeFloat16(src[60]);\n      dst[48] = decodeFloat16(src[21]);\n      dst[49] = decodeFloat16(src[34]);\n      dst[50] = decodeFloat16(src[37]);\n      dst[51] = decodeFloat16(src[47]);\n      dst[52] = decodeFloat16(src[50]);\n      dst[53] = decodeFloat16(src[56]);\n      dst[54] = decodeFloat16(src[59]);\n      dst[55] = decodeFloat16(src[61]);\n      dst[56] = decodeFloat16(src[35]);\n      dst[57] = decodeFloat16(src[36]);\n      dst[58] = decodeFloat16(src[48]);\n      dst[59] = decodeFloat16(src[49]);\n      dst[60] = decodeFloat16(src[57]);\n      dst[61] = decodeFloat16(src[58]);\n      dst[62] = decodeFloat16(src[62]);\n      dst[63] = decodeFloat16(src[63]);\n    }\n    function dctInverse(data) {\n      const a = 0.5 * Math.cos(3.14159 / 4);\n      const b = 0.5 * Math.cos(3.14159 / 16);\n      const c = 0.5 * Math.cos(3.14159 / 8);\n      const d = 0.5 * Math.cos(3 * 3.14159 / 16);\n      const e = 0.5 * Math.cos(5 * 3.14159 / 16);\n      const f = 0.5 * Math.cos(3 * 3.14159 / 8);\n      const g = 0.5 * Math.cos(7 * 3.14159 / 16);\n      var alpha = new Array(4);\n      var beta = new Array(4);\n      var theta = new Array(4);\n      var gamma = new Array(4);\n      for (var row = 0; row < 8; ++row) {\n        var rowPtr = row * 8;\n        alpha[0] = c * data[rowPtr + 2];\n        alpha[1] = f * data[rowPtr + 2];\n        alpha[2] = c * data[rowPtr + 6];\n        alpha[3] = f * data[rowPtr + 6];\n        beta[0] = b * data[rowPtr + 1] + d * data[rowPtr + 3] + e * data[rowPtr + 5] + g * data[rowPtr + 7];\n        beta[1] = d * data[rowPtr + 1] - g * data[rowPtr + 3] - b * data[rowPtr + 5] - e * data[rowPtr + 7];\n        beta[2] = e * data[rowPtr + 1] - b * data[rowPtr + 3] + g * data[rowPtr + 5] + d * data[rowPtr + 7];\n        beta[3] = g * data[rowPtr + 1] - e * data[rowPtr + 3] + d * data[rowPtr + 5] - b * data[rowPtr + 7];\n        theta[0] = a * (data[rowPtr + 0] + data[rowPtr + 4]);\n        theta[3] = a * (data[rowPtr + 0] - data[rowPtr + 4]);\n        theta[1] = alpha[0] + alpha[3];\n        theta[2] = alpha[1] - alpha[2];\n        gamma[0] = theta[0] + theta[1];\n        gamma[1] = theta[3] + theta[2];\n        gamma[2] = theta[3] - theta[2];\n        gamma[3] = theta[0] - theta[1];\n        data[rowPtr + 0] = gamma[0] + beta[0];\n        data[rowPtr + 1] = gamma[1] + beta[1];\n        data[rowPtr + 2] = gamma[2] + beta[2];\n        data[rowPtr + 3] = gamma[3] + beta[3];\n        data[rowPtr + 4] = gamma[3] - beta[3];\n        data[rowPtr + 5] = gamma[2] - beta[2];\n        data[rowPtr + 6] = gamma[1] - beta[1];\n        data[rowPtr + 7] = gamma[0] - beta[0];\n      }\n      for (var column = 0; column < 8; ++column) {\n        alpha[0] = c * data[16 + column];\n        alpha[1] = f * data[16 + column];\n        alpha[2] = c * data[48 + column];\n        alpha[3] = f * data[48 + column];\n        beta[0] = b * data[8 + column] + d * data[24 + column] + e * data[40 + column] + g * data[56 + column];\n        beta[1] = d * data[8 + column] - g * data[24 + column] - b * data[40 + column] - e * data[56 + column];\n        beta[2] = e * data[8 + column] - b * data[24 + column] + g * data[40 + column] + d * data[56 + column];\n        beta[3] = g * data[8 + column] - e * data[24 + column] + d * data[40 + column] - b * data[56 + column];\n        theta[0] = a * (data[column] + data[32 + column]);\n        theta[3] = a * (data[column] - data[32 + column]);\n        theta[1] = alpha[0] + alpha[3];\n        theta[2] = alpha[1] - alpha[2];\n        gamma[0] = theta[0] + theta[1];\n        gamma[1] = theta[3] + theta[2];\n        gamma[2] = theta[3] - theta[2];\n        gamma[3] = theta[0] - theta[1];\n        data[0 + column] = gamma[0] + beta[0];\n        data[8 + column] = gamma[1] + beta[1];\n        data[16 + column] = gamma[2] + beta[2];\n        data[24 + column] = gamma[3] + beta[3];\n        data[32 + column] = gamma[3] - beta[3];\n        data[40 + column] = gamma[2] - beta[2];\n        data[48 + column] = gamma[1] - beta[1];\n        data[56 + column] = gamma[0] - beta[0];\n      }\n    }\n    function csc709Inverse(data) {\n      for (var i = 0; i < 64; ++i) {\n        var y = data[0][i];\n        var cb = data[1][i];\n        var cr = data[2][i];\n        data[0][i] = y + 1.5747 * cr;\n        data[1][i] = y - 0.1873 * cb - 0.4682 * cr;\n        data[2][i] = y + 1.8556 * cb;\n      }\n    }\n    function convertToHalf(src, dst, idx) {\n      for (var i = 0; i < 64; ++i) {\n        dst[idx + i] = DataUtils.toHalfFloat(toLinear(src[i]));\n      }\n    }\n    function toLinear(float) {\n      if (float <= 1) {\n        return Math.sign(float) * Math.pow(Math.abs(float), 2.2);\n      } else {\n        return Math.sign(float) * Math.pow(logBase, Math.abs(float) - 1);\n      }\n    }\n    function uncompressRAW(info) {\n      return new DataView(info.array.buffer, info.offset.value, info.size);\n    }\n    function uncompressRLE(info) {\n      var compressed = info.viewer.buffer.slice(info.offset.value, info.offset.value + info.size);\n      var rawBuffer = new Uint8Array(decodeRunLength(compressed));\n      var tmpBuffer = new Uint8Array(rawBuffer.length);\n      predictor(rawBuffer);\n      interleaveScalar(rawBuffer, tmpBuffer);\n      return new DataView(tmpBuffer.buffer);\n    }\n    function uncompressZIP(info) {\n      var compressed = info.array.slice(info.offset.value, info.offset.value + info.size);\n      var rawBuffer = unzlibSync(compressed);\n      var tmpBuffer = new Uint8Array(rawBuffer.length);\n      predictor(rawBuffer);\n      interleaveScalar(rawBuffer, tmpBuffer);\n      return new DataView(tmpBuffer.buffer);\n    }\n    function uncompressPIZ(info) {\n      var inDataView = info.viewer;\n      var inOffset = { value: info.offset.value };\n      var outBuffer = new Uint16Array(info.width * info.scanlineBlockSize * (info.channels * info.type));\n      var bitmap = new Uint8Array(BITMAP_SIZE);\n      var outBufferEnd = 0;\n      var pizChannelData = new Array(info.channels);\n      for (var i = 0; i < info.channels; i++) {\n        pizChannelData[i] = {};\n        pizChannelData[i][\"start\"] = outBufferEnd;\n        pizChannelData[i][\"end\"] = pizChannelData[i][\"start\"];\n        pizChannelData[i][\"nx\"] = info.width;\n        pizChannelData[i][\"ny\"] = info.lines;\n        pizChannelData[i][\"size\"] = info.type;\n        outBufferEnd += pizChannelData[i].nx * pizChannelData[i].ny * pizChannelData[i].size;\n      }\n      var minNonZero = parseUint16(inDataView, inOffset);\n      var maxNonZero = parseUint16(inDataView, inOffset);\n      if (maxNonZero >= BITMAP_SIZE) {\n        throw \"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE\";\n      }\n      if (minNonZero <= maxNonZero) {\n        for (var i = 0; i < maxNonZero - minNonZero + 1; i++) {\n          bitmap[i + minNonZero] = parseUint8(inDataView, inOffset);\n        }\n      }\n      var lut = new Uint16Array(USHORT_RANGE);\n      var maxValue = reverseLutFromBitmap(bitmap, lut);\n      var length = parseUint32(inDataView, inOffset);\n      hufUncompress(info.array, inDataView, inOffset, length, outBuffer, outBufferEnd);\n      for (var i = 0; i < info.channels; ++i) {\n        var cd = pizChannelData[i];\n        for (var j = 0; j < pizChannelData[i].size; ++j) {\n          wav2Decode(outBuffer, cd.start + j, cd.nx, cd.size, cd.ny, cd.nx * cd.size, maxValue);\n        }\n      }\n      applyLut(lut, outBuffer, outBufferEnd);\n      var tmpOffset2 = 0;\n      var tmpBuffer = new Uint8Array(outBuffer.buffer.byteLength);\n      for (var y = 0; y < info.lines; y++) {\n        for (var c = 0; c < info.channels; c++) {\n          var cd = pizChannelData[c];\n          var n = cd.nx * cd.size;\n          var cp = new Uint8Array(outBuffer.buffer, cd.end * INT16_SIZE, n * INT16_SIZE);\n          tmpBuffer.set(cp, tmpOffset2);\n          tmpOffset2 += n * INT16_SIZE;\n          cd.end += n;\n        }\n      }\n      return new DataView(tmpBuffer.buffer);\n    }\n    function uncompressPXR(info) {\n      var compressed = info.array.slice(info.offset.value, info.offset.value + info.size);\n      var rawBuffer = unzlibSync(compressed);\n      const sz = info.lines * info.channels * info.width;\n      const tmpBuffer = info.type == 1 ? new Uint16Array(sz) : new Uint32Array(sz);\n      let tmpBufferEnd = 0;\n      let writePtr = 0;\n      const ptr = new Array(4);\n      for (let y = 0; y < info.lines; y++) {\n        for (let c = 0; c < info.channels; c++) {\n          let pixel = 0;\n          switch (info.type) {\n            case 1:\n              ptr[0] = tmpBufferEnd;\n              ptr[1] = ptr[0] + info.width;\n              tmpBufferEnd = ptr[1] + info.width;\n              for (let j = 0; j < info.width; ++j) {\n                const diff = rawBuffer[ptr[0]++] << 8 | rawBuffer[ptr[1]++];\n                pixel += diff;\n                tmpBuffer[writePtr] = pixel;\n                writePtr++;\n              }\n              break;\n            case 2:\n              ptr[0] = tmpBufferEnd;\n              ptr[1] = ptr[0] + info.width;\n              ptr[2] = ptr[1] + info.width;\n              tmpBufferEnd = ptr[2] + info.width;\n              for (let j = 0; j < info.width; ++j) {\n                const diff = rawBuffer[ptr[0]++] << 24 | rawBuffer[ptr[1]++] << 16 | rawBuffer[ptr[2]++] << 8;\n                pixel += diff;\n                tmpBuffer[writePtr] = pixel;\n                writePtr++;\n              }\n              break;\n          }\n        }\n      }\n      return new DataView(tmpBuffer.buffer);\n    }\n    function uncompressDWA(info) {\n      var inDataView = info.viewer;\n      var inOffset = { value: info.offset.value };\n      var outBuffer = new Uint8Array(info.width * info.lines * (info.channels * info.type * INT16_SIZE));\n      var dwaHeader = {\n        version: parseInt64(inDataView, inOffset),\n        unknownUncompressedSize: parseInt64(inDataView, inOffset),\n        unknownCompressedSize: parseInt64(inDataView, inOffset),\n        acCompressedSize: parseInt64(inDataView, inOffset),\n        dcCompressedSize: parseInt64(inDataView, inOffset),\n        rleCompressedSize: parseInt64(inDataView, inOffset),\n        rleUncompressedSize: parseInt64(inDataView, inOffset),\n        rleRawSize: parseInt64(inDataView, inOffset),\n        totalAcUncompressedCount: parseInt64(inDataView, inOffset),\n        totalDcUncompressedCount: parseInt64(inDataView, inOffset),\n        acCompression: parseInt64(inDataView, inOffset)\n      };\n      if (dwaHeader.version < 2) {\n        throw \"EXRLoader.parse: \" + EXRHeader.compression + \" version \" + dwaHeader.version + \" is unsupported\";\n      }\n      var channelRules = new Array();\n      var ruleSize = parseUint16(inDataView, inOffset) - INT16_SIZE;\n      while (ruleSize > 0) {\n        var name = parseNullTerminatedString(inDataView.buffer, inOffset);\n        var value = parseUint8(inDataView, inOffset);\n        var compression = value >> 2 & 3;\n        var csc = (value >> 4) - 1;\n        var index = new Int8Array([csc])[0];\n        var type = parseUint8(inDataView, inOffset);\n        channelRules.push({\n          name,\n          index,\n          type,\n          compression\n        });\n        ruleSize -= name.length + 3;\n      }\n      var channels = EXRHeader.channels;\n      var channelData = new Array(info.channels);\n      for (var i = 0; i < info.channels; ++i) {\n        var cd = channelData[i] = {};\n        var channel = channels[i];\n        cd.name = channel.name;\n        cd.compression = UNKNOWN;\n        cd.decoded = false;\n        cd.type = channel.pixelType;\n        cd.pLinear = channel.pLinear;\n        cd.width = info.width;\n        cd.height = info.lines;\n      }\n      var cscSet = {\n        idx: new Array(3)\n      };\n      for (var offset2 = 0; offset2 < info.channels; ++offset2) {\n        var cd = channelData[offset2];\n        for (var i = 0; i < channelRules.length; ++i) {\n          var rule = channelRules[i];\n          if (cd.name == rule.name) {\n            cd.compression = rule.compression;\n            if (rule.index >= 0) {\n              cscSet.idx[rule.index] = offset2;\n            }\n            cd.offset = offset2;\n          }\n        }\n      }\n      if (dwaHeader.acCompressedSize > 0) {\n        switch (dwaHeader.acCompression) {\n          case STATIC_HUFFMAN:\n            var acBuffer = new Uint16Array(dwaHeader.totalAcUncompressedCount);\n            hufUncompress(\n              info.array,\n              inDataView,\n              inOffset,\n              dwaHeader.acCompressedSize,\n              acBuffer,\n              dwaHeader.totalAcUncompressedCount\n            );\n            break;\n          case DEFLATE:\n            var compressed = info.array.slice(inOffset.value, inOffset.value + dwaHeader.totalAcUncompressedCount);\n            var data = unzlibSync(compressed);\n            var acBuffer = new Uint16Array(data.buffer);\n            inOffset.value += dwaHeader.totalAcUncompressedCount;\n            break;\n        }\n      }\n      if (dwaHeader.dcCompressedSize > 0) {\n        var zlibInfo = {\n          array: info.array,\n          offset: inOffset,\n          size: dwaHeader.dcCompressedSize\n        };\n        var dcBuffer = new Uint16Array(uncompressZIP(zlibInfo).buffer);\n        inOffset.value += dwaHeader.dcCompressedSize;\n      }\n      if (dwaHeader.rleRawSize > 0) {\n        var compressed = info.array.slice(inOffset.value, inOffset.value + dwaHeader.rleCompressedSize);\n        var data = unzlibSync(compressed);\n        var rleBuffer = decodeRunLength(data.buffer);\n        inOffset.value += dwaHeader.rleCompressedSize;\n      }\n      var outBufferEnd = 0;\n      var rowOffsets = new Array(channelData.length);\n      for (var i = 0; i < rowOffsets.length; ++i) {\n        rowOffsets[i] = new Array();\n      }\n      for (var y = 0; y < info.lines; ++y) {\n        for (var chan = 0; chan < channelData.length; ++chan) {\n          rowOffsets[chan].push(outBufferEnd);\n          outBufferEnd += channelData[chan].width * info.type * INT16_SIZE;\n        }\n      }\n      lossyDctDecode(cscSet, rowOffsets, channelData, acBuffer, dcBuffer, outBuffer);\n      for (var i = 0; i < channelData.length; ++i) {\n        var cd = channelData[i];\n        if (cd.decoded)\n          continue;\n        switch (cd.compression) {\n          case RLE:\n            var row = 0;\n            var rleOffset = 0;\n            for (var y = 0; y < info.lines; ++y) {\n              var rowOffsetBytes = rowOffsets[i][row];\n              for (var x = 0; x < cd.width; ++x) {\n                for (var byte = 0; byte < INT16_SIZE * cd.type; ++byte) {\n                  outBuffer[rowOffsetBytes++] = rleBuffer[rleOffset + byte * cd.width * cd.height];\n                }\n                rleOffset++;\n              }\n              row++;\n            }\n            break;\n          case LOSSY_DCT:\n          default:\n            throw \"EXRLoader.parse: unsupported channel compression\";\n        }\n      }\n      return new DataView(outBuffer.buffer);\n    }\n    function parseNullTerminatedString(buffer2, offset2) {\n      var uintBuffer = new Uint8Array(buffer2);\n      var endOffset = 0;\n      while (uintBuffer[offset2.value + endOffset] != 0) {\n        endOffset += 1;\n      }\n      var stringValue = new TextDecoder().decode(uintBuffer.slice(offset2.value, offset2.value + endOffset));\n      offset2.value = offset2.value + endOffset + 1;\n      return stringValue;\n    }\n    function parseFixedLengthString(buffer2, offset2, size) {\n      var stringValue = new TextDecoder().decode(new Uint8Array(buffer2).slice(offset2.value, offset2.value + size));\n      offset2.value = offset2.value + size;\n      return stringValue;\n    }\n    function parseRational(dataView, offset2) {\n      var x = parseInt32(dataView, offset2);\n      var y = parseUint32(dataView, offset2);\n      return [x, y];\n    }\n    function parseTimecode(dataView, offset2) {\n      var x = parseUint32(dataView, offset2);\n      var y = parseUint32(dataView, offset2);\n      return [x, y];\n    }\n    function parseInt32(dataView, offset2) {\n      var Int32 = dataView.getInt32(offset2.value, true);\n      offset2.value = offset2.value + INT32_SIZE;\n      return Int32;\n    }\n    function parseUint32(dataView, offset2) {\n      var Uint32 = dataView.getUint32(offset2.value, true);\n      offset2.value = offset2.value + INT32_SIZE;\n      return Uint32;\n    }\n    function parseUint8Array(uInt8Array2, offset2) {\n      var Uint8 = uInt8Array2[offset2.value];\n      offset2.value = offset2.value + INT8_SIZE;\n      return Uint8;\n    }\n    function parseUint8(dataView, offset2) {\n      var Uint8 = dataView.getUint8(offset2.value);\n      offset2.value = offset2.value + INT8_SIZE;\n      return Uint8;\n    }\n    const parseInt64 = function(dataView, offset2) {\n      let int;\n      if (\"getBigInt64\" in DataView.prototype) {\n        int = Number(dataView.getBigInt64(offset2.value, true));\n      } else {\n        int = dataView.getUint32(offset2.value + 4, true) + Number(dataView.getUint32(offset2.value, true) << 32);\n      }\n      offset2.value += ULONG_SIZE;\n      return int;\n    };\n    function parseFloat32(dataView, offset2) {\n      var float = dataView.getFloat32(offset2.value, true);\n      offset2.value += FLOAT32_SIZE;\n      return float;\n    }\n    function decodeFloat32(dataView, offset2) {\n      return DataUtils.toHalfFloat(parseFloat32(dataView, offset2));\n    }\n    function decodeFloat16(binary) {\n      var exponent = (binary & 31744) >> 10, fraction = binary & 1023;\n      return (binary >> 15 ? -1 : 1) * (exponent ? exponent === 31 ? fraction ? NaN : Infinity : Math.pow(2, exponent - 15) * (1 + fraction / 1024) : 6103515625e-14 * (fraction / 1024));\n    }\n    function parseUint16(dataView, offset2) {\n      var Uint16 = dataView.getUint16(offset2.value, true);\n      offset2.value += INT16_SIZE;\n      return Uint16;\n    }\n    function parseFloat16(buffer2, offset2) {\n      return decodeFloat16(parseUint16(buffer2, offset2));\n    }\n    function parseChlist(dataView, buffer2, offset2, size) {\n      var startOffset = offset2.value;\n      var channels = [];\n      while (offset2.value < startOffset + size - 1) {\n        var name = parseNullTerminatedString(buffer2, offset2);\n        var pixelType = parseInt32(dataView, offset2);\n        var pLinear = parseUint8(dataView, offset2);\n        offset2.value += 3;\n        var xSampling = parseInt32(dataView, offset2);\n        var ySampling = parseInt32(dataView, offset2);\n        channels.push({\n          name,\n          pixelType,\n          pLinear,\n          xSampling,\n          ySampling\n        });\n      }\n      offset2.value += 1;\n      return channels;\n    }\n    function parseChromaticities(dataView, offset2) {\n      var redX = parseFloat32(dataView, offset2);\n      var redY = parseFloat32(dataView, offset2);\n      var greenX = parseFloat32(dataView, offset2);\n      var greenY = parseFloat32(dataView, offset2);\n      var blueX = parseFloat32(dataView, offset2);\n      var blueY = parseFloat32(dataView, offset2);\n      var whiteX = parseFloat32(dataView, offset2);\n      var whiteY = parseFloat32(dataView, offset2);\n      return {\n        redX,\n        redY,\n        greenX,\n        greenY,\n        blueX,\n        blueY,\n        whiteX,\n        whiteY\n      };\n    }\n    function parseCompression(dataView, offset2) {\n      var compressionCodes = [\n        \"NO_COMPRESSION\",\n        \"RLE_COMPRESSION\",\n        \"ZIPS_COMPRESSION\",\n        \"ZIP_COMPRESSION\",\n        \"PIZ_COMPRESSION\",\n        \"PXR24_COMPRESSION\",\n        \"B44_COMPRESSION\",\n        \"B44A_COMPRESSION\",\n        \"DWAA_COMPRESSION\",\n        \"DWAB_COMPRESSION\"\n      ];\n      var compression = parseUint8(dataView, offset2);\n      return compressionCodes[compression];\n    }\n    function parseBox2i(dataView, offset2) {\n      var xMin = parseUint32(dataView, offset2);\n      var yMin = parseUint32(dataView, offset2);\n      var xMax = parseUint32(dataView, offset2);\n      var yMax = parseUint32(dataView, offset2);\n      return { xMin, yMin, xMax, yMax };\n    }\n    function parseLineOrder(dataView, offset2) {\n      var lineOrders = [\"INCREASING_Y\"];\n      var lineOrder = parseUint8(dataView, offset2);\n      return lineOrders[lineOrder];\n    }\n    function parseV2f(dataView, offset2) {\n      var x = parseFloat32(dataView, offset2);\n      var y = parseFloat32(dataView, offset2);\n      return [x, y];\n    }\n    function parseV3f(dataView, offset2) {\n      var x = parseFloat32(dataView, offset2);\n      var y = parseFloat32(dataView, offset2);\n      var z = parseFloat32(dataView, offset2);\n      return [x, y, z];\n    }\n    function parseValue(dataView, buffer2, offset2, type, size) {\n      if (type === \"string\" || type === \"stringvector\" || type === \"iccProfile\") {\n        return parseFixedLengthString(buffer2, offset2, size);\n      } else if (type === \"chlist\") {\n        return parseChlist(dataView, buffer2, offset2, size);\n      } else if (type === \"chromaticities\") {\n        return parseChromaticities(dataView, offset2);\n      } else if (type === \"compression\") {\n        return parseCompression(dataView, offset2);\n      } else if (type === \"box2i\") {\n        return parseBox2i(dataView, offset2);\n      } else if (type === \"lineOrder\") {\n        return parseLineOrder(dataView, offset2);\n      } else if (type === \"float\") {\n        return parseFloat32(dataView, offset2);\n      } else if (type === \"v2f\") {\n        return parseV2f(dataView, offset2);\n      } else if (type === \"v3f\") {\n        return parseV3f(dataView, offset2);\n      } else if (type === \"int\") {\n        return parseInt32(dataView, offset2);\n      } else if (type === \"rational\") {\n        return parseRational(dataView, offset2);\n      } else if (type === \"timecode\") {\n        return parseTimecode(dataView, offset2);\n      } else if (type === \"preview\") {\n        offset2.value += size;\n        return \"skipped\";\n      } else {\n        offset2.value += size;\n        return void 0;\n      }\n    }\n    function parseHeader(dataView, buffer2, offset2) {\n      const EXRHeader2 = {};\n      if (dataView.getUint32(0, true) != 20000630) {\n        throw \"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.\";\n      }\n      EXRHeader2.version = dataView.getUint8(4);\n      const spec = dataView.getUint8(5);\n      EXRHeader2.spec = {\n        singleTile: !!(spec & 2),\n        longName: !!(spec & 4),\n        deepFormat: !!(spec & 8),\n        multiPart: !!(spec & 16)\n      };\n      offset2.value = 8;\n      var keepReading = true;\n      while (keepReading) {\n        var attributeName = parseNullTerminatedString(buffer2, offset2);\n        if (attributeName == 0) {\n          keepReading = false;\n        } else {\n          var attributeType = parseNullTerminatedString(buffer2, offset2);\n          var attributeSize = parseUint32(dataView, offset2);\n          var attributeValue = parseValue(dataView, buffer2, offset2, attributeType, attributeSize);\n          if (attributeValue === void 0) {\n            console.warn(`EXRLoader.parse: skipped unknown header attribute type '${attributeType}'.`);\n          } else {\n            EXRHeader2[attributeName] = attributeValue;\n          }\n        }\n      }\n      if ((spec & ~4) != 0) {\n        console.error(\"EXRHeader:\", EXRHeader2);\n        throw \"THREE.EXRLoader: provided file is currently unsupported.\";\n      }\n      return EXRHeader2;\n    }\n    function setupDecoder(EXRHeader2, dataView, uInt8Array2, offset2, outputType) {\n      const EXRDecoder2 = {\n        size: 0,\n        viewer: dataView,\n        array: uInt8Array2,\n        offset: offset2,\n        width: EXRHeader2.dataWindow.xMax - EXRHeader2.dataWindow.xMin + 1,\n        height: EXRHeader2.dataWindow.yMax - EXRHeader2.dataWindow.yMin + 1,\n        channels: EXRHeader2.channels.length,\n        bytesPerLine: null,\n        lines: null,\n        inputSize: null,\n        type: EXRHeader2.channels[0].pixelType,\n        uncompress: null,\n        getter: null,\n        format: null,\n        [hasColorSpace ? \"colorSpace\" : \"encoding\"]: null\n      };\n      switch (EXRHeader2.compression) {\n        case \"NO_COMPRESSION\":\n          EXRDecoder2.lines = 1;\n          EXRDecoder2.uncompress = uncompressRAW;\n          break;\n        case \"RLE_COMPRESSION\":\n          EXRDecoder2.lines = 1;\n          EXRDecoder2.uncompress = uncompressRLE;\n          break;\n        case \"ZIPS_COMPRESSION\":\n          EXRDecoder2.lines = 1;\n          EXRDecoder2.uncompress = uncompressZIP;\n          break;\n        case \"ZIP_COMPRESSION\":\n          EXRDecoder2.lines = 16;\n          EXRDecoder2.uncompress = uncompressZIP;\n          break;\n        case \"PIZ_COMPRESSION\":\n          EXRDecoder2.lines = 32;\n          EXRDecoder2.uncompress = uncompressPIZ;\n          break;\n        case \"PXR24_COMPRESSION\":\n          EXRDecoder2.lines = 16;\n          EXRDecoder2.uncompress = uncompressPXR;\n          break;\n        case \"DWAA_COMPRESSION\":\n          EXRDecoder2.lines = 32;\n          EXRDecoder2.uncompress = uncompressDWA;\n          break;\n        case \"DWAB_COMPRESSION\":\n          EXRDecoder2.lines = 256;\n          EXRDecoder2.uncompress = uncompressDWA;\n          break;\n        default:\n          throw \"EXRLoader.parse: \" + EXRHeader2.compression + \" is unsupported\";\n      }\n      EXRDecoder2.scanlineBlockSize = EXRDecoder2.lines;\n      if (EXRDecoder2.type == 1) {\n        switch (outputType) {\n          case FloatType:\n            EXRDecoder2.getter = parseFloat16;\n            EXRDecoder2.inputSize = INT16_SIZE;\n            break;\n          case HalfFloatType:\n            EXRDecoder2.getter = parseUint16;\n            EXRDecoder2.inputSize = INT16_SIZE;\n            break;\n        }\n      } else if (EXRDecoder2.type == 2) {\n        switch (outputType) {\n          case FloatType:\n            EXRDecoder2.getter = parseFloat32;\n            EXRDecoder2.inputSize = FLOAT32_SIZE;\n            break;\n          case HalfFloatType:\n            EXRDecoder2.getter = decodeFloat32;\n            EXRDecoder2.inputSize = FLOAT32_SIZE;\n        }\n      } else {\n        throw \"EXRLoader.parse: unsupported pixelType \" + EXRDecoder2.type + \" for \" + EXRHeader2.compression + \".\";\n      }\n      EXRDecoder2.blockCount = (EXRHeader2.dataWindow.yMax + 1) / EXRDecoder2.scanlineBlockSize;\n      for (var i = 0; i < EXRDecoder2.blockCount; i++)\n        parseInt64(dataView, offset2);\n      EXRDecoder2.outputChannels = EXRDecoder2.channels == 3 ? 4 : EXRDecoder2.channels;\n      const size = EXRDecoder2.width * EXRDecoder2.height * EXRDecoder2.outputChannels;\n      switch (outputType) {\n        case FloatType:\n          EXRDecoder2.byteArray = new Float32Array(size);\n          if (EXRDecoder2.channels < EXRDecoder2.outputChannels)\n            EXRDecoder2.byteArray.fill(1, 0, size);\n          break;\n        case HalfFloatType:\n          EXRDecoder2.byteArray = new Uint16Array(size);\n          if (EXRDecoder2.channels < EXRDecoder2.outputChannels)\n            EXRDecoder2.byteArray.fill(15360, 0, size);\n          break;\n        default:\n          console.error(\"THREE.EXRLoader: unsupported type: \", outputType);\n          break;\n      }\n      EXRDecoder2.bytesPerLine = EXRDecoder2.width * EXRDecoder2.inputSize * EXRDecoder2.channels;\n      if (EXRDecoder2.outputChannels == 4)\n        EXRDecoder2.format = RGBAFormat;\n      else\n        EXRDecoder2.format = RedFormat;\n      if (hasColorSpace)\n        EXRDecoder2.colorSpace = \"srgb-linear\";\n      else\n        EXRDecoder2.encoding = 3e3;\n      return EXRDecoder2;\n    }\n    const bufferDataView = new DataView(buffer);\n    const uInt8Array = new Uint8Array(buffer);\n    const offset = { value: 0 };\n    const EXRHeader = parseHeader(bufferDataView, buffer, offset);\n    const EXRDecoder = setupDecoder(EXRHeader, bufferDataView, uInt8Array, offset, this.type);\n    const tmpOffset = { value: 0 };\n    const channelOffsets = { R: 0, G: 1, B: 2, A: 3, Y: 0 };\n    for (let scanlineBlockIdx = 0; scanlineBlockIdx < EXRDecoder.height / EXRDecoder.scanlineBlockSize; scanlineBlockIdx++) {\n      const line = parseUint32(bufferDataView, offset);\n      EXRDecoder.size = parseUint32(bufferDataView, offset);\n      EXRDecoder.lines = line + EXRDecoder.scanlineBlockSize > EXRDecoder.height ? EXRDecoder.height - line : EXRDecoder.scanlineBlockSize;\n      const isCompressed = EXRDecoder.size < EXRDecoder.lines * EXRDecoder.bytesPerLine;\n      const viewer = isCompressed ? EXRDecoder.uncompress(EXRDecoder) : uncompressRAW(EXRDecoder);\n      offset.value += EXRDecoder.size;\n      for (let line_y = 0; line_y < EXRDecoder.scanlineBlockSize; line_y++) {\n        const true_y = line_y + scanlineBlockIdx * EXRDecoder.scanlineBlockSize;\n        if (true_y >= EXRDecoder.height)\n          break;\n        for (let channelID = 0; channelID < EXRDecoder.channels; channelID++) {\n          const cOff = channelOffsets[EXRHeader.channels[channelID].name];\n          for (let x = 0; x < EXRDecoder.width; x++) {\n            tmpOffset.value = (line_y * (EXRDecoder.channels * EXRDecoder.width) + channelID * EXRDecoder.width + x) * EXRDecoder.inputSize;\n            const outIndex = (EXRDecoder.height - 1 - true_y) * (EXRDecoder.width * EXRDecoder.outputChannels) + x * EXRDecoder.outputChannels + cOff;\n            EXRDecoder.byteArray[outIndex] = EXRDecoder.getter(viewer, tmpOffset);\n          }\n        }\n      }\n    }\n    return {\n      header: EXRHeader,\n      width: EXRDecoder.width,\n      height: EXRDecoder.height,\n      data: EXRDecoder.byteArray,\n      format: EXRDecoder.format,\n      [hasColorSpace ? \"colorSpace\" : \"encoding\"]: EXRDecoder[hasColorSpace ? \"colorSpace\" : \"encoding\"],\n      type: this.type\n    };\n  }\n  setDataType(value) {\n    this.type = value;\n    return this;\n  }\n  load(url, onLoad, onProgress, onError) {\n    function onLoadCallback(texture, texData) {\n      if (hasColorSpace)\n        texture.colorSpace = texData.colorSpace;\n      else\n        texture.encoding = texData.encoding;\n      texture.minFilter = LinearFilter;\n      texture.magFilter = LinearFilter;\n      texture.generateMipmaps = false;\n      texture.flipY = false;\n      if (onLoad)\n        onLoad(texture, texData);\n    }\n    return super.load(url, onLoadCallback, onProgress, onError);\n  }\n}\nexport {\n  EXRLoader\n};\n//# sourceMappingURL=EXRLoader.js.map\n","import { REVISION } from 'three';\n\nconst getVersion = () => parseInt(REVISION.replace(/\\D+/g, ''));\nconst version = /* @__PURE__ */getVersion();\n\nexport { version };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as THREE from 'three';\nimport * as React from 'react';\nimport { SkeletonUtils } from 'three-stdlib';\n\nfunction createSpread(child, {\n  keys = ['near', 'far', 'color', 'distance', 'decay', 'penumbra', 'angle', 'intensity', 'skeleton', 'visible', 'castShadow', 'receiveShadow', 'morphTargetDictionary', 'morphTargetInfluences', 'name', 'geometry', 'material', 'position', 'rotation', 'scale', 'up', 'userData', 'bindMode', 'bindMatrix', 'bindMatrixInverse', 'skeleton'],\n  deep,\n  inject,\n  castShadow,\n  receiveShadow\n}) {\n  let spread = {};\n  for (const key of keys) {\n    spread[key] = child[key];\n  }\n  if (deep) {\n    if (spread.geometry && deep !== 'materialsOnly') spread.geometry = spread.geometry.clone();\n    if (spread.material && deep !== 'geometriesOnly') spread.material = spread.material.clone();\n  }\n  if (inject) {\n    if (typeof inject === 'function') spread = {\n      ...spread,\n      children: inject(child)\n    };else if (/*#__PURE__*/React.isValidElement(inject)) spread = {\n      ...spread,\n      children: inject\n    };else spread = {\n      ...spread,\n      ...inject\n    };\n  }\n  if (child instanceof THREE.Mesh) {\n    if (castShadow) spread.castShadow = true;\n    if (receiveShadow) spread.receiveShadow = true;\n  }\n  return spread;\n}\nconst Clone = /* @__PURE__ */React.forwardRef(({\n  isChild = false,\n  object,\n  children,\n  deep,\n  castShadow,\n  receiveShadow,\n  inject,\n  keys,\n  ...props\n}, forwardRef) => {\n  const config = {\n    keys,\n    deep,\n    inject,\n    castShadow,\n    receiveShadow\n  };\n  object = React.useMemo(() => {\n    if (isChild === false && !Array.isArray(object)) {\n      let isSkinned = false;\n      object.traverse(object => {\n        if (object.isSkinnedMesh) isSkinned = true;\n      });\n      if (isSkinned) return SkeletonUtils.clone(object);\n    }\n    return object;\n  }, [object, isChild]);\n\n  // Deal with arrayed clones\n  if (Array.isArray(object)) {\n    return /*#__PURE__*/React.createElement(\"group\", _extends({}, props, {\n      ref: forwardRef\n    }), object.map(o => /*#__PURE__*/React.createElement(Clone, _extends({\n      key: o.uuid,\n      object: o\n    }, config))), children);\n  }\n\n  // Singleton clones\n  const {\n    children: injectChildren,\n    ...spread\n  } = createSpread(object, config);\n  const Element = object.type[0].toLowerCase() + object.type.slice(1);\n  return /*#__PURE__*/React.createElement(Element, _extends({}, spread, props, {\n    ref: forwardRef\n  }), object.children.map(child => {\n    if (child.type === 'Bone') return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n      key: child.uuid,\n      object: child\n    }, config));\n    return /*#__PURE__*/React.createElement(Clone, _extends({\n      key: child.uuid,\n      object: child\n    }, config, {\n      isChild: true\n    }));\n  }), children, injectChildren);\n});\n\nexport { Clone };\n","import * as THREE from 'three';\nimport { WebGLCubeRenderTarget, HalfFloatType } from 'three';\nimport * as React from 'react';\nimport { useMemo, useEffect } from 'react';\nimport { useThree, useFrame } from '@react-three/fiber';\n\nfunction useCubeCamera({\n  resolution = 256,\n  near = 0.1,\n  far = 1000,\n  envMap,\n  fog\n} = {}) {\n  const gl = useThree(({\n    gl\n  }) => gl);\n  const scene = useThree(({\n    scene\n  }) => scene);\n  const fbo = useMemo(() => {\n    const fbo = new WebGLCubeRenderTarget(resolution);\n    fbo.texture.type = HalfFloatType;\n    return fbo;\n  }, [resolution]);\n  useEffect(() => {\n    return () => {\n      fbo.dispose();\n    };\n  }, [fbo]);\n  const camera = useMemo(() => new THREE.CubeCamera(near, far, fbo), [near, far, fbo]);\n  let originalFog;\n  let originalBackground;\n  const update = React.useCallback(() => {\n    originalFog = scene.fog;\n    originalBackground = scene.background;\n    scene.background = envMap || originalBackground;\n    scene.fog = fog || originalFog;\n    camera.update(gl, scene);\n    scene.fog = originalFog;\n    scene.background = originalBackground;\n  }, [gl, scene, camera]);\n  return {\n    fbo,\n    camera,\n    update\n  };\n}\nfunction CubeCamera({\n  children,\n  frames = Infinity,\n  resolution,\n  near,\n  far,\n  envMap,\n  fog,\n  ...props\n}) {\n  const ref = React.useRef(null);\n  const {\n    fbo,\n    camera,\n    update\n  } = useCubeCamera({\n    resolution,\n    near,\n    far,\n    envMap,\n    fog\n  });\n  let count = 0;\n  useFrame(() => {\n    if (ref.current && (frames === Infinity || count < frames)) {\n      ref.current.visible = false;\n      update();\n      ref.current.visible = true;\n      count++;\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", props, /*#__PURE__*/React.createElement(\"primitive\", {\n    object: camera\n  }), /*#__PURE__*/React.createElement(\"group\", {\n    ref: ref\n  }, children == null ? void 0 : children(fbo.texture)));\n}\n\nexport { CubeCamera, useCubeCamera };\n","// stats.js - http://github.com/mrdoob/stats.js\n(function(f,e){\"object\"===typeof exports&&\"undefined\"!==typeof module?module.exports=e():\"function\"===typeof define&&define.amd?define(e):f.Stats=e()})(this,function(){var f=function(){function e(a){c.appendChild(a.dom);return a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();\nu(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel(\"FPS\",\"#0ff\",\"#002\")),h=e(new f.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var t=e(new f.Panel(\"MB\",\"#f08\",\"#201\"));u(0);return{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();h.update(c-k,200);if(c>g+1E3&&(r.update(1E3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/\n1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}};f.Panel=function(e,f,l){var c=Infinity,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=h;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,h);b.fillStyle=f;b.fillText(e,t,v);\nb.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(h,w){c=Math.min(c,h);k=Math.max(k,h);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=f;b.fillText(g(h)+\" \"+e+\" (\"+g(c)+\"-\"+g(k)+\")\",t,v);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}};return f});\n","import * as React from 'react';\n\nfunction call(ref, value) {\n  if (typeof ref === 'function') ref(value);else if (ref != null) ref.current = value;\n}\nfunction useEffectfulState(fn, deps = [], cb) {\n  const [state, set] = React.useState();\n  React.useLayoutEffect(() => {\n    const value = fn();\n    set(value);\n    call(cb, value);\n    return () => call(cb, null);\n  }, deps);\n  return state;\n}\n\nexport { useEffectfulState };\n","import * as React from 'react';\nimport { addEffect, addAfterEffect } from '@react-three/fiber';\nimport StatsImpl from 'stats.js';\nimport { useEffectfulState } from '../helpers/useEffectfulState.js';\n\nfunction Stats({\n  showPanel = 0,\n  className,\n  parent\n}) {\n  const stats = useEffectfulState(() => new StatsImpl(), []);\n  React.useEffect(() => {\n    if (stats) {\n      const node = parent && parent.current || document.body;\n      stats.showPanel(showPanel);\n      node == null || node.appendChild(stats.dom);\n      const classNames = (className !== null && className !== void 0 ? className : '').split(' ').filter(cls => cls);\n      if (classNames.length) stats.dom.classList.add(...classNames);\n      const begin = addEffect(() => stats.begin());\n      const end = addAfterEffect(() => stats.end());\n      return () => {\n        if (classNames.length) stats.dom.classList.remove(...classNames);\n        node == null || node.removeChild(stats.dom);\n        begin();\n        end();\n      };\n    }\n  }, [parent, stats, className, showPanel]);\n  return null;\n}\n\nexport { Stats };\n","import * as THREE from 'three';\nimport { version } from '../helpers/constants.js';\n\nclass ConvolutionMaterial extends THREE.ShaderMaterial {\n  constructor(texelSize = new THREE.Vector2()) {\n    super({\n      uniforms: {\n        inputBuffer: new THREE.Uniform(null),\n        depthBuffer: new THREE.Uniform(null),\n        resolution: new THREE.Uniform(new THREE.Vector2()),\n        texelSize: new THREE.Uniform(new THREE.Vector2()),\n        halfTexelSize: new THREE.Uniform(new THREE.Vector2()),\n        kernel: new THREE.Uniform(0.0),\n        scale: new THREE.Uniform(1.0),\n        cameraNear: new THREE.Uniform(0.0),\n        cameraFar: new THREE.Uniform(1.0),\n        minDepthThreshold: new THREE.Uniform(0.0),\n        maxDepthThreshold: new THREE.Uniform(1.0),\n        depthScale: new THREE.Uniform(0.0),\n        depthToBlurRatioBias: new THREE.Uniform(0.25)\n      },\n      fragmentShader: `#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <${version >= 154 ? 'colorspace_fragment' : 'encodings_fragment'}>\n        }`,\n      vertexShader: `uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }`,\n      blending: THREE.NoBlending,\n      depthWrite: false,\n      depthTest: false\n    });\n    this.toneMapped = false;\n    this.setTexelSize(texelSize.x, texelSize.y);\n    this.kernel = new Float32Array([0.0, 1.0, 2.0, 2.0, 3.0]);\n  }\n  setTexelSize(x, y) {\n    this.uniforms.texelSize.value.set(x, y);\n    this.uniforms.halfTexelSize.value.set(x, y).multiplyScalar(0.5);\n  }\n  setResolution(resolution) {\n    this.uniforms.resolution.value.copy(resolution);\n  }\n}\n\nexport { ConvolutionMaterial };\n","import { WebGLRenderTarget, LinearFilter, HalfFloatType, Vector2, Scene, Camera, BufferGeometry, BufferAttribute, Mesh } from 'three';\nimport { ConvolutionMaterial } from './ConvolutionMaterial.js';\n\nclass BlurPass {\n  constructor({\n    gl,\n    resolution,\n    width = 500,\n    height = 500,\n    minDepthThreshold = 0,\n    maxDepthThreshold = 1,\n    depthScale = 0,\n    depthToBlurRatioBias = 0.25\n  }) {\n    this.renderToScreen = false;\n    this.renderTargetA = new WebGLRenderTarget(resolution, resolution, {\n      minFilter: LinearFilter,\n      magFilter: LinearFilter,\n      stencilBuffer: false,\n      depthBuffer: false,\n      type: HalfFloatType\n    });\n    this.renderTargetB = this.renderTargetA.clone();\n    this.convolutionMaterial = new ConvolutionMaterial();\n    this.convolutionMaterial.setTexelSize(1.0 / width, 1.0 / height);\n    this.convolutionMaterial.setResolution(new Vector2(width, height));\n    this.scene = new Scene();\n    // @ts-expect-error fixed in r154\n    this.camera = new Camera();\n    this.convolutionMaterial.uniforms.minDepthThreshold.value = minDepthThreshold;\n    this.convolutionMaterial.uniforms.maxDepthThreshold.value = maxDepthThreshold;\n    this.convolutionMaterial.uniforms.depthScale.value = depthScale;\n    this.convolutionMaterial.uniforms.depthToBlurRatioBias.value = depthToBlurRatioBias;\n    this.convolutionMaterial.defines.USE_DEPTH = depthScale > 0;\n    const vertices = new Float32Array([-1, -1, 0, 3, -1, 0, -1, 3, 0]);\n    const uvs = new Float32Array([0, 0, 2, 0, 0, 2]);\n    const geometry = new BufferGeometry();\n    geometry.setAttribute('position', new BufferAttribute(vertices, 3));\n    geometry.setAttribute('uv', new BufferAttribute(uvs, 2));\n    this.screen = new Mesh(geometry, this.convolutionMaterial);\n    this.screen.frustumCulled = false;\n    this.scene.add(this.screen);\n  }\n  render(renderer, inputBuffer, outputBuffer) {\n    const scene = this.scene;\n    const camera = this.camera;\n    const renderTargetA = this.renderTargetA;\n    const renderTargetB = this.renderTargetB;\n    let material = this.convolutionMaterial;\n    let uniforms = material.uniforms;\n    uniforms.depthBuffer.value = inputBuffer.depthTexture;\n    const kernel = material.kernel;\n    let lastRT = inputBuffer;\n    let destRT;\n    let i, l;\n    // Apply the multi-pass blur.\n    for (i = 0, l = kernel.length - 1; i < l; ++i) {\n      // Alternate between targets.\n      destRT = (i & 1) === 0 ? renderTargetA : renderTargetB;\n      uniforms.kernel.value = kernel[i];\n      uniforms.inputBuffer.value = lastRT.texture;\n      renderer.setRenderTarget(destRT);\n      renderer.render(scene, camera);\n      lastRT = destRT;\n    }\n    uniforms.kernel.value = kernel[i];\n    uniforms.inputBuffer.value = lastRT.texture;\n    renderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\n    renderer.render(scene, camera);\n  }\n}\n\nexport { BlurPass };\n","import { MeshStandardMaterial } from 'three';\n\nclass MeshReflectorMaterial extends MeshStandardMaterial {\n  constructor(parameters = {}) {\n    super(parameters);\n    this._tDepth = {\n      value: null\n    };\n    this._distortionMap = {\n      value: null\n    };\n    this._tDiffuse = {\n      value: null\n    };\n    this._tDiffuseBlur = {\n      value: null\n    };\n    this._textureMatrix = {\n      value: null\n    };\n    this._hasBlur = {\n      value: false\n    };\n    this._mirror = {\n      value: 0.0\n    };\n    this._mixBlur = {\n      value: 0.0\n    };\n    this._blurStrength = {\n      value: 0.5\n    };\n    this._minDepthThreshold = {\n      value: 0.9\n    };\n    this._maxDepthThreshold = {\n      value: 1\n    };\n    this._depthScale = {\n      value: 0\n    };\n    this._depthToBlurRatioBias = {\n      value: 0.25\n    };\n    this._distortion = {\n      value: 1\n    };\n    this._mixContrast = {\n      value: 1.0\n    };\n    this.setValues(parameters);\n  }\n  onBeforeCompile(shader) {\n    var _shader$defines;\n    if (!((_shader$defines = shader.defines) != null && _shader$defines.USE_UV)) {\n      shader.defines.USE_UV = '';\n    }\n    shader.uniforms.hasBlur = this._hasBlur;\n    shader.uniforms.tDiffuse = this._tDiffuse;\n    shader.uniforms.tDepth = this._tDepth;\n    shader.uniforms.distortionMap = this._distortionMap;\n    shader.uniforms.tDiffuseBlur = this._tDiffuseBlur;\n    shader.uniforms.textureMatrix = this._textureMatrix;\n    shader.uniforms.mirror = this._mirror;\n    shader.uniforms.mixBlur = this._mixBlur;\n    shader.uniforms.mixStrength = this._blurStrength;\n    shader.uniforms.minDepthThreshold = this._minDepthThreshold;\n    shader.uniforms.maxDepthThreshold = this._maxDepthThreshold;\n    shader.uniforms.depthScale = this._depthScale;\n    shader.uniforms.depthToBlurRatioBias = this._depthToBlurRatioBias;\n    shader.uniforms.distortion = this._distortion;\n    shader.uniforms.mixContrast = this._mixContrast;\n    shader.vertexShader = `\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ${shader.vertexShader}`;\n    shader.vertexShader = shader.vertexShader.replace('#include <project_vertex>', `#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`);\n    shader.fragmentShader = `\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ${shader.fragmentShader}`;\n    shader.fragmentShader = shader.fragmentShader.replace('#include <emissivemap_fragment>', `#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      `);\n  }\n  get tDiffuse() {\n    return this._tDiffuse.value;\n  }\n  set tDiffuse(v) {\n    this._tDiffuse.value = v;\n  }\n  get tDepth() {\n    return this._tDepth.value;\n  }\n  set tDepth(v) {\n    this._tDepth.value = v;\n  }\n  get distortionMap() {\n    return this._distortionMap.value;\n  }\n  set distortionMap(v) {\n    this._distortionMap.value = v;\n  }\n  get tDiffuseBlur() {\n    return this._tDiffuseBlur.value;\n  }\n  set tDiffuseBlur(v) {\n    this._tDiffuseBlur.value = v;\n  }\n  get textureMatrix() {\n    return this._textureMatrix.value;\n  }\n  set textureMatrix(v) {\n    this._textureMatrix.value = v;\n  }\n  get hasBlur() {\n    return this._hasBlur.value;\n  }\n  set hasBlur(v) {\n    this._hasBlur.value = v;\n  }\n  get mirror() {\n    return this._mirror.value;\n  }\n  set mirror(v) {\n    this._mirror.value = v;\n  }\n  get mixBlur() {\n    return this._mixBlur.value;\n  }\n  set mixBlur(v) {\n    this._mixBlur.value = v;\n  }\n  get mixStrength() {\n    return this._blurStrength.value;\n  }\n  set mixStrength(v) {\n    this._blurStrength.value = v;\n  }\n  get minDepthThreshold() {\n    return this._minDepthThreshold.value;\n  }\n  set minDepthThreshold(v) {\n    this._minDepthThreshold.value = v;\n  }\n  get maxDepthThreshold() {\n    return this._maxDepthThreshold.value;\n  }\n  set maxDepthThreshold(v) {\n    this._maxDepthThreshold.value = v;\n  }\n  get depthScale() {\n    return this._depthScale.value;\n  }\n  set depthScale(v) {\n    this._depthScale.value = v;\n  }\n  get depthToBlurRatioBias() {\n    return this._depthToBlurRatioBias.value;\n  }\n  set depthToBlurRatioBias(v) {\n    this._depthToBlurRatioBias.value = v;\n  }\n  get distortion() {\n    return this._distortion.value;\n  }\n  set distortion(v) {\n    this._distortion.value = v;\n  }\n  get mixContrast() {\n    return this._mixContrast.value;\n  }\n  set mixContrast(v) {\n    this._mixContrast.value = v;\n  }\n}\n\nexport { MeshReflectorMaterial };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { Plane, Vector3, Matrix4, Vector4, PerspectiveCamera, WebGLRenderTarget, DepthTexture, DepthFormat, UnsignedShortType, LinearFilter, HalfFloatType } from 'three';\nimport { extend, useThree, useFrame } from '@react-three/fiber';\nimport { BlurPass } from '../materials/BlurPass.js';\nimport { MeshReflectorMaterial as MeshReflectorMaterial$1 } from '../materials/MeshReflectorMaterial.js';\n\nconst MeshReflectorMaterial = /* @__PURE__ */React.forwardRef(({\n  mixBlur = 0,\n  mixStrength = 1,\n  resolution = 256,\n  blur = [0, 0],\n  minDepthThreshold = 0.9,\n  maxDepthThreshold = 1,\n  depthScale = 0,\n  depthToBlurRatioBias = 0.25,\n  mirror = 0,\n  distortion = 1,\n  mixContrast = 1,\n  distortionMap,\n  reflectorOffset = 0,\n  ...props\n}, ref) => {\n  extend({\n    MeshReflectorMaterialImpl: MeshReflectorMaterial$1\n  });\n  const gl = useThree(({\n    gl\n  }) => gl);\n  const camera = useThree(({\n    camera\n  }) => camera);\n  const scene = useThree(({\n    scene\n  }) => scene);\n  blur = Array.isArray(blur) ? blur : [blur, blur];\n  const hasBlur = blur[0] + blur[1] > 0;\n  const materialRef = React.useRef(null);\n  React.useImperativeHandle(ref, () => materialRef.current, []);\n  const [reflectorPlane] = React.useState(() => new Plane());\n  const [normal] = React.useState(() => new Vector3());\n  const [reflectorWorldPosition] = React.useState(() => new Vector3());\n  const [cameraWorldPosition] = React.useState(() => new Vector3());\n  const [rotationMatrix] = React.useState(() => new Matrix4());\n  const [lookAtPosition] = React.useState(() => new Vector3(0, 0, -1));\n  const [clipPlane] = React.useState(() => new Vector4());\n  const [view] = React.useState(() => new Vector3());\n  const [target] = React.useState(() => new Vector3());\n  const [q] = React.useState(() => new Vector4());\n  const [textureMatrix] = React.useState(() => new Matrix4());\n  const [virtualCamera] = React.useState(() => new PerspectiveCamera());\n  const beforeRender = React.useCallback(() => {\n    var _materialRef$current;\n    // TODO: As of R3f 7-8 this should be __r3f.parent\n    const parent = materialRef.current.parent || ((_materialRef$current = materialRef.current) == null ? void 0 : _materialRef$current.__r3f.parent);\n    if (!parent) return;\n    reflectorWorldPosition.setFromMatrixPosition(parent.matrixWorld);\n    cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\n    rotationMatrix.extractRotation(parent.matrixWorld);\n    normal.set(0, 0, 1);\n    normal.applyMatrix4(rotationMatrix);\n    reflectorWorldPosition.addScaledVector(normal, reflectorOffset);\n    view.subVectors(reflectorWorldPosition, cameraWorldPosition);\n    // Avoid rendering when reflector is facing away\n    if (view.dot(normal) > 0) return;\n    view.reflect(normal).negate();\n    view.add(reflectorWorldPosition);\n    rotationMatrix.extractRotation(camera.matrixWorld);\n    lookAtPosition.set(0, 0, -1);\n    lookAtPosition.applyMatrix4(rotationMatrix);\n    lookAtPosition.add(cameraWorldPosition);\n    target.subVectors(reflectorWorldPosition, lookAtPosition);\n    target.reflect(normal).negate();\n    target.add(reflectorWorldPosition);\n    virtualCamera.position.copy(view);\n    virtualCamera.up.set(0, 1, 0);\n    virtualCamera.up.applyMatrix4(rotationMatrix);\n    virtualCamera.up.reflect(normal);\n    virtualCamera.lookAt(target);\n    virtualCamera.far = camera.far; // Used in WebGLBackground\n    virtualCamera.updateMatrixWorld();\n    virtualCamera.projectionMatrix.copy(camera.projectionMatrix);\n    // Update the texture matrix\n    textureMatrix.set(0.5, 0.0, 0.0, 0.5, 0.0, 0.5, 0.0, 0.5, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0);\n    textureMatrix.multiply(virtualCamera.projectionMatrix);\n    textureMatrix.multiply(virtualCamera.matrixWorldInverse);\n    textureMatrix.multiply(parent.matrixWorld);\n    // Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n    // Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n    reflectorPlane.setFromNormalAndCoplanarPoint(normal, reflectorWorldPosition);\n    reflectorPlane.applyMatrix4(virtualCamera.matrixWorldInverse);\n    clipPlane.set(reflectorPlane.normal.x, reflectorPlane.normal.y, reflectorPlane.normal.z, reflectorPlane.constant);\n    const projectionMatrix = virtualCamera.projectionMatrix;\n    q.x = (Math.sign(clipPlane.x) + projectionMatrix.elements[8]) / projectionMatrix.elements[0];\n    q.y = (Math.sign(clipPlane.y) + projectionMatrix.elements[9]) / projectionMatrix.elements[5];\n    q.z = -1.0;\n    q.w = (1.0 + projectionMatrix.elements[10]) / projectionMatrix.elements[14];\n    // Calculate the scaled plane vector\n    clipPlane.multiplyScalar(2.0 / clipPlane.dot(q));\n    // Replacing the third row of the projection matrix\n    projectionMatrix.elements[2] = clipPlane.x;\n    projectionMatrix.elements[6] = clipPlane.y;\n    projectionMatrix.elements[10] = clipPlane.z + 1.0;\n    projectionMatrix.elements[14] = clipPlane.w;\n  }, [camera, reflectorOffset]);\n  const [fbo1, fbo2, blurpass, reflectorProps] = React.useMemo(() => {\n    const parameters = {\n      minFilter: LinearFilter,\n      magFilter: LinearFilter,\n      type: HalfFloatType\n    };\n    const fbo1 = new WebGLRenderTarget(resolution, resolution, parameters);\n    fbo1.depthBuffer = true;\n    fbo1.depthTexture = new DepthTexture(resolution, resolution);\n    fbo1.depthTexture.format = DepthFormat;\n    fbo1.depthTexture.type = UnsignedShortType;\n    const fbo2 = new WebGLRenderTarget(resolution, resolution, parameters);\n    const blurpass = new BlurPass({\n      gl,\n      resolution,\n      width: blur[0],\n      height: blur[1],\n      minDepthThreshold,\n      maxDepthThreshold,\n      depthScale,\n      depthToBlurRatioBias\n    });\n    const reflectorProps = {\n      mirror,\n      textureMatrix,\n      mixBlur,\n      tDiffuse: fbo1.texture,\n      tDepth: fbo1.depthTexture,\n      tDiffuseBlur: fbo2.texture,\n      hasBlur,\n      mixStrength,\n      minDepthThreshold,\n      maxDepthThreshold,\n      depthScale,\n      depthToBlurRatioBias,\n      distortion,\n      distortionMap,\n      mixContrast,\n      'defines-USE_BLUR': hasBlur ? '' : undefined,\n      'defines-USE_DEPTH': depthScale > 0 ? '' : undefined,\n      'defines-USE_DISTORTION': distortionMap ? '' : undefined\n    };\n    return [fbo1, fbo2, blurpass, reflectorProps];\n  }, [gl, blur, textureMatrix, resolution, mirror, hasBlur, mixBlur, mixStrength, minDepthThreshold, maxDepthThreshold, depthScale, depthToBlurRatioBias, distortion, distortionMap, mixContrast]);\n  useFrame(() => {\n    var _materialRef$current2;\n    // TODO: As of R3f 7-8 this should be __r3f.parent\n    const parent = materialRef.current.parent || ((_materialRef$current2 = materialRef.current) == null ? void 0 : _materialRef$current2.__r3f.parent);\n    if (!parent) return;\n    parent.visible = false;\n    const currentXrEnabled = gl.xr.enabled;\n    const currentShadowAutoUpdate = gl.shadowMap.autoUpdate;\n    beforeRender();\n    gl.xr.enabled = false;\n    gl.shadowMap.autoUpdate = false;\n    gl.setRenderTarget(fbo1);\n    gl.state.buffers.depth.setMask(true);\n    if (!gl.autoClear) gl.clear();\n    gl.render(scene, virtualCamera);\n    if (hasBlur) blurpass.render(gl, fbo1, fbo2);\n    gl.xr.enabled = currentXrEnabled;\n    gl.shadowMap.autoUpdate = currentShadowAutoUpdate;\n    parent.visible = true;\n    gl.setRenderTarget(null);\n  });\n  return /*#__PURE__*/React.createElement(\"meshReflectorMaterialImpl\", _extends({\n    attach: \"material\"\n    // Defines can't be updated dynamically, so we need to recreate the material\n    ,\n    key: 'key' + reflectorProps['defines-USE_BLUR'] + reflectorProps['defines-USE_DEPTH'] + reflectorProps['defines-USE_DISTORTION'],\n    ref: materialRef\n  }, reflectorProps, props));\n});\n\nexport { MeshReflectorMaterial };\n","/**\n * @monogrid/gainmap-js v3.0.6\n * With ❤️, by MONOGRID <rnd@monogrid.com>\n */\n\nimport { RGBAFormat, LinearFilter, ClampToEdgeWrapping, Scene, OrthographicCamera, HalfFloatType, FloatType, Mesh, PlaneGeometry, WebGLRenderTarget, UVMapping, WebGLRenderer, DataTexture, LinearSRGBColorSpace, ShaderMaterial, Texture, IntType, ShortType, ByteType, UnsignedIntType, UnsignedByteType, MeshBasicMaterial } from 'three';\n\nconst getBufferForType = (type, width, height) => {\n    let out;\n    switch (type) {\n        case UnsignedByteType:\n            out = new Uint8ClampedArray(width * height * 4);\n            break;\n        case HalfFloatType:\n            out = new Uint16Array(width * height * 4);\n            break;\n        case UnsignedIntType:\n            out = new Uint32Array(width * height * 4);\n            break;\n        case ByteType:\n            out = new Int8Array(width * height * 4);\n            break;\n        case ShortType:\n            out = new Int16Array(width * height * 4);\n            break;\n        case IntType:\n            out = new Int32Array(width * height * 4);\n            break;\n        case FloatType:\n            out = new Float32Array(width * height * 4);\n            break;\n        default:\n            throw new Error('Unsupported data type');\n    }\n    return out;\n};\nlet _canReadPixelsResult;\n/**\n * Test if this browser implementation can correctly read pixels from the specified\n * Render target type.\n *\n * Runs only once\n *\n * @param type\n * @param renderer\n * @param camera\n * @param renderTargetOptions\n * @returns\n */\nconst canReadPixels = (type, renderer, camera, renderTargetOptions) => {\n    if (_canReadPixelsResult !== undefined)\n        return _canReadPixelsResult;\n    const testRT = new WebGLRenderTarget(1, 1, renderTargetOptions);\n    renderer.setRenderTarget(testRT);\n    const mesh = new Mesh(new PlaneGeometry(), new MeshBasicMaterial({ color: 0xffffff }));\n    renderer.render(mesh, camera);\n    renderer.setRenderTarget(null);\n    const out = getBufferForType(type, testRT.width, testRT.height);\n    renderer.readRenderTargetPixels(testRT, 0, 0, testRT.width, testRT.height, out);\n    testRT.dispose();\n    mesh.geometry.dispose();\n    mesh.material.dispose();\n    _canReadPixelsResult = out[0] !== 0;\n    return _canReadPixelsResult;\n};\n/**\n * Utility class used for rendering a texture with a material\n *\n * @category Core\n * @group Core\n */\nclass QuadRenderer {\n    /**\n     * Constructs a new QuadRenderer\n     *\n     * @param options Parameters for this QuadRenderer\n     */\n    constructor(options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r;\n        this._rendererIsDisposable = false;\n        this._supportsReadPixels = true;\n        /**\n         * Renders the input texture using the specified material\n         */\n        this.render = () => {\n            this._renderer.setRenderTarget(this._renderTarget);\n            try {\n                this._renderer.render(this._scene, this._camera);\n            }\n            catch (e) {\n                this._renderer.setRenderTarget(null);\n                throw e;\n            }\n            this._renderer.setRenderTarget(null);\n        };\n        this._width = options.width;\n        this._height = options.height;\n        this._type = options.type;\n        this._colorSpace = options.colorSpace;\n        const rtOptions = {\n            // fixed options\n            format: RGBAFormat,\n            depthBuffer: false,\n            stencilBuffer: false,\n            // user options\n            type: this._type, // set in class property\n            colorSpace: this._colorSpace, // set in class property\n            anisotropy: ((_a = options.renderTargetOptions) === null || _a === void 0 ? void 0 : _a.anisotropy) !== undefined ? (_b = options.renderTargetOptions) === null || _b === void 0 ? void 0 : _b.anisotropy : 1,\n            generateMipmaps: ((_c = options.renderTargetOptions) === null || _c === void 0 ? void 0 : _c.generateMipmaps) !== undefined ? (_d = options.renderTargetOptions) === null || _d === void 0 ? void 0 : _d.generateMipmaps : false,\n            magFilter: ((_e = options.renderTargetOptions) === null || _e === void 0 ? void 0 : _e.magFilter) !== undefined ? (_f = options.renderTargetOptions) === null || _f === void 0 ? void 0 : _f.magFilter : LinearFilter,\n            minFilter: ((_g = options.renderTargetOptions) === null || _g === void 0 ? void 0 : _g.minFilter) !== undefined ? (_h = options.renderTargetOptions) === null || _h === void 0 ? void 0 : _h.minFilter : LinearFilter,\n            samples: ((_j = options.renderTargetOptions) === null || _j === void 0 ? void 0 : _j.samples) !== undefined ? (_k = options.renderTargetOptions) === null || _k === void 0 ? void 0 : _k.samples : undefined,\n            wrapS: ((_l = options.renderTargetOptions) === null || _l === void 0 ? void 0 : _l.wrapS) !== undefined ? (_m = options.renderTargetOptions) === null || _m === void 0 ? void 0 : _m.wrapS : ClampToEdgeWrapping,\n            wrapT: ((_o = options.renderTargetOptions) === null || _o === void 0 ? void 0 : _o.wrapT) !== undefined ? (_p = options.renderTargetOptions) === null || _p === void 0 ? void 0 : _p.wrapT : ClampToEdgeWrapping\n        };\n        this._material = options.material;\n        if (options.renderer) {\n            this._renderer = options.renderer;\n        }\n        else {\n            this._renderer = QuadRenderer.instantiateRenderer();\n            this._rendererIsDisposable = true;\n        }\n        this._scene = new Scene();\n        this._camera = new OrthographicCamera();\n        this._camera.position.set(0, 0, 10);\n        this._camera.left = -0.5;\n        this._camera.right = 0.5;\n        this._camera.top = 0.5;\n        this._camera.bottom = -0.5;\n        this._camera.updateProjectionMatrix();\n        if (!canReadPixels(this._type, this._renderer, this._camera, rtOptions)) {\n            let alternativeType;\n            switch (this._type) {\n                case HalfFloatType:\n                    alternativeType = this._renderer.extensions.has('EXT_color_buffer_float') ? FloatType : undefined;\n                    break;\n            }\n            if (alternativeType !== undefined) {\n                console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${FloatType}`);\n                this._type = alternativeType;\n            }\n            else {\n                this._supportsReadPixels = false;\n                console.warn('This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown');\n            }\n        }\n        this._quad = new Mesh(new PlaneGeometry(), this._material);\n        this._quad.geometry.computeBoundingBox();\n        this._scene.add(this._quad);\n        this._renderTarget = new WebGLRenderTarget(this.width, this.height, rtOptions);\n        this._renderTarget.texture.mapping = ((_q = options.renderTargetOptions) === null || _q === void 0 ? void 0 : _q.mapping) !== undefined ? (_r = options.renderTargetOptions) === null || _r === void 0 ? void 0 : _r.mapping : UVMapping;\n    }\n    /**\n     * Instantiates a temporary renderer\n     *\n     * @returns\n     */\n    static instantiateRenderer() {\n        const renderer = new WebGLRenderer();\n        renderer.setSize(128, 128);\n        // renderer.outputColorSpace = SRGBColorSpace\n        // renderer.toneMapping = LinearToneMapping\n        // renderer.debug.checkShaderErrors = false\n        // this._rendererIsDisposable = true\n        return renderer;\n    }\n    /**\n     * Obtains a Buffer containing the rendered texture.\n     *\n     * @throws Error if the browser cannot read pixels from this RenderTarget type.\n     * @returns a TypedArray containing RGBA values from this renderer\n     */\n    toArray() {\n        if (!this._supportsReadPixels)\n            throw new Error('Can\\'t read pixels in this browser');\n        const out = getBufferForType(this._type, this._width, this._height);\n        this._renderer.readRenderTargetPixels(this._renderTarget, 0, 0, this._width, this._height, out);\n        return out;\n    }\n    /**\n     * Performs a readPixel operation in the renderTarget\n     * and returns a DataTexture containing the read data\n     *\n     * @param options options\n     * @returns\n     */\n    toDataTexture(options) {\n        const returnValue = new DataTexture(\n        // fixed values\n        this.toArray(), this.width, this.height, RGBAFormat, this._type, \n        // user values\n        (options === null || options === void 0 ? void 0 : options.mapping) || UVMapping, (options === null || options === void 0 ? void 0 : options.wrapS) || ClampToEdgeWrapping, (options === null || options === void 0 ? void 0 : options.wrapT) || ClampToEdgeWrapping, (options === null || options === void 0 ? void 0 : options.magFilter) || LinearFilter, (options === null || options === void 0 ? void 0 : options.minFilter) || LinearFilter, (options === null || options === void 0 ? void 0 : options.anisotropy) || 1, \n        // fixed value\n        LinearSRGBColorSpace);\n        // set this afterwards, we can't set it in constructor\n        returnValue.generateMipmaps = (options === null || options === void 0 ? void 0 : options.generateMipmaps) !== undefined ? options === null || options === void 0 ? void 0 : options.generateMipmaps : false;\n        return returnValue;\n    }\n    /**\n     * If using a disposable renderer, it will dispose it.\n     */\n    disposeOnDemandRenderer() {\n        this._renderer.setRenderTarget(null);\n        if (this._rendererIsDisposable) {\n            this._renderer.dispose();\n            this._renderer.forceContextLoss();\n        }\n    }\n    /**\n     * Will dispose of **all** assets used by this renderer.\n     *\n     *\n     * @param disposeRenderTarget will dispose of the renderTarget which will not be usable later\n     * set this to true if you passed the `renderTarget.texture` to a `PMREMGenerator`\n     * or are otherwise done with it.\n     *\n     * @example\n     * ```js\n     * const loader = new HDRJPGLoader(renderer)\n     * const result = await loader.loadAsync('gainmap.jpeg')\n     * const mesh = new Mesh(geometry, new MeshBasicMaterial({ map: result.renderTarget.texture }) )\n     * // DO NOT dispose the renderTarget here,\n     * // it is used directly in the material\n     * result.dispose()\n     * ```\n     *\n     * @example\n     * ```js\n     * const loader = new HDRJPGLoader(renderer)\n     * const pmremGenerator = new PMREMGenerator( renderer );\n     * const result = await loader.loadAsync('gainmap.jpeg')\n     * const envMap = pmremGenerator.fromEquirectangular(result.renderTarget.texture)\n     * const mesh = new Mesh(geometry, new MeshStandardMaterial({ envMap }) )\n     * // renderTarget can be disposed here\n     * // because it was used to generate a PMREM texture\n     * result.dispose(true)\n     * ```\n     */\n    dispose(disposeRenderTarget) {\n        this.disposeOnDemandRenderer();\n        if (disposeRenderTarget) {\n            this.renderTarget.dispose();\n        }\n        // dispose shader material texture uniforms\n        if (this.material instanceof ShaderMaterial) {\n            Object.values(this.material.uniforms).forEach(v => {\n                if (v.value instanceof Texture)\n                    v.value.dispose();\n            });\n        }\n        // dispose other material properties\n        Object.values(this.material).forEach(value => {\n            if (value instanceof Texture)\n                value.dispose();\n        });\n        this.material.dispose();\n        this._quad.geometry.dispose();\n    }\n    /**\n     * Width of the texture\n     */\n    get width() { return this._width; }\n    set width(value) {\n        this._width = value;\n        this._renderTarget.setSize(this._width, this._height);\n    }\n    /**\n     * Height of the texture\n     */\n    get height() { return this._height; }\n    set height(value) {\n        this._height = value;\n        this._renderTarget.setSize(this._width, this._height);\n    }\n    /**\n     * The renderer used\n     */\n    get renderer() { return this._renderer; }\n    /**\n     * The `WebGLRenderTarget` used.\n     */\n    get renderTarget() { return this._renderTarget; }\n    set renderTarget(value) {\n        this._renderTarget = value;\n        this._width = value.width;\n        this._height = value.height;\n        // this._type = value.texture.type\n    }\n    /**\n     * The `Material` used.\n     */\n    get material() { return this._material; }\n    /**\n     *\n     */\n    get type() { return this._type; }\n    get colorSpace() { return this._colorSpace; }\n}\n\nexport { QuadRenderer as Q };\n","/**\n * @monogrid/gainmap-js v3.0.6\n * With ❤️, by MONOGRID <rnd@monogrid.com>\n */\n\nimport { Q as QuadRenderer } from './QuadRenderer-B3h-sJtp.js';\nimport { ShaderMaterial, Vector3, NoBlending, SRGBColorSpace, LinearSRGBColorSpace, HalfFloatType, Loader, LoadingManager, Texture, UVMapping, ClampToEdgeWrapping, LinearFilter, LinearMipMapLinearFilter, RGBAFormat, UnsignedByteType, FileLoader } from 'three';\n\nconst vertexShader = /* glsl */ `\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n`;\nconst fragmentShader = /* glsl */ `\n// min half float value\n#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )\n// max half float value\n#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )\n\nuniform sampler2D sdr;\nuniform sampler2D gainMap;\nuniform vec3 gamma;\nuniform vec3 offsetHdr;\nuniform vec3 offsetSdr;\nuniform vec3 gainMapMin;\nuniform vec3 gainMapMax;\nuniform float weightFactor;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec3 rgb = texture2D( sdr, vUv ).rgb;\n  vec3 recovery = texture2D( gainMap, vUv ).rgb;\n  vec3 logRecovery = pow( recovery, gamma );\n  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;\n  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;\n  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));\n  gl_FragColor = vec4( clampedHdrColor , 1.0 );\n}\n`;\n/**\n * A Material which is able to decode the Gainmap into a full HDR Representation\n *\n * @category Materials\n * @group Materials\n */\nclass GainMapDecoderMaterial extends ShaderMaterial {\n    /**\n     *\n     * @param params\n     */\n    constructor({ gamma, offsetHdr, offsetSdr, gainMapMin, gainMapMax, maxDisplayBoost, hdrCapacityMin, hdrCapacityMax, sdr, gainMap }) {\n        super({\n            name: 'GainMapDecoderMaterial',\n            vertexShader,\n            fragmentShader,\n            uniforms: {\n                sdr: { value: sdr },\n                gainMap: { value: gainMap },\n                gamma: { value: new Vector3(1.0 / gamma[0], 1.0 / gamma[1], 1.0 / gamma[2]) },\n                offsetHdr: { value: new Vector3().fromArray(offsetHdr) },\n                offsetSdr: { value: new Vector3().fromArray(offsetSdr) },\n                gainMapMin: { value: new Vector3().fromArray(gainMapMin) },\n                gainMapMax: { value: new Vector3().fromArray(gainMapMax) },\n                weightFactor: {\n                    value: (Math.log2(maxDisplayBoost) - hdrCapacityMin) / (hdrCapacityMax - hdrCapacityMin)\n                }\n            },\n            blending: NoBlending,\n            depthTest: false,\n            depthWrite: false\n        });\n        this._maxDisplayBoost = maxDisplayBoost;\n        this._hdrCapacityMin = hdrCapacityMin;\n        this._hdrCapacityMax = hdrCapacityMax;\n        this.needsUpdate = true;\n        this.uniformsNeedUpdate = true;\n    }\n    get sdr() { return this.uniforms.sdr.value; }\n    set sdr(value) { this.uniforms.sdr.value = value; }\n    get gainMap() { return this.uniforms.gainMap.value; }\n    set gainMap(value) { this.uniforms.gainMap.value = value; }\n    /**\n     * @see {@link GainMapMetadata.offsetHdr}\n     */\n    get offsetHdr() { return this.uniforms.offsetHdr.value.toArray(); }\n    set offsetHdr(value) { this.uniforms.offsetHdr.value.fromArray(value); }\n    /**\n     * @see {@link GainMapMetadata.offsetSdr}\n     */\n    get offsetSdr() { return this.uniforms.offsetSdr.value.toArray(); }\n    set offsetSdr(value) { this.uniforms.offsetSdr.value.fromArray(value); }\n    /**\n     * @see {@link GainMapMetadata.gainMapMin}\n     */\n    get gainMapMin() { return this.uniforms.gainMapMin.value.toArray(); }\n    set gainMapMin(value) { this.uniforms.gainMapMin.value.fromArray(value); }\n    /**\n     * @see {@link GainMapMetadata.gainMapMax}\n     */\n    get gainMapMax() { return this.uniforms.gainMapMax.value.toArray(); }\n    set gainMapMax(value) { this.uniforms.gainMapMax.value.fromArray(value); }\n    /**\n     * @see {@link GainMapMetadata.gamma}\n     */\n    get gamma() {\n        const g = this.uniforms.gamma.value;\n        return [1 / g.x, 1 / g.y, 1 / g.z];\n    }\n    set gamma(value) {\n        const g = this.uniforms.gamma.value;\n        g.x = 1.0 / value[0];\n        g.y = 1.0 / value[1];\n        g.z = 1.0 / value[2];\n    }\n    /**\n     * @see {@link GainMapMetadata.hdrCapacityMin}\n     * @remarks Logarithmic space\n     */\n    get hdrCapacityMin() { return this._hdrCapacityMin; }\n    set hdrCapacityMin(value) {\n        this._hdrCapacityMin = value;\n        this.calculateWeight();\n    }\n    /**\n     * @see {@link GainMapMetadata.hdrCapacityMin}\n     * @remarks Logarithmic space\n     */\n    get hdrCapacityMax() { return this._hdrCapacityMax; }\n    set hdrCapacityMax(value) {\n        this._hdrCapacityMax = value;\n        this.calculateWeight();\n    }\n    /**\n     * @see {@link GainmapDecodingParameters.maxDisplayBoost}\n     * @remarks Non Logarithmic space\n     */\n    get maxDisplayBoost() { return this._maxDisplayBoost; }\n    set maxDisplayBoost(value) {\n        this._maxDisplayBoost = Math.max(1, Math.min(65504, value));\n        this.calculateWeight();\n    }\n    calculateWeight() {\n        const val = (Math.log2(this._maxDisplayBoost) - this._hdrCapacityMin) / (this._hdrCapacityMax - this._hdrCapacityMin);\n        this.uniforms.weightFactor.value = Math.max(0, Math.min(1, val));\n    }\n}\n\n/**\n * Decodes a gain map using a WebGLRenderTarget\n *\n * @category Decoding Functions\n * @group Decoding Functions\n * @example\n * import { decode } from '@monogrid/gainmap-js'\n * import {\n *   Mesh,\n *   MeshBasicMaterial,\n *   PerspectiveCamera,\n *   PlaneGeometry,\n *   Scene,\n *   TextureLoader,\n *   WebGLRenderer\n * } from 'three'\n *\n * const renderer = new WebGLRenderer()\n *\n * const textureLoader = new TextureLoader()\n *\n * // load SDR Representation\n * const sdr = await textureLoader.loadAsync('sdr.jpg')\n * // load Gain map recovery image\n * const gainMap = await textureLoader.loadAsync('gainmap.jpg')\n * // load metadata\n * const metadata = await (await fetch('metadata.json')).json()\n *\n * const result = await decode({\n *   sdr,\n *   gainMap,\n *   // this allows to use `result.renderTarget.texture` directly\n *   renderer,\n *   // this will restore the full HDR range\n *   maxDisplayBoost: Math.pow(2, metadata.hdrCapacityMax),\n *   ...metadata\n * })\n *\n * const scene = new Scene()\n * // `result` can be used to populate a Texture\n * const mesh = new Mesh(\n *   new PlaneGeometry(),\n *   new MeshBasicMaterial({ map: result.renderTarget.texture })\n * )\n * scene.add(mesh)\n * renderer.render(scene, new PerspectiveCamera())\n *\n * // result must be manually disposed\n * // when you are done using it\n * result.dispose()\n *\n * @param params\n * @returns\n * @throws {Error} if the WebGLRenderer fails to render the gain map\n */\nconst decode = (params) => {\n    const { sdr, gainMap, renderer } = params;\n    if (sdr.colorSpace !== SRGBColorSpace) {\n        console.warn('SDR Colorspace needs to be *SRGBColorSpace*, setting it automatically');\n        sdr.colorSpace = SRGBColorSpace;\n    }\n    sdr.needsUpdate = true;\n    if (gainMap.colorSpace !== LinearSRGBColorSpace) {\n        console.warn('Gainmap Colorspace needs to be *LinearSRGBColorSpace*, setting it automatically');\n        gainMap.colorSpace = LinearSRGBColorSpace;\n    }\n    gainMap.needsUpdate = true;\n    const material = new GainMapDecoderMaterial({\n        ...params,\n        sdr,\n        gainMap\n    });\n    const quadRenderer = new QuadRenderer({\n        // TODO: three types are generic, eslint complains here, see how we can solve\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\n        width: sdr.image.width,\n        // TODO: three types are generic, eslint complains here, see how we can solve\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\n        height: sdr.image.height,\n        type: HalfFloatType,\n        colorSpace: LinearSRGBColorSpace,\n        material,\n        renderer,\n        renderTargetOptions: params.renderTargetOptions\n    });\n    try {\n        quadRenderer.render();\n    }\n    catch (e) {\n        quadRenderer.disposeOnDemandRenderer();\n        throw e;\n    }\n    return quadRenderer;\n};\n\nclass GainMapNotFoundError extends Error {\n}\n\nclass XMPMetadataNotFoundError extends Error {\n}\n\nconst getAttribute = (description, name, defaultValue) => {\n    var _a;\n    let returnValue;\n    const parsedValue = (_a = description.attributes.getNamedItem(name)) === null || _a === void 0 ? void 0 : _a.nodeValue;\n    if (!parsedValue) {\n        const node = description.getElementsByTagName(name)[0];\n        if (node) {\n            const values = node.getElementsByTagName('rdf:li');\n            if (values.length === 3) {\n                returnValue = Array.from(values).map(v => v.innerHTML);\n            }\n            else {\n                throw new Error(`Gainmap metadata contains an array of items for ${name} but its length is not 3`);\n            }\n        }\n        else {\n            if (defaultValue)\n                return defaultValue;\n            else\n                throw new Error(`Can't find ${name} in gainmap metadata`);\n        }\n    }\n    else {\n        returnValue = parsedValue;\n    }\n    return returnValue;\n};\n/**\n *\n * @param input\n * @returns\n */\nconst extractXMP = (input) => {\n    var _a, _b;\n    let str;\n    // support node test environment\n    if (typeof TextDecoder !== 'undefined')\n        str = new TextDecoder().decode(input);\n    else\n        str = input.toString();\n    let start = str.indexOf('<x:xmpmeta');\n    const parser = new DOMParser();\n    while (start !== -1) {\n        const end = str.indexOf('x:xmpmeta>', start);\n        str.slice(start, end + 10);\n        const xmpBlock = str.slice(start, end + 10);\n        try {\n            const xmlDocument = parser.parseFromString(xmpBlock, 'text/xml');\n            const description = xmlDocument.getElementsByTagName('rdf:Description')[0];\n            const gainMapMin = getAttribute(description, 'hdrgm:GainMapMin', '0');\n            const gainMapMax = getAttribute(description, 'hdrgm:GainMapMax');\n            const gamma = getAttribute(description, 'hdrgm:Gamma', '1');\n            const offsetSDR = getAttribute(description, 'hdrgm:OffsetSDR', '0.015625');\n            const offsetHDR = getAttribute(description, 'hdrgm:OffsetHDR', '0.015625');\n            let hdrCapacityMin = (_a = description.attributes.getNamedItem('hdrgm:HDRCapacityMin')) === null || _a === void 0 ? void 0 : _a.nodeValue;\n            if (!hdrCapacityMin)\n                hdrCapacityMin = '0';\n            const hdrCapacityMax = (_b = description.attributes.getNamedItem('hdrgm:HDRCapacityMax')) === null || _b === void 0 ? void 0 : _b.nodeValue;\n            if (!hdrCapacityMax)\n                throw new Error('Incomplete gainmap metadata');\n            return {\n                gainMapMin: Array.isArray(gainMapMin) ? gainMapMin.map(v => parseFloat(v)) : [parseFloat(gainMapMin), parseFloat(gainMapMin), parseFloat(gainMapMin)],\n                gainMapMax: Array.isArray(gainMapMax) ? gainMapMax.map(v => parseFloat(v)) : [parseFloat(gainMapMax), parseFloat(gainMapMax), parseFloat(gainMapMax)],\n                gamma: Array.isArray(gamma) ? gamma.map(v => parseFloat(v)) : [parseFloat(gamma), parseFloat(gamma), parseFloat(gamma)],\n                offsetSdr: Array.isArray(offsetSDR) ? offsetSDR.map(v => parseFloat(v)) : [parseFloat(offsetSDR), parseFloat(offsetSDR), parseFloat(offsetSDR)],\n                offsetHdr: Array.isArray(offsetHDR) ? offsetHDR.map(v => parseFloat(v)) : [parseFloat(offsetHDR), parseFloat(offsetHDR), parseFloat(offsetHDR)],\n                hdrCapacityMin: parseFloat(hdrCapacityMin),\n                hdrCapacityMax: parseFloat(hdrCapacityMax)\n            };\n        }\n        catch (e) {\n        }\n        start = str.indexOf('<x:xmpmeta', end);\n    }\n};\n\n/**\n * MPF Extractor (Multi Picture Format Extractor)\n * By Henrik S Nilsson 2019\n *\n * Extracts images stored in images based on the MPF format (found here: https://www.cipa.jp/e/std/std-sec.html\n * under \"CIPA DC-007-Translation-2021 Multi-Picture Format\"\n *\n * Overly commented, and without intention of being complete or production ready.\n * Created to extract depth maps from iPhone images, and to learn about image metadata.\n * Kudos to: Phil Harvey (exiftool), Jaume Sanchez (android-lens-blur-depth-extractor)\n */\nclass MPFExtractor {\n    constructor(options) {\n        this.options = {\n            debug: options && options.debug !== undefined ? options.debug : false,\n            extractFII: options && options.extractFII !== undefined ? options.extractFII : true,\n            extractNonFII: options && options.extractNonFII !== undefined ? options.extractNonFII : true\n        };\n    }\n    extract(imageArrayBuffer) {\n        return new Promise((resolve, reject) => {\n            const debug = this.options.debug;\n            const dataView = new DataView(imageArrayBuffer.buffer);\n            // If you're executing this line on a big endian machine, it'll be reversed.\n            // bigEnd further down though, refers to the endianness of the image itself.\n            if (dataView.getUint16(0) !== 0xffd8) {\n                reject(new Error('Not a valid jpeg'));\n                return;\n            }\n            const length = dataView.byteLength;\n            let offset = 2;\n            let loops = 0;\n            let marker; // APP# marker\n            while (offset < length) {\n                if (++loops > 250) {\n                    reject(new Error(`Found no marker after ${loops} loops 😵`));\n                    return;\n                }\n                if (dataView.getUint8(offset) !== 0xff) {\n                    reject(new Error(`Not a valid marker at offset 0x${offset.toString(16)}, found: 0x${dataView.getUint8(offset).toString(16)}`));\n                    return;\n                }\n                marker = dataView.getUint8(offset + 1);\n                if (debug)\n                    console.log(`Marker: ${marker.toString(16)}`);\n                if (marker === 0xe2) {\n                    if (debug)\n                        console.log('Found APP2 marker (0xffe2)');\n                    // Works for iPhone 8 Plus, X, and XSMax. Or any photos of MPF format.\n                    // Great way to visualize image information in html is using Exiftool. E.g.:\n                    // ./exiftool.exe -htmldump -wantTrailer photo.jpg > photo.html\n                    const formatPt = offset + 4;\n                    /*\n                     *  Structure of the MP Format Identifier\n                     *\n                     *  Offset Addr.  | Code (Hex)  | Description\n                     *  +00             ff            Marker Prefix      <-- offset\n                     *  +01             e2            APP2\n                     *  +02             #n            APP2 Field Length\n                     *  +03             #n            APP2 Field Length\n                     *  +04             4d            'M'                <-- formatPt\n                     *  +05             50            'P'\n                     *  +06             46            'F'\n                     *  +07             00            NULL\n                     *                                                   <-- tiffOffset\n                     */\n                    if (dataView.getUint32(formatPt) === 0x4d504600) {\n                        // Found MPF tag, so we start dig out sub images\n                        const tiffOffset = formatPt + 4;\n                        let bigEnd; // Endianness from TIFF header\n                        // Test for TIFF validity and endianness\n                        // 0x4949 and 0x4D4D ('II' and 'MM') marks Little Endian and Big Endian\n                        if (dataView.getUint16(tiffOffset) === 0x4949) {\n                            bigEnd = false;\n                        }\n                        else if (dataView.getUint16(tiffOffset) === 0x4d4d) {\n                            bigEnd = true;\n                        }\n                        else {\n                            reject(new Error('No valid endianness marker found in TIFF header'));\n                            return;\n                        }\n                        if (dataView.getUint16(tiffOffset + 2, !bigEnd) !== 0x002a) {\n                            reject(new Error('Not valid TIFF data! (no 0x002A marker)'));\n                            return;\n                        }\n                        // 32 bit number stating the offset from the start of the 8 Byte MP Header\n                        // to MP Index IFD Least possible value is thus 8 (means 0 offset)\n                        const firstIFDOffset = dataView.getUint32(tiffOffset + 4, !bigEnd);\n                        if (firstIFDOffset < 0x00000008) {\n                            reject(new Error('Not valid TIFF data! (First offset less than 8)'));\n                            return;\n                        }\n                        // Move ahead to MP Index IFD\n                        // Assume we're at the first IFD, so firstIFDOffset points to\n                        // MP Index IFD and not MP Attributes IFD. (If we try extract from a sub image,\n                        // we fail silently here due to this assumption)\n                        // Count (2 Byte) | MP Index Fields a.k.a. MP Entries (count * 12 Byte) | Offset of Next IFD (4 Byte)\n                        const dirStart = tiffOffset + firstIFDOffset; // Start of IFD (Image File Directory)\n                        const count = dataView.getUint16(dirStart, !bigEnd); // Count of MPEntries (2 Byte)\n                        // Extract info from MPEntries (starting after Count)\n                        const entriesStart = dirStart + 2;\n                        let numberOfImages = 0;\n                        for (let i = entriesStart; i < entriesStart + 12 * count; i += 12) {\n                            // Each entry is 12 Bytes long\n                            // Check MP Index IFD tags, here we only take tag 0xb001 = Number of images\n                            if (dataView.getUint16(i, !bigEnd) === 0xb001) {\n                                // stored in Last 4 bytes of its 12 Byte entry.\n                                numberOfImages = dataView.getUint32(i + 8, !bigEnd);\n                            }\n                        }\n                        const nextIFDOffsetLen = 4; // 4 Byte offset field that appears after MP Index IFD tags\n                        const MPImageListValPt = dirStart + 2 + count * 12 + nextIFDOffsetLen;\n                        const images = [];\n                        for (let i = MPImageListValPt; i < MPImageListValPt + numberOfImages * 16; i += 16) {\n                            const image = {\n                                MPType: dataView.getUint32(i, !bigEnd),\n                                size: dataView.getUint32(i + 4, !bigEnd),\n                                // This offset is specified relative to the address of the MP Endian\n                                // field in the MP Header, unless the image is a First Individual Image,\n                                // in which case the value of the offset shall be NULL (0x00000000).\n                                dataOffset: dataView.getUint32(i + 8, !bigEnd),\n                                dependantImages: dataView.getUint32(i + 12, !bigEnd),\n                                start: -1,\n                                end: -1,\n                                isFII: false\n                            };\n                            if (!image.dataOffset) {\n                                // dataOffset is 0x00000000 for First Individual Image\n                                image.start = 0;\n                                image.isFII = true;\n                            }\n                            else {\n                                image.start = tiffOffset + image.dataOffset;\n                                image.isFII = false;\n                            }\n                            image.end = image.start + image.size;\n                            images.push(image);\n                        }\n                        if (this.options.extractNonFII && images.length) {\n                            const bufferBlob = new Blob([dataView]);\n                            const imgs = [];\n                            for (const image of images) {\n                                if (image.isFII && !this.options.extractFII) {\n                                    continue; // Skip FII\n                                }\n                                const imageBlob = bufferBlob.slice(image.start, image.end + 1, 'image/jpeg');\n                                // we don't need this\n                                // const imageUrl = URL.createObjectURL(imageBlob)\n                                // image.img = document.createElement('img')\n                                // image.img.src = imageUrl\n                                imgs.push(imageBlob);\n                            }\n                            resolve(imgs);\n                        }\n                    }\n                }\n                offset += 2 + dataView.getUint16(offset + 2);\n            }\n        });\n    }\n}\n\n/**\n * Extracts XMP Metadata and the gain map recovery image\n * from a single JPEG file.\n *\n * @category Decoding Functions\n * @group Decoding Functions\n * @param jpegFile an `Uint8Array` containing and encoded JPEG file\n * @returns an sdr `Uint8Array` compressed in JPEG, a gainMap `Uint8Array` compressed in JPEG and the XMP parsed XMP metadata\n * @throws Error if XMP Metadata is not found\n * @throws Error if Gain map image is not found\n * @example\n * import { FileLoader } from 'three'\n * import { extractGainmapFromJPEG } from '@monogrid/gainmap-js'\n *\n * const jpegFile = await new FileLoader()\n *  .setResponseType('arraybuffer')\n *  .loadAsync('image.jpg')\n *\n * const { sdr, gainMap, metadata } = extractGainmapFromJPEG(jpegFile)\n */\nconst extractGainmapFromJPEG = async (jpegFile) => {\n    const metadata = extractXMP(jpegFile);\n    if (!metadata)\n        throw new XMPMetadataNotFoundError('Gain map XMP metadata not found');\n    const mpfExtractor = new MPFExtractor({ extractFII: true, extractNonFII: true });\n    const images = await mpfExtractor.extract(jpegFile);\n    if (images.length !== 2)\n        throw new GainMapNotFoundError('Gain map recovery image not found');\n    return {\n        sdr: new Uint8Array(await images[0].arrayBuffer()),\n        gainMap: new Uint8Array(await images[1].arrayBuffer()),\n        metadata\n    };\n};\n\n/**\n * private function, async get image from blob\n *\n * @param blob\n * @returns\n */\nconst getHTMLImageFromBlob = (blob) => {\n    return new Promise((resolve, reject) => {\n        const img = document.createElement('img');\n        img.onload = () => { resolve(img); };\n        img.onerror = (e) => { reject(e); };\n        img.src = URL.createObjectURL(blob);\n    });\n};\n\nclass LoaderBase extends Loader {\n    /**\n     *\n     * @param renderer\n     * @param manager\n     */\n    constructor(renderer, manager) {\n        super(manager);\n        if (renderer)\n            this._renderer = renderer;\n        this._internalLoadingManager = new LoadingManager();\n    }\n    /**\n     * Specify the renderer to use when rendering the gain map\n     *\n     * @param renderer\n     * @returns\n     */\n    setRenderer(renderer) {\n        this._renderer = renderer;\n        return this;\n    }\n    /**\n     * Specify the renderTarget options to use when rendering the gain map\n     *\n     * @param options\n     * @returns\n     */\n    setRenderTargetOptions(options) {\n        this._renderTargetOptions = options;\n        return this;\n    }\n    /**\n     * @private\n     * @returns\n     */\n    prepareQuadRenderer() {\n        if (!this._renderer)\n            console.warn('WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.');\n        // temporary values\n        const material = new GainMapDecoderMaterial({\n            gainMapMax: [1, 1, 1],\n            gainMapMin: [0, 0, 0],\n            gamma: [1, 1, 1],\n            offsetHdr: [1, 1, 1],\n            offsetSdr: [1, 1, 1],\n            hdrCapacityMax: 1,\n            hdrCapacityMin: 0,\n            maxDisplayBoost: 1,\n            gainMap: new Texture(),\n            sdr: new Texture()\n        });\n        return new QuadRenderer({\n            width: 16,\n            height: 16,\n            type: HalfFloatType,\n            colorSpace: LinearSRGBColorSpace,\n            material,\n            renderer: this._renderer,\n            renderTargetOptions: this._renderTargetOptions\n        });\n    }\n    /**\n   * @private\n   * @param quadRenderer\n   * @param metadata\n   * @param sdrBuffer\n   * @param gainMapBuffer\n   */\n    async render(quadRenderer, metadata, sdrBuffer, gainMapBuffer) {\n        // this is optional, will render a black gain-map if not present\n        const gainMapBlob = gainMapBuffer ? new Blob([gainMapBuffer], { type: 'image/jpeg' }) : undefined;\n        const sdrBlob = new Blob([sdrBuffer], { type: 'image/jpeg' });\n        let sdrImage;\n        let gainMapImage;\n        let needsFlip = false;\n        if (typeof createImageBitmap === 'undefined') {\n            const res = await Promise.all([\n                gainMapBlob ? getHTMLImageFromBlob(gainMapBlob) : Promise.resolve(undefined),\n                getHTMLImageFromBlob(sdrBlob)\n            ]);\n            gainMapImage = res[0];\n            sdrImage = res[1];\n            needsFlip = true;\n        }\n        else {\n            const res = await Promise.all([\n                gainMapBlob ? createImageBitmap(gainMapBlob, { imageOrientation: 'flipY' }) : Promise.resolve(undefined),\n                createImageBitmap(sdrBlob, { imageOrientation: 'flipY' })\n            ]);\n            gainMapImage = res[0];\n            sdrImage = res[1];\n        }\n        const gainMap = new Texture(gainMapImage || new ImageData(2, 2), UVMapping, ClampToEdgeWrapping, ClampToEdgeWrapping, LinearFilter, LinearMipMapLinearFilter, RGBAFormat, UnsignedByteType, 1, LinearSRGBColorSpace);\n        gainMap.flipY = needsFlip;\n        gainMap.needsUpdate = true;\n        const sdr = new Texture(sdrImage, UVMapping, ClampToEdgeWrapping, ClampToEdgeWrapping, LinearFilter, LinearMipMapLinearFilter, RGBAFormat, UnsignedByteType, 1, SRGBColorSpace);\n        sdr.flipY = needsFlip;\n        sdr.needsUpdate = true;\n        quadRenderer.width = sdrImage.width;\n        quadRenderer.height = sdrImage.height;\n        quadRenderer.material.gainMap = gainMap;\n        quadRenderer.material.sdr = sdr;\n        quadRenderer.material.gainMapMin = metadata.gainMapMin;\n        quadRenderer.material.gainMapMax = metadata.gainMapMax;\n        quadRenderer.material.offsetHdr = metadata.offsetHdr;\n        quadRenderer.material.offsetSdr = metadata.offsetSdr;\n        quadRenderer.material.gamma = metadata.gamma;\n        quadRenderer.material.hdrCapacityMin = metadata.hdrCapacityMin;\n        quadRenderer.material.hdrCapacityMax = metadata.hdrCapacityMax;\n        quadRenderer.material.maxDisplayBoost = Math.pow(2, metadata.hdrCapacityMax);\n        quadRenderer.material.needsUpdate = true;\n        quadRenderer.render();\n    }\n}\n\n/**\n * A Three.js Loader for the gain map format.\n *\n * @category Loaders\n * @group Loaders\n *\n * @example\n * import { GainMapLoader } from '@monogrid/gainmap-js'\n * import {\n *   EquirectangularReflectionMapping,\n *   LinearFilter,\n *   Mesh,\n *   MeshBasicMaterial,\n *   PerspectiveCamera,\n *   PlaneGeometry,\n *   Scene,\n *   WebGLRenderer\n * } from 'three'\n *\n * const renderer = new WebGLRenderer()\n *\n * const loader = new GainMapLoader(renderer)\n *\n * const result = await loader.loadAsync(['sdr.jpeg', 'gainmap.jpeg', 'metadata.json'])\n * // `result` can be used to populate a Texture\n *\n * const scene = new Scene()\n * const mesh = new Mesh(\n *   new PlaneGeometry(),\n *   new MeshBasicMaterial({ map: result.renderTarget.texture })\n * )\n * scene.add(mesh)\n * renderer.render(scene, new PerspectiveCamera())\n *\n * // Starting from three.js r159\n * // `result.renderTarget.texture` can\n * // also be used as Equirectangular scene background\n * //\n * // it was previously needed to convert it\n * // to a DataTexture with `result.toDataTexture()`\n * scene.background = result.renderTarget.texture\n * scene.background.mapping = EquirectangularReflectionMapping\n *\n * // result must be manually disposed\n * // when you are done using it\n * result.dispose()\n *\n */\nclass GainMapLoader extends LoaderBase {\n    /**\n     * Loads a gainmap using separate data\n     * * sdr image\n     * * gain map image\n     * * metadata json\n     *\n     * useful for webp gain maps\n     *\n     * @param urls An array in the form of [sdr.jpg, gainmap.jpg, metadata.json]\n     * @param onLoad Load complete callback, will receive the result\n     * @param onProgress Progress callback, will receive a {@link ProgressEvent}\n     * @param onError Error callback\n     * @returns\n     */\n    load([sdrUrl, gainMapUrl, metadataUrl], onLoad, onProgress, onError) {\n        const quadRenderer = this.prepareQuadRenderer();\n        let sdr;\n        let gainMap;\n        let metadata;\n        const loadCheck = async () => {\n            if (sdr && gainMap && metadata) {\n                // solves #16\n                try {\n                    await this.render(quadRenderer, metadata, sdr, gainMap);\n                }\n                catch (error) {\n                    this.manager.itemError(sdrUrl);\n                    this.manager.itemError(gainMapUrl);\n                    this.manager.itemError(metadataUrl);\n                    if (typeof onError === 'function')\n                        onError(error);\n                    quadRenderer.disposeOnDemandRenderer();\n                    return;\n                }\n                if (typeof onLoad === 'function')\n                    onLoad(quadRenderer);\n                this.manager.itemEnd(sdrUrl);\n                this.manager.itemEnd(gainMapUrl);\n                this.manager.itemEnd(metadataUrl);\n                quadRenderer.disposeOnDemandRenderer();\n            }\n        };\n        let sdrLengthComputable = true;\n        let sdrTotal = 0;\n        let sdrLoaded = 0;\n        let gainMapLengthComputable = true;\n        let gainMapTotal = 0;\n        let gainMapLoaded = 0;\n        let metadataLengthComputable = true;\n        let metadataTotal = 0;\n        let metadataLoaded = 0;\n        const progressHandler = () => {\n            if (typeof onProgress === 'function') {\n                const total = sdrTotal + gainMapTotal + metadataTotal;\n                const loaded = sdrLoaded + gainMapLoaded + metadataLoaded;\n                const lengthComputable = sdrLengthComputable && gainMapLengthComputable && metadataLengthComputable;\n                onProgress(new ProgressEvent('progress', { lengthComputable, loaded, total }));\n            }\n        };\n        this.manager.itemStart(sdrUrl);\n        this.manager.itemStart(gainMapUrl);\n        this.manager.itemStart(metadataUrl);\n        const sdrLoader = new FileLoader(this._internalLoadingManager);\n        sdrLoader.setResponseType('arraybuffer');\n        sdrLoader.setRequestHeader(this.requestHeader);\n        sdrLoader.setPath(this.path);\n        sdrLoader.setWithCredentials(this.withCredentials);\n        sdrLoader.load(sdrUrl, async (buffer) => {\n            /* istanbul ignore if\n             this condition exists only because of three.js types + strict mode\n            */\n            if (typeof buffer === 'string')\n                throw new Error('Invalid sdr buffer');\n            sdr = buffer;\n            await loadCheck();\n        }, (e) => {\n            sdrLengthComputable = e.lengthComputable;\n            sdrLoaded = e.loaded;\n            sdrTotal = e.total;\n            progressHandler();\n        }, (error) => {\n            this.manager.itemError(sdrUrl);\n            if (typeof onError === 'function')\n                onError(error);\n        });\n        const gainMapLoader = new FileLoader(this._internalLoadingManager);\n        gainMapLoader.setResponseType('arraybuffer');\n        gainMapLoader.setRequestHeader(this.requestHeader);\n        gainMapLoader.setPath(this.path);\n        gainMapLoader.setWithCredentials(this.withCredentials);\n        gainMapLoader.load(gainMapUrl, async (buffer) => {\n            /* istanbul ignore if\n             this condition exists only because of three.js types + strict mode\n            */\n            if (typeof buffer === 'string')\n                throw new Error('Invalid gainmap buffer');\n            gainMap = buffer;\n            await loadCheck();\n        }, (e) => {\n            gainMapLengthComputable = e.lengthComputable;\n            gainMapLoaded = e.loaded;\n            gainMapTotal = e.total;\n            progressHandler();\n        }, (error) => {\n            this.manager.itemError(gainMapUrl);\n            if (typeof onError === 'function')\n                onError(error);\n        });\n        const metadataLoader = new FileLoader(this._internalLoadingManager);\n        // metadataLoader.setResponseType('json')\n        metadataLoader.setRequestHeader(this.requestHeader);\n        metadataLoader.setPath(this.path);\n        metadataLoader.setWithCredentials(this.withCredentials);\n        metadataLoader.load(metadataUrl, async (json) => {\n            /* istanbul ignore if\n             this condition exists only because of three.js types + strict mode\n            */\n            if (typeof json !== 'string')\n                throw new Error('Invalid metadata string');\n            // TODO: implement check on JSON file and remove this eslint disable\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            metadata = JSON.parse(json);\n            await loadCheck();\n        }, (e) => {\n            metadataLengthComputable = e.lengthComputable;\n            metadataLoaded = e.loaded;\n            metadataTotal = e.total;\n            progressHandler();\n        }, (error) => {\n            this.manager.itemError(metadataUrl);\n            if (typeof onError === 'function')\n                onError(error);\n        });\n        return quadRenderer;\n    }\n}\n\n/**\n * A Three.js Loader for a JPEG with embedded gainmap metadata.\n *\n * @category Loaders\n * @group Loaders\n *\n * @example\n * import { HDRJPGLoader } from '@monogrid/gainmap-js'\n * import {\n *   EquirectangularReflectionMapping,\n *   LinearFilter,\n *   Mesh,\n *   MeshBasicMaterial,\n *   PerspectiveCamera,\n *   PlaneGeometry,\n *   Scene,\n *   WebGLRenderer\n * } from 'three'\n *\n * const renderer = new WebGLRenderer()\n *\n * const loader = new HDRJPGLoader(renderer)\n *\n * const result = await loader.loadAsync('gainmap.jpeg')\n * // `result` can be used to populate a Texture\n *\n * const scene = new Scene()\n * const mesh = new Mesh(\n *   new PlaneGeometry(),\n *   new MeshBasicMaterial({ map: result.renderTarget.texture })\n * )\n * scene.add(mesh)\n * renderer.render(scene, new PerspectiveCamera())\n *\n * // Starting from three.js r159\n * // `result.renderTarget.texture` can\n * // also be used as Equirectangular scene background\n * //\n * // it was previously needed to convert it\n * // to a DataTexture with `result.toDataTexture()`\n * scene.background = result.renderTarget.texture\n * scene.background.mapping = EquirectangularReflectionMapping\n *\n * // result must be manually disposed\n * // when you are done using it\n * result.dispose()\n *\n */\nclass HDRJPGLoader extends LoaderBase {\n    /**\n     * Loads a JPEG containing gain map metadata\n     * Renders a normal SDR image if gainmap data is not found\n     *\n     * @param url An array in the form of [sdr.jpg, gainmap.jpg, metadata.json]\n     * @param onLoad Load complete callback, will receive the result\n     * @param onProgress Progress callback, will receive a {@link ProgressEvent}\n     * @param onError Error callback\n     * @returns\n     */\n    load(url, onLoad, onProgress, onError) {\n        const quadRenderer = this.prepareQuadRenderer();\n        const loader = new FileLoader(this._internalLoadingManager);\n        loader.setResponseType('arraybuffer');\n        loader.setRequestHeader(this.requestHeader);\n        loader.setPath(this.path);\n        loader.setWithCredentials(this.withCredentials);\n        this.manager.itemStart(url);\n        loader.load(url, async (jpeg) => {\n            /* istanbul ignore if\n             this condition exists only because of three.js types + strict mode\n            */\n            if (typeof jpeg === 'string')\n                throw new Error('Invalid buffer, received [string], was expecting [ArrayBuffer]');\n            const jpegBuffer = new Uint8Array(jpeg);\n            let sdrJPEG;\n            let gainMapJPEG;\n            let metadata;\n            try {\n                const extractionResult = await extractGainmapFromJPEG(jpegBuffer);\n                // gain map is successfully reconstructed\n                sdrJPEG = extractionResult.sdr;\n                gainMapJPEG = extractionResult.gainMap;\n                metadata = extractionResult.metadata;\n            }\n            catch (e) {\n                // render the SDR version if this is not a gainmap\n                if (e instanceof XMPMetadataNotFoundError || e instanceof GainMapNotFoundError) {\n                    console.warn(`Failure to reconstruct an HDR image from ${url}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`);\n                    metadata = {\n                        gainMapMin: [0, 0, 0],\n                        gainMapMax: [1, 1, 1],\n                        gamma: [1, 1, 1],\n                        hdrCapacityMin: 0,\n                        hdrCapacityMax: 1,\n                        offsetHdr: [0, 0, 0],\n                        offsetSdr: [0, 0, 0]\n                    };\n                    sdrJPEG = jpegBuffer;\n                }\n                else {\n                    throw e;\n                }\n            }\n            // solves #16\n            try {\n                await this.render(quadRenderer, metadata, sdrJPEG, gainMapJPEG);\n            }\n            catch (error) {\n                this.manager.itemError(url);\n                if (typeof onError === 'function')\n                    onError(error);\n                quadRenderer.disposeOnDemandRenderer();\n                return;\n            }\n            if (typeof onLoad === 'function')\n                onLoad(quadRenderer);\n            this.manager.itemEnd(url);\n            quadRenderer.disposeOnDemandRenderer();\n        }, onProgress, (error) => {\n            this.manager.itemError(url);\n            if (typeof onError === 'function')\n                onError(error);\n        });\n        return quadRenderer;\n    }\n}\n\nexport { GainMapDecoderMaterial, GainMapLoader, HDRJPGLoader, HDRJPGLoader as JPEGRLoader, MPFExtractor, QuadRenderer, decode, extractGainmapFromJPEG, extractXMP };\n","const presetsObj = {\n  apartment: 'lebombo_1k.hdr',\n  city: 'potsdamer_platz_1k.hdr',\n  dawn: 'kiara_1_dawn_1k.hdr',\n  forest: 'forest_slope_1k.hdr',\n  lobby: 'st_fagans_interior_1k.hdr',\n  night: 'dikhololo_night_1k.hdr',\n  park: 'rooitou_park_1k.hdr',\n  studio: 'studio_small_03_1k.hdr',\n  sunset: 'venice_sunset_1k.hdr',\n  warehouse: 'empty_warehouse_01_1k.hdr'\n};\n\nexport { presetsObj };\n","import { useThree, useLoader } from '@react-three/fiber';\nimport { CubeReflectionMapping, EquirectangularReflectionMapping, CubeTextureLoader } from 'three';\nimport { RGBELoader, EXRLoader } from 'three-stdlib';\nimport { HDRJPGLoader, GainMapLoader } from '@monogrid/gainmap-js';\nimport { presetsObj } from '../helpers/environment-assets.js';\nimport { sRGBEncoding, LinearEncoding } from '../helpers/deprecated.js';\nimport { useLayoutEffect } from 'react';\n\nconst CUBEMAP_ROOT = 'https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/';\nconst isArray = arr => Array.isArray(arr);\nconst defaultFiles = ['/px.png', '/nx.png', '/py.png', '/ny.png', '/pz.png', '/nz.png'];\nfunction useEnvironment({\n  files = defaultFiles,\n  path = '',\n  preset = undefined,\n  encoding = undefined,\n  extensions\n} = {}) {\n  let loader = null;\n  let multiFile = false;\n  if (preset) {\n    validatePreset(preset);\n    files = presetsObj[preset];\n    path = CUBEMAP_ROOT;\n  }\n\n  // Everything else\n  multiFile = isArray(files);\n  const {\n    extension,\n    isCubemap\n  } = getExtension(files);\n  loader = getLoader(extension);\n  if (!loader) throw new Error('useEnvironment: Unrecognized file extension: ' + files);\n  const gl = useThree(state => state.gl);\n  useLayoutEffect(() => {\n    // Only required for gainmap\n    if (extension !== 'webp' && extension !== 'jpg' && extension !== 'jpeg') return;\n    function clearGainmapTexture() {\n      useLoader.clear(\n      // @ts-expect-error\n      loader, multiFile ? [files] : files);\n    }\n    gl.domElement.addEventListener('webglcontextlost', clearGainmapTexture, {\n      once: true\n    });\n  }, [files, gl.domElement]);\n  const loaderResult = useLoader(\n  // @ts-expect-error\n  loader, multiFile ? [files] : files, loader => {\n    // Gainmap requires a renderer\n    if (extension === 'webp' || extension === 'jpg' || extension === 'jpeg') {\n      loader.setRenderer(gl);\n    }\n    loader.setPath == null || loader.setPath(path);\n    if (extensions) extensions(loader);\n  });\n  let texture = multiFile ?\n  // @ts-ignore\n  loaderResult[0] : loaderResult;\n  if (extension === 'jpg' || extension === 'jpeg' || extension === 'webp') {\n    var _renderTarget;\n    texture = (_renderTarget = texture.renderTarget) == null ? void 0 : _renderTarget.texture;\n  }\n  texture.mapping = isCubemap ? CubeReflectionMapping : EquirectangularReflectionMapping;\n  if ('colorSpace' in texture) texture.colorSpace = (encoding !== null && encoding !== void 0 ? encoding : isCubemap) ? 'srgb' : 'srgb-linear';else texture.encoding = (encoding !== null && encoding !== void 0 ? encoding : isCubemap) ? sRGBEncoding : LinearEncoding;\n  return texture;\n}\nconst preloadDefaultOptions = {\n  files: defaultFiles,\n  path: '',\n  preset: undefined,\n  extensions: undefined\n};\nuseEnvironment.preload = preloadOptions => {\n  const options = {\n    ...preloadDefaultOptions,\n    ...preloadOptions\n  };\n  let {\n    files,\n    path = ''\n  } = options;\n  const {\n    preset,\n    extensions\n  } = options;\n  if (preset) {\n    validatePreset(preset);\n    files = presetsObj[preset];\n    path = CUBEMAP_ROOT;\n  }\n  const {\n    extension\n  } = getExtension(files);\n  if (extension === 'webp' || extension === 'jpg' || extension === 'jpeg') {\n    throw new Error('useEnvironment: Preloading gainmaps is not supported');\n  }\n  const loader = getLoader(extension);\n  if (!loader) throw new Error('useEnvironment: Unrecognized file extension: ' + files);\n  useLoader.preload(\n  // @ts-expect-error\n  loader, isArray(files) ? [files] : files, loader => {\n    loader.setPath == null || loader.setPath(path);\n    if (extensions) extensions(loader);\n  });\n};\nconst clearDefaultOptins = {\n  files: defaultFiles,\n  preset: undefined\n};\nuseEnvironment.clear = clearOptions => {\n  const options = {\n    ...clearDefaultOptins,\n    ...clearOptions\n  };\n  let {\n    files\n  } = options;\n  const {\n    preset\n  } = options;\n  if (preset) {\n    validatePreset(preset);\n    files = presetsObj[preset];\n  }\n  const {\n    extension\n  } = getExtension(files);\n  const loader = getLoader(extension);\n  if (!loader) throw new Error('useEnvironment: Unrecognized file extension: ' + files);\n  useLoader.clear(\n  // @ts-expect-error\n  loader, isArray(files) ? [files] : files);\n};\nfunction validatePreset(preset) {\n  if (!(preset in presetsObj)) throw new Error('Preset must be one of: ' + Object.keys(presetsObj).join(', '));\n}\nfunction getExtension(files) {\n  var _firstEntry$split$pop;\n  const isCubemap = isArray(files) && files.length === 6;\n  const isGainmap = isArray(files) && files.length === 3 && files.some(file => file.endsWith('json'));\n  const firstEntry = isArray(files) ? files[0] : files;\n\n  // Everything else\n  const extension = isCubemap ? 'cube' : isGainmap ? 'webp' : firstEntry.startsWith('data:application/exr') ? 'exr' : firstEntry.startsWith('data:application/hdr') ? 'hdr' : firstEntry.startsWith('data:image/jpeg') ? 'jpg' : (_firstEntry$split$pop = firstEntry.split('.').pop()) == null || (_firstEntry$split$pop = _firstEntry$split$pop.split('?')) == null || (_firstEntry$split$pop = _firstEntry$split$pop.shift()) == null ? void 0 : _firstEntry$split$pop.toLowerCase();\n  return {\n    extension,\n    isCubemap,\n    isGainmap\n  };\n}\nfunction getLoader(extension) {\n  const loader = extension === 'cube' ? CubeTextureLoader : extension === 'hdr' ? RGBELoader : extension === 'exr' ? EXRLoader : extension === 'jpg' || extension === 'jpeg' ? HDRJPGLoader : extension === 'webp' ? GainMapLoader : null;\n  return loader;\n}\n\nexport { useEnvironment };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { useThree, useFrame, createPortal, applyProps, extend } from '@react-three/fiber';\nimport { Scene, WebGLCubeRenderTarget, HalfFloatType } from 'three';\nimport { GroundProjectedEnv } from 'three-stdlib';\nimport { useEnvironment } from './useEnvironment.js';\n\nconst isRef = obj => obj.current && obj.current.isScene;\nconst resolveScene = scene => isRef(scene) ? scene.current : scene;\nfunction setEnvProps(background, scene, defaultScene, texture, sceneProps = {}) {\n  var _target$backgroundRot, _target$backgroundRot2, _target$environmentRo, _target$environmentRo2;\n  // defaults\n  sceneProps = {\n    backgroundBlurriness: 0,\n    backgroundIntensity: 1,\n    backgroundRotation: [0, 0, 0],\n    environmentIntensity: 1,\n    environmentRotation: [0, 0, 0],\n    ...sceneProps\n  };\n  const target = resolveScene(scene || defaultScene);\n  const oldbg = target.background;\n  const oldenv = target.environment;\n  const oldSceneProps = {\n    // @ts-ignore\n    backgroundBlurriness: target.backgroundBlurriness,\n    // @ts-ignore\n    backgroundIntensity: target.backgroundIntensity,\n    // @ts-ignore\n    backgroundRotation: (_target$backgroundRot = (_target$backgroundRot2 = target.backgroundRotation) == null || _target$backgroundRot2.clone == null ? void 0 : _target$backgroundRot2.clone()) !== null && _target$backgroundRot !== void 0 ? _target$backgroundRot : [0, 0, 0],\n    // @ts-ignore\n    environmentIntensity: target.environmentIntensity,\n    // @ts-ignore\n    environmentRotation: (_target$environmentRo = (_target$environmentRo2 = target.environmentRotation) == null || _target$environmentRo2.clone == null ? void 0 : _target$environmentRo2.clone()) !== null && _target$environmentRo !== void 0 ? _target$environmentRo : [0, 0, 0]\n  };\n  if (background !== 'only') target.environment = texture;\n  if (background) target.background = texture;\n  applyProps(target, sceneProps);\n  return () => {\n    if (background !== 'only') target.environment = oldenv;\n    if (background) target.background = oldbg;\n    applyProps(target, oldSceneProps);\n  };\n}\nfunction EnvironmentMap({\n  scene,\n  background = false,\n  map,\n  ...config\n}) {\n  const defaultScene = useThree(state => state.scene);\n  React.useLayoutEffect(() => {\n    if (map) return setEnvProps(background, scene, defaultScene, map, config);\n  });\n  return null;\n}\nfunction EnvironmentCube({\n  background = false,\n  scene,\n  blur,\n  backgroundBlurriness,\n  backgroundIntensity,\n  backgroundRotation,\n  environmentIntensity,\n  environmentRotation,\n  ...rest\n}) {\n  const texture = useEnvironment(rest);\n  const defaultScene = useThree(state => state.scene);\n  React.useLayoutEffect(() => {\n    return setEnvProps(background, scene, defaultScene, texture, {\n      backgroundBlurriness: blur !== null && blur !== void 0 ? blur : backgroundBlurriness,\n      backgroundIntensity,\n      backgroundRotation,\n      environmentIntensity,\n      environmentRotation\n    });\n  });\n  return null;\n}\nfunction EnvironmentPortal({\n  children,\n  near = 0.1,\n  far = 1000,\n  resolution = 256,\n  frames = 1,\n  map,\n  background = false,\n  blur,\n  backgroundBlurriness,\n  backgroundIntensity,\n  backgroundRotation,\n  environmentIntensity,\n  environmentRotation,\n  scene,\n  files,\n  path,\n  preset = undefined,\n  extensions\n}) {\n  const gl = useThree(state => state.gl);\n  const defaultScene = useThree(state => state.scene);\n  const camera = React.useRef(null);\n  const [virtualScene] = React.useState(() => new Scene());\n  const fbo = React.useMemo(() => {\n    const fbo = new WebGLCubeRenderTarget(resolution);\n    fbo.texture.type = HalfFloatType;\n    return fbo;\n  }, [resolution]);\n  React.useLayoutEffect(() => {\n    if (frames === 1) {\n      const autoClear = gl.autoClear;\n      gl.autoClear = true;\n      camera.current.update(gl, virtualScene);\n      gl.autoClear = autoClear;\n    }\n    return setEnvProps(background, scene, defaultScene, fbo.texture, {\n      backgroundBlurriness: blur !== null && blur !== void 0 ? blur : backgroundBlurriness,\n      backgroundIntensity,\n      backgroundRotation,\n      environmentIntensity,\n      environmentRotation\n    });\n  }, [children, virtualScene, fbo.texture, scene, defaultScene, background, frames, gl]);\n  let count = 1;\n  useFrame(() => {\n    if (frames === Infinity || count < frames) {\n      const autoClear = gl.autoClear;\n      gl.autoClear = true;\n      camera.current.update(gl, virtualScene);\n      gl.autoClear = autoClear;\n      count++;\n    }\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, createPortal(/*#__PURE__*/React.createElement(React.Fragment, null, children, /*#__PURE__*/React.createElement(\"cubeCamera\", {\n    ref: camera,\n    args: [near, far, fbo]\n  }), files || preset ? /*#__PURE__*/React.createElement(EnvironmentCube, {\n    background: true,\n    files: files,\n    preset: preset,\n    path: path,\n    extensions: extensions\n  }) : map ? /*#__PURE__*/React.createElement(EnvironmentMap, {\n    background: true,\n    map: map,\n    extensions: extensions\n  }) : null), virtualScene));\n}\nfunction EnvironmentGround(props) {\n  var _props$ground, _props$ground2, _scale, _props$ground3;\n  const textureDefault = useEnvironment(props);\n  const texture = props.map || textureDefault;\n  React.useMemo(() => extend({\n    GroundProjectedEnvImpl: GroundProjectedEnv\n  }), []);\n  const args = React.useMemo(() => [texture], [texture]);\n  const height = (_props$ground = props.ground) == null ? void 0 : _props$ground.height;\n  const radius = (_props$ground2 = props.ground) == null ? void 0 : _props$ground2.radius;\n  const scale = (_scale = (_props$ground3 = props.ground) == null ? void 0 : _props$ground3.scale) !== null && _scale !== void 0 ? _scale : 1000;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EnvironmentMap, _extends({}, props, {\n    map: texture\n  })), /*#__PURE__*/React.createElement(\"groundProjectedEnvImpl\", {\n    args: args,\n    scale: scale,\n    height: height,\n    radius: radius\n  }));\n}\nfunction Environment(props) {\n  return props.ground ? /*#__PURE__*/React.createElement(EnvironmentGround, props) : props.map ? /*#__PURE__*/React.createElement(EnvironmentMap, props) : props.children ? /*#__PURE__*/React.createElement(EnvironmentPortal, props) : /*#__PURE__*/React.createElement(EnvironmentCube, props);\n}\n\nexport { Environment, EnvironmentCube, EnvironmentMap, EnvironmentPortal };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport { applyProps } from '@react-three/fiber';\nimport * as React from 'react';\nimport * as THREE from 'three';\n\nconst Lightformer = /* @__PURE__ */React.forwardRef(({\n  light,\n  args,\n  map,\n  toneMapped = false,\n  color = 'white',\n  form: Form = 'rect',\n  intensity = 1,\n  scale = 1,\n  target = [0, 0, 0],\n  children,\n  ...props\n}, forwardRef) => {\n  // Apply emissive power\n  const ref = React.useRef(null);\n  React.useImperativeHandle(forwardRef, () => ref.current, []);\n  React.useLayoutEffect(() => {\n    if (!children && !props.material) {\n      applyProps(ref.current.material, {\n        color\n      });\n      ref.current.material.color.multiplyScalar(intensity);\n    }\n  }, [color, intensity, children, props.material]);\n\n  // Target light\n  React.useLayoutEffect(() => {\n    if (!props.rotation) ref.current.quaternion.identity();\n    if (target && !props.rotation) {\n      'boolean' === typeof target ? ref.current.lookAt(0, 0, 0) : ref.current.lookAt(Array.isArray(target) ? new THREE.Vector3(...target) : target);\n    }\n  }, [target, props.rotation]);\n\n  // Fix 2-dimensional scale\n  scale = Array.isArray(scale) && scale.length === 2 ? [scale[0], scale[1], 1] : scale;\n  return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n    ref: ref,\n    scale: scale\n  }, props), Form === 'circle' ? /*#__PURE__*/React.createElement(\"ringGeometry\", {\n    args: args ? args : [0, 0.5, 64]\n  }) : Form === 'ring' ? /*#__PURE__*/React.createElement(\"ringGeometry\", {\n    args: args ? args : [0.25, 0.5, 64]\n  }) : Form === 'rect' || Form === 'plane' ? /*#__PURE__*/React.createElement(\"planeGeometry\", {\n    args: args ? args : [1, 1]\n  }) : Form === 'box' ? /*#__PURE__*/React.createElement(\"boxGeometry\", {\n    args: args ? args : [1, 1, 1]\n  }) : /*#__PURE__*/React.createElement(Form, {\n    args: args\n  }), children ? children : /*#__PURE__*/React.createElement(\"meshBasicMaterial\", {\n    toneMapped: toneMapped,\n    map: map,\n    side: THREE.DoubleSide\n  }), light && /*#__PURE__*/React.createElement(\"pointLight\", _extends({\n    castShadow: true\n  }, light)));\n});\n\nexport { Lightformer };\n","export const CAR_SCENE_TYPE = Object.freeze({\r\n    /**\r\n     * 展厅\r\n     */\r\n    SHOWROOM: 'ShowRoom',\r\n    /**\r\n     * 道路\r\n     */\r\n    ROAD: 'ROAD',\r\n    /**\r\n     * 技术\r\n     */\r\n    TECH: 'Tech'\r\n  });\r\n\r\n  export const CAR_COLOR = Object.freeze({\r\n    /**\r\n     * 蓝色\r\n     */\r\n    BLUE: 0,\r\n    /**\r\n     * 银色\r\n     */\r\n    SLIVER: 1,\r\n      /**\r\n   * 痛车\r\n   */\r\n      OTHER: 2,\r\n  });\r\n\r\nexport const CAR_TECH_TYPE = Object.freeze({\r\n    /**\r\n     * 空气动力\r\n     */\r\n    FLOW: 1,\r\n    /**\r\n     * 雷达\r\n     */\r\n    LD: 2,\r\n    /**\r\n     * 影音娱乐\r\n     */\r\n    MEDEA: 0,\r\n});","/*\r\n * @Author: FMC\r\n * @Date: 2024-08-28 15:34:17\r\n * @LastEditors: FMC\r\n * @LastEditTime: 2024-08-28 15:40:04\r\n * @FilePath: \\fmc-personal-blog\\src\\example\\sbpk-map\\context\\sbpk-area-context.js\r\n * @Description: \r\n */\r\nimport { createContext } from 'react';\r\nimport { CAR_COLOR, CAR_SCENE_TYPE } from '../enum/enum';\r\n\r\nexport const MaxWellContext = createContext({\r\n    sceneType:CAR_SCENE_TYPE.SHOWROOM,\r\n    carColor:CAR_COLOR.BLUE,\r\n    techType:''\r\n});","/*\r\n * @Author: FMC\r\n * @Date: 2024-06-23 09:58:48\r\n * @LastEditors: FMC\r\n * @LastEditTime: 2024-09-27 22:13:22\r\n * @FilePath: \\fmc-personal-blog\\src\\example\\maxwell-car\\maxwell-car-three\\maxwell-car-base-env\\maxwell-car-base-env.jsx\r\n * @Description:基础环境\r\n */\r\nimport {Environment, OrbitControls} from \"@react-three/drei\";\r\nimport {useFrame, useThree} from \"@react-three/fiber\";\r\nimport TWEEN from \"@tweenjs/tween.js\";\r\nimport {useContext, useEffect, useRef, useState} from \"react\";\r\nimport * as THREE from \"three\";\r\nimport {MaxWellContext} from \"@/example/maxwell-car/context/maxwell-car-context.js\";\r\nimport {CAR_SCENE_TYPE, CAR_TECH_TYPE} from \"@/example/maxwell-car/enum/enum.js\";\r\n\r\nfunction MaxWellCarBaeEnv() {\r\n    const isTest=false;\r\n    const controls = useRef(null);\r\n    const [controlsObj,setControlsObj]=useState({\r\n        maxZoom:Infinity\r\n    });\r\n    const geo = new THREE.BoxGeometry();\r\n    geo.translate(0, 2, 0);\r\n    const r = useRef(null);\r\n    const { sceneType, techType} = useContext(MaxWellContext);\r\n    const state = useThree();\r\n    useFrame((state) => {\r\n        const {camera} = state;\r\n        TWEEN.update();\r\n        // if(sceneType===CAR_SCENE_TYPE.TECH){\r\n        //     console.log(\"camera\", camera);\r\n        //     console.log(\"target\", controls.current.target);\r\n        // }\r\n        // console.log('stsjhakj',clock.getDelta())\r\n        // console.log(\"camera\", camera);\r\n        // // const { target, matrix } = camera;\r\n        // console.log(\"target\", controls.current.target);\r\n        // console.log(\"matrix\", matrix);\r\n    });\r\n    useEffect(() => {\r\n        const {camera} = state;\r\n        if (controls.current) {\r\n            if(isTest)return;\r\n            if (sceneType === CAR_SCENE_TYPE.SHOWROOM) {\r\n                camera.position.set(-13.29, 2.59, 2.98);\r\n                controls.current.target = new THREE.Vector3(0.86, 1.36, 2.019);\r\n                controls.current.maxDistance=25;\r\n                controls.current.minDistance=8;\r\n                controls.current.minPolarAngle =-Math.PI * 0.5\r\n                controls.current.maxPolarAngle =Math.PI * 0.5\r\n\r\n                controls.current.minAzimuthAngle=-Infinity\r\n                controls.current.maxAzimuthAngle=Infinity\r\n\r\n            }\r\n            if(sceneType===CAR_SCENE_TYPE.ROAD) {\r\n                camera.position.set(-13.29, 2.59, 2.98);\r\n                controls.current.target = new THREE.Vector3(0.86, 1.36, 2.019);\r\n\r\n                controls.current.maxZoom=1.0;\r\n                controls.current.maxDistance=20;\r\n                controls.current.minDistance=8;\r\n                controls.current.minAzimuthAngle=-Math.PI * 0.5\r\n                controls.current.maxAzimuthAngle=Math.PI * 0.5\r\n\r\n                controls.current.minPolarAngle =-Math.PI * 0.5\r\n                controls.current.maxPolarAngle =Math.PI * 0.5\r\n            }\r\n            if(sceneType===CAR_SCENE_TYPE.TECH) {\r\n                switch(techType) {\r\n                    case CAR_TECH_TYPE.MEDEA:\r\n                        camera.position.set(-9.58, 4.59,  26.78);\r\n                        controls.current.target = new THREE.Vector3(0.86, 1.36, 2.019);\r\n                        controls.current.maxZoom=1.0;\r\n                        controls.current.maxDistance=30;\r\n                        controls.current.minDistance=8;\r\n                        controls.current.minPolarAngle =-Math.PI * 0.5\r\n                        controls.current.maxPolarAngle =Math.PI * 0.5\r\n\r\n                        controls.current.minAzimuthAngle=-Infinity\r\n                        controls.current.maxAzimuthAngle=Infinity\r\n                        break;\r\n                    case CAR_TECH_TYPE.LD:\r\n                        camera.position.set(-16.18, 12.33,  30.54);\r\n                        controls.current.target = new THREE.Vector3(0.86, 1.36, 2.019);\r\n\r\n                        controls.current.maxZoom=1.0;\r\n                        controls.current.maxDistance=40;\r\n                        controls.current.minDistance=15;\r\n\r\n\r\n                        controls.current.minAzimuthAngle=-Math.PI * 0.5\r\n                        controls.current.maxAzimuthAngle=Math.PI * 0.5\r\n\r\n                        controls.current.minPolarAngle =-Math.PI * 0.5\r\n                        controls.current.maxPolarAngle =Math.PI * 0.5\r\n                        break;\r\n                    case CAR_TECH_TYPE.FLOW:\r\n                        camera.position.set(-9.58, 4.59,  26.78);\r\n                        controls.current.target = new THREE.Vector3(0.86, 1.36, 2.019);\r\n                        controls.current.maxZoom=1.0;\r\n                        controls.current.maxDistance=30;\r\n                        controls.current.minDistance=8;\r\n                        controls.current.minPolarAngle =-Math.PI * 0.5\r\n                        controls.current.maxPolarAngle =Math.PI * 0.5\r\n\r\n                        controls.current.minAzimuthAngle=-Infinity\r\n                        controls.current.maxAzimuthAngle=Infinity\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }, [sceneType,techType]);\r\n\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            {/* <Perf position=\"top-left\"/> */}\r\n            {/* <OrbitControls\r\n        ref={controls}\r\n        makeDefault={true}\r\n        maxZoom={5.0}\r\n        enablePan={false}\r\n        maxDistance={10}\r\n        minDistance={1.0}\r\n        minAzimuthAngle={-Math.PI * 0.5}\r\n        maxAzimuthAngle={Math.PI * 0.5}\r\n        minPolarAngle={-Math.PI * 0.5}\r\n        maxPolarAngle={Math.PI * 0.5}\r\n      /> */}\r\n            {/* <group ref={r}>\r\n        <mesh geometry={geo}>\r\n          <meshBasicMaterial color={\"red\"}></meshBasicMaterial>\r\n        </mesh>\r\n      </group> */}\r\n            <OrbitControls ref={controls} makeDefault={true} />\r\n            {/* <OrbitControls enablePan={false} enableZoom={false} minPolarAngle={Math.PI / 2.2} maxPolarAngle={Math.PI / 2.2} /> */}\r\n            {/* <Environment files=\"/envMap/venice_sunset_1k.hdr\"></Environment> */}\r\n            {/*{sceneType===CAR_SCENE_TYPE.ROAD&&(*/}\r\n            {/*    <Environment files=\"/envMap/fusion_1K_9097b102-cdb4-427a-a0a8-38aff39f6b6b.exr\"*/}\r\n            {/*                 background={false} >*/}\r\n            {/*    </Environment>*/}\r\n            {/*)}*/}\r\n            <Environment files= { __VITE_URL__ + \"/envMap/abstract-lighting-ray-room-style-01_2K_f478fdd1-243a-4cc8-b454-0f522f1afb6b.exr\" }\r\n                         background={false} >\r\n            </Environment>\r\n\r\n        </>\r\n    );\r\n}\r\n\r\nexport default MaxWellCarBaeEnv;\r\n","/**\n * postprocessing v6.29.3 build Sun Jan 01 2023\n * https://github.com/pmndrs/postprocessing\n * Copyright 2015-2023 Raoul van Rüschen\n * @license Zlib\n */\n\n// src/core/Disposable.js\nvar Disposable = class {\n  dispose() {\n  }\n};\n\n// src/core/EffectComposer.js\nimport {\n  DepthStencilFormat,\n  DepthTexture,\n  LinearFilter as LinearFilter2,\n  REVISION as REVISION6,\n  sRGBEncoding as sRGBEncoding8,\n  UnsignedByteType as UnsignedByteType12,\n  UnsignedIntType,\n  UnsignedInt248Type,\n  Vector2 as Vector217,\n  WebGLMultisampleRenderTarget,\n  WebGLRenderTarget as WebGLRenderTarget13\n} from \"three\";\n\n// src/passes/AdaptiveLuminancePass.js\nimport { NearestFilter, WebGLRenderTarget as WebGLRenderTarget3 } from \"three\";\n\n// src/materials/AdaptiveLuminanceMaterial.js\nimport { NoBlending, REVISION, ShaderMaterial, Uniform } from \"three\";\n\n// src/materials/glsl/adaptive-luminance.frag\nvar adaptive_luminance_default = \"#include <packing>\\n#define packFloatToRGBA(v) packDepthToRGBA(v)\\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\\nuniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));\\n#if __VERSION__ < 300\\nfloat l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;\\n#else\\nfloat l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;\\n#endif\\nl0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}\";\n\n// src/materials/glsl/common.vert\nvar common_default = \"varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/AdaptiveLuminanceMaterial.js\nvar AdaptiveLuminanceMaterial = class extends ShaderMaterial {\n  constructor() {\n    super({\n      name: \"AdaptiveLuminanceMaterial\",\n      defines: {\n        THREE_REVISION: REVISION.replace(/\\D+/g, \"\"),\n        MIP_LEVEL_1X1: \"0.0\"\n      },\n      uniforms: {\n        luminanceBuffer0: new Uniform(null),\n        luminanceBuffer1: new Uniform(null),\n        minLuminance: new Uniform(0.01),\n        deltaTime: new Uniform(0),\n        tau: new Uniform(1)\n      },\n      extensions: {\n        shaderTextureLOD: true\n      },\n      blending: NoBlending,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: adaptive_luminance_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n  }\n  set luminanceBuffer0(value) {\n    this.uniforms.luminanceBuffer0.value = value;\n  }\n  setLuminanceBuffer0(value) {\n    this.uniforms.luminanceBuffer0.value = value;\n  }\n  set luminanceBuffer1(value) {\n    this.uniforms.luminanceBuffer1.value = value;\n  }\n  setLuminanceBuffer1(value) {\n    this.uniforms.luminanceBuffer1.value = value;\n  }\n  set mipLevel1x1(value) {\n    this.defines.MIP_LEVEL_1X1 = value.toFixed(1);\n    this.needsUpdate = true;\n  }\n  setMipLevel1x1(value) {\n    this.mipLevel1x1 = value;\n  }\n  set deltaTime(value) {\n    this.uniforms.deltaTime.value = value;\n  }\n  setDeltaTime(value) {\n    this.uniforms.deltaTime.value = value;\n  }\n  get minLuminance() {\n    return this.uniforms.minLuminance.value;\n  }\n  set minLuminance(value) {\n    this.uniforms.minLuminance.value = value;\n  }\n  getMinLuminance() {\n    return this.uniforms.minLuminance.value;\n  }\n  setMinLuminance(value) {\n    this.uniforms.minLuminance.value = value;\n  }\n  get adaptationRate() {\n    return this.uniforms.tau.value;\n  }\n  set adaptationRate(value) {\n    this.uniforms.tau.value = value;\n  }\n  getAdaptationRate() {\n    return this.uniforms.tau.value;\n  }\n  setAdaptationRate(value) {\n    this.uniforms.tau.value = value;\n  }\n};\n\n// src/materials/BokehMaterial.js\nimport { NoBlending as NoBlending2, ShaderMaterial as ShaderMaterial2, Uniform as Uniform2, Vector2 } from \"three\";\n\n// src/materials/glsl/convolution.bokeh.frag\nvar convolution_bokeh_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\n#if PASS == 1\\nuniform vec4 kernel64[32];\\n#else\\nuniform vec4 kernel16[8];\\n#endif\\nuniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;varying vec2 vUv;void main(){\\n#ifdef FOREGROUND\\nvec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;\\n#else\\nfloat CoC=texture2D(cocBuffer,vUv).g*scale;\\n#endif\\nif(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\\n#ifdef FOREGROUND\\nvec2 step=texelSize*max(CoC,CoCNearFar.g*scale);\\n#else\\nvec2 step=texelSize*CoC;\\n#endif\\n#if PASS == 1\\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;\\n#else\\nvec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;\\n#endif\\n}}\";\n\n// src/materials/BokehMaterial.js\nvar BokehMaterial = class extends ShaderMaterial2 {\n  constructor(fill = false, foreground = false) {\n    super({\n      name: \"BokehMaterial\",\n      defines: {\n        PASS: fill ? \"2\" : \"1\"\n      },\n      uniforms: {\n        inputBuffer: new Uniform2(null),\n        cocBuffer: new Uniform2(null),\n        texelSize: new Uniform2(new Vector2()),\n        kernel64: new Uniform2(null),\n        kernel16: new Uniform2(null),\n        scale: new Uniform2(1)\n      },\n      blending: NoBlending2,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: convolution_bokeh_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n    if (foreground) {\n      this.defines.FOREGROUND = \"1\";\n    }\n    this.generateKernel();\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  set cocBuffer(value) {\n    this.uniforms.cocBuffer.value = value;\n  }\n  setCoCBuffer(value) {\n    this.uniforms.cocBuffer.value = value;\n  }\n  get scale() {\n    return this.uniforms.scale.value;\n  }\n  set scale(value) {\n    this.uniforms.scale.value = value;\n  }\n  getScale(value) {\n    return this.scale;\n  }\n  setScale(value) {\n    this.scale = value;\n  }\n  generateKernel() {\n    const GOLDEN_ANGLE = 2.39996323;\n    const points64 = new Float64Array(128);\n    const points16 = new Float64Array(32);\n    let i64 = 0, i16 = 0;\n    for (let i = 0, sqrt80 = Math.sqrt(80); i < 80; ++i) {\n      const theta = i * GOLDEN_ANGLE;\n      const r = Math.sqrt(i) / sqrt80;\n      const u = r * Math.cos(theta), v3 = r * Math.sin(theta);\n      if (i % 5 === 0) {\n        points16[i16++] = u;\n        points16[i16++] = v3;\n      } else {\n        points64[i64++] = u;\n        points64[i64++] = v3;\n      }\n    }\n    this.uniforms.kernel64.value = points64;\n    this.uniforms.kernel16.value = points16;\n  }\n  setTexelSize(x, y) {\n    this.uniforms.texelSize.value.set(x, y);\n  }\n  setSize(width, height) {\n    this.uniforms.texelSize.value.set(1 / width, 1 / height);\n  }\n};\n\n// src/materials/BoxBlurMaterial.js\nimport { NoBlending as NoBlending3, PerspectiveCamera, ShaderMaterial as ShaderMaterial3, Uniform as Uniform3, Vector2 as Vector22 } from \"three\";\n\n// src/utils/getTextureDecoding.js\nimport {\n  LinearEncoding,\n  REVISION as REVISION2,\n  RGBAFormat,\n  sRGBEncoding,\n  UnsignedByteType\n} from \"three\";\nfunction getTextureDecoding(texture, isWebGL2) {\n  let decoding = \"texel\";\n  if (texture !== null) {\n    const revision = Number.parseInt(REVISION2);\n    const sRGB8Alpha8 = isWebGL2 && revision >= 133 && revision !== 135 && texture.format === RGBAFormat && texture.type === UnsignedByteType && texture.encoding === sRGBEncoding;\n    if (!sRGB8Alpha8) {\n      switch (texture.encoding) {\n        case sRGBEncoding:\n          decoding = \"sRGBToLinear(texel)\";\n          break;\n        case LinearEncoding:\n          decoding = \"texel\";\n          break;\n        default:\n          throw new Error(`Unsupported encoding: ${texture.encoding}`);\n      }\n    }\n  }\n  return decoding;\n}\n\n// src/utils/orthographicDepthToViewZ.js\nfunction orthographicDepthToViewZ(depth, near, far) {\n  return depth * (near - far) - near;\n}\n\n// src/utils/viewZToOrthographicDepth.js\nfunction viewZToOrthographicDepth(viewZ, near, far) {\n  return Math.min(Math.max((viewZ + near) / (near - far), 0), 1);\n}\n\n// src/materials/glsl/convolution.box.frag\nvar convolution_box_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\n#ifdef BILATERAL\\n#include <packing>\\nuniform vec2 cameraNearFar;\\n#ifdef NORMAL_DEPTH\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D normalDepthBuffer;\\n#else\\nuniform mediump sampler2D normalDepthBuffer;\\n#endif\\nfloat readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}\\n#else\\n#if DEPTH_PACKING == 3201\\nuniform lowp sampler2D depthBuffer;\\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nfloat readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}\\n#endif\\nfloat getViewZ(const in float depth){\\n#ifdef PERSPECTIVE_CAMERA\\nreturn perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\\n#else\\nreturn orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\\n#endif\\n}\\n#ifdef PERSPECTIVE_CAMERA\\n#define linearDepth(v) viewZToOrthographicDepth(getViewZ(readDepth(v)), cameraNearFar.x, cameraNearFar.y)\\n#else\\n#define linearDepth(v) readDepth(v)\\n#endif\\n#endif\\n#define getTexel(v) texture2D(inputBuffer, v)\\n#if KERNEL_SIZE == 3\\nvarying vec2 vUv00,vUv01,vUv02;varying vec2 vUv03,vUv04,vUv05;varying vec2 vUv06,vUv07,vUv08;\\n#elif KERNEL_SIZE == 5 && MAX_VARYING_VECTORS >= 13\\nvarying vec2 vUv00,vUv01,vUv02,vUv03,vUv04;varying vec2 vUv05,vUv06,vUv07,vUv08,vUv09;varying vec2 vUv10,vUv11,vUv12,vUv13,vUv14;varying vec2 vUv15,vUv16,vUv17,vUv18,vUv19;varying vec2 vUv20,vUv21,vUv22,vUv23,vUv24;\\n#else\\nuniform vec2 texelSize;uniform float scale;varying vec2 vUv;\\n#endif\\nvoid main(){\\n#if KERNEL_SIZE == 3\\nvec4 c[]=vec4[KERNEL_SIZE_SQ](getTexel(vUv00),getTexel(vUv01),getTexel(vUv02),getTexel(vUv03),getTexel(vUv04),getTexel(vUv05),getTexel(vUv06),getTexel(vUv07),getTexel(vUv08));\\n#ifdef BILATERAL\\nfloat z[]=float[KERNEL_SIZE_SQ](linearDepth(vUv00),linearDepth(vUv01),linearDepth(vUv02),linearDepth(vUv03),linearDepth(vUv04),linearDepth(vUv05),linearDepth(vUv06),linearDepth(vUv07),linearDepth(vUv08));\\n#endif\\n#elif KERNEL_SIZE == 5 && MAX_VARYING_VECTORS >= 13\\nvec4 c[]=vec4[KERNEL_SIZE_SQ](getTexel(vUv00),getTexel(vUv01),getTexel(vUv02),getTexel(vUv03),getTexel(vUv04),getTexel(vUv05),getTexel(vUv06),getTexel(vUv07),getTexel(vUv08),getTexel(vUv09),getTexel(vUv10),getTexel(vUv11),getTexel(vUv12),getTexel(vUv13),getTexel(vUv14),getTexel(vUv15),getTexel(vUv16),getTexel(vUv17),getTexel(vUv18),getTexel(vUv19),getTexel(vUv20),getTexel(vUv21),getTexel(vUv22),getTexel(vUv23),getTexel(vUv24));\\n#ifdef BILATERAL\\nfloat z[]=float[KERNEL_SIZE_SQ](linearDepth(vUv00),linearDepth(vUv01),linearDepth(vUv02),linearDepth(vUv03),linearDepth(vUv04),linearDepth(vUv05),linearDepth(vUv06),linearDepth(vUv07),linearDepth(vUv08),linearDepth(vUv09),linearDepth(vUv10),linearDepth(vUv11),linearDepth(vUv12),linearDepth(vUv13),linearDepth(vUv14),linearDepth(vUv15),linearDepth(vUv16),linearDepth(vUv17),linearDepth(vUv18),linearDepth(vUv19),linearDepth(vUv20),linearDepth(vUv21),linearDepth(vUv22),linearDepth(vUv23),linearDepth(vUv24));\\n#endif\\n#endif\\nvec4 result=vec4(0.0);\\n#ifdef BILATERAL\\nfloat w=0.0;\\n#if KERNEL_SIZE == 3 || (KERNEL_SIZE == 5 && MAX_VARYING_VECTORS >= 13)\\nfloat centerDepth=z[KERNEL_SIZE_SQ_HALF];for(int i=0;i<KERNEL_SIZE_SQ;++i){float d=step(abs(z[i]-centerDepth),DISTANCE_THRESHOLD);result+=c[i]*d;w+=d;}\\n#else\\nfloat centerDepth=linearDepth(vUv);vec2 s=texelSize*scale;for(int x=-KERNEL_SIZE_HALF;x<=KERNEL_SIZE_HALF;++x){for(int y=-KERNEL_SIZE_HALF;y<=KERNEL_SIZE_HALF;++y){vec2 coords=vUv+vec2(x,y)*s;vec4 c=getTexel(coords);float z=(x==0&&y==0)?centerDepth:linearDepth(coords);float d=step(abs(z-centerDepth),DISTANCE_THRESHOLD);result+=c*d;w+=d;}}\\n#endif\\ngl_FragColor=result/max(w,1.0);\\n#else\\n#if KERNEL_SIZE == 3 || (KERNEL_SIZE == 5 && MAX_VARYING_VECTORS >= 13)\\nfor(int i=0;i<KERNEL_SIZE_SQ;++i){result+=c[i];}\\n#else\\nvec2 s=texelSize*scale;for(int x=-KERNEL_SIZE_HALF;x<=KERNEL_SIZE_HALF;++x){for(int y=-KERNEL_SIZE_HALF;y<=KERNEL_SIZE_HALF;++y){result+=getTexel(uv+vec2(x,y)*s);}}\\n#endif\\ngl_FragColor=result*INV_KERNEL_SIZE_SQ;\\n#endif\\n}\";\n\n// src/materials/glsl/convolution.box.vert\nvar convolution_box_default2 = \"uniform vec2 texelSize;uniform float scale;\\n#if KERNEL_SIZE == 3\\nvarying vec2 vUv00,vUv01,vUv02;varying vec2 vUv03,vUv04,vUv05;varying vec2 vUv06,vUv07,vUv08;\\n#elif KERNEL_SIZE == 5 && MAX_VARYING_VECTORS >= 13\\nvarying vec2 vUv00,vUv01,vUv02,vUv03,vUv04;varying vec2 vUv05,vUv06,vUv07,vUv08,vUv09;varying vec2 vUv10,vUv11,vUv12,vUv13,vUv14;varying vec2 vUv15,vUv16,vUv17,vUv18,vUv19;varying vec2 vUv20,vUv21,vUv22,vUv23,vUv24;\\n#else\\nvarying vec2 vUv;\\n#endif\\nvoid main(){vec2 uv=position.xy*0.5+0.5;\\n#if KERNEL_SIZE == 3\\nvec2 s=texelSize*scale;vUv00=uv+s*vec2(-1.0,-1.0);vUv01=uv+s*vec2(0.0,-1.0);vUv02=uv+s*vec2(1.0,-1.0);vUv03=uv+s*vec2(-1.0,0.0);vUv04=uv;vUv05=uv+s*vec2(1.0,0.0);vUv06=uv+s*vec2(-1.0,1.0);vUv07=uv+s*vec2(0.0,1.0);vUv08=uv+s*vec2(1.0,1.0);\\n#elif KERNEL_SIZE == 5\\nvec2 s=texelSize*scale;vUv00=uv+s*vec2(-2.0,-2.0);vUv01=uv+s*vec2(-1.0,-2.0);vUv02=uv+s*vec2(0.0,-2.0);vUv03=uv+s*vec2(1.0,-2.0);vUv04=uv+s*vec2(2.0,-2.0);vUv05=uv+s*vec2(-2.0,-1.0);vUv06=uv+s*vec2(-1.0,-1.0);vUv07=uv+s*vec2(0.0,-1.0);vUv08=uv+s*vec2(1.0,-1.0);vUv09=uv+s*vec2(2.0,-1.0);vUv10=uv+s*vec2(-2.0,0.0);vUv11=uv+s*vec2(-1.0,0.0);vUv12=uv;vUv13=uv+s*vec2(1.0,0.0);vUv14=uv+s*vec2(2.0,0.0);vUv15=uv+s*vec2(-2.0,1.0);vUv16=uv+s*vec2(-1.0,1.0);vUv17=uv+s*vec2(0.0,1.0);vUv18=uv+s*vec2(1.0,1.0);vUv19=uv+s*vec2(2.0,1.0);vUv20=uv+s*vec2(-2.0,2.0);vUv21=uv+s*vec2(-1.0,2.0);vUv22=uv+s*vec2(0.0,2.0);vUv23=uv+s*vec2(1.0,2.0);vUv24=uv+s*vec2(2.0,2.0);\\n#else\\nvUv=uv;\\n#endif\\ngl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/BoxBlurMaterial.js\nvar BoxBlurMaterial = class extends ShaderMaterial3 {\n  constructor({ bilateral = false, kernelSize = 5 } = {}) {\n    super({\n      name: \"BoxBlurMaterial\",\n      defines: {\n        DEPTH_PACKING: \"0\",\n        DISTANCE_THRESHOLD: \"0.1\"\n      },\n      uniforms: {\n        inputBuffer: new Uniform3(null),\n        depthBuffer: new Uniform3(null),\n        normalDepthBuffer: new Uniform3(null),\n        texelSize: new Uniform3(new Vector22()),\n        cameraNearFar: new Uniform3(new Vector22()),\n        scale: new Uniform3(1)\n      },\n      blending: NoBlending3,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: convolution_box_default,\n      vertexShader: convolution_box_default2\n    });\n    this.toneMapped = false;\n    this.bilateral = bilateral;\n    this.kernelSize = kernelSize;\n    this.maxVaryingVectors = 8;\n  }\n  set maxVaryingVectors(value) {\n    this.defines.MAX_VARYING_VECTORS = value.toFixed(0);\n  }\n  get kernelSize() {\n    return Number(this.defines.KERNEL_SIZE);\n  }\n  set kernelSize(value) {\n    if (value % 2 === 0) {\n      throw new Error(\"The kernel size must be an odd number\");\n    }\n    this.defines.KERNEL_SIZE = value.toFixed(0);\n    this.defines.KERNEL_SIZE_HALF = Math.floor(value / 2).toFixed(0);\n    this.defines.KERNEL_SIZE_SQ = (value ** 2).toFixed(0);\n    this.defines.KERNEL_SIZE_SQ_HALF = Math.floor(value ** 2 / 2).toFixed(0);\n    this.defines.INV_KERNEL_SIZE_SQ = (1 / value ** 2).toFixed(6);\n    this.needsUpdate = true;\n  }\n  get scale() {\n    return this.uniforms.scale.value;\n  }\n  set scale(value) {\n    this.uniforms.scale.value = value;\n  }\n  get near() {\n    return this.uniforms.cameraNearFar.value.x;\n  }\n  get far() {\n    return this.uniforms.cameraNearFar.value.y;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  set depthBuffer(value) {\n    this.uniforms.depthBuffer.value = value;\n  }\n  set normalDepthBuffer(value) {\n    this.uniforms.normalDepthBuffer.value = value;\n    if (value !== null) {\n      this.defines.NORMAL_DEPTH = \"1\";\n    } else {\n      delete this.defines.NORMAL_DEPTH;\n    }\n    this.needsUpdate = true;\n  }\n  set depthPacking(value) {\n    this.defines.DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  get bilateral() {\n    return this.defines.BILATERAL !== void 0;\n  }\n  set bilateral(value) {\n    if (value !== null) {\n      this.defines.BILATERAL = \"1\";\n    } else {\n      delete this.defines.BILATERAL;\n    }\n    this.needsUpdate = true;\n  }\n  get worldDistanceThreshold() {\n    return -orthographicDepthToViewZ(Number(this.defines.DISTANCE_THRESHOLD), this.near, this.far);\n  }\n  set worldDistanceThreshold(value) {\n    const threshold = viewZToOrthographicDepth(-value, this.near, this.far);\n    this.defines.DISTANCE_THRESHOLD = threshold.toFixed(12);\n    this.needsUpdate = true;\n  }\n  copyCameraSettings(camera) {\n    if (camera) {\n      this.uniforms.cameraNearFar.value.set(camera.near, camera.far);\n      if (camera instanceof PerspectiveCamera) {\n        this.defines.PERSPECTIVE_CAMERA = \"1\";\n      } else {\n        delete this.defines.PERSPECTIVE_CAMERA;\n      }\n      this.needsUpdate = true;\n    }\n  }\n  setSize(width, height) {\n    this.uniforms.texelSize.value.set(1 / width, 1 / height);\n  }\n};\n\n// src/materials/CircleOfConfusionMaterial.js\nimport { BasicDepthPacking, NoBlending as NoBlending4, PerspectiveCamera as PerspectiveCamera2, ShaderMaterial as ShaderMaterial4, Uniform as Uniform4 } from \"three\";\n\n// src/materials/glsl/circle-of-confusion.frag\nvar circle_of_confusion_default = \"#include <common>\\n#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nuniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}void main(){float depth=readDepth(vUv);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearDepth=depth;\\n#endif\\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}\";\n\n// src/materials/CircleOfConfusionMaterial.js\nvar CircleOfConfusionMaterial = class extends ShaderMaterial4 {\n  constructor(camera) {\n    super({\n      name: \"CircleOfConfusionMaterial\",\n      defines: {\n        DEPTH_PACKING: \"0\"\n      },\n      uniforms: {\n        depthBuffer: new Uniform4(null),\n        focusDistance: new Uniform4(0),\n        focusRange: new Uniform4(0),\n        cameraNear: new Uniform4(0.3),\n        cameraFar: new Uniform4(1e3)\n      },\n      blending: NoBlending4,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: circle_of_confusion_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n    this.uniforms.focalLength = this.uniforms.focusRange;\n    this.copyCameraSettings(camera);\n  }\n  get near() {\n    return this.uniforms.cameraNear.value;\n  }\n  get far() {\n    return this.uniforms.cameraFar.value;\n  }\n  set depthBuffer(value) {\n    this.uniforms.depthBuffer.value = value;\n  }\n  set depthPacking(value) {\n    this.defines.DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer(buffer, depthPacking = BasicDepthPacking) {\n    this.depthBuffer = buffer;\n    this.depthPacking = depthPacking;\n  }\n  get focusDistance() {\n    return this.uniforms.focusDistance.value;\n  }\n  set focusDistance(value) {\n    this.uniforms.focusDistance.value = value;\n  }\n  get worldFocusDistance() {\n    return -orthographicDepthToViewZ(this.focusDistance, this.near, this.far);\n  }\n  set worldFocusDistance(value) {\n    this.focusDistance = viewZToOrthographicDepth(-value, this.near, this.far);\n  }\n  getFocusDistance(value) {\n    this.uniforms.focusDistance.value = value;\n  }\n  setFocusDistance(value) {\n    this.uniforms.focusDistance.value = value;\n  }\n  get focalLength() {\n    return this.focusRange;\n  }\n  set focalLength(value) {\n    this.focusRange = value;\n  }\n  get focusRange() {\n    return this.uniforms.focusRange.value;\n  }\n  set focusRange(value) {\n    this.uniforms.focusRange.value = value;\n  }\n  get worldFocusRange() {\n    return -orthographicDepthToViewZ(this.focusRange, this.near, this.far);\n  }\n  set worldFocusRange(value) {\n    this.focusRange = viewZToOrthographicDepth(-value, this.near, this.far);\n  }\n  getFocalLength(value) {\n    return this.focusRange;\n  }\n  setFocalLength(value) {\n    this.focusRange = value;\n  }\n  adoptCameraSettings(camera) {\n    this.copyCameraSettings(camera);\n  }\n  copyCameraSettings(camera) {\n    if (camera) {\n      this.uniforms.cameraNear.value = camera.near;\n      this.uniforms.cameraFar.value = camera.far;\n      if (camera instanceof PerspectiveCamera2) {\n        this.defines.PERSPECTIVE_CAMERA = \"1\";\n      } else {\n        delete this.defines.PERSPECTIVE_CAMERA;\n      }\n      this.needsUpdate = true;\n    }\n  }\n};\n\n// src/materials/KawaseBlurMaterial.js\nimport { NoBlending as NoBlending5, ShaderMaterial as ShaderMaterial5, Uniform as Uniform5, Vector4 } from \"three\";\n\n// src/enums/BlendFunction.js\nvar BlendFunction = {\n  SKIP: 9,\n  SET: 30,\n  ADD: 0,\n  ALPHA: 1,\n  AVERAGE: 2,\n  COLOR: 3,\n  COLOR_BURN: 4,\n  COLOR_DODGE: 5,\n  DARKEN: 6,\n  DIFFERENCE: 7,\n  DIVIDE: 8,\n  DST: 9,\n  EXCLUSION: 10,\n  HARD_LIGHT: 11,\n  HARD_MIX: 12,\n  HUE: 13,\n  INVERT: 14,\n  INVERT_RGB: 15,\n  LIGHTEN: 16,\n  LINEAR_BURN: 17,\n  LINEAR_DODGE: 18,\n  LINEAR_LIGHT: 19,\n  LUMINOSITY: 20,\n  MULTIPLY: 21,\n  NEGATION: 22,\n  NORMAL: 23,\n  OVERLAY: 24,\n  PIN_LIGHT: 25,\n  REFLECT: 26,\n  SATURATION: 27,\n  SCREEN: 28,\n  SOFT_LIGHT: 29,\n  SRC: 30,\n  SUBTRACT: 31,\n  VIVID_LIGHT: 32\n};\n\n// src/enums/ColorChannel.js\nvar ColorChannel = {\n  RED: 0,\n  GREEN: 1,\n  BLUE: 2,\n  ALPHA: 3\n};\n\n// src/enums/DepthCopyMode.js\nvar DepthCopyMode = {\n  FULL: 0,\n  SINGLE: 1\n};\n\n// src/enums/DepthTestStrategy.js\nvar DepthTestStrategy = {\n  DEFAULT: 0,\n  KEEP_MAX_DEPTH: 1,\n  DISCARD_MAX_DEPTH: 2\n};\n\n// src/enums/EdgeDetectionMode.js\nvar EdgeDetectionMode = {\n  DEPTH: 0,\n  LUMA: 1,\n  COLOR: 2\n};\n\n// src/enums/EffectAttribute.js\nvar EffectAttribute = {\n  NONE: 0,\n  DEPTH: 1,\n  CONVOLUTION: 2\n};\n\n// src/enums/EffectShaderSection.js\nvar EffectShaderSection = {\n  FRAGMENT_HEAD: \"FRAGMENT_HEAD\",\n  FRAGMENT_MAIN_UV: \"FRAGMENT_MAIN_UV\",\n  FRAGMENT_MAIN_IMAGE: \"FRAGMENT_MAIN_IMAGE\",\n  VERTEX_HEAD: \"VERTEX_HEAD\",\n  VERTEX_MAIN_SUPPORT: \"VERTEX_MAIN_SUPPORT\"\n};\n\n// src/enums/GlitchMode.js\nvar GlitchMode = {\n  DISABLED: 0,\n  SPORADIC: 1,\n  CONSTANT_MILD: 2,\n  CONSTANT_WILD: 3\n};\n\n// src/enums/KernelSize.js\nvar KernelSize = {\n  VERY_SMALL: 0,\n  SMALL: 1,\n  MEDIUM: 2,\n  LARGE: 3,\n  VERY_LARGE: 4,\n  HUGE: 5\n};\n\n// src/enums/LUTOperation.js\nvar LUTOperation = {\n  SCALE_UP: \"lut.scaleup\"\n};\n\n// src/enums/MaskFunction.js\nvar MaskFunction = {\n  DISCARD: 0,\n  MULTIPLY: 1,\n  MULTIPLY_RGB_SET_ALPHA: 2\n};\n\n// src/enums/PredicationMode.js\nvar PredicationMode = {\n  DISABLED: 0,\n  DEPTH: 1,\n  CUSTOM: 2\n};\n\n// src/enums/SMAAPreset.js\nvar SMAAPreset = {\n  LOW: 0,\n  MEDIUM: 1,\n  HIGH: 2,\n  ULTRA: 3\n};\n\n// src/enums/ToneMappingMode.js\nvar ToneMappingMode = {\n  REINHARD: 0,\n  REINHARD2: 1,\n  REINHARD2_ADAPTIVE: 2,\n  OPTIMIZED_CINEON: 3,\n  ACES_FILMIC: 4\n};\n\n// src/enums/VignetteTechnique.js\nvar VignetteTechnique = {\n  DEFAULT: 0,\n  ESKIL: 1\n};\n\n// src/enums/WebGLExtension.js\nvar WebGLExtension = {\n  DERIVATIVES: \"derivatives\",\n  FRAG_DEPTH: \"fragDepth\",\n  DRAW_BUFFERS: \"drawBuffers\",\n  SHADER_TEXTURE_LOD: \"shaderTextureLOD\"\n};\n\n// src/materials/glsl/convolution.kawase.frag\nvar convolution_kawase_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\\n#include <encodings_fragment>\\n}\";\n\n// src/materials/glsl/convolution.kawase.vert\nvar convolution_kawase_default2 = \"uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/KawaseBlurMaterial.js\nvar kernelPresets = [\n  new Float32Array([0, 0]),\n  new Float32Array([0, 1, 1]),\n  new Float32Array([0, 1, 1, 2]),\n  new Float32Array([0, 1, 2, 2, 3]),\n  new Float32Array([0, 1, 2, 3, 4, 4, 5]),\n  new Float32Array([0, 1, 2, 3, 4, 5, 7, 8, 9, 10])\n];\nvar KawaseBlurMaterial = class extends ShaderMaterial5 {\n  constructor(texelSize = new Vector4()) {\n    super({\n      name: \"KawaseBlurMaterial\",\n      uniforms: {\n        inputBuffer: new Uniform5(null),\n        texelSize: new Uniform5(new Vector4()),\n        scale: new Uniform5(1),\n        kernel: new Uniform5(0)\n      },\n      blending: NoBlending5,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: convolution_kawase_default,\n      vertexShader: convolution_kawase_default2\n    });\n    this.toneMapped = false;\n    this.setTexelSize(texelSize.x, texelSize.y);\n    this.kernelSize = KernelSize.MEDIUM;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.inputBuffer = value;\n  }\n  get kernelSequence() {\n    return kernelPresets[this.kernelSize];\n  }\n  get scale() {\n    return this.uniforms.scale.value;\n  }\n  set scale(value) {\n    this.uniforms.scale.value = value;\n  }\n  getScale() {\n    return this.uniforms.scale.value;\n  }\n  setScale(value) {\n    this.uniforms.scale.value = value;\n  }\n  getKernel() {\n    return null;\n  }\n  get kernel() {\n    return this.uniforms.kernel.value;\n  }\n  set kernel(value) {\n    this.uniforms.kernel.value = value;\n  }\n  setKernel(value) {\n    this.kernel = value;\n  }\n  setTexelSize(x, y) {\n    this.uniforms.texelSize.value.set(x, y, x * 0.5, y * 0.5);\n  }\n  setSize(width, height) {\n    const x = 1 / width, y = 1 / height;\n    this.uniforms.texelSize.value.set(x, y, x * 0.5, y * 0.5);\n  }\n};\n\n// src/materials/CopyMaterial.js\nimport { NoBlending as NoBlending6, ShaderMaterial as ShaderMaterial6, Uniform as Uniform6 } from \"three\";\n\n// src/materials/glsl/copy.frag\nvar copy_default = \"#include <common>\\n#include <dithering_pars_fragment>\\n#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\\n#include <encodings_fragment>\\n#include <dithering_fragment>\\n}\";\n\n// src/materials/CopyMaterial.js\nvar CopyMaterial = class extends ShaderMaterial6 {\n  constructor() {\n    super({\n      name: \"CopyMaterial\",\n      uniforms: {\n        inputBuffer: new Uniform6(null),\n        opacity: new Uniform6(1)\n      },\n      blending: NoBlending6,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: copy_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  getOpacity(value) {\n    return this.uniforms.opacity.value;\n  }\n  setOpacity(value) {\n    this.uniforms.opacity.value = value;\n  }\n};\n\n// src/materials/DepthComparisonMaterial.js\nimport { NoBlending as NoBlending7, PerspectiveCamera as PerspectiveCamera3, RGBADepthPacking, ShaderMaterial as ShaderMaterial7, Uniform as Uniform7 } from \"three\";\n\n// src/materials/glsl/depth-comparison.frag\nvar depth_comparison_default = \"#include <packing>\\n#include <clipping_planes_pars_fragment>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nuniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){\\n#include <clipping_planes_fragment>\\nvec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);\\n#if DEPTH_PACKING == 3201\\nfloat fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));\\n#else\\nfloat fragCoordZ=texture2D(depthBuffer,projTexCoord).r;\\n#endif\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\\n#else\\nfloat viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\\n#endif\\nfloat depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}\";\n\n// src/materials/glsl/depth-comparison.vert\nvar depth_comparison_default2 = \"#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying float vViewZ;varying vec4 vProjTexCoord;void main(){\\n#include <skinbase_vertex>\\n#include <begin_vertex>\\n#include <morphtarget_vertex>\\n#include <skinning_vertex>\\n#include <project_vertex>\\nvViewZ=mvPosition.z;vProjTexCoord=gl_Position;\\n#include <clipping_planes_vertex>\\n}\";\n\n// src/materials/DepthComparisonMaterial.js\nvar DepthComparisonMaterial = class extends ShaderMaterial7 {\n  constructor(depthTexture = null, camera) {\n    super({\n      name: \"DepthComparisonMaterial\",\n      defines: {\n        DEPTH_PACKING: \"0\"\n      },\n      uniforms: {\n        depthBuffer: new Uniform7(null),\n        cameraNear: new Uniform7(0.3),\n        cameraFar: new Uniform7(1e3)\n      },\n      blending: NoBlending7,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: depth_comparison_default,\n      vertexShader: depth_comparison_default2\n    });\n    this.toneMapped = false;\n    this.depthBuffer = depthTexture;\n    this.depthPacking = RGBADepthPacking;\n    this.copyCameraSettings(camera);\n  }\n  set depthBuffer(value) {\n    this.uniforms.depthBuffer.value = value;\n  }\n  set depthPacking(value) {\n    this.defines.DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer(buffer, depthPacking = RGBADepthPacking) {\n    this.depthBuffer = buffer;\n    this.depthPacking = depthPacking;\n  }\n  adoptCameraSettings(camera) {\n    this.copyCameraSettings(camera);\n  }\n  copyCameraSettings(camera) {\n    if (camera) {\n      this.uniforms.cameraNear.value = camera.near;\n      this.uniforms.cameraFar.value = camera.far;\n      if (camera instanceof PerspectiveCamera3) {\n        this.defines.PERSPECTIVE_CAMERA = \"1\";\n      } else {\n        delete this.defines.PERSPECTIVE_CAMERA;\n      }\n      this.needsUpdate = true;\n    }\n  }\n};\n\n// src/materials/DepthCopyMaterial.js\nimport { BasicDepthPacking as BasicDepthPacking2, NoBlending as NoBlending8, ShaderMaterial as ShaderMaterial8, Uniform as Uniform8, Vector2 as Vector23 } from \"three\";\n\n// src/materials/glsl/depth-copy.frag\nvar depth_copy_default = \"#include <packing>\\nvarying vec2 vUv;\\n#ifdef NORMAL_DEPTH\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D normalDepthBuffer;\\n#else\\nuniform mediump sampler2D normalDepthBuffer;\\n#endif\\nfloat readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}\\n#else\\n#if INPUT_DEPTH_PACKING == 3201\\nuniform lowp sampler2D depthBuffer;\\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nfloat readDepth(const in vec2 uv){\\n#if INPUT_DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}\\n#endif\\nvoid main(){\\n#if INPUT_DEPTH_PACKING == OUTPUT_DEPTH_PACKING\\ngl_FragColor=texture2D(depthBuffer,vUv);\\n#else\\nfloat depth=readDepth(vUv);\\n#if OUTPUT_DEPTH_PACKING == 3201\\ngl_FragColor=(depth==1.0)?vec4(1.0):packDepthToRGBA(depth);\\n#else\\ngl_FragColor=vec4(vec3(depth),1.0);\\n#endif\\n#endif\\n}\";\n\n// src/materials/glsl/depth-copy.vert\nvar depth_copy_default2 = \"varying vec2 vUv;\\n#if DEPTH_COPY_MODE == 1\\nuniform vec2 texelPosition;\\n#endif\\nvoid main(){\\n#if DEPTH_COPY_MODE == 1\\nvUv=texelPosition;\\n#else\\nvUv=position.xy*0.5+0.5;\\n#endif\\ngl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/DepthCopyMaterial.js\nvar DepthCopyMaterial = class extends ShaderMaterial8 {\n  constructor() {\n    super({\n      name: \"DepthCopyMaterial\",\n      defines: {\n        INPUT_DEPTH_PACKING: \"0\",\n        OUTPUT_DEPTH_PACKING: \"0\",\n        DEPTH_COPY_MODE: \"0\"\n      },\n      uniforms: {\n        depthBuffer: new Uniform8(null),\n        texelPosition: new Uniform8(new Vector23())\n      },\n      blending: NoBlending8,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: depth_copy_default,\n      vertexShader: depth_copy_default2\n    });\n    this.toneMapped = false;\n    this.depthCopyMode = DepthCopyMode.FULL;\n  }\n  get depthBuffer() {\n    return this.uniforms.depthBuffer.value;\n  }\n  set depthBuffer(value) {\n    this.uniforms.depthBuffer.value = value;\n  }\n  set inputDepthPacking(value) {\n    this.defines.INPUT_DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  get outputDepthPacking() {\n    return Number(this.defines.OUTPUT_DEPTH_PACKING);\n  }\n  set outputDepthPacking(value) {\n    this.defines.OUTPUT_DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer(buffer, depthPacking = BasicDepthPacking2) {\n    this.depthBuffer = buffer;\n    this.inputDepthPacking = depthPacking;\n  }\n  getInputDepthPacking() {\n    return Number(this.defines.INPUT_DEPTH_PACKING);\n  }\n  setInputDepthPacking(value) {\n    this.defines.INPUT_DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  getOutputDepthPacking() {\n    return Number(this.defines.OUTPUT_DEPTH_PACKING);\n  }\n  setOutputDepthPacking(value) {\n    this.defines.OUTPUT_DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  get texelPosition() {\n    return this.uniforms.texelPosition.value;\n  }\n  getTexelPosition() {\n    return this.uniforms.texelPosition.value;\n  }\n  setTexelPosition(value) {\n    this.uniforms.texelPosition.value = value;\n  }\n  get mode() {\n    return this.depthCopyMode;\n  }\n  set mode(value) {\n    this.depthCopyMode = value;\n    this.defines.DEPTH_COPY_MODE = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  getMode() {\n    return this.mode;\n  }\n  setMode(value) {\n    this.mode = value;\n  }\n};\n\n// src/materials/DepthDownsamplingMaterial.js\nimport { BasicDepthPacking as BasicDepthPacking3, NoBlending as NoBlending9, ShaderMaterial as ShaderMaterial9, Uniform as Uniform9, Vector2 as Vector24 } from \"three\";\n\n// src/materials/glsl/depth-downsampling.frag\nvar depth_downsampling_default = \"#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\n#ifdef DOWNSAMPLE_NORMALS\\nuniform lowp sampler2D normalBuffer;\\n#endif\\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);\\n#ifdef DOWNSAMPLE_NORMALS\\nvec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);\\n#else\\nvec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));\\n#endif\\ngl_FragColor=vec4(n[index],d[index]);}\";\n\n// src/materials/glsl/depth-downsampling.vert\nvar depth_downsampling_default2 = \"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/DepthDownsamplingMaterial.js\nvar DepthDownsamplingMaterial = class extends ShaderMaterial9 {\n  constructor() {\n    super({\n      name: \"DepthDownsamplingMaterial\",\n      defines: {\n        DEPTH_PACKING: \"0\"\n      },\n      uniforms: {\n        depthBuffer: new Uniform9(null),\n        normalBuffer: new Uniform9(null),\n        texelSize: new Uniform9(new Vector24())\n      },\n      blending: NoBlending9,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: depth_downsampling_default,\n      vertexShader: depth_downsampling_default2\n    });\n    this.toneMapped = false;\n  }\n  set depthBuffer(value) {\n    this.uniforms.depthBuffer.value = value;\n  }\n  set depthPacking(value) {\n    this.defines.DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer(buffer, depthPacking = BasicDepthPacking3) {\n    this.depthBuffer = buffer;\n    this.depthPacking = depthPacking;\n  }\n  set normalBuffer(value) {\n    this.uniforms.normalBuffer.value = value;\n    if (value !== null) {\n      this.defines.DOWNSAMPLE_NORMALS = \"1\";\n    } else {\n      delete this.defines.DOWNSAMPLE_NORMALS;\n    }\n    this.needsUpdate = true;\n  }\n  setNormalBuffer(value) {\n    this.normalBuffer = value;\n  }\n  setTexelSize(x, y) {\n    this.uniforms.texelSize.value.set(x, y);\n  }\n  setSize(width, height) {\n    this.uniforms.texelSize.value.set(1 / width, 1 / height);\n  }\n};\n\n// src/materials/DepthMaskMaterial.js\nimport {\n  AlwaysDepth,\n  BasicDepthPacking as BasicDepthPacking4,\n  EqualDepth,\n  GreaterDepth,\n  GreaterEqualDepth,\n  LessDepth,\n  LessEqualDepth,\n  NeverDepth,\n  NoBlending as NoBlending10,\n  NotEqualDepth,\n  PerspectiveCamera as PerspectiveCamera4,\n  ShaderMaterial as ShaderMaterial10,\n  Uniform as Uniform10,\n  Vector2 as Vector25\n} from \"three\";\n\n// src/materials/glsl/depth-mask.frag\nvar depth_mask_default = \"#include <common>\\n#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer0;uniform highp sampler2D depthBuffer1;\\n#else\\nuniform mediump sampler2D depthBuffer0;uniform mediump sampler2D depthBuffer1;\\n#endif\\nuniform sampler2D inputBuffer;uniform vec2 cameraNearFar;float getViewZ(const in float depth){\\n#ifdef PERSPECTIVE_CAMERA\\nreturn perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\\n#else\\nreturn orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\\n#endif\\n}varying vec2 vUv;void main(){vec2 depth;\\n#if DEPTH_PACKING_0 == 3201\\ndepth.x=unpackRGBAToDepth(texture2D(depthBuffer0,vUv));\\n#else\\ndepth.x=texture2D(depthBuffer0,vUv).r;\\n#endif\\n#if DEPTH_PACKING_1 == 3201\\ndepth.y=unpackRGBAToDepth(texture2D(depthBuffer1,vUv));\\n#else\\ndepth.y=texture2D(depthBuffer1,vUv).r;\\n#endif\\nbool isMaxDepth=(depth.x==1.0);\\n#ifdef PERSPECTIVE_CAMERA\\ndepth.x=viewZToOrthographicDepth(getViewZ(depth.x),cameraNearFar.x,cameraNearFar.y);depth.y=viewZToOrthographicDepth(getViewZ(depth.y),cameraNearFar.x,cameraNearFar.y);\\n#endif\\n#if DEPTH_TEST_STRATEGY == 0\\nbool keep=depthTest(depth.x,depth.y);\\n#elif DEPTH_TEST_STRATEGY == 1\\nbool keep=isMaxDepth||depthTest(depth.x,depth.y);\\n#else\\nbool keep=!isMaxDepth&&depthTest(depth.x,depth.y);\\n#endif\\nif(keep){gl_FragColor=texture2D(inputBuffer,vUv);}else{discard;}}\";\n\n// src/materials/DepthMaskMaterial.js\nvar DepthMaskMaterial = class extends ShaderMaterial10 {\n  constructor() {\n    super({\n      name: \"DepthMaskMaterial\",\n      defines: {\n        DEPTH_EPSILON: \"0.0001\",\n        DEPTH_PACKING_0: \"0\",\n        DEPTH_PACKING_1: \"0\",\n        DEPTH_TEST_STRATEGY: DepthTestStrategy.KEEP_MAX_DEPTH\n      },\n      uniforms: {\n        inputBuffer: new Uniform10(null),\n        depthBuffer0: new Uniform10(null),\n        depthBuffer1: new Uniform10(null),\n        cameraNearFar: new Uniform10(new Vector25(1, 1))\n      },\n      blending: NoBlending10,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: depth_mask_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n    this.depthMode = LessDepth;\n  }\n  set depthBuffer0(value) {\n    this.uniforms.depthBuffer0.value = value;\n  }\n  set depthPacking0(value) {\n    this.defines.DEPTH_PACKING_0 = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer0(buffer, depthPacking = BasicDepthPacking4) {\n    this.depthBuffer0 = buffer;\n    this.depthPacking0 = depthPacking;\n  }\n  set depthBuffer1(value) {\n    this.uniforms.depthBuffer1.value = value;\n  }\n  set depthPacking1(value) {\n    this.defines.DEPTH_PACKING_1 = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer1(buffer, depthPacking = BasicDepthPacking4) {\n    this.depthBuffer1 = buffer;\n    this.depthPacking1 = depthPacking;\n  }\n  get maxDepthStrategy() {\n    return Number(this.defines.DEPTH_TEST_STRATEGY);\n  }\n  set maxDepthStrategy(value) {\n    this.defines.DEPTH_TEST_STRATEGY = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  get keepFar() {\n    return this.maxDepthStrategy;\n  }\n  set keepFar(value) {\n    this.maxDepthStrategy = value ? DepthTestStrategy.KEEP_MAX_DEPTH : DepthTestStrategy.DISCARD_MAX_DEPTH;\n  }\n  getMaxDepthStrategy() {\n    return this.maxDepthStrategy;\n  }\n  setMaxDepthStrategy(value) {\n    this.maxDepthStrategy = value;\n  }\n  get epsilon() {\n    return Number(this.defines.DEPTH_EPSILON);\n  }\n  set epsilon(value) {\n    this.defines.DEPTH_EPSILON = value.toFixed(16);\n    this.needsUpdate = true;\n  }\n  getEpsilon() {\n    return this.epsilon;\n  }\n  setEpsilon(value) {\n    this.epsilon = value;\n  }\n  get depthMode() {\n    return Number(this.defines.DEPTH_MODE);\n  }\n  set depthMode(value) {\n    let depthTest;\n    switch (value) {\n      case NeverDepth:\n        depthTest = \"false\";\n        break;\n      case AlwaysDepth:\n        depthTest = \"true\";\n        break;\n      case EqualDepth:\n        depthTest = \"abs(d1 - d0) <= DEPTH_EPSILON\";\n        break;\n      case NotEqualDepth:\n        depthTest = \"abs(d1 - d0) > DEPTH_EPSILON\";\n        break;\n      case LessDepth:\n        depthTest = \"d0 > d1\";\n        break;\n      case LessEqualDepth:\n        depthTest = \"d0 >= d1\";\n        break;\n      case GreaterEqualDepth:\n        depthTest = \"d0 <= d1\";\n        break;\n      case GreaterDepth:\n      default:\n        depthTest = \"d0 < d1\";\n        break;\n    }\n    this.defines.DEPTH_MODE = value.toFixed(0);\n    this.defines[\"depthTest(d0, d1)\"] = depthTest;\n    this.needsUpdate = true;\n  }\n  getDepthMode() {\n    return this.depthMode;\n  }\n  setDepthMode(mode) {\n    this.depthMode = mode;\n  }\n  adoptCameraSettings(camera) {\n    this.copyCameraSettings(camera);\n  }\n  copyCameraSettings(camera) {\n    if (camera) {\n      this.uniforms.cameraNearFar.value.set(camera.near, camera.far);\n      if (camera instanceof PerspectiveCamera4) {\n        this.defines.PERSPECTIVE_CAMERA = \"1\";\n      } else {\n        delete this.defines.PERSPECTIVE_CAMERA;\n      }\n      this.needsUpdate = true;\n    }\n  }\n};\n\n// src/materials/DownsamplingMaterial.js\nimport { NoBlending as NoBlending11, ShaderMaterial as ShaderMaterial11, Uniform as Uniform11, Vector2 as Vector26 } from \"three\";\n\n// src/materials/glsl/convolution.downsampling.frag\nvar convolution_downsampling_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\n#define WEIGHT_INNER 0.125\\n#define WEIGHT_OUTER 0.0555555\\nvarying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;\\n#include <encodings_fragment>\\n}\";\n\n// src/materials/glsl/convolution.downsampling.vert\nvar convolution_downsampling_default2 = \"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/DownsamplingMaterial.js\nvar DownsamplingMaterial = class extends ShaderMaterial11 {\n  constructor() {\n    super({\n      name: \"DownsamplingMaterial\",\n      uniforms: {\n        inputBuffer: new Uniform11(null),\n        texelSize: new Uniform11(new Vector26())\n      },\n      blending: NoBlending11,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: convolution_downsampling_default,\n      vertexShader: convolution_downsampling_default2\n    });\n    this.toneMapped = false;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setSize(width, height) {\n    this.uniforms.texelSize.value.set(1 / width, 1 / height);\n  }\n};\n\n// src/materials/EdgeDetectionMaterial.js\nimport { BasicDepthPacking as BasicDepthPacking5, NoBlending as NoBlending12, REVISION as REVISION3, ShaderMaterial as ShaderMaterial12, Uniform as Uniform12, Vector2 as Vector27 } from \"three\";\n\n// src/materials/glsl/edge-detection.frag\nvar edge_detection_default = \"varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\\n#if THREE_REVISION < 143\\n#define luminance(v) linearToRelativeLuminance(v)\\n#endif\\n#if EDGE_DETECTION_MODE != 0\\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\\n#endif\\n#if EDGE_DETECTION_MODE == 1\\n#include <common>\\n#endif\\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nfloat readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\\n#elif PREDICATION_MODE == 2\\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\\n#endif\\n#if PREDICATION_MODE != 0\\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\\n#endif\\n#if EDGE_DETECTION_MODE != 0\\nuniform sampler2D inputBuffer;\\n#endif\\nvoid main(){\\n#if EDGE_DETECTION_MODE == 0\\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\\n#elif PREDICATION_MODE != 0\\nvec2 threshold=calculatePredicatedThreshold();\\n#else\\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\\n#endif\\n#if EDGE_DETECTION_MODE == 0\\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\\n#elif EDGE_DETECTION_MODE == 1\\nfloat l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\\n#elif EDGE_DETECTION_MODE == 2\\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\\n#endif\\n}\";\n\n// src/materials/glsl/edge-detection.vert\nvar edge_detection_default2 = \"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\\n#if EDGE_DETECTION_MODE != 0\\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\\n#endif\\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\\n#if EDGE_DETECTION_MODE != 0\\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\\n#endif\\ngl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/EdgeDetectionMaterial.js\nvar EdgeDetectionMaterial = class extends ShaderMaterial12 {\n  constructor(texelSize = new Vector27(), mode = EdgeDetectionMode.COLOR) {\n    super({\n      name: \"EdgeDetectionMaterial\",\n      defines: {\n        THREE_REVISION: REVISION3.replace(/\\D+/g, \"\"),\n        LOCAL_CONTRAST_ADAPTATION_FACTOR: \"2.0\",\n        EDGE_THRESHOLD: \"0.1\",\n        DEPTH_THRESHOLD: \"0.01\",\n        PREDICATION_MODE: \"0\",\n        PREDICATION_THRESHOLD: \"0.01\",\n        PREDICATION_SCALE: \"2.0\",\n        PREDICATION_STRENGTH: \"1.0\",\n        DEPTH_PACKING: \"0\"\n      },\n      uniforms: {\n        inputBuffer: new Uniform12(null),\n        depthBuffer: new Uniform12(null),\n        predicationBuffer: new Uniform12(null),\n        texelSize: new Uniform12(texelSize)\n      },\n      blending: NoBlending12,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: edge_detection_default,\n      vertexShader: edge_detection_default2\n    });\n    this.toneMapped = false;\n    this.edgeDetectionMode = mode;\n  }\n  set depthBuffer(value) {\n    this.uniforms.depthBuffer.value = value;\n  }\n  set depthPacking(value) {\n    this.defines.DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer(buffer, depthPacking = BasicDepthPacking5) {\n    this.depthBuffer = buffer;\n    this.depthPacking = depthPacking;\n  }\n  get edgeDetectionMode() {\n    return Number(this.defines.EDGE_DETECTION_MODE);\n  }\n  set edgeDetectionMode(value) {\n    this.defines.EDGE_DETECTION_MODE = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  getEdgeDetectionMode() {\n    return this.edgeDetectionMode;\n  }\n  setEdgeDetectionMode(value) {\n    this.edgeDetectionMode = value;\n  }\n  get localContrastAdaptationFactor() {\n    return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR);\n  }\n  set localContrastAdaptationFactor(value) {\n    this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR = value.toFixed(\"6\");\n    this.needsUpdate = true;\n  }\n  getLocalContrastAdaptationFactor() {\n    return this.localContrastAdaptationFactor;\n  }\n  setLocalContrastAdaptationFactor(value) {\n    this.localContrastAdaptationFactor = value;\n  }\n  get edgeDetectionThreshold() {\n    return Number(this.defines.EDGE_THRESHOLD);\n  }\n  set edgeDetectionThreshold(value) {\n    this.defines.EDGE_THRESHOLD = value.toFixed(\"6\");\n    this.defines.DEPTH_THRESHOLD = (value * 0.1).toFixed(\"6\");\n    this.needsUpdate = true;\n  }\n  getEdgeDetectionThreshold() {\n    return this.edgeDetectionThreshold;\n  }\n  setEdgeDetectionThreshold(value) {\n    this.edgeDetectionThreshold = value;\n  }\n  get predicationMode() {\n    return Number(this.defines.PREDICATION_MODE);\n  }\n  set predicationMode(value) {\n    this.defines.PREDICATION_MODE = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  getPredicationMode() {\n    return this.predicationMode;\n  }\n  setPredicationMode(value) {\n    this.predicationMode = value;\n  }\n  set predicationBuffer(value) {\n    this.uniforms.predicationBuffer.value = value;\n  }\n  setPredicationBuffer(value) {\n    this.uniforms.predicationBuffer.value = value;\n  }\n  get predicationThreshold() {\n    return Number(this.defines.PREDICATION_THRESHOLD);\n  }\n  set predicationThreshold(value) {\n    this.defines.PREDICATION_THRESHOLD = value.toFixed(\"6\");\n    this.needsUpdate = true;\n  }\n  getPredicationThreshold() {\n    return this.predicationThreshold;\n  }\n  setPredicationThreshold(value) {\n    this.predicationThreshold = value;\n  }\n  get predicationScale() {\n    return Number(this.defines.PREDICATION_SCALE);\n  }\n  set predicationScale(value) {\n    this.defines.PREDICATION_SCALE = value.toFixed(\"6\");\n    this.needsUpdate = true;\n  }\n  getPredicationScale() {\n    return this.predicationScale;\n  }\n  setPredicationScale(value) {\n    this.predicationScale = value;\n  }\n  get predicationStrength() {\n    return Number(this.defines.PREDICATION_STRENGTH);\n  }\n  set predicationStrength(value) {\n    this.defines.PREDICATION_STRENGTH = value.toFixed(\"6\");\n    this.needsUpdate = true;\n  }\n  getPredicationStrength() {\n    return this.predicationStrength;\n  }\n  setPredicationStrength(value) {\n    this.predicationStrength = value;\n  }\n  setSize(width, height) {\n    this.uniforms.texelSize.value.set(1 / width, 1 / height);\n  }\n};\n\n// src/materials/EffectMaterial.js\nimport { BasicDepthPacking as BasicDepthPacking6, NoBlending as NoBlending13, PerspectiveCamera as PerspectiveCamera5, REVISION as REVISION4, ShaderMaterial as ShaderMaterial13, Uniform as Uniform13, Vector2 as Vector28 } from \"three\";\n\n// src/materials/glsl/effect.frag\nvar effect_default = \"#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#define packFloatToRGBA(v) packDepthToRGBA(v)\\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\\n#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\n#if DEPTH_PACKING == 3201\\nuniform lowp sampler2D depthBuffer;\\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\\n#if THREE_REVISION < 143\\n#define luminance(v) linearToRelativeLuminance(v)\\n#endif\\n#if THREE_REVISION >= 137\\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\\n#endif\\nfloat readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}float getViewZ(const in float depth){\\n#ifdef PERSPECTIVE_CAMERA\\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\\n#else\\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\\n#endif\\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\\n#ifdef ENCODE_OUTPUT\\n#include <encodings_fragment>\\n#endif\\n#include <dithering_fragment>\\n}\";\n\n// src/materials/glsl/effect.vert\nvar effect_default2 = \"uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/EffectMaterial.js\nvar EffectMaterial = class extends ShaderMaterial13 {\n  constructor(shaderParts, defines, uniforms, camera, dithering = false) {\n    super({\n      name: \"EffectMaterial\",\n      defines: {\n        THREE_REVISION: REVISION4.replace(/\\D+/g, \"\"),\n        DEPTH_PACKING: \"0\",\n        ENCODE_OUTPUT: \"1\"\n      },\n      uniforms: {\n        inputBuffer: new Uniform13(null),\n        depthBuffer: new Uniform13(null),\n        resolution: new Uniform13(new Vector28()),\n        texelSize: new Uniform13(new Vector28()),\n        cameraNear: new Uniform13(0.3),\n        cameraFar: new Uniform13(1e3),\n        aspect: new Uniform13(1),\n        time: new Uniform13(0)\n      },\n      blending: NoBlending13,\n      depthWrite: false,\n      depthTest: false,\n      dithering\n    });\n    this.toneMapped = false;\n    if (shaderParts) {\n      this.setShaderParts(shaderParts);\n    }\n    if (defines) {\n      this.setDefines(defines);\n    }\n    if (uniforms) {\n      this.setUniforms(uniforms);\n    }\n    this.copyCameraSettings(camera);\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  get depthBuffer() {\n    return this.uniforms.depthBuffer.value;\n  }\n  set depthBuffer(value) {\n    this.uniforms.depthBuffer.value = value;\n  }\n  get depthPacking() {\n    return Number(this.defines.DEPTH_PACKING);\n  }\n  set depthPacking(value) {\n    this.defines.DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer(buffer, depthPacking = BasicDepthPacking6) {\n    this.depthBuffer = buffer;\n    this.depthPacking = depthPacking;\n  }\n  setShaderData(data) {\n    this.setShaderParts(data.shaderParts);\n    this.setDefines(data.defines);\n    this.setUniforms(data.uniforms);\n    this.setExtensions(data.extensions);\n  }\n  setShaderParts(shaderParts) {\n    var _a, _b, _c, _d, _e;\n    this.fragmentShader = effect_default.replace(EffectShaderSection.FRAGMENT_HEAD, (_a = shaderParts.get(EffectShaderSection.FRAGMENT_HEAD)) != null ? _a : \"\").replace(EffectShaderSection.FRAGMENT_MAIN_UV, (_b = shaderParts.get(EffectShaderSection.FRAGMENT_MAIN_UV)) != null ? _b : \"\").replace(EffectShaderSection.FRAGMENT_MAIN_IMAGE, (_c = shaderParts.get(EffectShaderSection.FRAGMENT_MAIN_IMAGE)) != null ? _c : \"\");\n    this.vertexShader = effect_default2.replace(EffectShaderSection.VERTEX_HEAD, (_d = shaderParts.get(EffectShaderSection.VERTEX_HEAD)) != null ? _d : \"\").replace(EffectShaderSection.VERTEX_MAIN_SUPPORT, (_e = shaderParts.get(EffectShaderSection.VERTEX_MAIN_SUPPORT)) != null ? _e : \"\");\n    this.needsUpdate = true;\n    return this;\n  }\n  setDefines(defines) {\n    for (const entry of defines.entries()) {\n      this.defines[entry[0]] = entry[1];\n    }\n    this.needsUpdate = true;\n    return this;\n  }\n  setUniforms(uniforms) {\n    for (const entry of uniforms.entries()) {\n      this.uniforms[entry[0]] = entry[1];\n    }\n    return this;\n  }\n  setExtensions(extensions) {\n    this.extensions = {};\n    for (const extension of extensions) {\n      this.extensions[extension] = true;\n    }\n    return this;\n  }\n  get encodeOutput() {\n    return this.defines.ENCODE_OUTPUT !== void 0;\n  }\n  set encodeOutput(value) {\n    if (this.encodeOutput !== value) {\n      if (value) {\n        this.defines.ENCODE_OUTPUT = \"1\";\n      } else {\n        delete this.defines.ENCODE_OUTPUT;\n      }\n      this.needsUpdate = true;\n    }\n  }\n  isOutputEncodingEnabled(value) {\n    return this.encodeOutput;\n  }\n  setOutputEncodingEnabled(value) {\n    this.encodeOutput = value;\n  }\n  get time() {\n    return this.uniforms.time.value;\n  }\n  set time(value) {\n    this.uniforms.time.value = value;\n  }\n  setDeltaTime(value) {\n    this.uniforms.time.value += value;\n  }\n  adoptCameraSettings(camera) {\n    this.copyCameraSettings(camera);\n  }\n  copyCameraSettings(camera) {\n    if (camera) {\n      this.uniforms.cameraNear.value = camera.near;\n      this.uniforms.cameraFar.value = camera.far;\n      if (camera instanceof PerspectiveCamera5) {\n        this.defines.PERSPECTIVE_CAMERA = \"1\";\n      } else {\n        delete this.defines.PERSPECTIVE_CAMERA;\n      }\n      this.needsUpdate = true;\n    }\n  }\n  setSize(width, height) {\n    const uniforms = this.uniforms;\n    uniforms.resolution.value.set(width, height);\n    uniforms.texelSize.value.set(1 / width, 1 / height);\n    uniforms.aspect.value = width / height;\n  }\n  static get Section() {\n    return EffectShaderSection;\n  }\n};\n\n// src/materials/GaussianBlurMaterial.js\nimport { NoBlending as NoBlending14, ShaderMaterial as ShaderMaterial14, Uniform as Uniform14, Vector2 as Vector29 } from \"three\";\n\n// src/materials/glsl/convolution.gaussian.frag\nvar convolution_gaussian_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\nuniform vec2 kernel[STEPS];varying vec2 vOffset;varying vec2 vUv;void main(){vec4 result=texture2D(inputBuffer,vUv)*kernel[0].y;for(int i=1;i<STEPS;++i){vec2 offset=kernel[i].x*vOffset;vec4 c0=texture2D(inputBuffer,vUv+offset);vec4 c1=texture2D(inputBuffer,vUv-offset);result+=(c0+c1)*kernel[i].y;}gl_FragColor=result;\\n#include <encodings_fragment>\\n}\";\n\n// src/materials/glsl/convolution.gaussian.vert\nvar convolution_gaussian_default2 = \"uniform vec2 texelSize;uniform vec2 direction;uniform float scale;varying vec2 vOffset;varying vec2 vUv;void main(){vOffset=direction*texelSize*scale;vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/GaussianBlurMaterial.js\nvar GaussianBlurMaterial = class extends ShaderMaterial14 {\n  constructor({ kernelSize = 35 } = {}) {\n    super({\n      name: \"GaussianBlurMaterial\",\n      uniforms: {\n        inputBuffer: new Uniform14(null),\n        texelSize: new Uniform14(new Vector29()),\n        direction: new Uniform14(new Vector29()),\n        kernel: new Uniform14(null),\n        scale: new Uniform14(1)\n      },\n      blending: NoBlending14,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: convolution_gaussian_default,\n      vertexShader: convolution_gaussian_default2\n    });\n    this.toneMapped = false;\n    this._kernelSize = 0;\n    this.kernelSize = kernelSize;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  get kernelSize() {\n    return this._kernelSize;\n  }\n  set kernelSize(value) {\n    this._kernelSize = value;\n    this.generateKernel(value);\n  }\n  get direction() {\n    return this.uniforms.direction.value;\n  }\n  get scale() {\n    return this.uniforms.scale.value;\n  }\n  set scale(value) {\n    this.uniforms.scale.value = value;\n  }\n  generateKernel(kernelSize) {\n    const kernel = new GaussKernel(kernelSize);\n    const steps = kernel.linearSteps;\n    const kernelData = new Float64Array(steps * 2);\n    for (let i = 0, j = 0; i < steps; ++i) {\n      kernelData[j++] = kernel.linearOffsets[i];\n      kernelData[j++] = kernel.linearWeights[i];\n    }\n    this.uniforms.kernel.value = kernelData;\n    this.defines.STEPS = steps.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setSize(width, height) {\n    this.uniforms.texelSize.value.set(1 / width, 1 / height);\n  }\n};\n\n// src/materials/GodRaysMaterial.js\nimport { NoBlending as NoBlending15, ShaderMaterial as ShaderMaterial15, Uniform as Uniform15 } from \"three\";\n\n// src/materials/glsl/convolution.god-rays.frag\nvar convolution_god_rays_default = \"#include <common>\\n#include <dithering_pars_fragment>\\n#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\nuniform vec2 lightPosition;uniform float exposure;uniform float decay;uniform float density;uniform float weight;uniform float clampMax;varying vec2 vUv;void main(){vec2 coord=vUv;vec2 delta=lightPosition-coord;delta*=1.0/SAMPLES_FLOAT*density;float illuminationDecay=1.0;vec4 color=vec4(0.0);for(int i=0;i<SAMPLES_INT;++i){coord+=delta;vec4 texel=texture2D(inputBuffer,coord);texel*=illuminationDecay*weight;color+=texel;illuminationDecay*=decay;}gl_FragColor=clamp(color*exposure,0.0,clampMax);\\n#include <dithering_fragment>\\n}\";\n\n// src/materials/GodRaysMaterial.js\nvar GodRaysMaterial = class extends ShaderMaterial15 {\n  constructor(lightPosition) {\n    super({\n      name: \"GodRaysMaterial\",\n      defines: {\n        SAMPLES_INT: \"60\",\n        SAMPLES_FLOAT: \"60.0\"\n      },\n      uniforms: {\n        inputBuffer: new Uniform15(null),\n        lightPosition: new Uniform15(lightPosition),\n        density: new Uniform15(1),\n        decay: new Uniform15(1),\n        weight: new Uniform15(1),\n        exposure: new Uniform15(1),\n        clampMax: new Uniform15(1)\n      },\n      blending: NoBlending15,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: convolution_god_rays_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  get lightPosition() {\n    return this.uniforms.lightPosition.value;\n  }\n  getLightPosition() {\n    return this.uniforms.lightPosition.value;\n  }\n  setLightPosition(value) {\n    this.uniforms.lightPosition.value = value;\n  }\n  get density() {\n    return this.uniforms.density.value;\n  }\n  set density(value) {\n    this.uniforms.density.value = value;\n  }\n  getDensity() {\n    return this.uniforms.density.value;\n  }\n  setDensity(value) {\n    this.uniforms.density.value = value;\n  }\n  get decay() {\n    return this.uniforms.decay.value;\n  }\n  set decay(value) {\n    this.uniforms.decay.value = value;\n  }\n  getDecay() {\n    return this.uniforms.decay.value;\n  }\n  setDecay(value) {\n    this.uniforms.decay.value = value;\n  }\n  get weight() {\n    return this.uniforms.weight.value;\n  }\n  set weight(value) {\n    this.uniforms.weight.value = value;\n  }\n  getWeight() {\n    return this.uniforms.weight.value;\n  }\n  setWeight(value) {\n    this.uniforms.weight.value = value;\n  }\n  get exposure() {\n    return this.uniforms.exposure.value;\n  }\n  set exposure(value) {\n    this.uniforms.exposure.value = value;\n  }\n  getExposure() {\n    return this.uniforms.exposure.value;\n  }\n  setExposure(value) {\n    this.uniforms.exposure.value = value;\n  }\n  get maxIntensity() {\n    return this.uniforms.clampMax.value;\n  }\n  set maxIntensity(value) {\n    this.uniforms.clampMax.value = value;\n  }\n  getMaxIntensity() {\n    return this.uniforms.clampMax.value;\n  }\n  setMaxIntensity(value) {\n    this.uniforms.clampMax.value = value;\n  }\n  get samples() {\n    return Number(this.defines.SAMPLES_INT);\n  }\n  set samples(value) {\n    const s = Math.floor(value);\n    this.defines.SAMPLES_INT = s.toFixed(0);\n    this.defines.SAMPLES_FLOAT = s.toFixed(1);\n    this.needsUpdate = true;\n  }\n  getSamples() {\n    return this.samples;\n  }\n  setSamples(value) {\n    this.samples = value;\n  }\n};\n\n// src/materials/LuminanceMaterial.js\nimport { NoBlending as NoBlending16, REVISION as REVISION5, ShaderMaterial as ShaderMaterial16, Uniform as Uniform16 } from \"three\";\n\n// src/materials/glsl/luminance.frag\nvar luminance_default = \"#include <common>\\n#if THREE_REVISION < 143\\n#define luminance(v) linearToRelativeLuminance(v)\\n#endif\\n#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\n#ifdef RANGE\\nuniform vec2 range;\\n#elif defined(THRESHOLD)\\nuniform float threshold;uniform float smoothing;\\n#endif\\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);\\n#ifdef RANGE\\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\\n#elif defined(THRESHOLD)\\nl=smoothstep(threshold,threshold+smoothing,l);\\n#endif\\n#ifdef COLOR\\ngl_FragColor=vec4(texel.rgb*l,l);\\n#else\\ngl_FragColor=vec4(l);\\n#endif\\n}\";\n\n// src/materials/LuminanceMaterial.js\nvar LuminanceMaterial = class extends ShaderMaterial16 {\n  constructor(colorOutput = false, luminanceRange = null) {\n    super({\n      name: \"LuminanceMaterial\",\n      defines: {\n        THREE_REVISION: REVISION5.replace(/\\D+/g, \"\")\n      },\n      uniforms: {\n        inputBuffer: new Uniform16(null),\n        threshold: new Uniform16(0),\n        smoothing: new Uniform16(1),\n        range: new Uniform16(null)\n      },\n      blending: NoBlending16,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: luminance_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n    this.colorOutput = colorOutput;\n    this.luminanceRange = luminanceRange;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  get threshold() {\n    return this.uniforms.threshold.value;\n  }\n  set threshold(value) {\n    if (this.smoothing > 0 || value > 0) {\n      this.defines.THRESHOLD = \"1\";\n    } else {\n      delete this.defines.THRESHOLD;\n    }\n    this.uniforms.threshold.value = value;\n  }\n  getThreshold() {\n    return this.threshold;\n  }\n  setThreshold(value) {\n    this.threshold = value;\n  }\n  get smoothing() {\n    return this.uniforms.smoothing.value;\n  }\n  set smoothing(value) {\n    if (this.threshold > 0 || value > 0) {\n      this.defines.THRESHOLD = \"1\";\n    } else {\n      delete this.defines.THRESHOLD;\n    }\n    this.uniforms.smoothing.value = value;\n  }\n  getSmoothingFactor() {\n    return this.smoothing;\n  }\n  setSmoothingFactor(value) {\n    this.smoothing = value;\n  }\n  get useThreshold() {\n    return this.threshold > 0 || this.smoothing > 0;\n  }\n  set useThreshold(value) {\n  }\n  get colorOutput() {\n    return this.defines.COLOR !== void 0;\n  }\n  set colorOutput(value) {\n    if (value) {\n      this.defines.COLOR = \"1\";\n    } else {\n      delete this.defines.COLOR;\n    }\n    this.needsUpdate = true;\n  }\n  isColorOutputEnabled(value) {\n    return this.colorOutput;\n  }\n  setColorOutputEnabled(value) {\n    this.colorOutput = value;\n  }\n  get useRange() {\n    return this.luminanceRange !== null;\n  }\n  set useRange(value) {\n    this.luminanceRange = null;\n  }\n  get luminanceRange() {\n    return this.uniforms.range.value;\n  }\n  set luminanceRange(value) {\n    if (value !== null) {\n      this.defines.RANGE = \"1\";\n    } else {\n      delete this.defines.RANGE;\n    }\n    this.uniforms.range.value = value;\n    this.needsUpdate = true;\n  }\n  getLuminanceRange() {\n    return this.luminanceRange;\n  }\n  setLuminanceRange(value) {\n    this.luminanceRange = value;\n  }\n};\n\n// src/materials/MaskMaterial.js\nimport { NoBlending as NoBlending17, ShaderMaterial as ShaderMaterial17, Uniform as Uniform17, UnsignedByteType as UnsignedByteType2 } from \"three\";\n\n// src/materials/glsl/mask.frag\nvar mask_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\n#ifdef MASK_PRECISION_HIGH\\nuniform mediump sampler2D maskTexture;\\n#else\\nuniform lowp sampler2D maskTexture;\\n#endif\\n#if MASK_FUNCTION != 0\\nuniform float strength;\\n#endif\\nvarying vec2 vUv;void main(){\\n#if COLOR_CHANNEL == 0\\nfloat mask=texture2D(maskTexture,vUv).r;\\n#elif COLOR_CHANNEL == 1\\nfloat mask=texture2D(maskTexture,vUv).g;\\n#elif COLOR_CHANNEL == 2\\nfloat mask=texture2D(maskTexture,vUv).b;\\n#else\\nfloat mask=texture2D(maskTexture,vUv).a;\\n#endif\\n#if MASK_FUNCTION == 0\\n#ifdef INVERTED\\nmask=step(mask,0.0);\\n#else\\nmask=1.0-step(mask,0.0);\\n#endif\\n#else\\nmask=clamp(mask*strength,0.0,1.0);\\n#ifdef INVERTED\\nmask=1.0-mask;\\n#endif\\n#endif\\n#if MASK_FUNCTION == 2\\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\\n#else\\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\\n#endif\\n}\";\n\n// src/materials/MaskMaterial.js\nvar MaskMaterial = class extends ShaderMaterial17 {\n  constructor(maskTexture = null) {\n    super({\n      name: \"MaskMaterial\",\n      uniforms: {\n        maskTexture: new Uniform17(maskTexture),\n        inputBuffer: new Uniform17(null),\n        strength: new Uniform17(1)\n      },\n      blending: NoBlending17,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: mask_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n    this.setColorChannel(ColorChannel.RED);\n    this.setMaskFunction(MaskFunction.DISCARD);\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  set maskTexture(value) {\n    this.uniforms.maskTexture.value = value;\n    delete this.defines.MASK_PRECISION_HIGH;\n    if (value.type !== UnsignedByteType2) {\n      this.defines.MASK_PRECISION_HIGH = \"1\";\n    }\n    this.needsUpdate = true;\n  }\n  setMaskTexture(value) {\n    this.maskTexture = value;\n  }\n  set colorChannel(value) {\n    this.defines.COLOR_CHANNEL = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setColorChannel(value) {\n    this.colorChannel = value;\n  }\n  set maskFunction(value) {\n    this.defines.MASK_FUNCTION = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setMaskFunction(value) {\n    this.maskFunction = value;\n  }\n  get inverted() {\n    return this.defines.INVERTED !== void 0;\n  }\n  set inverted(value) {\n    if (this.inverted && !value) {\n      delete this.defines.INVERTED;\n    } else if (value) {\n      this.defines.INVERTED = \"1\";\n    }\n    this.needsUpdate = true;\n  }\n  isInverted() {\n    return this.inverted;\n  }\n  setInverted(value) {\n    this.inverted = value;\n  }\n  get strength() {\n    return this.uniforms.strength.value;\n  }\n  set strength(value) {\n    this.uniforms.strength.value = value;\n  }\n  getStrength() {\n    return this.strength;\n  }\n  setStrength(value) {\n    this.strength = value;\n  }\n};\n\n// src/materials/OutlineMaterial.js\nimport { NoBlending as NoBlending18, ShaderMaterial as ShaderMaterial18, Uniform as Uniform18, Vector2 as Vector210 } from \"three\";\n\n// src/materials/glsl/outline.frag\nvar outline_default = \"uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}\";\n\n// src/materials/glsl/outline.vert\nvar outline_default2 = \"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/OutlineMaterial.js\nvar OutlineMaterial = class extends ShaderMaterial18 {\n  constructor(texelSize = new Vector210()) {\n    super({\n      name: \"OutlineMaterial\",\n      uniforms: {\n        inputBuffer: new Uniform18(null),\n        texelSize: new Uniform18(new Vector210())\n      },\n      blending: NoBlending18,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: outline_default,\n      vertexShader: outline_default2\n    });\n    this.toneMapped = false;\n    this.uniforms.texelSize.value.set(texelSize.x, texelSize.y);\n    this.uniforms.maskTexture = this.uniforms.inputBuffer;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setTexelSize(x, y) {\n    this.uniforms.texelSize.value.set(x, y);\n  }\n  setSize(width, height) {\n    this.uniforms.texelSize.value.set(1 / width, 1 / height);\n  }\n};\n\n// src/materials/SMAAWeightsMaterial.js\nimport { NoBlending as NoBlending19, ShaderMaterial as ShaderMaterial19, Uniform as Uniform19, Vector2 as Vector211 } from \"three\";\n\n// src/materials/glsl/smaa-weights.frag\nvar smaa_weights_default = \"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\\n#if __VERSION__ < 300\\n#define round(v) floor(v + 0.5)\\n#endif\\n#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\\n#if !defined(DISABLE_CORNER_DETECTION)\\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\\n#endif\\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\\n#if !defined(DISABLE_CORNER_DETECTION)\\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\\n#endif\\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\\n#if !defined(DISABLE_DIAG_DETECTION)\\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\\n#endif\\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\\n#if !defined(DISABLE_DIAG_DETECTION)\\n}else{e.r=0.0;}\\n#endif\\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}\";\n\n// src/materials/glsl/smaa-weights.vert\nvar smaa_weights_default2 = \"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/SMAAWeightsMaterial.js\nvar SMAAWeightsMaterial = class extends ShaderMaterial19 {\n  constructor(texelSize = new Vector211(), resolution = new Vector211()) {\n    super({\n      name: \"SMAAWeightsMaterial\",\n      defines: {\n        MAX_SEARCH_STEPS_INT: \"16\",\n        MAX_SEARCH_STEPS_FLOAT: \"16.0\",\n        MAX_SEARCH_STEPS_DIAG_INT: \"8\",\n        MAX_SEARCH_STEPS_DIAG_FLOAT: \"8.0\",\n        CORNER_ROUNDING: \"25\",\n        CORNER_ROUNDING_NORM: \"0.25\",\n        AREATEX_MAX_DISTANCE: \"16.0\",\n        AREATEX_MAX_DISTANCE_DIAG: \"20.0\",\n        AREATEX_PIXEL_SIZE: \"(1.0 / vec2(160.0, 560.0))\",\n        AREATEX_SUBTEX_SIZE: \"(1.0 / 7.0)\",\n        SEARCHTEX_SIZE: \"vec2(66.0, 33.0)\",\n        SEARCHTEX_PACKED_SIZE: \"vec2(64.0, 16.0)\"\n      },\n      uniforms: {\n        inputBuffer: new Uniform19(null),\n        searchTexture: new Uniform19(null),\n        areaTexture: new Uniform19(null),\n        resolution: new Uniform19(resolution),\n        texelSize: new Uniform19(texelSize)\n      },\n      blending: NoBlending19,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: smaa_weights_default,\n      vertexShader: smaa_weights_default2\n    });\n    this.toneMapped = false;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  get searchTexture() {\n    return this.uniforms.searchTexture.value;\n  }\n  set searchTexture(value) {\n    this.uniforms.searchTexture.value = value;\n  }\n  get areaTexture() {\n    return this.uniforms.areaTexture.value;\n  }\n  set areaTexture(value) {\n    this.uniforms.areaTexture.value = value;\n  }\n  setLookupTextures(search, area2) {\n    this.searchTexture = search;\n    this.areaTexture = area2;\n  }\n  get orthogonalSearchSteps() {\n    return Number(this.defines.MAX_SEARCH_STEPS_INT);\n  }\n  set orthogonalSearchSteps(value) {\n    const s = Math.min(Math.max(value, 0), 112);\n    this.defines.MAX_SEARCH_STEPS_INT = s.toFixed(\"0\");\n    this.defines.MAX_SEARCH_STEPS_FLOAT = s.toFixed(\"1\");\n    this.needsUpdate = true;\n  }\n  setOrthogonalSearchSteps(value) {\n    this.orthogonalSearchSteps = value;\n  }\n  get diagonalSearchSteps() {\n    return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT);\n  }\n  set diagonalSearchSteps(value) {\n    const s = Math.min(Math.max(value, 0), 20);\n    this.defines.MAX_SEARCH_STEPS_DIAG_INT = s.toFixed(\"0\");\n    this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT = s.toFixed(\"1\");\n    this.needsUpdate = true;\n  }\n  setDiagonalSearchSteps(value) {\n    this.diagonalSearchSteps = value;\n  }\n  get diagonalDetection() {\n    return this.defines.DISABLE_DIAG_DETECTION === void 0;\n  }\n  set diagonalDetection(value) {\n    if (value) {\n      delete this.defines.DISABLE_DIAG_DETECTION;\n    } else {\n      this.defines.DISABLE_DIAG_DETECTION = \"1\";\n    }\n    this.needsUpdate = true;\n  }\n  isDiagonalDetectionEnabled() {\n    return this.diagonalDetection;\n  }\n  setDiagonalDetectionEnabled(value) {\n    this.diagonalDetection = value;\n  }\n  get cornerRounding() {\n    return Number(this.defines.CORNER_ROUNDING);\n  }\n  set cornerRounding(value) {\n    const r = Math.min(Math.max(value, 0), 100);\n    this.defines.CORNER_ROUNDING = r.toFixed(\"4\");\n    this.defines.CORNER_ROUNDING_NORM = (r / 100).toFixed(\"4\");\n    this.needsUpdate = true;\n  }\n  setCornerRounding(value) {\n    this.cornerRounding = value;\n  }\n  get cornerDetection() {\n    return this.defines.DISABLE_CORNER_DETECTION === void 0;\n  }\n  set cornerDetection(value) {\n    if (value) {\n      delete this.defines.DISABLE_CORNER_DETECTION;\n    } else {\n      this.defines.DISABLE_CORNER_DETECTION = \"1\";\n    }\n    this.needsUpdate = true;\n  }\n  isCornerRoundingEnabled() {\n    return this.cornerDetection;\n  }\n  setCornerRoundingEnabled(value) {\n    this.cornerDetection = value;\n  }\n  setSize(width, height) {\n    const uniforms = this.uniforms;\n    uniforms.texelSize.value.set(1 / width, 1 / height);\n    uniforms.resolution.value.set(width, height);\n  }\n};\n\n// src/materials/SSAOMaterial.js\nimport { BasicDepthPacking as BasicDepthPacking7, Matrix4, NoBlending as NoBlending20, PerspectiveCamera as PerspectiveCamera6, ShaderMaterial as ShaderMaterial20, Uniform as Uniform20, Vector2 as Vector212 } from \"three\";\n\n// src/materials/glsl/ssao.frag\nvar ssao_default = \"#include <common>\\n#include <packing>\\n#ifdef NORMAL_DEPTH\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D normalDepthBuffer;\\n#else\\nuniform mediump sampler2D normalDepthBuffer;\\n#endif\\nfloat readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}\\n#else\\nuniform lowp sampler2D normalBuffer;\\n#if DEPTH_PACKING == 3201\\nuniform lowp sampler2D depthBuffer;\\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nfloat readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}\\n#endif\\nuniform lowp sampler2D noiseTexture;uniform mat4 inverseProjectionMatrix;uniform mat4 projectionMatrix;uniform vec2 texelSize;uniform vec2 cameraNearFar;uniform float intensity;uniform float minRadiusScale;uniform float fade;uniform float bias;uniform vec2 distanceCutoff;uniform vec2 proximityCutoff;varying vec2 vUv;varying vec2 vUv2;float getViewZ(const in float depth){\\n#ifdef PERSPECTIVE_CAMERA\\nreturn perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\\n#else\\nreturn orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\\n#endif\\n}vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){vec4 clipPosition=vec4(vec3(screenPosition,depth)*2.0-1.0,1.0);float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];clipPosition*=clipW;return(inverseProjectionMatrix*clipPosition).xyz;}float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){float radiusScale=1.0-smoothstep(0.0,distanceCutoff.y,depth);radiusScale=radiusScale*(1.0-minRadiusScale)+minRadiusScale;float radius=RADIUS*radiusScale;float noise=texture2D(noiseTexture,vUv2).r;float baseAngle=noise*PI2;float rings=SPIRAL_TURNS*PI2;float occlusion=0.0;int taps=0;for(int i=0;i<SAMPLES_INT;++i){float alpha=(float(i)+0.5)*INV_SAMPLES_FLOAT;float angle=alpha*rings+baseAngle;vec2 rotation=vec2(cos(angle),sin(angle));vec2 coords=alpha*radius*rotation*texelSize+uv;if(coords.s<0.0||coords.s>1.0||coords.t<0.0||coords.t>1.0){continue;}float sampleDepth=readDepth(coords);float viewZ=getViewZ(sampleDepth);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat linearSampleDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);\\n#else\\nfloat linearSampleDepth=sampleDepth;\\n#endif\\nfloat proximity=abs(depth-linearSampleDepth);if(proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);vec3 Q=getViewPosition(coords,sampleDepth,viewZ);vec3 v=Q-p;float vv=dot(v,v);float vn=dot(v,n)-bias;float f=max(RADIUS_SQ-vv,0.0)/RADIUS_SQ;occlusion+=(f*f*f*max(vn/(fade+vv),0.0))*falloff;}++taps;}return occlusion/(4.0*max(float(taps),1.0));}void main(){\\n#ifdef NORMAL_DEPTH\\nvec4 normalDepth=texture2D(normalDepthBuffer,vUv);\\n#else\\nvec4 normalDepth=vec4(texture2D(normalBuffer,vUv).xyz,readDepth(vUv));\\n#endif\\nfloat ao=0.0;float depth=normalDepth.a;float viewZ=getViewZ(depth);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat linearDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);\\n#else\\nfloat linearDepth=depth;\\n#endif\\nif(linearDepth<distanceCutoff.y){vec3 viewPosition=getViewPosition(vUv,depth,viewZ);vec3 viewNormal=unpackRGBToNormal(normalDepth.rgb);ao+=getAmbientOcclusion(viewPosition,viewNormal,linearDepth,vUv);float d=smoothstep(distanceCutoff.x,distanceCutoff.y,linearDepth);ao=mix(ao,0.0,d);\\n#ifdef LEGACY_INTENSITY\\nao=clamp(1.0-pow(1.0-ao,abs(intensity)),0.0,1.0);\\n#endif\\n}gl_FragColor.r=ao;}\";\n\n// src/materials/glsl/ssao.vert\nvar ssao_default2 = \"uniform vec2 noiseScale;varying vec2 vUv;varying vec2 vUv2;void main(){vUv=position.xy*0.5+0.5;vUv2=vUv*noiseScale;gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/SSAOMaterial.js\nvar SSAOMaterial = class extends ShaderMaterial20 {\n  constructor(camera) {\n    super({\n      name: \"SSAOMaterial\",\n      defines: {\n        SAMPLES_INT: \"0\",\n        INV_SAMPLES_FLOAT: \"0.0\",\n        SPIRAL_TURNS: \"0.0\",\n        RADIUS: \"1.0\",\n        RADIUS_SQ: \"1.0\",\n        DISTANCE_SCALING: \"1\",\n        DEPTH_PACKING: \"0\"\n      },\n      uniforms: {\n        depthBuffer: new Uniform20(null),\n        normalBuffer: new Uniform20(null),\n        normalDepthBuffer: new Uniform20(null),\n        noiseTexture: new Uniform20(null),\n        inverseProjectionMatrix: new Uniform20(new Matrix4()),\n        projectionMatrix: new Uniform20(new Matrix4()),\n        texelSize: new Uniform20(new Vector212()),\n        cameraNearFar: new Uniform20(new Vector212()),\n        distanceCutoff: new Uniform20(new Vector212()),\n        proximityCutoff: new Uniform20(new Vector212()),\n        noiseScale: new Uniform20(new Vector212()),\n        minRadiusScale: new Uniform20(0.33),\n        intensity: new Uniform20(1),\n        fade: new Uniform20(0.01),\n        bias: new Uniform20(0)\n      },\n      blending: NoBlending20,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: ssao_default,\n      vertexShader: ssao_default2\n    });\n    this.toneMapped = false;\n    this.copyCameraSettings(camera);\n    this.resolution = new Vector212();\n    this.r = 1;\n  }\n  get near() {\n    return this.uniforms.cameraNearFar.value.x;\n  }\n  get far() {\n    return this.uniforms.cameraNearFar.value.y;\n  }\n  set normalDepthBuffer(value) {\n    this.uniforms.normalDepthBuffer.value = value;\n    if (value !== null) {\n      this.defines.NORMAL_DEPTH = \"1\";\n    } else {\n      delete this.defines.NORMAL_DEPTH;\n    }\n    this.needsUpdate = true;\n  }\n  setNormalDepthBuffer(value) {\n    this.normalDepthBuffer = value;\n  }\n  set normalBuffer(value) {\n    this.uniforms.normalBuffer.value = value;\n  }\n  setNormalBuffer(value) {\n    this.uniforms.normalBuffer.value = value;\n  }\n  set depthBuffer(value) {\n    this.uniforms.depthBuffer.value = value;\n  }\n  set depthPacking(value) {\n    this.defines.DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer(buffer, depthPacking = BasicDepthPacking7) {\n    this.depthBuffer = buffer;\n    this.depthPacking = depthPacking;\n  }\n  set noiseTexture(value) {\n    this.uniforms.noiseTexture.value = value;\n  }\n  setNoiseTexture(value) {\n    this.uniforms.noiseTexture.value = value;\n  }\n  get samples() {\n    return Number(this.defines.SAMPLES_INT);\n  }\n  set samples(value) {\n    this.defines.SAMPLES_INT = value.toFixed(0);\n    this.defines.INV_SAMPLES_FLOAT = (1 / value).toFixed(9);\n    this.needsUpdate = true;\n  }\n  getSamples() {\n    return this.samples;\n  }\n  setSamples(value) {\n    this.samples = value;\n  }\n  get rings() {\n    return Number(this.defines.SPIRAL_TURNS);\n  }\n  set rings(value) {\n    this.defines.SPIRAL_TURNS = value.toFixed(1);\n    this.needsUpdate = true;\n  }\n  getRings() {\n    return this.rings;\n  }\n  setRings(value) {\n    this.rings = value;\n  }\n  get intensity() {\n    return this.uniforms.intensity.value;\n  }\n  set intensity(value) {\n    this.uniforms.intensity.value = value;\n    if (this.defines.LEGACY_INTENSITY === void 0) {\n      this.defines.LEGACY_INTENSITY = \"1\";\n      this.needsUpdate = true;\n    }\n  }\n  getIntensity() {\n    return this.uniforms.intensity.value;\n  }\n  setIntensity(value) {\n    this.uniforms.intensity.value = value;\n  }\n  get fade() {\n    return this.uniforms.fade.value;\n  }\n  set fade(value) {\n    this.uniforms.fade.value = value;\n  }\n  getFade() {\n    return this.uniforms.fade.value;\n  }\n  setFade(value) {\n    this.uniforms.fade.value = value;\n  }\n  get bias() {\n    return this.uniforms.bias.value;\n  }\n  set bias(value) {\n    this.uniforms.bias.value = value;\n  }\n  getBias() {\n    return this.uniforms.bias.value;\n  }\n  setBias(value) {\n    this.uniforms.bias.value = value;\n  }\n  get minRadiusScale() {\n    return this.uniforms.minRadiusScale.value;\n  }\n  set minRadiusScale(value) {\n    this.uniforms.minRadiusScale.value = value;\n  }\n  getMinRadiusScale() {\n    return this.uniforms.minRadiusScale.value;\n  }\n  setMinRadiusScale(value) {\n    this.uniforms.minRadiusScale.value = value;\n  }\n  updateRadius() {\n    const radius = this.r * this.resolution.height;\n    this.defines.RADIUS = radius.toFixed(11);\n    this.defines.RADIUS_SQ = (radius * radius).toFixed(11);\n    this.needsUpdate = true;\n  }\n  get radius() {\n    return this.r;\n  }\n  set radius(value) {\n    this.r = Math.min(Math.max(value, 1e-6), 1);\n    this.updateRadius();\n  }\n  getRadius() {\n    return this.radius;\n  }\n  setRadius(value) {\n    this.radius = value;\n  }\n  get distanceScaling() {\n    return true;\n  }\n  set distanceScaling(value) {\n  }\n  isDistanceScalingEnabled() {\n    return this.distanceScaling;\n  }\n  setDistanceScalingEnabled(value) {\n    this.distanceScaling = value;\n  }\n  get distanceThreshold() {\n    return this.uniforms.distanceCutoff.value.x;\n  }\n  set distanceThreshold(value) {\n    this.uniforms.distanceCutoff.value.set(\n      Math.min(Math.max(value, 0), 1),\n      Math.min(Math.max(value + this.distanceFalloff, 0), 1)\n    );\n  }\n  get worldDistanceThreshold() {\n    return -orthographicDepthToViewZ(this.distanceThreshold, this.near, this.far);\n  }\n  set worldDistanceThreshold(value) {\n    this.distanceThreshold = viewZToOrthographicDepth(-value, this.near, this.far);\n  }\n  get distanceFalloff() {\n    return this.uniforms.distanceCutoff.value.y - this.distanceThreshold;\n  }\n  set distanceFalloff(value) {\n    this.uniforms.distanceCutoff.value.y = Math.min(Math.max(this.distanceThreshold + value, 0), 1);\n  }\n  get worldDistanceFalloff() {\n    return -orthographicDepthToViewZ(this.distanceFalloff, this.near, this.far);\n  }\n  set worldDistanceFalloff(value) {\n    this.distanceFalloff = viewZToOrthographicDepth(-value, this.near, this.far);\n  }\n  setDistanceCutoff(threshold, falloff) {\n    this.uniforms.distanceCutoff.value.set(\n      Math.min(Math.max(threshold, 0), 1),\n      Math.min(Math.max(threshold + falloff, 0), 1)\n    );\n  }\n  get proximityThreshold() {\n    return this.uniforms.proximityCutoff.value.x;\n  }\n  set proximityThreshold(value) {\n    this.uniforms.proximityCutoff.value.set(\n      Math.min(Math.max(value, 0), 1),\n      Math.min(Math.max(value + this.proximityFalloff, 0), 1)\n    );\n  }\n  get worldProximityThreshold() {\n    return -orthographicDepthToViewZ(this.proximityThreshold, this.near, this.far);\n  }\n  set worldProximityThreshold(value) {\n    this.proximityThreshold = viewZToOrthographicDepth(-value, this.near, this.far);\n  }\n  get proximityFalloff() {\n    return this.uniforms.proximityCutoff.value.y - this.proximityThreshold;\n  }\n  set proximityFalloff(value) {\n    this.uniforms.proximityCutoff.value.y = Math.min(Math.max(this.proximityThreshold + value, 0), 1);\n  }\n  get worldProximityFalloff() {\n    return -orthographicDepthToViewZ(this.proximityFalloff, this.near, this.far);\n  }\n  set worldProximityFalloff(value) {\n    this.proximityFalloff = viewZToOrthographicDepth(-value, this.near, this.far);\n  }\n  setProximityCutoff(threshold, falloff) {\n    this.uniforms.proximityCutoff.value.set(\n      Math.min(Math.max(threshold, 0), 1),\n      Math.min(Math.max(threshold + falloff, 0), 1)\n    );\n  }\n  setTexelSize(x, y) {\n    this.uniforms.texelSize.value.set(x, y);\n  }\n  adoptCameraSettings(camera) {\n    this.copyCameraSettings(camera);\n  }\n  copyCameraSettings(camera) {\n    if (camera) {\n      this.uniforms.cameraNearFar.value.set(camera.near, camera.far);\n      this.uniforms.projectionMatrix.value.copy(camera.projectionMatrix);\n      this.uniforms.inverseProjectionMatrix.value.copy(camera.projectionMatrix).invert();\n      if (camera instanceof PerspectiveCamera6) {\n        this.defines.PERSPECTIVE_CAMERA = \"1\";\n      } else {\n        delete this.defines.PERSPECTIVE_CAMERA;\n      }\n      this.needsUpdate = true;\n    }\n  }\n  setSize(width, height) {\n    const uniforms = this.uniforms;\n    const noiseTexture = uniforms.noiseTexture.value;\n    if (noiseTexture !== null) {\n      uniforms.noiseScale.value.set(\n        width / noiseTexture.image.width,\n        height / noiseTexture.image.height\n      );\n    }\n    uniforms.texelSize.value.set(1 / width, 1 / height);\n    this.resolution.set(width, height);\n    this.updateRadius();\n  }\n};\n\n// src/materials/TiltShiftBlurMaterial.js\nimport { Uniform as Uniform21, Vector2 as Vector213, Vector4 as Vector42 } from \"three\";\n\n// src/materials/glsl/convolution.tilt-shift.frag\nvar convolution_tilt_shift_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\nuniform vec4 maskParams;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;float linearGradientMask(const in float x){return smoothstep(maskParams.x,maskParams.y,x)-smoothstep(maskParams.w,maskParams.z,x);}void main(){vec2 dUv=vOffset*(1.0-linearGradientMask(vUv2.y));vec4 sum=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y-dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y-dUv.y));gl_FragColor=sum*0.25;\\n#include <encodings_fragment>\\n}\";\n\n// src/materials/glsl/convolution.tilt-shift.vert\nvar convolution_tilt_shift_default2 = \"uniform vec4 texelSize;uniform float kernel;uniform float scale;uniform float aspect;uniform vec2 rotation;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;void main(){vec2 uv=position.xy*0.5+0.5;vUv=uv;vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));vOffset=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/TiltShiftBlurMaterial.js\nvar TiltShiftBlurMaterial = class extends KawaseBlurMaterial {\n  constructor({\n    kernelSize = KernelSize.MEDIUM,\n    offset = 0,\n    rotation = 0,\n    focusArea = 0.4,\n    feather = 0.3\n  } = {}) {\n    super();\n    this.fragmentShader = convolution_tilt_shift_default;\n    this.vertexShader = convolution_tilt_shift_default2;\n    this.kernelSize = kernelSize;\n    this.uniforms.aspect = new Uniform21(1);\n    this.uniforms.rotation = new Uniform21(new Vector213());\n    this.uniforms.maskParams = new Uniform21(new Vector42());\n    this._offset = offset;\n    this._focusArea = focusArea;\n    this._feather = feather;\n    this.rotation = rotation;\n    this.updateParams();\n  }\n  updateParams() {\n    const params = this.uniforms.maskParams.value;\n    const a = Math.max(this.focusArea, 0);\n    const b = Math.max(a - this.feather, 0);\n    params.set(\n      this.offset - a,\n      this.offset - b,\n      this.offset + a,\n      this.offset + b\n    );\n  }\n  get rotation() {\n    return Math.acos(this.uniforms.rotation.value.x);\n  }\n  set rotation(value) {\n    this.uniforms.rotation.value.set(Math.cos(value), Math.sin(value));\n  }\n  get offset() {\n    return this._offset;\n  }\n  set offset(value) {\n    this._offset = value;\n    this.updateParams();\n  }\n  get focusArea() {\n    return this._focusArea;\n  }\n  set focusArea(value) {\n    this._focusArea = value;\n    this.updateParams();\n  }\n  get feather() {\n    return this._feather;\n  }\n  set feather(value) {\n    this._feather = value;\n    this.updateParams();\n  }\n  setSize(width, height) {\n    super.setSize(width, height);\n    this.uniforms.aspect.value = width / height;\n  }\n};\n\n// src/materials/UpsamplingMaterial.js\nimport { NoBlending as NoBlending21, ShaderMaterial as ShaderMaterial21, Uniform as Uniform22, Vector2 as Vector214 } from \"three\";\n\n// src/materials/glsl/convolution.upsampling.frag\nvar convolution_upsampling_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;\\n#endif\\nuniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);\\n#include <encodings_fragment>\\n}\";\n\n// src/materials/glsl/convolution.upsampling.vert\nvar convolution_upsampling_default2 = \"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/UpsamplingMaterial.js\nvar UpsamplingMaterial = class extends ShaderMaterial21 {\n  constructor() {\n    super({\n      name: \"UpsamplingMaterial\",\n      uniforms: {\n        inputBuffer: new Uniform22(null),\n        supportBuffer: new Uniform22(null),\n        texelSize: new Uniform22(new Vector214()),\n        radius: new Uniform22(0.85)\n      },\n      blending: NoBlending21,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: convolution_upsampling_default,\n      vertexShader: convolution_upsampling_default2\n    });\n    this.toneMapped = false;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  set supportBuffer(value) {\n    this.uniforms.supportBuffer.value = value;\n  }\n  get radius() {\n    return this.uniforms.radius.value;\n  }\n  set radius(value) {\n    this.uniforms.radius.value = value;\n  }\n  setSize(width, height) {\n    this.uniforms.texelSize.value.set(1 / width, 1 / height);\n  }\n};\n\n// src/passes/CopyPass.js\nimport { LinearFilter, sRGBEncoding as sRGBEncoding2, UnsignedByteType as UnsignedByteType3, WebGLRenderTarget as WebGLRenderTarget2 } from \"three\";\n\n// src/passes/Pass.js\nimport {\n  BasicDepthPacking as BasicDepthPacking8,\n  BufferAttribute,\n  BufferGeometry,\n  Camera,\n  Material,\n  Mesh,\n  Scene,\n  Texture,\n  WebGLRenderTarget\n} from \"three\";\nvar dummyCamera = new Camera();\nvar geometry = null;\nfunction getFullscreenTriangle() {\n  if (geometry === null) {\n    const vertices = new Float32Array([-1, -1, 0, 3, -1, 0, -1, 3, 0]);\n    const uvs = new Float32Array([0, 0, 2, 0, 0, 2]);\n    geometry = new BufferGeometry();\n    if (geometry.setAttribute !== void 0) {\n      geometry.setAttribute(\"position\", new BufferAttribute(vertices, 3));\n      geometry.setAttribute(\"uv\", new BufferAttribute(uvs, 2));\n    } else {\n      geometry.addAttribute(\"position\", new BufferAttribute(vertices, 3));\n      geometry.addAttribute(\"uv\", new BufferAttribute(uvs, 2));\n    }\n  }\n  return geometry;\n}\nvar Pass = class {\n  constructor(name = \"Pass\", scene = new Scene(), camera = dummyCamera) {\n    this.name = name;\n    this.renderer = null;\n    this.scene = scene;\n    this.camera = camera;\n    this.screen = null;\n    this.rtt = true;\n    this.needsSwap = true;\n    this.needsDepthTexture = false;\n    this.enabled = true;\n  }\n  get renderToScreen() {\n    return !this.rtt;\n  }\n  set renderToScreen(value) {\n    if (this.rtt === value) {\n      const material = this.fullscreenMaterial;\n      if (material !== null) {\n        material.needsUpdate = true;\n      }\n      this.rtt = !value;\n    }\n  }\n  set mainScene(value) {\n  }\n  set mainCamera(value) {\n  }\n  setRenderer(renderer) {\n    this.renderer = renderer;\n  }\n  isEnabled() {\n    return this.enabled;\n  }\n  setEnabled(value) {\n    this.enabled = value;\n  }\n  get fullscreenMaterial() {\n    return this.screen !== null ? this.screen.material : null;\n  }\n  set fullscreenMaterial(value) {\n    let screen = this.screen;\n    if (screen !== null) {\n      screen.material = value;\n    } else {\n      screen = new Mesh(getFullscreenTriangle(), value);\n      screen.frustumCulled = false;\n      if (this.scene === null) {\n        this.scene = new Scene();\n      }\n      this.scene.add(screen);\n      this.screen = screen;\n    }\n  }\n  getFullscreenMaterial() {\n    return this.fullscreenMaterial;\n  }\n  setFullscreenMaterial(value) {\n    this.fullscreenMaterial = value;\n  }\n  getDepthTexture() {\n    return null;\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking8) {\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    throw new Error(\"Render method not implemented!\");\n  }\n  setSize(width, height) {\n  }\n  initialize(renderer, alpha, frameBufferType) {\n  }\n  dispose() {\n    for (const key of Object.keys(this)) {\n      const property = this[key];\n      const isDisposable = property instanceof WebGLRenderTarget || property instanceof Material || property instanceof Texture || property instanceof Pass;\n      if (isDisposable) {\n        this[key].dispose();\n      }\n    }\n  }\n};\n\n// src/passes/CopyPass.js\nvar CopyPass = class extends Pass {\n  constructor(renderTarget, autoResize = true) {\n    super(\"CopyPass\");\n    this.fullscreenMaterial = new CopyMaterial();\n    this.needsSwap = false;\n    this.renderTarget = renderTarget;\n    if (renderTarget === void 0) {\n      this.renderTarget = new WebGLRenderTarget2(1, 1, {\n        minFilter: LinearFilter,\n        magFilter: LinearFilter,\n        stencilBuffer: false,\n        depthBuffer: false\n      });\n      this.renderTarget.texture.name = \"CopyPass.Target\";\n    }\n    this.autoResize = autoResize;\n  }\n  get resize() {\n    return this.autoResize;\n  }\n  set resize(value) {\n    this.autoResize = value;\n  }\n  get texture() {\n    return this.renderTarget.texture;\n  }\n  getTexture() {\n    return this.renderTarget.texture;\n  }\n  setAutoResizeEnabled(value) {\n    this.autoResize = value;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    this.fullscreenMaterial.inputBuffer = inputBuffer.texture;\n    renderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\n    renderer.render(this.scene, this.camera);\n  }\n  setSize(width, height) {\n    if (this.autoResize) {\n      this.renderTarget.setSize(width, height);\n    }\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    if (frameBufferType !== void 0) {\n      this.renderTarget.texture.type = frameBufferType;\n      if (frameBufferType !== UnsignedByteType3) {\n        this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n      } else if (renderer.outputEncoding === sRGBEncoding2) {\n        this.renderTarget.texture.encoding = sRGBEncoding2;\n      }\n    }\n  }\n};\n\n// src/passes/AdaptiveLuminancePass.js\nvar AdaptiveLuminancePass = class extends Pass {\n  constructor(luminanceBuffer, { minLuminance = 0.01, adaptationRate = 1 } = {}) {\n    super(\"AdaptiveLuminancePass\");\n    this.fullscreenMaterial = new AdaptiveLuminanceMaterial();\n    this.needsSwap = false;\n    this.renderTargetPrevious = new WebGLRenderTarget3(1, 1, {\n      minFilter: NearestFilter,\n      magFilter: NearestFilter,\n      depthBuffer: false\n    });\n    this.renderTargetPrevious.texture.name = \"Luminance.Previous\";\n    const material = this.fullscreenMaterial;\n    material.luminanceBuffer0 = this.renderTargetPrevious.texture;\n    material.luminanceBuffer1 = luminanceBuffer;\n    material.minLuminance = minLuminance;\n    material.adaptationRate = adaptationRate;\n    this.renderTargetAdapted = this.renderTargetPrevious.clone();\n    this.renderTargetAdapted.texture.name = \"Luminance.Adapted\";\n    this.copyPass = new CopyPass(this.renderTargetPrevious, false);\n  }\n  get texture() {\n    return this.renderTargetAdapted.texture;\n  }\n  getTexture() {\n    return this.renderTargetAdapted.texture;\n  }\n  set mipLevel1x1(value) {\n    this.fullscreenMaterial.mipLevel1x1 = value;\n  }\n  get adaptationRate() {\n    return this.fullscreenMaterial.adaptationRate;\n  }\n  set adaptationRate(value) {\n    this.fullscreenMaterial.adaptationRate = value;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    this.fullscreenMaterial.deltaTime = deltaTime;\n    renderer.setRenderTarget(this.renderToScreen ? null : this.renderTargetAdapted);\n    renderer.render(this.scene, this.camera);\n    this.copyPass.render(renderer, this.renderTargetAdapted);\n  }\n};\n\n// src/passes/BoxBlurPass.js\nimport { BasicDepthPacking as BasicDepthPacking9, sRGBEncoding as sRGBEncoding3, UnsignedByteType as UnsignedByteType4, WebGLRenderTarget as WebGLRenderTarget4 } from \"three\";\nvar BoxBlurPass = class extends Pass {\n  constructor({\n    kernelSize = 5,\n    iterations = 1,\n    bilateral = false,\n    resolutionScale = 1,\n    resolutionX = Resolution.AUTO_SIZE,\n    resolutionY = Resolution.AUTO_SIZE\n  } = {}) {\n    super(\"BoxBlurPass\");\n    this.needsDepthTexture = bilateral;\n    this.renderTargetA = new WebGLRenderTarget4(1, 1, { depthBuffer: false });\n    this.renderTargetA.texture.name = \"Blur.Target.A\";\n    this.renderTargetB = new WebGLRenderTarget4(1, 1, { depthBuffer: false });\n    this.renderTargetB.texture.name = \"Blur.Target.B\";\n    this.blurMaterial = new BoxBlurMaterial({ bilateral, kernelSize });\n    this.copyMaterial = new CopyMaterial();\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n    this.iterations = iterations;\n  }\n  set mainCamera(value) {\n    this.blurMaterial.copyCameraSettings(value);\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking9) {\n    this.blurMaterial.depthBuffer = depthTexture;\n    this.blurMaterial.depthPacking = depthPacking;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const scene = this.scene;\n    const camera = this.camera;\n    const renderTargetA = this.renderTargetA;\n    const renderTargetB = this.renderTargetB;\n    const blurMaterial = this.blurMaterial;\n    this.fullscreenMaterial = blurMaterial;\n    let previousBuffer = inputBuffer;\n    for (let i = 0, l = Math.max(this.iterations, 1); i < l; ++i) {\n      const buffer = (i & 1) === 0 ? renderTargetA : renderTargetB;\n      blurMaterial.inputBuffer = previousBuffer.texture;\n      renderer.setRenderTarget(buffer);\n      renderer.render(scene, camera);\n      previousBuffer = buffer;\n    }\n    this.copyMaterial.inputBuffer = previousBuffer.texture;\n    this.fullscreenMaterial = this.copyMaterial;\n    renderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\n    renderer.render(scene, camera);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    const w = resolution.width, h = resolution.height;\n    this.renderTargetA.setSize(w, h);\n    this.renderTargetB.setSize(w, h);\n    this.blurMaterial.setSize(width, height);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    this.blurMaterial.maxVaryingVectors = renderer.capabilities.maxVaryings;\n    if (frameBufferType !== void 0) {\n      this.renderTargetA.texture.type = frameBufferType;\n      this.renderTargetB.texture.type = frameBufferType;\n      if (frameBufferType !== UnsignedByteType4) {\n        this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n      } else if (renderer.outputEncoding === sRGBEncoding3) {\n        this.renderTargetA.texture.encoding = sRGBEncoding3;\n        this.renderTargetB.texture.encoding = sRGBEncoding3;\n      }\n    }\n  }\n};\n\n// src/passes/ClearMaskPass.js\nvar ClearMaskPass = class extends Pass {\n  constructor() {\n    super(\"ClearMaskPass\", null, null);\n    this.needsSwap = false;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const stencil = renderer.state.buffers.stencil;\n    stencil.setLocked(false);\n    stencil.setTest(false);\n  }\n};\n\n// src/passes/ClearPass.js\nimport { Color } from \"three\";\nvar color = new Color();\nvar ClearPass = class extends Pass {\n  constructor(color2 = true, depth = true, stencil = false) {\n    super(\"ClearPass\", null, null);\n    this.needsSwap = false;\n    this.color = color2;\n    this.depth = depth;\n    this.stencil = stencil;\n    this.overrideClearColor = null;\n    this.overrideClearAlpha = -1;\n  }\n  setClearFlags(color2, depth, stencil) {\n    this.color = color2;\n    this.depth = depth;\n    this.stencil = stencil;\n  }\n  getOverrideClearColor() {\n    return this.overrideClearColor;\n  }\n  setOverrideClearColor(value) {\n    this.overrideClearColor = value;\n  }\n  getOverrideClearAlpha() {\n    return this.overrideClearAlpha;\n  }\n  setOverrideClearAlpha(value) {\n    this.overrideClearAlpha = value;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const overrideClearColor = this.overrideClearColor;\n    const overrideClearAlpha = this.overrideClearAlpha;\n    const clearAlpha = renderer.getClearAlpha();\n    const hasOverrideClearColor = overrideClearColor !== null;\n    const hasOverrideClearAlpha = overrideClearAlpha >= 0;\n    if (hasOverrideClearColor) {\n      renderer.getClearColor(color);\n      renderer.setClearColor(overrideClearColor, hasOverrideClearAlpha ? overrideClearAlpha : clearAlpha);\n    } else if (hasOverrideClearAlpha) {\n      renderer.setClearAlpha(overrideClearAlpha);\n    }\n    renderer.setRenderTarget(this.renderToScreen ? null : inputBuffer);\n    renderer.clear(this.color, this.depth, this.stencil);\n    if (hasOverrideClearColor) {\n      renderer.setClearColor(color, clearAlpha);\n    } else if (hasOverrideClearAlpha) {\n      renderer.setClearAlpha(clearAlpha);\n    }\n  }\n};\n\n// src/passes/DepthPass.js\nimport { Color as Color2, MeshDepthMaterial, NearestFilter as NearestFilter2, RGBADepthPacking as RGBADepthPacking2, WebGLRenderTarget as WebGLRenderTarget5 } from \"three\";\n\n// src/core/Resolution.js\nimport { EventDispatcher, Vector2 as Vector215 } from \"three\";\nvar AUTO_SIZE = -1;\nvar Resolution = class extends EventDispatcher {\n  constructor(resizable, width = AUTO_SIZE, height = AUTO_SIZE, scale = 1) {\n    super();\n    this.resizable = resizable;\n    this.baseSize = new Vector215(1, 1);\n    this.preferredSize = new Vector215(width, height);\n    this.target = this.preferredSize;\n    this.s = scale;\n    this.effectiveSize = new Vector215();\n    this.addEventListener(\"change\", () => this.updateEffectiveSize());\n    this.updateEffectiveSize();\n  }\n  updateEffectiveSize() {\n    const base = this.baseSize;\n    const preferred = this.preferredSize;\n    const effective = this.effectiveSize;\n    const scale = this.scale;\n    if (preferred.width !== AUTO_SIZE) {\n      effective.width = preferred.width;\n    } else if (preferred.height !== AUTO_SIZE) {\n      effective.width = Math.round(preferred.height * (base.width / Math.max(base.height, 1)));\n    } else {\n      effective.width = Math.round(base.width * scale);\n    }\n    if (preferred.height !== AUTO_SIZE) {\n      effective.height = preferred.height;\n    } else if (preferred.width !== AUTO_SIZE) {\n      effective.height = Math.round(preferred.width / Math.max(base.width / Math.max(base.height, 1), 1));\n    } else {\n      effective.height = Math.round(base.height * scale);\n    }\n  }\n  get width() {\n    return this.effectiveSize.width;\n  }\n  set width(value) {\n    this.preferredWidth = value;\n  }\n  get height() {\n    return this.effectiveSize.height;\n  }\n  set height(value) {\n    this.preferredHeight = value;\n  }\n  getWidth() {\n    return this.width;\n  }\n  getHeight() {\n    return this.height;\n  }\n  get scale() {\n    return this.s;\n  }\n  set scale(value) {\n    if (this.s !== value) {\n      this.s = value;\n      this.preferredSize.setScalar(AUTO_SIZE);\n      this.dispatchEvent({ type: \"change\" });\n      this.resizable.setSize(this.baseSize.width, this.baseSize.height);\n    }\n  }\n  getScale() {\n    return this.scale;\n  }\n  setScale(value) {\n    this.scale = value;\n  }\n  get baseWidth() {\n    return this.baseSize.width;\n  }\n  set baseWidth(value) {\n    if (this.baseSize.width !== value) {\n      this.baseSize.width = value;\n      this.dispatchEvent({ type: \"change\" });\n      this.resizable.setSize(this.baseSize.width, this.baseSize.height);\n    }\n  }\n  getBaseWidth() {\n    return this.baseWidth;\n  }\n  setBaseWidth(value) {\n    this.baseWidth = value;\n  }\n  get baseHeight() {\n    return this.baseSize.height;\n  }\n  set baseHeight(value) {\n    if (this.baseSize.height !== value) {\n      this.baseSize.height = value;\n      this.dispatchEvent({ type: \"change\" });\n      this.resizable.setSize(this.baseSize.width, this.baseSize.height);\n    }\n  }\n  getBaseHeight() {\n    return this.baseHeight;\n  }\n  setBaseHeight(value) {\n    this.baseHeight = value;\n  }\n  setBaseSize(width, height) {\n    if (this.baseSize.width !== width || this.baseSize.height !== height) {\n      this.baseSize.set(width, height);\n      this.dispatchEvent({ type: \"change\" });\n      this.resizable.setSize(this.baseSize.width, this.baseSize.height);\n    }\n  }\n  get preferredWidth() {\n    return this.preferredSize.width;\n  }\n  set preferredWidth(value) {\n    if (this.preferredSize.width !== value) {\n      this.preferredSize.width = value;\n      this.dispatchEvent({ type: \"change\" });\n      this.resizable.setSize(this.baseSize.width, this.baseSize.height);\n    }\n  }\n  getPreferredWidth() {\n    return this.preferredWidth;\n  }\n  setPreferredWidth(value) {\n    this.preferredWidth = value;\n  }\n  get preferredHeight() {\n    return this.preferredSize.height;\n  }\n  set preferredHeight(value) {\n    if (this.preferredSize.height !== value) {\n      this.preferredSize.height = value;\n      this.dispatchEvent({ type: \"change\" });\n      this.resizable.setSize(this.baseSize.width, this.baseSize.height);\n    }\n  }\n  getPreferredHeight() {\n    return this.preferredHeight;\n  }\n  setPreferredHeight(value) {\n    this.preferredHeight = value;\n  }\n  setPreferredSize(width, height) {\n    if (this.preferredSize.width !== width || this.preferredSize.height !== height) {\n      this.preferredSize.set(width, height);\n      this.dispatchEvent({ type: \"change\" });\n      this.resizable.setSize(this.baseSize.width, this.baseSize.height);\n    }\n  }\n  copy(resolution) {\n    this.s = resolution.scale;\n    this.baseSize.set(resolution.baseWidth, resolution.baseHeight);\n    this.preferredSize.set(resolution.preferredWidth, resolution.preferredHeight);\n    this.dispatchEvent({ type: \"change\" });\n    this.resizable.setSize(this.baseSize.width, this.baseSize.height);\n  }\n  static get AUTO_SIZE() {\n    return AUTO_SIZE;\n  }\n};\n\n// src/core/OverrideMaterialManager.js\nimport { BackSide, DoubleSide, FrontSide } from \"three\";\nvar workaroundEnabled = false;\nvar OverrideMaterialManager = class {\n  constructor(material = null) {\n    this.originalMaterials = /* @__PURE__ */ new Map();\n    this.material = null;\n    this.materials = null;\n    this.materialsBackSide = null;\n    this.materialsDoubleSide = null;\n    this.materialsFlatShaded = null;\n    this.materialsFlatShadedBackSide = null;\n    this.materialsFlatShadedDoubleSide = null;\n    this.setMaterial(material);\n    this.meshCount = 0;\n    this.replaceMaterial = (node) => {\n      if (node.isMesh) {\n        let materials;\n        if (node.material.flatShading) {\n          switch (node.material.side) {\n            case DoubleSide:\n              materials = this.materialsFlatShadedDoubleSide;\n              break;\n            case BackSide:\n              materials = this.materialsFlatShadedBackSide;\n              break;\n            default:\n              materials = this.materialsFlatShaded;\n              break;\n          }\n        } else {\n          switch (node.material.side) {\n            case DoubleSide:\n              materials = this.materialsDoubleSide;\n              break;\n            case BackSide:\n              materials = this.materialsBackSide;\n              break;\n            default:\n              materials = this.materials;\n              break;\n          }\n        }\n        this.originalMaterials.set(node, node.material);\n        if (node.isSkinnedMesh) {\n          node.material = materials[2];\n        } else if (node.isInstancedMesh) {\n          node.material = materials[1];\n        } else {\n          node.material = materials[0];\n        }\n        ++this.meshCount;\n      }\n    };\n  }\n  setMaterial(material) {\n    this.disposeMaterials();\n    this.material = material;\n    if (material !== null) {\n      const materials = this.materials = [\n        material.clone(),\n        material.clone(),\n        material.clone()\n      ];\n      for (const m2 of materials) {\n        m2.uniforms = Object.assign({}, material.uniforms);\n        m2.side = FrontSide;\n      }\n      materials[2].skinning = true;\n      this.materialsBackSide = materials.map((m2) => {\n        const c2 = m2.clone();\n        c2.uniforms = Object.assign({}, material.uniforms);\n        c2.side = BackSide;\n        return c2;\n      });\n      this.materialsDoubleSide = materials.map((m2) => {\n        const c2 = m2.clone();\n        c2.uniforms = Object.assign({}, material.uniforms);\n        c2.side = DoubleSide;\n        return c2;\n      });\n      this.materialsFlatShaded = materials.map((m2) => {\n        const c2 = m2.clone();\n        c2.uniforms = Object.assign({}, material.uniforms);\n        c2.flatShading = true;\n        return c2;\n      });\n      this.materialsFlatShadedBackSide = materials.map((m2) => {\n        const c2 = m2.clone();\n        c2.uniforms = Object.assign({}, material.uniforms);\n        c2.flatShading = true;\n        c2.side = BackSide;\n        return c2;\n      });\n      this.materialsFlatShadedDoubleSide = materials.map((m2) => {\n        const c2 = m2.clone();\n        c2.uniforms = Object.assign({}, material.uniforms);\n        c2.flatShading = true;\n        c2.side = DoubleSide;\n        return c2;\n      });\n    }\n  }\n  render(renderer, scene, camera) {\n    const shadowMapEnabled = renderer.shadowMap.enabled;\n    renderer.shadowMap.enabled = false;\n    if (workaroundEnabled) {\n      const originalMaterials = this.originalMaterials;\n      this.meshCount = 0;\n      scene.traverse(this.replaceMaterial);\n      renderer.render(scene, camera);\n      for (const entry of originalMaterials) {\n        entry[0].material = entry[1];\n      }\n      if (this.meshCount !== originalMaterials.size) {\n        originalMaterials.clear();\n      }\n    } else {\n      const overrideMaterial = scene.overrideMaterial;\n      scene.overrideMaterial = this.material;\n      renderer.render(scene, camera);\n      scene.overrideMaterial = overrideMaterial;\n    }\n    renderer.shadowMap.enabled = shadowMapEnabled;\n  }\n  disposeMaterials() {\n    if (this.material !== null) {\n      const materials = this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);\n      for (const m2 of materials) {\n        m2.dispose();\n      }\n    }\n  }\n  dispose() {\n    this.originalMaterials.clear();\n    this.disposeMaterials();\n  }\n  static get workaroundEnabled() {\n    return workaroundEnabled;\n  }\n  static set workaroundEnabled(value) {\n    workaroundEnabled = value;\n  }\n};\n\n// src/passes/RenderPass.js\nvar RenderPass = class extends Pass {\n  constructor(scene, camera, overrideMaterial = null) {\n    super(\"RenderPass\", scene, camera);\n    this.needsSwap = false;\n    this.clearPass = new ClearPass();\n    this.overrideMaterialManager = overrideMaterial === null ? null : new OverrideMaterialManager(overrideMaterial);\n    this.ignoreBackground = false;\n    this.skipShadowMapUpdate = false;\n    this.selection = null;\n  }\n  set mainScene(value) {\n    this.scene = value;\n  }\n  set mainCamera(value) {\n    this.camera = value;\n  }\n  get renderToScreen() {\n    return super.renderToScreen;\n  }\n  set renderToScreen(value) {\n    super.renderToScreen = value;\n    this.clearPass.renderToScreen = value;\n  }\n  get overrideMaterial() {\n    const manager = this.overrideMaterialManager;\n    return manager !== null ? manager.material : null;\n  }\n  set overrideMaterial(value) {\n    const manager = this.overrideMaterialManager;\n    if (value !== null) {\n      if (manager !== null) {\n        manager.setMaterial(value);\n      } else {\n        this.overrideMaterialManager = new OverrideMaterialManager(value);\n      }\n    } else if (manager !== null) {\n      manager.dispose();\n      this.overrideMaterialManager = null;\n    }\n  }\n  getOverrideMaterial() {\n    return this.overrideMaterial;\n  }\n  setOverrideMaterial(value) {\n    this.overrideMaterial = value;\n  }\n  get clear() {\n    return this.clearPass.enabled;\n  }\n  set clear(value) {\n    this.clearPass.enabled = value;\n  }\n  getSelection() {\n    return this.selection;\n  }\n  setSelection(value) {\n    this.selection = value;\n  }\n  isBackgroundDisabled() {\n    return this.ignoreBackground;\n  }\n  setBackgroundDisabled(value) {\n    this.ignoreBackground = value;\n  }\n  isShadowMapDisabled() {\n    return this.skipShadowMapUpdate;\n  }\n  setShadowMapDisabled(value) {\n    this.skipShadowMapUpdate = value;\n  }\n  getClearPass() {\n    return this.clearPass;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const scene = this.scene;\n    const camera = this.camera;\n    const selection = this.selection;\n    const mask = camera.layers.mask;\n    const background = scene.background;\n    const shadowMapAutoUpdate = renderer.shadowMap.autoUpdate;\n    const renderTarget = this.renderToScreen ? null : inputBuffer;\n    if (selection !== null) {\n      camera.layers.set(selection.getLayer());\n    }\n    if (this.skipShadowMapUpdate) {\n      renderer.shadowMap.autoUpdate = false;\n    }\n    if (this.ignoreBackground || this.clearPass.overrideClearColor !== null) {\n      scene.background = null;\n    }\n    if (this.clearPass.enabled) {\n      this.clearPass.render(renderer, inputBuffer);\n    }\n    renderer.setRenderTarget(renderTarget);\n    if (this.overrideMaterialManager !== null) {\n      this.overrideMaterialManager.render(renderer, scene, camera);\n    } else {\n      renderer.render(scene, camera);\n    }\n    camera.layers.mask = mask;\n    scene.background = background;\n    renderer.shadowMap.autoUpdate = shadowMapAutoUpdate;\n  }\n};\n\n// src/passes/DepthPass.js\nvar DepthPass = class extends Pass {\n  constructor(scene, camera, {\n    renderTarget,\n    resolutionScale = 1,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"DepthPass\");\n    this.needsSwap = false;\n    this.renderPass = new RenderPass(scene, camera, new MeshDepthMaterial({\n      depthPacking: RGBADepthPacking2\n    }));\n    const renderPass = this.renderPass;\n    renderPass.skipShadowMapUpdate = true;\n    renderPass.ignoreBackground = true;\n    const clearPass = renderPass.getClearPass();\n    clearPass.overrideClearColor = new Color2(16777215);\n    clearPass.overrideClearAlpha = 1;\n    this.renderTarget = renderTarget;\n    if (this.renderTarget === void 0) {\n      this.renderTarget = new WebGLRenderTarget5(1, 1, {\n        minFilter: NearestFilter2,\n        magFilter: NearestFilter2\n      });\n      this.renderTarget.texture.name = \"DepthPass.Target\";\n    }\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n  }\n  set mainScene(value) {\n    this.renderPass.mainScene = value;\n  }\n  set mainCamera(value) {\n    this.renderPass.mainCamera = value;\n  }\n  get texture() {\n    return this.renderTarget.texture;\n  }\n  getTexture() {\n    return this.renderTarget.texture;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  getResolutionScale() {\n    return this.resolution.scale;\n  }\n  setResolutionScale(scale) {\n    this.resolution.scale = scale;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const renderTarget = this.renderToScreen ? null : this.renderTarget;\n    this.renderPass.render(renderer, renderTarget);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    this.renderTarget.setSize(resolution.width, resolution.height);\n  }\n};\n\n// src/passes/DepthDownsamplingPass.js\nimport { BasicDepthPacking as BasicDepthPacking10, FloatType, NearestFilter as NearestFilter3, WebGLRenderTarget as WebGLRenderTarget6 } from \"three\";\nvar DepthDownsamplingPass = class extends Pass {\n  constructor({\n    normalBuffer = null,\n    resolutionScale = 0.5,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"DepthDownsamplingPass\");\n    const material = new DepthDownsamplingMaterial();\n    material.normalBuffer = normalBuffer;\n    this.fullscreenMaterial = material;\n    this.needsDepthTexture = true;\n    this.needsSwap = false;\n    this.renderTarget = new WebGLRenderTarget6(1, 1, {\n      minFilter: NearestFilter3,\n      magFilter: NearestFilter3,\n      depthBuffer: false,\n      type: FloatType\n    });\n    this.renderTarget.texture.name = \"DepthDownsamplingPass.Target\";\n    this.renderTarget.texture.generateMipmaps = false;\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n  }\n  get texture() {\n    return this.renderTarget.texture;\n  }\n  getTexture() {\n    return this.renderTarget.texture;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking10) {\n    this.fullscreenMaterial.depthBuffer = depthTexture;\n    this.fullscreenMaterial.depthPacking = depthPacking;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    renderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\n    renderer.render(this.scene, this.camera);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    this.renderTarget.setSize(resolution.width, resolution.height);\n    this.fullscreenMaterial.setSize(width, height);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    const gl = renderer.getContext();\n    const renderable = gl.getExtension(\"EXT_color_buffer_float\") || gl.getExtension(\"EXT_color_buffer_half_float\");\n    if (!renderable) {\n      throw new Error(\"Rendering to float texture is not supported.\");\n    }\n  }\n};\n\n// src/passes/DepthPickingPass.js\nimport { FloatType as FloatType3, RGBADepthPacking as RGBADepthPacking4 } from \"three\";\n\n// src/passes/DepthCopyPass.js\nimport {\n  BasicDepthPacking as BasicDepthPacking11,\n  FloatType as FloatType2,\n  NearestFilter as NearestFilter4,\n  RGBADepthPacking as RGBADepthPacking3,\n  UnsignedByteType as UnsignedByteType5,\n  WebGLRenderTarget as WebGLRenderTarget7\n} from \"three\";\nvar DepthCopyPass = class extends Pass {\n  constructor({ depthPacking = RGBADepthPacking3 } = {}) {\n    super(\"DepthCopyPass\");\n    const material = new DepthCopyMaterial();\n    material.outputDepthPacking = depthPacking;\n    this.fullscreenMaterial = material;\n    this.needsDepthTexture = true;\n    this.needsSwap = false;\n    this.renderTarget = new WebGLRenderTarget7(1, 1, {\n      type: depthPacking === RGBADepthPacking3 ? UnsignedByteType5 : FloatType2,\n      minFilter: NearestFilter4,\n      magFilter: NearestFilter4,\n      depthBuffer: false\n    });\n    this.renderTarget.texture.name = \"DepthCopyPass.Target\";\n  }\n  get texture() {\n    return this.renderTarget.texture;\n  }\n  getTexture() {\n    return this.renderTarget.texture;\n  }\n  get depthPacking() {\n    return this.fullscreenMaterial.outputDepthPacking;\n  }\n  getDepthPacking() {\n    return this.fullscreenMaterial.outputDepthPacking;\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking11) {\n    this.fullscreenMaterial.depthBuffer = depthTexture;\n    this.fullscreenMaterial.inputDepthPacking = depthPacking;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    renderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\n    renderer.render(this.scene, this.camera);\n  }\n  setSize(width, height) {\n    this.renderTarget.setSize(width, height);\n  }\n};\n\n// src/passes/DepthPickingPass.js\nvar unpackFactors = new Float32Array([\n  255 / 256 / 256 ** 3,\n  255 / 256 / 256 ** 2,\n  255 / 256 / 256,\n  255 / 256\n]);\nfunction unpackRGBAToDepth(packedDepth) {\n  return (packedDepth[0] * unpackFactors[0] + packedDepth[1] * unpackFactors[1] + packedDepth[2] * unpackFactors[2] + packedDepth[3] * unpackFactors[3]) / 255;\n}\nvar DepthPickingPass = class extends DepthCopyPass {\n  constructor({ depthPacking = RGBADepthPacking4, mode = DepthCopyMode.SINGLE } = {}) {\n    super({ depthPacking });\n    this.name = \"DepthPickingPass\";\n    this.fullscreenMaterial.mode = mode;\n    this.pixelBuffer = depthPacking === RGBADepthPacking4 ? new Uint8Array(4) : new Float32Array(4);\n    this.callback = null;\n  }\n  readDepth(ndc) {\n    this.fullscreenMaterial.texelPosition.set(ndc.x * 0.5 + 0.5, ndc.y * 0.5 + 0.5);\n    return new Promise((resolve) => {\n      this.callback = resolve;\n    });\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const material = this.fullscreenMaterial;\n    const mode = material.mode;\n    if (mode === DepthCopyMode.FULL) {\n      super.render(renderer);\n    }\n    if (this.callback !== null) {\n      const renderTarget = this.renderTarget;\n      const pixelBuffer = this.pixelBuffer;\n      const packed = renderTarget.texture.type !== FloatType3;\n      let x = 0, y = 0;\n      if (mode === DepthCopyMode.SINGLE) {\n        super.render(renderer);\n      } else {\n        const texelPosition = material.texelPosition;\n        x = Math.round(texelPosition.x * renderTarget.width);\n        y = Math.round(texelPosition.y * renderTarget.height);\n      }\n      renderer.readRenderTargetPixels(renderTarget, x, y, 1, 1, pixelBuffer);\n      this.callback(packed ? unpackRGBAToDepth(pixelBuffer) : pixelBuffer[0]);\n      this.callback = null;\n    }\n  }\n  setSize(width, height) {\n    if (this.fullscreenMaterial.mode === DepthCopyMode.FULL) {\n      super.setSize(width, height);\n    }\n  }\n};\n\n// src/passes/EffectPass.js\nimport { BasicDepthPacking as BasicDepthPacking12, UnsignedByteType as UnsignedByteType6, sRGBEncoding as sRGBEncoding4 } from \"three\";\nfunction prefixSubstrings(prefix, substrings, strings) {\n  for (const substring of substrings) {\n    const prefixed = \"$1\" + prefix + substring.charAt(0).toUpperCase() + substring.slice(1);\n    const regExp = new RegExp(\"([^\\\\.])(\\\\b\" + substring + \"\\\\b)\", \"g\");\n    for (const entry of strings.entries()) {\n      if (entry[1] !== null) {\n        strings.set(entry[0], entry[1].replace(regExp, prefixed));\n      }\n    }\n  }\n}\nfunction integrateEffect(prefix, effect, data) {\n  var _a, _b, _c, _d, _e;\n  let fragmentShader = effect.getFragmentShader();\n  let vertexShader = effect.getVertexShader();\n  const mainImageExists = fragmentShader !== void 0 && /mainImage/.test(fragmentShader);\n  const mainUvExists = fragmentShader !== void 0 && /mainUv/.test(fragmentShader);\n  data.attributes |= effect.getAttributes();\n  if (fragmentShader === void 0) {\n    throw new Error(`Missing fragment shader (${effect.name})`);\n  } else if (mainUvExists && (data.attributes & EffectAttribute.CONVOLUTION) !== 0) {\n    throw new Error(`Effects that transform UVs are incompatible with convolution effects (${effect.name})`);\n  } else if (!mainImageExists && !mainUvExists) {\n    throw new Error(`Could not find mainImage or mainUv function (${effect.name})`);\n  } else {\n    const functionRegExp = /\\w+\\s+(\\w+)\\([\\w\\s,]*\\)\\s*{/g;\n    const shaderParts = data.shaderParts;\n    let fragmentHead = (_a = shaderParts.get(EffectShaderSection.FRAGMENT_HEAD)) != null ? _a : \"\";\n    let fragmentMainUv = (_b = shaderParts.get(EffectShaderSection.FRAGMENT_MAIN_UV)) != null ? _b : \"\";\n    let fragmentMainImage = (_c = shaderParts.get(EffectShaderSection.FRAGMENT_MAIN_IMAGE)) != null ? _c : \"\";\n    let vertexHead = (_d = shaderParts.get(EffectShaderSection.VERTEX_HEAD)) != null ? _d : \"\";\n    let vertexMainSupport = (_e = shaderParts.get(EffectShaderSection.VERTEX_MAIN_SUPPORT)) != null ? _e : \"\";\n    const varyings = /* @__PURE__ */ new Set();\n    const names = /* @__PURE__ */ new Set();\n    if (mainUvExists) {\n      fragmentMainUv += `\t${prefix}MainUv(UV);\n`;\n      data.uvTransformation = true;\n    }\n    if (vertexShader !== null && /mainSupport/.test(vertexShader)) {\n      const needsUv = /mainSupport *\\([\\w\\s]*?uv\\s*?\\)/.test(vertexShader);\n      vertexMainSupport += `\t${prefix}MainSupport(`;\n      vertexMainSupport += needsUv ? \"vUv);\\n\" : \");\\n\";\n      for (const m2 of vertexShader.matchAll(/(?:varying\\s+\\w+\\s+([\\S\\s]*?);)/g)) {\n        for (const n of m2[1].split(/\\s*,\\s*/)) {\n          data.varyings.add(n);\n          varyings.add(n);\n          names.add(n);\n        }\n      }\n      for (const m2 of vertexShader.matchAll(functionRegExp)) {\n        names.add(m2[1]);\n      }\n    }\n    for (const m2 of fragmentShader.matchAll(functionRegExp)) {\n      names.add(m2[1]);\n    }\n    for (const d of effect.defines.keys()) {\n      names.add(d.replace(/\\([\\w\\s,]*\\)/g, \"\"));\n    }\n    for (const u of effect.uniforms.keys()) {\n      names.add(u);\n    }\n    names.delete(\"while\");\n    names.delete(\"for\");\n    names.delete(\"if\");\n    effect.uniforms.forEach((val, key) => data.uniforms.set(prefix + key.charAt(0).toUpperCase() + key.slice(1), val));\n    effect.defines.forEach((val, key) => data.defines.set(prefix + key.charAt(0).toUpperCase() + key.slice(1), val));\n    const shaders = /* @__PURE__ */ new Map([[\"fragment\", fragmentShader], [\"vertex\", vertexShader]]);\n    prefixSubstrings(prefix, names, data.defines);\n    prefixSubstrings(prefix, names, shaders);\n    fragmentShader = shaders.get(\"fragment\");\n    vertexShader = shaders.get(\"vertex\");\n    const blendMode = effect.blendMode;\n    data.blendModes.set(blendMode.blendFunction, blendMode);\n    if (mainImageExists) {\n      if (effect.inputColorSpace !== null && effect.inputColorSpace !== data.colorSpace) {\n        fragmentMainImage += effect.inputColorSpace === sRGBEncoding4 ? \"color0 = LinearTosRGB(color0);\\n\t\" : \"color0 = sRGBToLinear(color0);\\n\t\";\n      }\n      if (effect.outputColorSpace !== null) {\n        data.colorSpace = effect.outputColorSpace;\n      } else if (effect.inputColorSpace !== null) {\n        data.colorSpace = effect.inputColorSpace;\n      }\n      const depthParamRegExp = /MainImage *\\([\\w\\s,]*?depth[\\w\\s,]*?\\)/;\n      fragmentMainImage += `${prefix}MainImage(color0, UV, `;\n      if ((data.attributes & EffectAttribute.DEPTH) !== 0 && depthParamRegExp.test(fragmentShader)) {\n        fragmentMainImage += \"depth, \";\n        data.readDepth = true;\n      }\n      fragmentMainImage += \"color1);\\n\t\";\n      const blendOpacity = prefix + \"BlendOpacity\";\n      data.uniforms.set(blendOpacity, blendMode.opacity);\n      fragmentMainImage += `color0 = blend${blendMode.blendFunction}(color0, color1, ${blendOpacity});\n\n\t`;\n      fragmentHead += `uniform float ${blendOpacity};\n\n`;\n    }\n    fragmentHead += fragmentShader + \"\\n\";\n    if (vertexShader !== null) {\n      vertexHead += vertexShader + \"\\n\";\n    }\n    shaderParts.set(EffectShaderSection.FRAGMENT_HEAD, fragmentHead);\n    shaderParts.set(EffectShaderSection.FRAGMENT_MAIN_UV, fragmentMainUv);\n    shaderParts.set(EffectShaderSection.FRAGMENT_MAIN_IMAGE, fragmentMainImage);\n    shaderParts.set(EffectShaderSection.VERTEX_HEAD, vertexHead);\n    shaderParts.set(EffectShaderSection.VERTEX_MAIN_SUPPORT, vertexMainSupport);\n    if (effect.extensions !== null) {\n      for (const extension of effect.extensions) {\n        data.extensions.add(extension);\n      }\n    }\n  }\n}\nvar EffectPass = class extends Pass {\n  constructor(camera, ...effects) {\n    super(\"EffectPass\");\n    this.fullscreenMaterial = new EffectMaterial(null, null, null, camera);\n    this.listener = (event) => this.handleEvent(event);\n    this.effects = [];\n    this.setEffects(effects);\n    this.skipRendering = false;\n    this.minTime = 1;\n    this.maxTime = Number.POSITIVE_INFINITY;\n    this.timeScale = 1;\n  }\n  set mainScene(value) {\n    for (const effect of this.effects) {\n      effect.mainScene = value;\n    }\n  }\n  set mainCamera(value) {\n    this.fullscreenMaterial.copyCameraSettings(value);\n    for (const effect of this.effects) {\n      effect.mainCamera = value;\n    }\n  }\n  get encodeOutput() {\n    return this.fullscreenMaterial.encodeOutput;\n  }\n  set encodeOutput(value) {\n    this.fullscreenMaterial.encodeOutput = value;\n  }\n  get dithering() {\n    return this.fullscreenMaterial.dithering;\n  }\n  set dithering(value) {\n    const material = this.fullscreenMaterial;\n    material.dithering = value;\n    material.needsUpdate = true;\n  }\n  setEffects(effects) {\n    for (const effect of this.effects) {\n      effect.removeEventListener(\"change\", this.listener);\n    }\n    this.effects = effects.sort((a, b) => b.attributes - a.attributes);\n    for (const effect of this.effects) {\n      effect.addEventListener(\"change\", this.listener);\n    }\n  }\n  updateMaterial() {\n    const data = new EffectShaderData();\n    let id = 0;\n    for (const effect of this.effects) {\n      if (effect.blendMode.blendFunction === BlendFunction.DST) {\n        data.attributes |= effect.getAttributes() & EffectAttribute.DEPTH;\n      } else if ((data.attributes & effect.getAttributes() & EffectAttribute.CONVOLUTION) !== 0) {\n        throw new Error(`Convolution effects cannot be merged (${effect.name})`);\n      } else {\n        integrateEffect(\"e\" + id++, effect, data);\n      }\n    }\n    let fragmentHead = data.shaderParts.get(EffectShaderSection.FRAGMENT_HEAD);\n    let fragmentMainImage = data.shaderParts.get(EffectShaderSection.FRAGMENT_MAIN_IMAGE);\n    let fragmentMainUv = data.shaderParts.get(EffectShaderSection.FRAGMENT_MAIN_UV);\n    const blendRegExp = /\\bblend\\b/g;\n    for (const blendMode of data.blendModes.values()) {\n      fragmentHead += blendMode.getShaderCode().replace(blendRegExp, `blend${blendMode.blendFunction}`) + \"\\n\";\n    }\n    if ((data.attributes & EffectAttribute.DEPTH) !== 0) {\n      if (data.readDepth) {\n        fragmentMainImage = \"float depth = readDepth(UV);\\n\\n\t\" + fragmentMainImage;\n      }\n      this.needsDepthTexture = this.getDepthTexture() === null;\n    } else {\n      this.needsDepthTexture = false;\n    }\n    if (data.colorSpace === sRGBEncoding4) {\n      fragmentMainImage += \"color0 = sRGBToLinear(color0);\\n\t\";\n    }\n    if (data.uvTransformation) {\n      fragmentMainUv = \"vec2 transformedUv = vUv;\\n\" + fragmentMainUv;\n      data.defines.set(\"UV\", \"transformedUv\");\n    } else {\n      data.defines.set(\"UV\", \"vUv\");\n    }\n    data.shaderParts.set(EffectShaderSection.FRAGMENT_HEAD, fragmentHead);\n    data.shaderParts.set(EffectShaderSection.FRAGMENT_MAIN_IMAGE, fragmentMainImage);\n    data.shaderParts.set(EffectShaderSection.FRAGMENT_MAIN_UV, fragmentMainUv);\n    data.shaderParts.forEach((value, key, map) => map.set(key, value == null ? void 0 : value.trim().replace(/^#/, \"\\n#\")));\n    this.skipRendering = id === 0;\n    this.needsSwap = !this.skipRendering;\n    this.fullscreenMaterial.setShaderData(data);\n  }\n  recompile() {\n    this.updateMaterial();\n  }\n  getDepthTexture() {\n    return this.fullscreenMaterial.depthBuffer;\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking12) {\n    this.fullscreenMaterial.depthBuffer = depthTexture;\n    this.fullscreenMaterial.depthPacking = depthPacking;\n    for (const effect of this.effects) {\n      effect.setDepthTexture(depthTexture, depthPacking);\n    }\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    for (const effect of this.effects) {\n      effect.update(renderer, inputBuffer, deltaTime);\n    }\n    if (!this.skipRendering || this.renderToScreen) {\n      const material = this.fullscreenMaterial;\n      material.inputBuffer = inputBuffer.texture;\n      material.time += deltaTime * this.timeScale;\n      renderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\n      renderer.render(this.scene, this.camera);\n    }\n  }\n  setSize(width, height) {\n    this.fullscreenMaterial.setSize(width, height);\n    for (const effect of this.effects) {\n      effect.setSize(width, height);\n    }\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    this.renderer = renderer;\n    for (const effect of this.effects) {\n      effect.initialize(renderer, alpha, frameBufferType);\n    }\n    this.updateMaterial();\n    if (frameBufferType !== void 0 && frameBufferType !== UnsignedByteType6) {\n      this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n    }\n  }\n  dispose() {\n    super.dispose();\n    for (const effect of this.effects) {\n      effect.removeEventListener(\"change\", this.listener);\n      effect.dispose();\n    }\n  }\n  handleEvent(event) {\n    switch (event.type) {\n      case \"change\":\n        this.recompile();\n        break;\n    }\n  }\n};\n\n// src/passes/GaussianBlurPass.js\nimport { sRGBEncoding as sRGBEncoding5, UnsignedByteType as UnsignedByteType7, WebGLRenderTarget as WebGLRenderTarget8 } from \"three\";\nvar GaussianBlurPass = class extends Pass {\n  constructor({\n    kernelSize = 35,\n    iterations = 1,\n    resolutionScale = 1,\n    resolutionX = Resolution.AUTO_SIZE,\n    resolutionY = Resolution.AUTO_SIZE\n  } = {}) {\n    super(\"GaussianBlurPass\");\n    this.renderTargetA = new WebGLRenderTarget8(1, 1, { depthBuffer: false });\n    this.renderTargetA.texture.name = \"Blur.Target.A\";\n    this.renderTargetB = this.renderTargetA.clone();\n    this.renderTargetB.texture.name = \"Blur.Target.B\";\n    this.blurMaterial = new GaussianBlurMaterial({ kernelSize });\n    this.copyMaterial = new CopyMaterial();\n    this.copyMaterial.inputBuffer = this.renderTargetB.texture;\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n    this.iterations = iterations;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const scene = this.scene;\n    const camera = this.camera;\n    const renderTargetA = this.renderTargetA;\n    const renderTargetB = this.renderTargetB;\n    const blurMaterial = this.blurMaterial;\n    this.fullscreenMaterial = blurMaterial;\n    let previousBuffer = inputBuffer;\n    for (let i = 0, l = Math.max(this.iterations, 1); i < l; ++i) {\n      blurMaterial.direction.set(1, 0);\n      blurMaterial.inputBuffer = previousBuffer.texture;\n      renderer.setRenderTarget(renderTargetA);\n      renderer.render(scene, camera);\n      blurMaterial.direction.set(0, 1);\n      blurMaterial.inputBuffer = renderTargetA.texture;\n      renderer.setRenderTarget(renderTargetB);\n      renderer.render(scene, camera);\n      if (i === 0 && l > 1) {\n        previousBuffer = renderTargetB;\n      }\n    }\n    this.fullscreenMaterial = this.copyMaterial;\n    renderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\n    renderer.render(scene, camera);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    const w = resolution.width, h = resolution.height;\n    this.renderTargetA.setSize(w, h);\n    this.renderTargetB.setSize(w, h);\n    this.blurMaterial.setSize(width, height);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    if (frameBufferType !== void 0) {\n      this.renderTargetA.texture.type = frameBufferType;\n      this.renderTargetB.texture.type = frameBufferType;\n      if (frameBufferType !== UnsignedByteType7) {\n        this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n        this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n      } else if (renderer.outputEncoding === sRGBEncoding5) {\n        this.renderTargetA.texture.encoding = sRGBEncoding5;\n        this.renderTargetB.texture.encoding = sRGBEncoding5;\n      }\n    }\n  }\n};\n\n// src/passes/KawaseBlurPass.js\nimport { sRGBEncoding as sRGBEncoding6, UnsignedByteType as UnsignedByteType8, WebGLRenderTarget as WebGLRenderTarget9 } from \"three\";\nvar KawaseBlurPass = class extends Pass {\n  constructor({\n    kernelSize = KernelSize.MEDIUM,\n    resolutionScale = 0.5,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"KawaseBlurPass\");\n    this.renderTargetA = new WebGLRenderTarget9(1, 1, { depthBuffer: false });\n    this.renderTargetA.texture.name = \"Blur.Target.A\";\n    this.renderTargetB = this.renderTargetA.clone();\n    this.renderTargetB.texture.name = \"Blur.Target.B\";\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n    this._blurMaterial = new KawaseBlurMaterial();\n    this._blurMaterial.kernelSize = kernelSize;\n    this.copyMaterial = new CopyMaterial();\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  get blurMaterial() {\n    return this._blurMaterial;\n  }\n  set blurMaterial(value) {\n    this._blurMaterial = value;\n  }\n  get dithering() {\n    return this.copyMaterial.dithering;\n  }\n  set dithering(value) {\n    this.copyMaterial.dithering = value;\n  }\n  get kernelSize() {\n    return this.blurMaterial.kernelSize;\n  }\n  set kernelSize(value) {\n    this.blurMaterial.kernelSize = value;\n  }\n  get width() {\n    return this.resolution.width;\n  }\n  set width(value) {\n    this.resolution.preferredWidth = value;\n  }\n  get height() {\n    return this.resolution.height;\n  }\n  set height(value) {\n    this.resolution.preferredHeight = value;\n  }\n  get scale() {\n    return this.blurMaterial.scale;\n  }\n  set scale(value) {\n    this.blurMaterial.scale = value;\n  }\n  getScale() {\n    return this.blurMaterial.scale;\n  }\n  setScale(value) {\n    this.blurMaterial.scale = value;\n  }\n  getKernelSize() {\n    return this.kernelSize;\n  }\n  setKernelSize(value) {\n    this.kernelSize = value;\n  }\n  getResolutionScale() {\n    return this.resolution.scale;\n  }\n  setResolutionScale(scale) {\n    this.resolution.scale = scale;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const scene = this.scene;\n    const camera = this.camera;\n    const renderTargetA = this.renderTargetA;\n    const renderTargetB = this.renderTargetB;\n    const material = this.blurMaterial;\n    const kernelSequence = material.kernelSequence;\n    let previousBuffer = inputBuffer;\n    this.fullscreenMaterial = material;\n    for (let i = 0, l = kernelSequence.length; i < l; ++i) {\n      const buffer = (i & 1) === 0 ? renderTargetA : renderTargetB;\n      material.kernel = kernelSequence[i];\n      material.inputBuffer = previousBuffer.texture;\n      renderer.setRenderTarget(buffer);\n      renderer.render(scene, camera);\n      previousBuffer = buffer;\n    }\n    this.fullscreenMaterial = this.copyMaterial;\n    this.copyMaterial.inputBuffer = previousBuffer.texture;\n    renderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\n    renderer.render(scene, camera);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    const w = resolution.width, h = resolution.height;\n    this.renderTargetA.setSize(w, h);\n    this.renderTargetB.setSize(w, h);\n    this.blurMaterial.setSize(width, height);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    if (frameBufferType !== void 0) {\n      this.renderTargetA.texture.type = frameBufferType;\n      this.renderTargetB.texture.type = frameBufferType;\n      if (frameBufferType !== UnsignedByteType8) {\n        this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n        this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n      } else if (renderer.outputEncoding === sRGBEncoding6) {\n        this.renderTargetA.texture.encoding = sRGBEncoding6;\n        this.renderTargetB.texture.encoding = sRGBEncoding6;\n      }\n    }\n  }\n  static get AUTO_SIZE() {\n    return Resolution.AUTO_SIZE;\n  }\n};\n\n// src/passes/LambdaPass.js\nvar LambdaPass = class extends Pass {\n  constructor(f) {\n    super(\"LambdaPass\", null, null);\n    this.needsSwap = false;\n    this.f = f;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    this.f();\n  }\n};\n\n// src/passes/LuminancePass.js\nimport { UnsignedByteType as UnsignedByteType9, WebGLRenderTarget as WebGLRenderTarget10 } from \"three\";\nvar LuminancePass = class extends Pass {\n  constructor({\n    renderTarget,\n    luminanceRange,\n    colorOutput,\n    resolutionScale = 1,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"LuminancePass\");\n    this.fullscreenMaterial = new LuminanceMaterial(colorOutput, luminanceRange);\n    this.needsSwap = false;\n    this.renderTarget = renderTarget;\n    if (this.renderTarget === void 0) {\n      this.renderTarget = new WebGLRenderTarget10(1, 1, { depthBuffer: false });\n      this.renderTarget.texture.name = \"LuminancePass.Target\";\n    }\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n  }\n  get texture() {\n    return this.renderTarget.texture;\n  }\n  getTexture() {\n    return this.renderTarget.texture;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const material = this.fullscreenMaterial;\n    material.inputBuffer = inputBuffer.texture;\n    renderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\n    renderer.render(this.scene, this.camera);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    this.renderTarget.setSize(resolution.width, resolution.height);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    if (frameBufferType !== void 0 && frameBufferType !== UnsignedByteType9) {\n      this.renderTarget.texture.type = frameBufferType;\n      this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n    }\n  }\n};\n\n// src/passes/MaskPass.js\nvar MaskPass = class extends Pass {\n  constructor(scene, camera) {\n    super(\"MaskPass\", scene, camera);\n    this.needsSwap = false;\n    this.clearPass = new ClearPass(false, false, true);\n    this.inverse = false;\n  }\n  set mainScene(value) {\n    this.scene = value;\n  }\n  set mainCamera(value) {\n    this.camera = value;\n  }\n  get inverted() {\n    return this.inverse;\n  }\n  set inverted(value) {\n    this.inverse = value;\n  }\n  get clear() {\n    return this.clearPass.enabled;\n  }\n  set clear(value) {\n    this.clearPass.enabled = value;\n  }\n  getClearPass() {\n    return this.clearPass;\n  }\n  isInverted() {\n    return this.inverted;\n  }\n  setInverted(value) {\n    this.inverted = value;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const context = renderer.getContext();\n    const buffers = renderer.state.buffers;\n    const scene = this.scene;\n    const camera = this.camera;\n    const clearPass = this.clearPass;\n    const writeValue = this.inverted ? 0 : 1;\n    const clearValue = 1 - writeValue;\n    buffers.color.setMask(false);\n    buffers.depth.setMask(false);\n    buffers.color.setLocked(true);\n    buffers.depth.setLocked(true);\n    buffers.stencil.setTest(true);\n    buffers.stencil.setOp(context.REPLACE, context.REPLACE, context.REPLACE);\n    buffers.stencil.setFunc(context.ALWAYS, writeValue, 4294967295);\n    buffers.stencil.setClear(clearValue);\n    buffers.stencil.setLocked(true);\n    if (this.clearPass.enabled) {\n      if (this.renderToScreen) {\n        clearPass.render(renderer, null);\n      } else {\n        clearPass.render(renderer, inputBuffer);\n        clearPass.render(renderer, outputBuffer);\n      }\n    }\n    if (this.renderToScreen) {\n      renderer.setRenderTarget(null);\n      renderer.render(scene, camera);\n    } else {\n      renderer.setRenderTarget(inputBuffer);\n      renderer.render(scene, camera);\n      renderer.setRenderTarget(outputBuffer);\n      renderer.render(scene, camera);\n    }\n    buffers.color.setLocked(false);\n    buffers.depth.setLocked(false);\n    buffers.stencil.setLocked(false);\n    buffers.stencil.setFunc(context.EQUAL, 1, 4294967295);\n    buffers.stencil.setOp(context.KEEP, context.KEEP, context.KEEP);\n    buffers.stencil.setLocked(true);\n  }\n};\n\n// src/passes/MipmapBlurPass.js\nimport { sRGBEncoding as sRGBEncoding7, UnsignedByteType as UnsignedByteType10, Vector2 as Vector216, WebGLRenderTarget as WebGLRenderTarget11 } from \"three\";\nvar MipmapBlurPass = class extends Pass {\n  constructor() {\n    super(\"MipmapBlurPass\");\n    this.needsSwap = false;\n    this.renderTarget = new WebGLRenderTarget11(1, 1, { depthBuffer: false });\n    this.renderTarget.texture.name = \"Upsampling.Mipmap0\";\n    this.downsamplingMipmaps = [];\n    this.upsamplingMipmaps = [];\n    this.downsamplingMaterial = new DownsamplingMaterial();\n    this.upsamplingMaterial = new UpsamplingMaterial();\n    this.resolution = new Vector216();\n  }\n  get texture() {\n    return this.renderTarget.texture;\n  }\n  get levels() {\n    return this.downsamplingMipmaps.length;\n  }\n  set levels(value) {\n    if (this.levels !== value) {\n      const renderTarget = this.renderTarget;\n      this.dispose();\n      this.downsamplingMipmaps = [];\n      this.upsamplingMipmaps = [];\n      for (let i = 0; i < value; ++i) {\n        const mipmap = renderTarget.clone();\n        mipmap.texture.name = \"Downsampling.Mipmap\" + i;\n        this.downsamplingMipmaps.push(mipmap);\n      }\n      this.upsamplingMipmaps.push(renderTarget);\n      for (let i = 1, l = value - 1; i < l; ++i) {\n        const mipmap = renderTarget.clone();\n        mipmap.texture.name = \"Upsampling.Mipmap\" + i;\n        this.upsamplingMipmaps.push(mipmap);\n      }\n      this.setSize(this.resolution.x, this.resolution.y);\n    }\n  }\n  get radius() {\n    return this.upsamplingMaterial.radius;\n  }\n  set radius(value) {\n    this.upsamplingMaterial.radius = value;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const { scene, camera } = this;\n    const { downsamplingMaterial, upsamplingMaterial } = this;\n    const { downsamplingMipmaps, upsamplingMipmaps } = this;\n    let previousBuffer = inputBuffer;\n    this.fullscreenMaterial = downsamplingMaterial;\n    for (let i = 0, l = downsamplingMipmaps.length; i < l; ++i) {\n      const mipmap = downsamplingMipmaps[i];\n      downsamplingMaterial.setSize(previousBuffer.width, previousBuffer.height);\n      downsamplingMaterial.inputBuffer = previousBuffer.texture;\n      renderer.setRenderTarget(mipmap);\n      renderer.render(scene, camera);\n      previousBuffer = mipmap;\n    }\n    this.fullscreenMaterial = upsamplingMaterial;\n    for (let i = upsamplingMipmaps.length - 1; i >= 0; --i) {\n      const mipmap = upsamplingMipmaps[i];\n      upsamplingMaterial.setSize(previousBuffer.width, previousBuffer.height);\n      upsamplingMaterial.inputBuffer = previousBuffer.texture;\n      upsamplingMaterial.supportBuffer = downsamplingMipmaps[i].texture;\n      renderer.setRenderTarget(mipmap);\n      renderer.render(scene, camera);\n      previousBuffer = mipmap;\n    }\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.set(width, height);\n    let w = resolution.width, h = resolution.height;\n    for (let i = 0, l = this.downsamplingMipmaps.length; i < l; ++i) {\n      w = Math.round(w * 0.5);\n      h = Math.round(h * 0.5);\n      this.downsamplingMipmaps[i].setSize(w, h);\n      if (i < this.upsamplingMipmaps.length) {\n        this.upsamplingMipmaps[i].setSize(w, h);\n      }\n    }\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    if (frameBufferType !== void 0) {\n      const mipmaps = this.downsamplingMipmaps.concat(this.upsamplingMipmaps);\n      for (const mipmap of mipmaps) {\n        mipmap.texture.type = frameBufferType;\n      }\n      if (frameBufferType !== UnsignedByteType10) {\n        this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n        this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n      } else if (renderer.outputEncoding === sRGBEncoding7) {\n        for (const mipmap of mipmaps) {\n          mipmap.texture.encoding = sRGBEncoding7;\n        }\n      }\n    }\n  }\n  dispose() {\n    super.dispose();\n    for (const mipmap of this.downsamplingMipmaps.concat(this.upsamplingMipmaps)) {\n      mipmap.dispose();\n    }\n  }\n};\n\n// src/passes/NormalPass.js\nimport { Color as Color3, MeshNormalMaterial, NearestFilter as NearestFilter5, WebGLRenderTarget as WebGLRenderTarget12 } from \"three\";\nvar NormalPass = class extends Pass {\n  constructor(scene, camera, {\n    renderTarget,\n    resolutionScale = 1,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"NormalPass\");\n    this.needsSwap = false;\n    this.renderPass = new RenderPass(scene, camera, new MeshNormalMaterial());\n    const renderPass = this.renderPass;\n    renderPass.ignoreBackground = true;\n    renderPass.skipShadowMapUpdate = true;\n    const clearPass = renderPass.getClearPass();\n    clearPass.overrideClearColor = new Color3(7829503);\n    clearPass.overrideClearAlpha = 1;\n    this.renderTarget = renderTarget;\n    if (this.renderTarget === void 0) {\n      this.renderTarget = new WebGLRenderTarget12(1, 1, {\n        minFilter: NearestFilter5,\n        magFilter: NearestFilter5\n      });\n      this.renderTarget.texture.name = \"NormalPass.Target\";\n    }\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n  }\n  set mainScene(value) {\n    this.renderPass.mainScene = value;\n  }\n  set mainCamera(value) {\n    this.renderPass.mainCamera = value;\n  }\n  get texture() {\n    return this.renderTarget.texture;\n  }\n  getTexture() {\n    return this.renderTarget.texture;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  getResolutionScale() {\n    return this.resolution.scale;\n  }\n  setResolutionScale(scale) {\n    this.resolution.scale = scale;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const renderTarget = this.renderToScreen ? null : this.renderTarget;\n    this.renderPass.render(renderer, renderTarget, renderTarget);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    this.renderTarget.setSize(resolution.width, resolution.height);\n  }\n};\n\n// src/passes/ShaderPass.js\nimport { UnsignedByteType as UnsignedByteType11 } from \"three\";\nvar ShaderPass = class extends Pass {\n  constructor(material, input = \"inputBuffer\") {\n    super(\"ShaderPass\");\n    this.fullscreenMaterial = material;\n    this.input = input;\n  }\n  setInput(input) {\n    this.input = input;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const uniforms = this.fullscreenMaterial.uniforms;\n    if (inputBuffer !== null && uniforms !== void 0 && uniforms[this.input] !== void 0) {\n      uniforms[this.input].value = inputBuffer.texture;\n    }\n    renderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\n    renderer.render(this.scene, this.camera);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    if (frameBufferType !== void 0 && frameBufferType !== UnsignedByteType11) {\n      this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n    }\n  }\n};\n\n// src/passes/TiltShiftBlurPass.js\nvar TiltShiftBlurPass = class extends KawaseBlurPass {\n  constructor({\n    offset = 0,\n    rotation = 0,\n    focusArea = 0.4,\n    feather = 0.3,\n    kernelSize = KernelSize.MEDIUM,\n    resolutionScale = 0.5,\n    resolutionX = Resolution.AUTO_SIZE,\n    resolutionY = Resolution.AUTO_SIZE\n  } = {}) {\n    super({ kernelSize, resolutionScale, resolutionX, resolutionY });\n    this.blurMaterial = new TiltShiftBlurMaterial({ kernelSize, offset, rotation, focusArea, feather });\n  }\n};\n\n// src/core/Timer.js\nvar MILLISECONDS_TO_SECONDS = 1 / 1e3;\nvar SECONDS_TO_MILLISECONDS = 1e3;\nvar Timer = class {\n  constructor() {\n    this.previousTime = 0;\n    this.currentTime = 0;\n    this._delta = 0;\n    this._elapsed = 0;\n    this._fixedDelta = 1e3 / 60;\n    this.timescale = 1;\n    this.useFixedDelta = false;\n    this._autoReset = false;\n  }\n  get autoReset() {\n    return this._autoReset;\n  }\n  set autoReset(value) {\n    if (typeof document !== \"undefined\" && document.hidden !== void 0) {\n      if (value) {\n        document.addEventListener(\"visibilitychange\", this);\n      } else {\n        document.removeEventListener(\"visibilitychange\", this);\n      }\n      this._autoReset = value;\n    }\n  }\n  get delta() {\n    return this._delta * MILLISECONDS_TO_SECONDS;\n  }\n  get fixedDelta() {\n    return this._fixedDelta * MILLISECONDS_TO_SECONDS;\n  }\n  set fixedDelta(value) {\n    this._fixedDelta = value * SECONDS_TO_MILLISECONDS;\n  }\n  get elapsed() {\n    return this._elapsed * MILLISECONDS_TO_SECONDS;\n  }\n  update(timestamp) {\n    if (this.useFixedDelta) {\n      this._delta = this.fixedDelta;\n    } else {\n      this.previousTime = this.currentTime;\n      this.currentTime = timestamp !== void 0 ? timestamp : performance.now();\n      this._delta = this.currentTime - this.previousTime;\n    }\n    this._delta *= this.timescale;\n    this._elapsed += this._delta;\n  }\n  reset() {\n    this._delta = 0;\n    this._elapsed = 0;\n    this.currentTime = performance.now();\n  }\n  handleEvent(e) {\n    if (!document.hidden) {\n      this.currentTime = performance.now();\n    }\n  }\n  dispose() {\n    this.autoReset = false;\n  }\n};\n\n// src/core/EffectComposer.js\nvar EffectComposer = class {\n  constructor(renderer = null, {\n    depthBuffer = true,\n    stencilBuffer = false,\n    multisampling = 0,\n    frameBufferType\n  } = {}) {\n    this.renderer = null;\n    this.inputBuffer = this.createBuffer(depthBuffer, stencilBuffer, frameBufferType, multisampling);\n    this.outputBuffer = this.inputBuffer.clone();\n    this.copyPass = new CopyPass();\n    this.depthTexture = null;\n    this.passes = [];\n    this.timer = new Timer();\n    this.autoRenderToScreen = true;\n    this.setRenderer(renderer);\n  }\n  get multisampling() {\n    return this.inputBuffer.samples || 0;\n  }\n  set multisampling(value) {\n    const buffer = this.inputBuffer;\n    const multisampling = this.multisampling;\n    if (multisampling > 0 && value > 0) {\n      this.inputBuffer.samples = value;\n      this.outputBuffer.samples = value;\n      this.inputBuffer.dispose();\n      this.outputBuffer.dispose();\n    } else if (multisampling !== value) {\n      this.inputBuffer.dispose();\n      this.outputBuffer.dispose();\n      this.inputBuffer = this.createBuffer(\n        buffer.depthBuffer,\n        buffer.stencilBuffer,\n        buffer.texture.type,\n        value\n      );\n      this.inputBuffer.depthTexture = this.depthTexture;\n      this.outputBuffer = this.inputBuffer.clone();\n    }\n  }\n  getTimer() {\n    return this.timer;\n  }\n  getRenderer() {\n    return this.renderer;\n  }\n  setRenderer(renderer) {\n    this.renderer = renderer;\n    if (renderer !== null) {\n      const size = renderer.getSize(new Vector217());\n      const alpha = renderer.getContext().getContextAttributes().alpha;\n      const frameBufferType = this.inputBuffer.texture.type;\n      if (frameBufferType === UnsignedByteType12 && renderer.outputEncoding === sRGBEncoding8) {\n        this.inputBuffer.texture.encoding = sRGBEncoding8;\n        this.outputBuffer.texture.encoding = sRGBEncoding8;\n        this.inputBuffer.dispose();\n        this.outputBuffer.dispose();\n      }\n      renderer.autoClear = false;\n      this.setSize(size.width, size.height);\n      for (const pass of this.passes) {\n        pass.initialize(renderer, alpha, frameBufferType);\n      }\n    }\n  }\n  replaceRenderer(renderer, updateDOM = true) {\n    const oldRenderer = this.renderer;\n    const parent = oldRenderer.domElement.parentNode;\n    this.setRenderer(renderer);\n    if (updateDOM && parent !== null) {\n      parent.removeChild(oldRenderer.domElement);\n      parent.appendChild(renderer.domElement);\n    }\n    return oldRenderer;\n  }\n  createDepthTexture() {\n    const depthTexture = this.depthTexture = new DepthTexture();\n    this.inputBuffer.depthTexture = depthTexture;\n    this.inputBuffer.dispose();\n    if (this.inputBuffer.stencilBuffer) {\n      depthTexture.format = DepthStencilFormat;\n      depthTexture.type = UnsignedInt248Type;\n    } else {\n      depthTexture.type = UnsignedIntType;\n    }\n    return depthTexture;\n  }\n  deleteDepthTexture() {\n    if (this.depthTexture !== null) {\n      this.depthTexture.dispose();\n      this.depthTexture = null;\n      this.inputBuffer.depthTexture = null;\n      this.inputBuffer.dispose();\n      for (const pass of this.passes) {\n        pass.setDepthTexture(null);\n      }\n    }\n  }\n  createBuffer(depthBuffer, stencilBuffer, type, multisampling) {\n    const renderer = this.renderer;\n    const size = renderer === null ? new Vector217() : renderer.getDrawingBufferSize(new Vector217());\n    const options = {\n      minFilter: LinearFilter2,\n      magFilter: LinearFilter2,\n      stencilBuffer,\n      depthBuffer,\n      type\n    };\n    let renderTarget;\n    if (multisampling > 0) {\n      renderTarget = Number(REVISION6.replace(/\\D+/g, \"\")) < 138 ? new WebGLMultisampleRenderTarget(size.width, size.height, options) : new WebGLRenderTarget13(size.width, size.height, options);\n      renderTarget.ignoreDepthForMultisampleCopy = false;\n      renderTarget.samples = multisampling;\n    } else {\n      renderTarget = new WebGLRenderTarget13(size.width, size.height, options);\n    }\n    if (type === UnsignedByteType12 && renderer !== null && renderer.outputEncoding === sRGBEncoding8) {\n      renderTarget.texture.encoding = sRGBEncoding8;\n    }\n    renderTarget.texture.name = \"EffectComposer.Buffer\";\n    renderTarget.texture.generateMipmaps = false;\n    return renderTarget;\n  }\n  setMainScene(scene) {\n    for (const pass of this.passes) {\n      pass.mainScene = scene;\n    }\n  }\n  setMainCamera(camera) {\n    for (const pass of this.passes) {\n      pass.mainCamera = camera;\n    }\n  }\n  addPass(pass, index) {\n    const passes = this.passes;\n    const renderer = this.renderer;\n    const drawingBufferSize = renderer.getDrawingBufferSize(new Vector217());\n    const alpha = renderer.getContext().getContextAttributes().alpha;\n    const frameBufferType = this.inputBuffer.texture.type;\n    pass.setRenderer(renderer);\n    pass.setSize(drawingBufferSize.width, drawingBufferSize.height);\n    pass.initialize(renderer, alpha, frameBufferType);\n    if (this.autoRenderToScreen) {\n      if (passes.length > 0) {\n        passes[passes.length - 1].renderToScreen = false;\n      }\n      if (pass.renderToScreen) {\n        this.autoRenderToScreen = false;\n      }\n    }\n    if (index !== void 0) {\n      passes.splice(index, 0, pass);\n    } else {\n      passes.push(pass);\n    }\n    if (this.autoRenderToScreen) {\n      passes[passes.length - 1].renderToScreen = true;\n    }\n    if (pass.needsDepthTexture || this.depthTexture !== null) {\n      if (this.depthTexture === null) {\n        const depthTexture = this.createDepthTexture();\n        for (pass of passes) {\n          pass.setDepthTexture(depthTexture);\n        }\n      } else {\n        pass.setDepthTexture(this.depthTexture);\n      }\n    }\n  }\n  removePass(pass) {\n    const passes = this.passes;\n    const index = passes.indexOf(pass);\n    const exists = index !== -1;\n    const removed = exists && passes.splice(index, 1).length > 0;\n    if (removed) {\n      if (this.depthTexture !== null) {\n        const reducer = (a, b) => a || b.needsDepthTexture;\n        const depthTextureRequired = passes.reduce(reducer, false);\n        if (!depthTextureRequired) {\n          if (pass.getDepthTexture() === this.depthTexture) {\n            pass.setDepthTexture(null);\n          }\n          this.deleteDepthTexture();\n        }\n      }\n      if (this.autoRenderToScreen) {\n        if (index === passes.length) {\n          pass.renderToScreen = false;\n          if (passes.length > 0) {\n            passes[passes.length - 1].renderToScreen = true;\n          }\n        }\n      }\n    }\n  }\n  removeAllPasses() {\n    const passes = this.passes;\n    this.deleteDepthTexture();\n    if (passes.length > 0) {\n      if (this.autoRenderToScreen) {\n        passes[passes.length - 1].renderToScreen = false;\n      }\n      this.passes = [];\n    }\n  }\n  render(deltaTime) {\n    const renderer = this.renderer;\n    const copyPass = this.copyPass;\n    let inputBuffer = this.inputBuffer;\n    let outputBuffer = this.outputBuffer;\n    let stencilTest = false;\n    let context, stencil, buffer;\n    if (deltaTime === void 0) {\n      this.timer.update();\n      deltaTime = this.timer.delta;\n    }\n    for (const pass of this.passes) {\n      if (pass.enabled) {\n        pass.render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest);\n        if (pass.needsSwap) {\n          if (stencilTest) {\n            copyPass.renderToScreen = pass.renderToScreen;\n            context = renderer.getContext();\n            stencil = renderer.state.buffers.stencil;\n            stencil.setFunc(context.NOTEQUAL, 1, 4294967295);\n            copyPass.render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest);\n            stencil.setFunc(context.EQUAL, 1, 4294967295);\n          }\n          buffer = inputBuffer;\n          inputBuffer = outputBuffer;\n          outputBuffer = buffer;\n        }\n        if (pass instanceof MaskPass) {\n          stencilTest = true;\n        } else if (pass instanceof ClearMaskPass) {\n          stencilTest = false;\n        }\n      }\n    }\n  }\n  setSize(width, height, updateStyle) {\n    const renderer = this.renderer;\n    const currentSize = renderer.getSize(new Vector217());\n    if (width === void 0 || height === void 0) {\n      width = currentSize.width;\n      height = currentSize.height;\n    }\n    if (currentSize.width !== width || currentSize.height !== height) {\n      renderer.setSize(width, height, updateStyle);\n    }\n    const drawingBufferSize = renderer.getDrawingBufferSize(new Vector217());\n    this.inputBuffer.setSize(drawingBufferSize.width, drawingBufferSize.height);\n    this.outputBuffer.setSize(drawingBufferSize.width, drawingBufferSize.height);\n    for (const pass of this.passes) {\n      pass.setSize(drawingBufferSize.width, drawingBufferSize.height);\n    }\n  }\n  reset() {\n    const autoReset = this.timer.autoReset;\n    this.dispose();\n    this.autoRenderToScreen = true;\n    this.timer.autoReset = autoReset;\n  }\n  dispose() {\n    for (const pass of this.passes) {\n      pass.dispose();\n    }\n    this.passes = [];\n    if (this.inputBuffer !== null) {\n      this.inputBuffer.dispose();\n    }\n    if (this.outputBuffer !== null) {\n      this.outputBuffer.dispose();\n    }\n    this.deleteDepthTexture();\n    this.copyPass.dispose();\n    this.timer.dispose();\n  }\n};\n\n// src/core/EffectShaderData.js\nimport { LinearEncoding as LinearEncoding2 } from \"three\";\nvar EffectShaderData = class {\n  constructor() {\n    this.shaderParts = /* @__PURE__ */ new Map([\n      [EffectShaderSection.FRAGMENT_HEAD, null],\n      [EffectShaderSection.FRAGMENT_MAIN_UV, null],\n      [EffectShaderSection.FRAGMENT_MAIN_IMAGE, null],\n      [EffectShaderSection.VERTEX_HEAD, null],\n      [EffectShaderSection.VERTEX_MAIN_SUPPORT, null]\n    ]);\n    this.defines = /* @__PURE__ */ new Map();\n    this.uniforms = /* @__PURE__ */ new Map();\n    this.blendModes = /* @__PURE__ */ new Map();\n    this.extensions = /* @__PURE__ */ new Set();\n    this.attributes = EffectAttribute.NONE;\n    this.varyings = /* @__PURE__ */ new Set();\n    this.uvTransformation = false;\n    this.readDepth = false;\n    this.colorSpace = LinearEncoding2;\n  }\n};\n\n// src/core/GaussKernel.js\nfunction getCoefficients(n) {\n  let result;\n  if (n === 0) {\n    result = new Float64Array(0);\n  } else if (n === 1) {\n    result = new Float64Array([1]);\n  } else if (n > 1) {\n    let row0 = new Float64Array(n);\n    let row1 = new Float64Array(n);\n    for (let y = 1; y <= n; ++y) {\n      for (let x = 0; x < y; ++x) {\n        row1[x] = x === 0 || x === y - 1 ? 1 : row0[x - 1] + row0[x];\n      }\n      result = row1;\n      row1 = row0;\n      row0 = result;\n    }\n  }\n  return result;\n}\nvar GaussKernel = class {\n  constructor(kernelSize, edgeBias = 2) {\n    this.weights = null;\n    this.offsets = null;\n    this.linearWeights = null;\n    this.linearOffsets = null;\n    this.generate(kernelSize, edgeBias);\n  }\n  get steps() {\n    return this.offsets === null ? 0 : this.offsets.length;\n  }\n  get linearSteps() {\n    return this.linearOffsets === null ? 0 : this.linearOffsets.length;\n  }\n  generate(kernelSize, edgeBias) {\n    if (kernelSize < 3 || kernelSize > 1020) {\n      throw new Error(\"The kernel size must be in the range [3, 1020]\");\n    }\n    const n = kernelSize + edgeBias * 2;\n    const coefficients = edgeBias > 0 ? getCoefficients(n).slice(edgeBias, -edgeBias) : getCoefficients(n);\n    const mid = Math.floor((coefficients.length - 1) / 2);\n    const sum = coefficients.reduce((a, b) => a + b, 0);\n    const weights = coefficients.slice(mid);\n    const offsets = [...Array(mid + 1).keys()];\n    const linearWeights = new Float64Array(Math.floor(offsets.length / 2));\n    const linearOffsets = new Float64Array(linearWeights.length);\n    linearWeights[0] = weights[0] / sum;\n    for (let i = 1, j = 1, l = offsets.length - 1; i < l; i += 2, ++j) {\n      const offset0 = offsets[i], offset1 = offsets[i + 1];\n      const weight0 = weights[i], weight1 = weights[i + 1];\n      const w = weight0 + weight1;\n      const o = (offset0 * weight0 + offset1 * weight1) / w;\n      linearWeights[j] = w / sum;\n      linearOffsets[j] = o;\n    }\n    for (let i = 0, l = weights.length, s = 1 / sum; i < l; ++i) {\n      weights[i] *= s;\n    }\n    const linearWeightSum = (linearWeights.reduce((a, b) => a + b, 0) - linearWeights[0] * 0.5) * 2;\n    if (linearWeightSum !== 0) {\n      for (let i = 0, l = linearWeights.length, s = 1 / linearWeightSum; i < l; ++i) {\n        linearWeights[i] *= s;\n      }\n    }\n    this.offsets = offsets;\n    this.weights = weights;\n    this.linearOffsets = linearOffsets;\n    this.linearWeights = linearWeights;\n  }\n};\n\n// src/core/Initializable.js\nvar Initializable = class {\n  initialize(renderer, alpha, frameBufferType) {\n  }\n};\n\n// src/core/Resizable.js\nvar Resizable = class {\n  setSize(width, height) {\n  }\n};\n\n// src/core/Selection.js\nvar Selection = class extends Set {\n  constructor(iterable, layer = 10) {\n    super();\n    this.l = layer;\n    this.exclusive = false;\n    if (iterable !== void 0) {\n      this.set(iterable);\n    }\n  }\n  get layer() {\n    return this.l;\n  }\n  set layer(value) {\n    const currentLayer = this.l;\n    for (const object of this) {\n      object.layers.disable(currentLayer);\n      object.layers.enable(value);\n    }\n    this.l = value;\n  }\n  getLayer() {\n    return this.layer;\n  }\n  setLayer(value) {\n    this.layer = value;\n  }\n  isExclusive() {\n    return this.exclusive;\n  }\n  setExclusive(value) {\n    this.exclusive = value;\n  }\n  clear() {\n    const layer = this.layer;\n    for (const object of this) {\n      object.layers.disable(layer);\n    }\n    return super.clear();\n  }\n  set(objects) {\n    this.clear();\n    for (const object of objects) {\n      this.add(object);\n    }\n    return this;\n  }\n  indexOf(object) {\n    return this.has(object) ? 0 : -1;\n  }\n  add(object) {\n    if (this.exclusive) {\n      object.layers.set(this.layer);\n    } else {\n      object.layers.enable(this.layer);\n    }\n    return super.add(object);\n  }\n  delete(object) {\n    if (this.has(object)) {\n      object.layers.disable(this.layer);\n    }\n    return super.delete(object);\n  }\n  toggle(object) {\n    let result;\n    if (this.has(object)) {\n      this.delete(object);\n      result = false;\n    } else {\n      this.add(object);\n      result = true;\n    }\n    return result;\n  }\n  setVisible(visible) {\n    for (const object of this) {\n      if (visible) {\n        object.layers.enable(0);\n      } else {\n        object.layers.disable(0);\n      }\n    }\n    return this;\n  }\n};\n\n// src/effects/blending/BlendMode.js\nimport { EventDispatcher as EventDispatcher2, Uniform as Uniform23 } from \"three\";\n\n// src/effects/blending/glsl/add.frag\nvar add_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}\";\n\n// src/effects/blending/glsl/alpha.frag\nvar alpha_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}\";\n\n// src/effects/blending/glsl/average.frag\nvar average_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}\";\n\n// src/effects/blending/glsl/color.frag\nvar color_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}\";\n\n// src/effects/blending/glsl/color-burn.frag\nvar color_burn_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}\";\n\n// src/effects/blending/glsl/color-dodge.frag\nvar color_dodge_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}\";\n\n// src/effects/blending/glsl/darken.frag\nvar darken_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}\";\n\n// src/effects/blending/glsl/difference.frag\nvar difference_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}\";\n\n// src/effects/blending/glsl/divide.frag\nvar divide_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}\";\n\n// src/effects/blending/glsl/exclusion.frag\nvar exclusion_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}\";\n\n// src/effects/blending/glsl/hard-light.frag\nvar hard_light_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}\";\n\n// src/effects/blending/glsl/hard-mix.frag\nvar hard_mix_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}\";\n\n// src/effects/blending/glsl/hue.frag\nvar hue_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}\";\n\n// src/effects/blending/glsl/invert.frag\nvar invert_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}\";\n\n// src/effects/blending/glsl/invert-rgb.frag\nvar invert_rgb_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}\";\n\n// src/effects/blending/glsl/lighten.frag\nvar lighten_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}\";\n\n// src/effects/blending/glsl/linear-burn.frag\nvar linear_burn_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}\";\n\n// src/effects/blending/glsl/linear-dodge.frag\nvar linear_dodge_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}\";\n\n// src/effects/blending/glsl/linear-light.frag\nvar linear_light_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}\";\n\n// src/effects/blending/glsl/luminosity.frag\nvar luminosity_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}\";\n\n// src/effects/blending/glsl/multiply.frag\nvar multiply_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}\";\n\n// src/effects/blending/glsl/negation.frag\nvar negation_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}\";\n\n// src/effects/blending/glsl/normal.frag\nvar normal_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}\";\n\n// src/effects/blending/glsl/overlay.frag\nvar overlay_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}\";\n\n// src/effects/blending/glsl/pin-light.frag\nvar pin_light_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}\";\n\n// src/effects/blending/glsl/reflect.frag\nvar reflect_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}\";\n\n// src/effects/blending/glsl/saturation.frag\nvar saturation_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}\";\n\n// src/effects/blending/glsl/screen.frag\nvar screen_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}\";\n\n// src/effects/blending/glsl/soft-light.frag\nvar soft_light_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}\";\n\n// src/effects/blending/glsl/src.frag\nvar src_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}\";\n\n// src/effects/blending/glsl/subtract.frag\nvar subtract_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}\";\n\n// src/effects/blending/glsl/vivid-light.frag\nvar vivid_light_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}\";\n\n// src/effects/blending/BlendMode.js\nvar blendFunctions = /* @__PURE__ */ new Map([\n  [BlendFunction.ADD, add_default],\n  [BlendFunction.ALPHA, alpha_default],\n  [BlendFunction.AVERAGE, average_default],\n  [BlendFunction.COLOR, color_default],\n  [BlendFunction.COLOR_BURN, color_burn_default],\n  [BlendFunction.COLOR_DODGE, color_dodge_default],\n  [BlendFunction.DARKEN, darken_default],\n  [BlendFunction.DIFFERENCE, difference_default],\n  [BlendFunction.DIVIDE, divide_default],\n  [BlendFunction.DST, null],\n  [BlendFunction.EXCLUSION, exclusion_default],\n  [BlendFunction.HARD_LIGHT, hard_light_default],\n  [BlendFunction.HARD_MIX, hard_mix_default],\n  [BlendFunction.HUE, hue_default],\n  [BlendFunction.INVERT, invert_default],\n  [BlendFunction.INVERT_RGB, invert_rgb_default],\n  [BlendFunction.LIGHTEN, lighten_default],\n  [BlendFunction.LINEAR_BURN, linear_burn_default],\n  [BlendFunction.LINEAR_DODGE, linear_dodge_default],\n  [BlendFunction.LINEAR_LIGHT, linear_light_default],\n  [BlendFunction.LUMINOSITY, luminosity_default],\n  [BlendFunction.MULTIPLY, multiply_default],\n  [BlendFunction.NEGATION, negation_default],\n  [BlendFunction.NORMAL, normal_default],\n  [BlendFunction.OVERLAY, overlay_default],\n  [BlendFunction.PIN_LIGHT, pin_light_default],\n  [BlendFunction.REFLECT, reflect_default],\n  [BlendFunction.SATURATION, saturation_default],\n  [BlendFunction.SCREEN, screen_default],\n  [BlendFunction.SOFT_LIGHT, soft_light_default],\n  [BlendFunction.SRC, src_default],\n  [BlendFunction.SUBTRACT, subtract_default],\n  [BlendFunction.VIVID_LIGHT, vivid_light_default]\n]);\nvar BlendMode = class extends EventDispatcher2 {\n  constructor(blendFunction, opacity = 1) {\n    super();\n    this._blendFunction = blendFunction;\n    this.opacity = new Uniform23(opacity);\n  }\n  getOpacity() {\n    return this.opacity.value;\n  }\n  setOpacity(value) {\n    this.opacity.value = value;\n  }\n  get blendFunction() {\n    return this._blendFunction;\n  }\n  set blendFunction(value) {\n    this._blendFunction = value;\n    this.dispatchEvent({ type: \"change\" });\n  }\n  getBlendFunction() {\n    return this.blendFunction;\n  }\n  setBlendFunction(value) {\n    this.blendFunction = value;\n  }\n  getShaderCode() {\n    return blendFunctions.get(this.blendFunction);\n  }\n};\n\n// src/effects/BloomEffect.js\nimport { sRGBEncoding as sRGBEncoding9, Uniform as Uniform24, WebGLRenderTarget as WebGLRenderTarget15 } from \"three\";\n\n// src/effects/Effect.js\nimport { BasicDepthPacking as BasicDepthPacking13, EventDispatcher as EventDispatcher3, LinearEncoding as LinearEncoding3, Material as Material2, Texture as Texture2, WebGLRenderTarget as WebGLRenderTarget14 } from \"three\";\nvar Effect = class extends EventDispatcher3 {\n  constructor(name, fragmentShader, {\n    attributes = EffectAttribute.NONE,\n    blendFunction = BlendFunction.NORMAL,\n    defines = /* @__PURE__ */ new Map(),\n    uniforms = /* @__PURE__ */ new Map(),\n    extensions = null,\n    vertexShader = null\n  } = {}) {\n    super();\n    this.name = name;\n    this.renderer = null;\n    this.attributes = attributes;\n    this.fragmentShader = fragmentShader;\n    this.vertexShader = vertexShader;\n    this.defines = defines;\n    this.uniforms = uniforms;\n    this.extensions = extensions;\n    this.blendMode = new BlendMode(blendFunction);\n    this.blendMode.addEventListener(\"change\", (event) => this.setChanged());\n    this._inputColorSpace = LinearEncoding3;\n    this._outputColorSpace = null;\n  }\n  get inputColorSpace() {\n    return this._inputColorSpace;\n  }\n  set inputColorSpace(value) {\n    this._inputColorSpace = value;\n    this.setChanged();\n  }\n  get outputColorSpace() {\n    return this._outputColorSpace;\n  }\n  set outputColorSpace(value) {\n    this._outputColorSpace = value;\n    this.setChanged();\n  }\n  set mainScene(value) {\n  }\n  set mainCamera(value) {\n  }\n  getName() {\n    return this.name;\n  }\n  setRenderer(renderer) {\n    this.renderer = renderer;\n  }\n  getDefines() {\n    return this.defines;\n  }\n  getUniforms() {\n    return this.uniforms;\n  }\n  getExtensions() {\n    return this.extensions;\n  }\n  getBlendMode() {\n    return this.blendMode;\n  }\n  getAttributes() {\n    return this.attributes;\n  }\n  setAttributes(attributes) {\n    this.attributes = attributes;\n    this.setChanged();\n  }\n  getFragmentShader() {\n    return this.fragmentShader;\n  }\n  setFragmentShader(fragmentShader) {\n    this.fragmentShader = fragmentShader;\n    this.setChanged();\n  }\n  getVertexShader() {\n    return this.vertexShader;\n  }\n  setVertexShader(vertexShader) {\n    this.vertexShader = vertexShader;\n    this.setChanged();\n  }\n  setChanged() {\n    this.dispatchEvent({ type: \"change\" });\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking13) {\n  }\n  update(renderer, inputBuffer, deltaTime) {\n  }\n  setSize(width, height) {\n  }\n  initialize(renderer, alpha, frameBufferType) {\n  }\n  dispose() {\n    for (const key of Object.keys(this)) {\n      const property = this[key];\n      const isDisposable = property instanceof WebGLRenderTarget14 || property instanceof Material2 || property instanceof Texture2 || property instanceof Pass;\n      if (isDisposable) {\n        this[key].dispose();\n      }\n    }\n  }\n};\n\n// src/effects/glsl/bloom.frag\nvar bloom_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D map;\\n#else\\nuniform lowp sampler2D map;\\n#endif\\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}\";\n\n// src/effects/BloomEffect.js\nvar BloomEffect = class extends Effect {\n  constructor({\n    blendFunction = BlendFunction.SCREEN,\n    luminanceThreshold = 0.9,\n    luminanceSmoothing = 0.025,\n    mipmapBlur = false,\n    intensity = 1,\n    radius = 0.85,\n    levels = 8,\n    kernelSize = KernelSize.LARGE,\n    resolutionScale = 0.5,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"BloomEffect\", bloom_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"map\", new Uniform24(null)],\n        [\"intensity\", new Uniform24(intensity)]\n      ])\n    });\n    this.renderTarget = new WebGLRenderTarget15(1, 1, { depthBuffer: false });\n    this.renderTarget.texture.name = \"Bloom.Target\";\n    this.blurPass = new KawaseBlurPass({ kernelSize });\n    this.luminancePass = new LuminancePass({ colorOutput: true });\n    this.luminanceMaterial.threshold = luminanceThreshold;\n    this.luminanceMaterial.smoothing = luminanceSmoothing;\n    this.mipmapBlurPass = new MipmapBlurPass();\n    this.mipmapBlurPass.enabled = mipmapBlur;\n    this.mipmapBlurPass.radius = radius;\n    this.mipmapBlurPass.levels = levels;\n    this.uniforms.get(\"map\").value = mipmapBlur ? this.mipmapBlurPass.texture : this.renderTarget.texture;\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n  }\n  get texture() {\n    return this.mipmapBlurPass.enabled ? this.mipmapBlurPass.texture : this.renderTarget.texture;\n  }\n  getTexture() {\n    return this.texture;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  getBlurPass() {\n    return this.blurPass;\n  }\n  getLuminancePass() {\n    return this.luminancePass;\n  }\n  get luminanceMaterial() {\n    return this.luminancePass.fullscreenMaterial;\n  }\n  getLuminanceMaterial() {\n    return this.luminancePass.fullscreenMaterial;\n  }\n  get width() {\n    return this.resolution.width;\n  }\n  set width(value) {\n    this.resolution.preferredWidth = value;\n  }\n  get height() {\n    return this.resolution.height;\n  }\n  set height(value) {\n    this.resolution.preferredHeight = value;\n  }\n  get dithering() {\n    return this.blurPass.dithering;\n  }\n  set dithering(value) {\n    this.blurPass.dithering = value;\n  }\n  get kernelSize() {\n    return this.blurPass.kernelSize;\n  }\n  set kernelSize(value) {\n    this.blurPass.kernelSize = value;\n  }\n  get distinction() {\n    console.warn(this.name, \"distinction was removed\");\n    return 1;\n  }\n  set distinction(value) {\n    console.warn(this.name, \"distinction was removed\");\n  }\n  get intensity() {\n    return this.uniforms.get(\"intensity\").value;\n  }\n  set intensity(value) {\n    this.uniforms.get(\"intensity\").value = value;\n  }\n  getIntensity() {\n    return this.intensity;\n  }\n  setIntensity(value) {\n    this.intensity = value;\n  }\n  getResolutionScale() {\n    return this.resolution.scale;\n  }\n  setResolutionScale(scale) {\n    this.resolution.scale = scale;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    const renderTarget = this.renderTarget;\n    const luminancePass = this.luminancePass;\n    if (luminancePass.enabled) {\n      luminancePass.render(renderer, inputBuffer);\n      if (this.mipmapBlurPass.enabled) {\n        this.mipmapBlurPass.render(renderer, luminancePass.renderTarget);\n      } else {\n        this.blurPass.render(renderer, luminancePass.renderTarget, renderTarget);\n      }\n    } else {\n      if (this.mipmapBlurPass.enabled) {\n        this.mipmapBlurPass.render(renderer, inputBuffer);\n      } else {\n        this.blurPass.render(renderer, inputBuffer, renderTarget);\n      }\n    }\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    this.renderTarget.setSize(resolution.width, resolution.height);\n    this.blurPass.resolution.copy(resolution);\n    this.luminancePass.setSize(width, height);\n    this.mipmapBlurPass.setSize(width, height);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    this.blurPass.initialize(renderer, alpha, frameBufferType);\n    this.luminancePass.initialize(renderer, alpha, frameBufferType);\n    this.mipmapBlurPass.initialize(renderer, alpha, frameBufferType);\n    if (frameBufferType !== void 0) {\n      this.renderTarget.texture.type = frameBufferType;\n      if (renderer.outputEncoding === sRGBEncoding9) {\n        this.renderTarget.texture.encoding = sRGBEncoding9;\n      }\n    }\n  }\n};\n\n// src/effects/BokehEffect.js\nimport { Uniform as Uniform25 } from \"three\";\n\n// src/effects/glsl/bokeh.frag\nvar bokeh_default = \"uniform float focus;uniform float dof;uniform float aperture;uniform float maxBlur;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec2 aspectCorrection=vec2(1.0,aspect);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearDepth=depth;\\n#endif\\nfloat focusNear=clamp(focus-dof,0.0,1.0);float focusFar=clamp(focus+dof,0.0,1.0);float low=step(linearDepth,focusNear);float high=step(focusFar,linearDepth);float factor=(linearDepth-focusNear)*low+(linearDepth-focusFar)*high;vec2 dofBlur=vec2(clamp(factor*aperture,-maxBlur,maxBlur));vec2 dofblur9=dofBlur*0.9;vec2 dofblur7=dofBlur*0.7;vec2 dofblur4=dofBlur*0.4;vec4 color=inputColor;color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur4);outputColor=color/41.0;}\";\n\n// src/effects/BokehEffect.js\nvar BokehEffect = class extends Effect {\n  constructor({\n    blendFunction,\n    focus = 0.5,\n    dof = 0.02,\n    aperture = 0.015,\n    maxBlur = 1\n  } = {}) {\n    super(\"BokehEffect\", bokeh_default, {\n      blendFunction,\n      attributes: EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"focus\", new Uniform25(focus)],\n        [\"dof\", new Uniform25(dof)],\n        [\"aperture\", new Uniform25(aperture)],\n        [\"maxBlur\", new Uniform25(maxBlur)]\n      ])\n    });\n  }\n};\n\n// src/effects/BrightnessContrastEffect.js\nimport { sRGBEncoding as sRGBEncoding10, Uniform as Uniform26 } from \"three\";\n\n// src/effects/glsl/brightness-contrast.frag\nvar brightness_contrast_default = \"uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(color+vec3(0.5),inputColor.a);}\";\n\n// src/effects/BrightnessContrastEffect.js\nvar BrightnessContrastEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.SRC, brightness = 0, contrast = 0 } = {}) {\n    super(\"BrightnessContrastEffect\", brightness_contrast_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"brightness\", new Uniform26(brightness)],\n        [\"contrast\", new Uniform26(contrast)]\n      ])\n    });\n    this.inputColorSpace = sRGBEncoding10;\n  }\n  get brightness() {\n    return this.uniforms.get(\"brightness\").value;\n  }\n  set brightness(value) {\n    this.uniforms.get(\"brightness\").value = value;\n  }\n  getBrightness(value) {\n    return this.brightness;\n  }\n  setBrightness(value) {\n    this.brightness = value;\n  }\n  get contrast() {\n    return this.uniforms.get(\"contrast\").value;\n  }\n  set contrast(value) {\n    this.uniforms.get(\"contrast\").value = value;\n  }\n  getContrast(value) {\n    return this.contrast;\n  }\n  setContrast(value) {\n    this.contrast = value;\n  }\n};\n\n// src/effects/glsl/color-average.frag\nvar color_average_default = \"void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}\";\n\n// src/effects/ColorAverageEffect.js\nvar ColorAverageEffect = class extends Effect {\n  constructor(blendFunction) {\n    super(\"ColorAverageEffect\", color_average_default, { blendFunction });\n  }\n};\n\n// src/effects/ColorDepthEffect.js\nimport { Uniform as Uniform27 } from \"three\";\n\n// src/effects/glsl/color-depth.frag\nvar color_depth_default = \"uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}\";\n\n// src/effects/ColorDepthEffect.js\nvar ColorDepthEffect = class extends Effect {\n  constructor({ blendFunction, bits = 16 } = {}) {\n    super(\"ColorDepthEffect\", color_depth_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"factor\", new Uniform27(1)]\n      ])\n    });\n    this.bits = 0;\n    this.bitDepth = bits;\n  }\n  get bitDepth() {\n    return this.bits;\n  }\n  set bitDepth(value) {\n    this.bits = value;\n    this.uniforms.get(\"factor\").value = Math.pow(2, value / 3);\n  }\n  getBitDepth() {\n    return this.bitDepth;\n  }\n  setBitDepth(value) {\n    this.bitDepth = value;\n  }\n};\n\n// src/effects/ChromaticAberrationEffect.js\nimport { Uniform as Uniform28, Vector2 as Vector218 } from \"three\";\n\n// src/effects/glsl/chromatic-aberration.frag\nvar chromatic_aberration_default = \"#ifdef RADIAL_MODULATION\\nuniform float modulationOffset;\\n#endif\\nvarying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;\\n#ifdef RADIAL_MODULATION\\nconst vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}\\n#else\\nif(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}\\n#endif\\noutputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}\";\n\n// src/effects/glsl/chromatic-aberration.vert\nvar chromatic_aberration_default2 = \"uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}\";\n\n// src/effects/ChromaticAberrationEffect.js\nvar ChromaticAberrationEffect = class extends Effect {\n  constructor({\n    offset = new Vector218(1e-3, 5e-4),\n    radialModulation = false,\n    modulationOffset = 0.15\n  } = {}) {\n    super(\"ChromaticAberrationEffect\", chromatic_aberration_default, {\n      vertexShader: chromatic_aberration_default2,\n      attributes: EffectAttribute.CONVOLUTION,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"offset\", new Uniform28(offset)],\n        [\"modulationOffset\", new Uniform28(modulationOffset)]\n      ])\n    });\n    this.radialModulation = radialModulation;\n  }\n  get offset() {\n    return this.uniforms.get(\"offset\").value;\n  }\n  set offset(value) {\n    this.uniforms.get(\"offset\").value = value;\n  }\n  get radialModulation() {\n    return this.defines.has(\"RADIAL_MODULATION\");\n  }\n  set radialModulation(value) {\n    if (value) {\n      this.defines.set(\"RADIAL_MODULATION\", \"1\");\n    } else {\n      this.defines.delete(\"RADIAL_MODULATION\");\n    }\n    this.setChanged();\n  }\n  get modulationOffset() {\n    return this.uniforms.get(\"modulationOffset\").value;\n  }\n  set modulationOffset(value) {\n    this.uniforms.get(\"modulationOffset\").value = value;\n  }\n  getOffset() {\n    return this.offset;\n  }\n  setOffset(value) {\n    this.offset = value;\n  }\n};\n\n// src/effects/glsl/depth.frag\nvar depth_default = \"void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\\n#ifdef INVERTED\\nvec3 color=vec3(1.0-depth);\\n#else\\nvec3 color=vec3(depth);\\n#endif\\noutputColor=vec4(color,inputColor.a);}\";\n\n// src/effects/DepthEffect.js\nvar DepthEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.SRC, inverted = false } = {}) {\n    super(\"DepthEffect\", depth_default, {\n      blendFunction,\n      attributes: EffectAttribute.DEPTH\n    });\n    this.inverted = inverted;\n  }\n  get inverted() {\n    return this.defines.has(\"INVERTED\");\n  }\n  set inverted(value) {\n    if (this.inverted !== value) {\n      if (value) {\n        this.defines.set(\"INVERTED\", \"1\");\n      } else {\n        this.defines.delete(\"INVERTED\");\n      }\n      this.setChanged();\n    }\n  }\n  isInverted() {\n    return this.inverted;\n  }\n  setInverted(value) {\n    this.inverted = value;\n  }\n};\n\n// src/effects/DepthOfFieldEffect.js\nimport { BasicDepthPacking as BasicDepthPacking14, sRGBEncoding as sRGBEncoding11, Uniform as Uniform29, UnsignedByteType as UnsignedByteType13, WebGLRenderTarget as WebGLRenderTarget16 } from \"three\";\n\n// src/effects/glsl/depth-of-field.frag\nvar depth_of_field_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;\\n#else\\nuniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;\\n#endif\\nuniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float cocNear=texture2D(nearCoCBuffer,uv).r;cocNear=min(cocNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,cocNear);outputColor=result;}\";\n\n// src/effects/DepthOfFieldEffect.js\nvar DepthOfFieldEffect = class extends Effect {\n  constructor(camera, {\n    blendFunction,\n    worldFocusDistance,\n    worldFocusRange,\n    focusDistance = 0,\n    focalLength = 0.1,\n    focusRange = focalLength,\n    bokehScale = 1,\n    resolutionScale = 1,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"DepthOfFieldEffect\", depth_of_field_default, {\n      blendFunction,\n      attributes: EffectAttribute.DEPTH,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"nearColorBuffer\", new Uniform29(null)],\n        [\"farColorBuffer\", new Uniform29(null)],\n        [\"nearCoCBuffer\", new Uniform29(null)],\n        [\"scale\", new Uniform29(1)]\n      ])\n    });\n    this.camera = camera;\n    this.renderTarget = new WebGLRenderTarget16(1, 1, { depthBuffer: false });\n    this.renderTarget.texture.name = \"DoF.Intermediate\";\n    this.renderTargetMasked = this.renderTarget.clone();\n    this.renderTargetMasked.texture.name = \"DoF.Masked.Far\";\n    this.renderTargetNear = this.renderTarget.clone();\n    this.renderTargetNear.texture.name = \"DoF.Bokeh.Near\";\n    this.uniforms.get(\"nearColorBuffer\").value = this.renderTargetNear.texture;\n    this.renderTargetFar = this.renderTarget.clone();\n    this.renderTargetFar.texture.name = \"DoF.Bokeh.Far\";\n    this.uniforms.get(\"farColorBuffer\").value = this.renderTargetFar.texture;\n    this.renderTargetCoC = this.renderTarget.clone();\n    this.renderTargetCoC.texture.name = \"DoF.CoC\";\n    this.renderTargetCoCBlurred = this.renderTargetCoC.clone();\n    this.renderTargetCoCBlurred.texture.name = \"DoF.CoC.Blurred\";\n    this.uniforms.get(\"nearCoCBuffer\").value = this.renderTargetCoCBlurred.texture;\n    this.cocPass = new ShaderPass(new CircleOfConfusionMaterial(camera));\n    const cocMaterial = this.cocMaterial;\n    cocMaterial.focusDistance = focusDistance;\n    cocMaterial.focusRange = focusRange;\n    if (worldFocusDistance !== void 0) {\n      cocMaterial.worldFocusDistance = worldFocusDistance;\n    }\n    if (worldFocusRange !== void 0) {\n      cocMaterial.worldFocusRange = worldFocusRange;\n    }\n    this.blurPass = new KawaseBlurPass({ resolutionScale, resolutionX, resolutionY, kernelSize: KernelSize.MEDIUM });\n    this.maskPass = new ShaderPass(new MaskMaterial(this.renderTargetCoC.texture));\n    const maskMaterial = this.maskPass.fullscreenMaterial;\n    maskMaterial.maskFunction = MaskFunction.MULTIPLY;\n    maskMaterial.colorChannel = ColorChannel.GREEN;\n    this.bokehNearBasePass = new ShaderPass(new BokehMaterial(false, true));\n    this.bokehNearBasePass.fullscreenMaterial.cocBuffer = this.renderTargetCoCBlurred.texture;\n    this.bokehNearFillPass = new ShaderPass(new BokehMaterial(true, true));\n    this.bokehNearFillPass.fullscreenMaterial.cocBuffer = this.renderTargetCoCBlurred.texture;\n    this.bokehFarBasePass = new ShaderPass(new BokehMaterial(false, false));\n    this.bokehFarBasePass.fullscreenMaterial.cocBuffer = this.renderTargetCoC.texture;\n    this.bokehFarFillPass = new ShaderPass(new BokehMaterial(true, false));\n    this.bokehFarFillPass.fullscreenMaterial.cocBuffer = this.renderTargetCoC.texture;\n    this.target = null;\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n    this.bokehScale = bokehScale;\n  }\n  set mainCamera(value) {\n    this.camera = value;\n    this.cocMaterial.copyCameraSettings(value);\n  }\n  get cocTexture() {\n    return this.renderTargetCoC.texture;\n  }\n  get cocMaterial() {\n    return this.cocPass.fullscreenMaterial;\n  }\n  get circleOfConfusionMaterial() {\n    return this.cocMaterial;\n  }\n  getCircleOfConfusionMaterial() {\n    return this.circleOfConfusionMaterial;\n  }\n  getBlurPass() {\n    return this.blurPass;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  get bokehScale() {\n    return this.uniforms.get(\"scale\").value;\n  }\n  set bokehScale(value) {\n    this.bokehNearBasePass.fullscreenMaterial.scale = value;\n    this.bokehNearFillPass.fullscreenMaterial.scale = value;\n    this.bokehFarBasePass.fullscreenMaterial.scale = value;\n    this.bokehFarFillPass.fullscreenMaterial.scale = value;\n    this.maskPass.fullscreenMaterial.strength = value;\n    this.uniforms.get(\"scale\").value = value;\n  }\n  getBokehScale() {\n    return this.bokehScale;\n  }\n  setBokehScale(value) {\n    this.bokehScale = value;\n  }\n  getTarget() {\n    return this.target;\n  }\n  setTarget(value) {\n    this.target = value;\n  }\n  calculateFocusDistance(target) {\n    const camera = this.camera;\n    const distance = camera.position.distanceTo(target);\n    return viewZToOrthographicDepth(-distance, camera.near, camera.far);\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking14) {\n    this.circleOfConfusionMaterial.depthBuffer = depthTexture;\n    this.circleOfConfusionMaterial.depthPacking = depthPacking;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    const renderTarget = this.renderTarget;\n    const renderTargetCoC = this.renderTargetCoC;\n    const renderTargetCoCBlurred = this.renderTargetCoCBlurred;\n    const renderTargetMasked = this.renderTargetMasked;\n    if (this.target !== null) {\n      const distance = this.calculateFocusDistance(this.target);\n      this.cocMaterial.focusDistance = distance;\n    }\n    this.cocPass.render(renderer, null, renderTargetCoC);\n    this.blurPass.render(renderer, renderTargetCoC, renderTargetCoCBlurred);\n    this.maskPass.render(renderer, inputBuffer, renderTargetMasked);\n    this.bokehFarBasePass.render(renderer, renderTargetMasked, renderTarget);\n    this.bokehFarFillPass.render(renderer, renderTarget, this.renderTargetFar);\n    this.bokehNearBasePass.render(renderer, inputBuffer, renderTarget);\n    this.bokehNearFillPass.render(renderer, renderTarget, this.renderTargetNear);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    const w = resolution.width, h = resolution.height;\n    this.cocPass.setSize(width, height);\n    this.blurPass.setSize(width, height);\n    this.maskPass.setSize(width, height);\n    this.renderTargetCoC.setSize(width, height);\n    this.renderTargetMasked.setSize(width, height);\n    this.renderTarget.setSize(w, h);\n    this.renderTargetNear.setSize(w, h);\n    this.renderTargetFar.setSize(w, h);\n    this.renderTargetCoCBlurred.setSize(w, h);\n    this.bokehNearBasePass.fullscreenMaterial.setSize(width, height);\n    this.bokehNearFillPass.fullscreenMaterial.setSize(width, height);\n    this.bokehFarBasePass.fullscreenMaterial.setSize(width, height);\n    this.bokehFarFillPass.fullscreenMaterial.setSize(width, height);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    this.cocPass.initialize(renderer, alpha, frameBufferType);\n    this.maskPass.initialize(renderer, alpha, frameBufferType);\n    this.bokehNearBasePass.initialize(renderer, alpha, frameBufferType);\n    this.bokehNearFillPass.initialize(renderer, alpha, frameBufferType);\n    this.bokehFarBasePass.initialize(renderer, alpha, frameBufferType);\n    this.bokehFarFillPass.initialize(renderer, alpha, frameBufferType);\n    this.blurPass.initialize(renderer, alpha, UnsignedByteType13);\n    if (frameBufferType !== void 0) {\n      this.renderTarget.texture.type = frameBufferType;\n      this.renderTargetNear.texture.type = frameBufferType;\n      this.renderTargetFar.texture.type = frameBufferType;\n      this.renderTargetMasked.texture.type = frameBufferType;\n      if (renderer.outputEncoding === sRGBEncoding11) {\n        this.renderTarget.texture.encoding = sRGBEncoding11;\n        this.renderTargetNear.texture.encoding = sRGBEncoding11;\n        this.renderTargetFar.texture.encoding = sRGBEncoding11;\n        this.renderTargetMasked.texture.encoding = sRGBEncoding11;\n      }\n    }\n  }\n};\n\n// src/effects/DotScreenEffect.js\nimport { Uniform as Uniform30, Vector2 as Vector219 } from \"three\";\n\n// src/effects/glsl/dot-screen.frag\nvar dot_screen_default = \"uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}\";\n\n// src/effects/DotScreenEffect.js\nvar DotScreenEffect = class extends Effect {\n  constructor({ blendFunction, angle = Math.PI * 0.5, scale = 1 } = {}) {\n    super(\"DotScreenEffect\", dot_screen_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"angle\", new Uniform30(new Vector219())],\n        [\"scale\", new Uniform30(scale)]\n      ])\n    });\n    this.angle = angle;\n  }\n  get angle() {\n    return Math.acos(this.uniforms.get(\"angle\").value.y);\n  }\n  set angle(value) {\n    this.uniforms.get(\"angle\").value.set(Math.sin(value), Math.cos(value));\n  }\n  getAngle() {\n    return this.angle;\n  }\n  setAngle(value) {\n    this.angle = value;\n  }\n  get scale() {\n    return this.uniforms.get(\"scale\").value;\n  }\n  set scale(value) {\n    this.uniforms.get(\"scale\").value = value;\n  }\n};\n\n// src/effects/glsl/fxaa.frag\nvar fxaa_default = \"\\n#if THREE_REVISION < 143\\n#define luminance(v) linearToRelativeLuminance(v)\\n#endif\\n#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))\\n#define ONE_OVER_TWELVE 0.08333333333333333\\nvarying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;vec4 fxaa(const in vec4 inputColor,const in vec2 uv){float lumaCenter=luminance(inputColor.rgb);float lumaDown=luminance(texture2D(inputBuffer,vUvDown).rgb);float lumaUp=luminance(texture2D(inputBuffer,vUvUp).rgb);float lumaLeft=luminance(texture2D(inputBuffer,vUvLeft).rgb);float lumaRight=luminance(texture2D(inputBuffer,vUvRight).rgb);float lumaMin=min(lumaCenter,min(min(lumaDown,lumaUp),min(lumaLeft,lumaRight)));float lumaMax=max(lumaCenter,max(max(lumaDown,lumaUp),max(lumaLeft,lumaRight)));float lumaRange=lumaMax-lumaMin;if(lumaRange<max(EDGE_THRESHOLD_MIN,lumaMax*EDGE_THRESHOLD_MAX)){return inputColor;}float lumaDownLeft=luminance(texture2D(inputBuffer,vUvDownLeft).rgb);float lumaUpRight=luminance(texture2D(inputBuffer,vUvUpRight).rgb);float lumaUpLeft=luminance(texture2D(inputBuffer,vUvUpLeft).rgb);float lumaDownRight=luminance(texture2D(inputBuffer,vUvDownRight).rgb);float lumaDownUp=lumaDown+lumaUp;float lumaLeftRight=lumaLeft+lumaRight;float lumaLeftCorners=lumaDownLeft+lumaUpLeft;float lumaDownCorners=lumaDownLeft+lumaDownRight;float lumaRightCorners=lumaDownRight+lumaUpRight;float lumaUpCorners=lumaUpRight+lumaUpLeft;float edgeHorizontal=(abs(-2.0*lumaLeft+lumaLeftCorners)+abs(-2.0*lumaCenter+lumaDownUp)*2.0+abs(-2.0*lumaRight+lumaRightCorners));float edgeVertical=(abs(-2.0*lumaUp+lumaUpCorners)+abs(-2.0*lumaCenter+lumaLeftRight)*2.0+abs(-2.0*lumaDown+lumaDownCorners));bool isHorizontal=(edgeHorizontal>=edgeVertical);float stepLength=isHorizontal?texelSize.y:texelSize.x;float luma1=isHorizontal?lumaDown:lumaLeft;float luma2=isHorizontal?lumaUp:lumaRight;float gradient1=abs(luma1-lumaCenter);float gradient2=abs(luma2-lumaCenter);bool is1Steepest=gradient1>=gradient2;float gradientScaled=0.25*max(gradient1,gradient2);float lumaLocalAverage=0.0;if(is1Steepest){stepLength=-stepLength;lumaLocalAverage=0.5*(luma1+lumaCenter);}else{lumaLocalAverage=0.5*(luma2+lumaCenter);}vec2 currentUv=uv;if(isHorizontal){currentUv.y+=stepLength*0.5;}else{currentUv.x+=stepLength*0.5;}vec2 offset=isHorizontal?vec2(texelSize.x,0.0):vec2(0.0,texelSize.y);vec2 uv1=currentUv-offset*QUALITY(0);vec2 uv2=currentUv+offset*QUALITY(0);float lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);float lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd1-=lumaLocalAverage;lumaEnd2-=lumaLocalAverage;bool reached1=abs(lumaEnd1)>=gradientScaled;bool reached2=abs(lumaEnd2)>=gradientScaled;bool reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(1);}if(!reached2){uv2+=offset*QUALITY(1);}if(!reachedBoth){for(int i=2;i<SAMPLES;++i){if(!reached1){lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);lumaEnd1=lumaEnd1-lumaLocalAverage;}if(!reached2){lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd2=lumaEnd2-lumaLocalAverage;}reached1=abs(lumaEnd1)>=gradientScaled;reached2=abs(lumaEnd2)>=gradientScaled;reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(i);}if(!reached2){uv2+=offset*QUALITY(i);}if(reachedBoth){break;}}}float distance1=isHorizontal?(uv.x-uv1.x):(uv.y-uv1.y);float distance2=isHorizontal?(uv2.x-uv.x):(uv2.y-uv.y);bool isDirection1=distance1<distance2;float distanceFinal=min(distance1,distance2);float edgeThickness=(distance1+distance2);bool isLumaCenterSmaller=lumaCenter<lumaLocalAverage;bool correctVariation1=(lumaEnd1<0.0)!=isLumaCenterSmaller;bool correctVariation2=(lumaEnd2<0.0)!=isLumaCenterSmaller;bool correctVariation=isDirection1?correctVariation1:correctVariation2;float pixelOffset=-distanceFinal/edgeThickness+0.5;float finalOffset=correctVariation?pixelOffset:0.0;float lumaAverage=ONE_OVER_TWELVE*(2.0*(lumaDownUp+lumaLeftRight)+lumaLeftCorners+lumaRightCorners);float subPixelOffset1=clamp(abs(lumaAverage-lumaCenter)/lumaRange,0.0,1.0);float subPixelOffset2=(-2.0*subPixelOffset1+3.0)*subPixelOffset1*subPixelOffset1;float subPixelOffsetFinal=subPixelOffset2*subPixelOffset2*SUBPIXEL_QUALITY;finalOffset=max(finalOffset,subPixelOffsetFinal);vec2 finalUv=uv;if(isHorizontal){finalUv.y+=finalOffset*stepLength;}else{finalUv.x+=finalOffset*stepLength;}return texture2D(inputBuffer,finalUv);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=fxaa(inputColor,uv);}\";\n\n// src/effects/glsl/fxaa.vert\nvar fxaa_default2 = \"varying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;void mainSupport(const in vec2 uv){vUvDown=uv+vec2(0.0,-1.0)*texelSize;vUvUp=uv+vec2(0.0,1.0)*texelSize;vUvRight=uv+vec2(1.0,0.0)*texelSize;vUvLeft=uv+vec2(-1.0,0.0)*texelSize;vUvDownLeft=uv+vec2(-1.0,-1.0)*texelSize;vUvUpRight=uv+vec2(1.0,1.0)*texelSize;vUvUpLeft=uv+vec2(-1.0,1.0)*texelSize;vUvDownRight=uv+vec2(1.0,-1.0)*texelSize;}\";\n\n// src/effects/FXAAEffect.js\nvar FXAAEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.SRC } = {}) {\n    super(\"FXAAEffect\", fxaa_default, {\n      vertexShader: fxaa_default2,\n      blendFunction,\n      defines: /* @__PURE__ */ new Map([\n        [\"EDGE_THRESHOLD_MIN\", \"0.0312\"],\n        [\"EDGE_THRESHOLD_MAX\", \"0.125\"],\n        [\"SUBPIXEL_QUALITY\", \"0.75\"],\n        [\"SAMPLES\", \"12\"]\n      ])\n    });\n  }\n  get minEdgeThreshold() {\n    return Number(this.defines.get(\"EDGE_THRESHOLD_MIN\"));\n  }\n  set minEdgeThreshold(value) {\n    this.defines.set(\"EDGE_THRESHOLD_MIN\", value.toFixed(12));\n    this.setChanged();\n  }\n  get maxEdgeThreshold() {\n    return Number(this.defines.get(\"EDGE_THRESHOLD_MAX\"));\n  }\n  set maxEdgeThreshold(value) {\n    this.defines.set(\"EDGE_THRESHOLD_MAX\", value.toFixed(12));\n    this.setChanged();\n  }\n  get subpixelQuality() {\n    return Number(this.defines.get(\"SUBPIXEL_QUALITY\"));\n  }\n  set subpixelQuality(value) {\n    this.defines.set(\"SUBPIXEL_QUALITY\", value.toFixed(12));\n    this.setChanged();\n  }\n  get samples() {\n    return Number(this.defines.get(\"SAMPLES\"));\n  }\n  set samples(value) {\n    this.defines.set(\"SAMPLES\", value.toFixed(0));\n    this.setChanged();\n  }\n};\n\n// src/effects/GammaCorrectionEffect.js\nimport { Uniform as Uniform31 } from \"three\";\n\n// src/effects/glsl/gamma-correction.frag\nvar gamma_correction_default = \"uniform float gamma;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=LinearToGamma(max(inputColor,0.0),gamma);}\";\n\n// src/effects/GammaCorrectionEffect.js\nvar GammaCorrectionEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.SRC, gamma = 2 } = {}) {\n    super(\"GammaCorrectionEffect\", gamma_correction_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"gamma\", new Uniform31(gamma)]\n      ])\n    });\n  }\n};\n\n// src/effects/GlitchEffect.js\nimport { NearestFilter as NearestFilter6, RepeatWrapping, RGBAFormat as RGBAFormat3, Uniform as Uniform32, Vector2 as Vector220 } from \"three\";\n\n// src/textures/NoiseTexture.js\nimport {\n  DataTexture,\n  LuminanceFormat,\n  RedFormat,\n  RGFormat,\n  RGBAFormat as RGBAFormat2,\n  UnsignedByteType as UnsignedByteType14\n} from \"three\";\nfunction getNoise(size, format, type) {\n  const channels = /* @__PURE__ */ new Map([\n    [LuminanceFormat, 1],\n    [RedFormat, 1],\n    [RGFormat, 2],\n    [RGBAFormat2, 4]\n  ]);\n  let data;\n  if (!channels.has(format)) {\n    console.error(\"Invalid noise texture format\");\n  }\n  if (type === UnsignedByteType14) {\n    data = new Uint8Array(size * channels.get(format));\n    for (let i = 0, l = data.length; i < l; ++i) {\n      data[i] = Math.random() * 255 + 0.5;\n    }\n  } else {\n    data = new Float32Array(size * channels.get(format));\n    for (let i = 0, l = data.length; i < l; ++i) {\n      data[i] = Math.random();\n    }\n  }\n  return data;\n}\nvar NoiseTexture = class extends DataTexture {\n  constructor(width, height, format = LuminanceFormat, type = UnsignedByteType14) {\n    super(getNoise(width * height, format, type), width, height, format, type);\n    this.needsUpdate = true;\n  }\n};\n\n// src/effects/glsl/glitch.frag\nvar glitch_default = \"uniform lowp sampler2D perturbationMap;uniform bool active;uniform float columns;uniform float random;uniform vec2 seeds;uniform vec2 distortion;void mainUv(inout vec2 uv){if(active){if(uv.y<distortion.x+columns&&uv.y>distortion.x-columns*random){float sx=clamp(ceil(seeds.x),0.0,1.0);uv.y=sx*(1.0-(uv.y+distortion.y))+(1.0-sx)*distortion.y;}if(uv.x<distortion.y+columns&&uv.x>distortion.y-columns*random){float sy=clamp(ceil(seeds.y),0.0,1.0);uv.x=sy*distortion.x+(1.0-sy)*(1.0-(uv.x+distortion.x));}vec2 normal=texture2D(perturbationMap,uv*random*random).rg;uv+=normal*seeds*(random*0.2);}}\";\n\n// src/effects/GlitchEffect.js\nvar textureTag = \"Glitch.Generated\";\nfunction randomFloat(low, high) {\n  return low + Math.random() * (high - low);\n}\nvar GlitchEffect = class extends Effect {\n  constructor({\n    chromaticAberrationOffset = null,\n    delay = new Vector220(1.5, 3.5),\n    duration = new Vector220(0.6, 1),\n    strength = new Vector220(0.3, 1),\n    columns = 0.05,\n    ratio = 0.85,\n    perturbationMap = null,\n    dtSize = 64\n  } = {}) {\n    super(\"GlitchEffect\", glitch_default, {\n      uniforms: /* @__PURE__ */ new Map([\n        [\"perturbationMap\", new Uniform32(null)],\n        [\"columns\", new Uniform32(columns)],\n        [\"active\", new Uniform32(false)],\n        [\"random\", new Uniform32(1)],\n        [\"seeds\", new Uniform32(new Vector220())],\n        [\"distortion\", new Uniform32(new Vector220())]\n      ])\n    });\n    if (perturbationMap === null) {\n      const map = new NoiseTexture(dtSize, dtSize, RGBAFormat3);\n      map.name = textureTag;\n      this.perturbationMap = map;\n    } else {\n      this.perturbationMap = perturbationMap;\n    }\n    this.time = 0;\n    this.distortion = this.uniforms.get(\"distortion\").value;\n    this.delay = delay;\n    this.duration = duration;\n    this.breakPoint = new Vector220(\n      randomFloat(this.delay.x, this.delay.y),\n      randomFloat(this.duration.x, this.duration.y)\n    );\n    this.strength = strength;\n    this.mode = GlitchMode.SPORADIC;\n    this.ratio = ratio;\n    this.chromaticAberrationOffset = chromaticAberrationOffset;\n  }\n  get seeds() {\n    return this.uniforms.get(\"seeds\").value;\n  }\n  get active() {\n    return this.uniforms.get(\"active\").value;\n  }\n  isActive() {\n    return this.active;\n  }\n  get minDelay() {\n    return this.delay.x;\n  }\n  set minDelay(value) {\n    this.delay.x = value;\n  }\n  getMinDelay() {\n    return this.delay.x;\n  }\n  setMinDelay(value) {\n    this.delay.x = value;\n  }\n  get maxDelay() {\n    return this.delay.y;\n  }\n  set maxDelay(value) {\n    this.delay.y = value;\n  }\n  getMaxDelay() {\n    return this.delay.y;\n  }\n  setMaxDelay(value) {\n    this.delay.y = value;\n  }\n  get minDuration() {\n    return this.duration.x;\n  }\n  set minDuration(value) {\n    this.duration.x = value;\n  }\n  getMinDuration() {\n    return this.duration.x;\n  }\n  setMinDuration(value) {\n    this.duration.x = value;\n  }\n  get maxDuration() {\n    return this.duration.y;\n  }\n  set maxDuration(value) {\n    this.duration.y = value;\n  }\n  getMaxDuration() {\n    return this.duration.y;\n  }\n  setMaxDuration(value) {\n    this.duration.y = value;\n  }\n  get minStrength() {\n    return this.strength.x;\n  }\n  set minStrength(value) {\n    this.strength.x = value;\n  }\n  getMinStrength() {\n    return this.strength.x;\n  }\n  setMinStrength(value) {\n    this.strength.x = value;\n  }\n  get maxStrength() {\n    return this.strength.y;\n  }\n  set maxStrength(value) {\n    this.strength.y = value;\n  }\n  getMaxStrength() {\n    return this.strength.y;\n  }\n  setMaxStrength(value) {\n    this.strength.y = value;\n  }\n  getMode() {\n    return this.mode;\n  }\n  setMode(value) {\n    this.mode = value;\n  }\n  getGlitchRatio() {\n    return 1 - this.ratio;\n  }\n  setGlitchRatio(value) {\n    this.ratio = Math.min(Math.max(1 - value, 0), 1);\n  }\n  get columns() {\n    return this.uniforms.get(\"columns\").value;\n  }\n  set columns(value) {\n    this.uniforms.get(\"columns\").value = value;\n  }\n  getGlitchColumns() {\n    return this.columns;\n  }\n  setGlitchColumns(value) {\n    this.columns = value;\n  }\n  getChromaticAberrationOffset() {\n    return this.chromaticAberrationOffset;\n  }\n  setChromaticAberrationOffset(value) {\n    this.chromaticAberrationOffset = value;\n  }\n  get perturbationMap() {\n    return this.uniforms.get(\"perturbationMap\").value;\n  }\n  set perturbationMap(value) {\n    const currentMap = this.perturbationMap;\n    if (currentMap !== null && currentMap.name === textureTag) {\n      currentMap.dispose();\n    }\n    value.minFilter = value.magFilter = NearestFilter6;\n    value.wrapS = value.wrapT = RepeatWrapping;\n    value.generateMipmaps = false;\n    this.uniforms.get(\"perturbationMap\").value = value;\n  }\n  getPerturbationMap() {\n    return this.perturbationMap;\n  }\n  setPerturbationMap(value) {\n    this.perturbationMap = value;\n  }\n  generatePerturbationMap(value = 64) {\n    const map = new NoiseTexture(value, value, RGBAFormat3);\n    map.name = textureTag;\n    return map;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    const mode = this.mode;\n    const breakPoint = this.breakPoint;\n    const offset = this.chromaticAberrationOffset;\n    const s = this.strength;\n    let time = this.time;\n    let active = false;\n    let r = 0, a = 0;\n    let trigger;\n    if (mode !== GlitchMode.DISABLED) {\n      if (mode === GlitchMode.SPORADIC) {\n        time += deltaTime;\n        trigger = time > breakPoint.x;\n        if (time >= breakPoint.x + breakPoint.y) {\n          breakPoint.set(\n            randomFloat(this.delay.x, this.delay.y),\n            randomFloat(this.duration.x, this.duration.y)\n          );\n          time = 0;\n        }\n      }\n      r = Math.random();\n      this.uniforms.get(\"random\").value = r;\n      if (trigger && r > this.ratio || mode === GlitchMode.CONSTANT_WILD) {\n        active = true;\n        r *= s.y * 0.03;\n        a = randomFloat(-Math.PI, Math.PI);\n        this.seeds.set(randomFloat(-s.y, s.y), randomFloat(-s.y, s.y));\n        this.distortion.set(randomFloat(0, 1), randomFloat(0, 1));\n      } else if (trigger || mode === GlitchMode.CONSTANT_MILD) {\n        active = true;\n        r *= s.x * 0.03;\n        a = randomFloat(-Math.PI, Math.PI);\n        this.seeds.set(randomFloat(-s.x, s.x), randomFloat(-s.x, s.x));\n        this.distortion.set(randomFloat(0, 1), randomFloat(0, 1));\n      }\n      this.time = time;\n    }\n    if (offset !== null) {\n      if (active) {\n        offset.set(Math.cos(a), Math.sin(a)).multiplyScalar(r);\n      } else {\n        offset.set(0, 0);\n      }\n    }\n    this.uniforms.get(\"active\").value = active;\n  }\n  dispose() {\n    const map = this.perturbationMap;\n    if (map !== null && map.name === textureTag) {\n      map.dispose();\n    }\n  }\n};\n\n// src/effects/GodRaysEffect.js\nimport {\n  BasicDepthPacking as BasicDepthPacking15,\n  Color as Color4,\n  DepthTexture as DepthTexture2,\n  Matrix4 as Matrix42,\n  Scene as Scene2,\n  sRGBEncoding as sRGBEncoding12,\n  Uniform as Uniform33,\n  Vector2 as Vector221,\n  Vector3,\n  WebGLRenderTarget as WebGLRenderTarget17\n} from \"three\";\n\n// src/effects/glsl/god-rays.frag\nvar god_rays_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D map;\\n#else\\nuniform lowp sampler2D map;\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv);}\";\n\n// src/effects/GodRaysEffect.js\nvar v = new Vector3();\nvar m = new Matrix42();\nvar GodRaysEffect = class extends Effect {\n  constructor(camera, lightSource, {\n    blendFunction = BlendFunction.SCREEN,\n    samples = 60,\n    density = 0.96,\n    decay = 0.9,\n    weight = 0.4,\n    exposure = 0.6,\n    clampMax = 1,\n    blur = true,\n    kernelSize = KernelSize.SMALL,\n    resolutionScale = 0.5,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"GodRaysEffect\", god_rays_default, {\n      blendFunction,\n      attributes: EffectAttribute.DEPTH,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"map\", new Uniform33(null)]\n      ])\n    });\n    this.camera = camera;\n    this.lightSource = lightSource;\n    this.lightSource.material.depthWrite = false;\n    this.lightSource.material.transparent = true;\n    this.lightScene = new Scene2();\n    this.screenPosition = new Vector221();\n    this.renderTargetA = new WebGLRenderTarget17(1, 1, { depthBuffer: false });\n    this.renderTargetA.texture.name = \"GodRays.Target.A\";\n    this.renderTargetB = this.renderTargetA.clone();\n    this.renderTargetB.texture.name = \"GodRays.Target.B\";\n    this.uniforms.get(\"map\").value = this.renderTargetB.texture;\n    this.renderTargetLight = new WebGLRenderTarget17(1, 1);\n    this.renderTargetLight.texture.name = \"GodRays.Light\";\n    this.renderTargetLight.depthTexture = new DepthTexture2();\n    this.renderPassLight = new RenderPass(this.lightScene, camera);\n    this.renderPassLight.clearPass.overrideClearColor = new Color4(0);\n    this.clearPass = new ClearPass(true, false, false);\n    this.clearPass.overrideClearColor = new Color4(0);\n    this.blurPass = new KawaseBlurPass({ kernelSize });\n    this.blurPass.enabled = blur;\n    this.depthMaskPass = new ShaderPass(new DepthMaskMaterial());\n    const depthMaskMaterial = this.depthMaskMaterial;\n    depthMaskMaterial.depthBuffer1 = this.renderTargetLight.depthTexture;\n    depthMaskMaterial.copyCameraSettings(camera);\n    this.godRaysPass = new ShaderPass(new GodRaysMaterial(this.screenPosition));\n    const godRaysMaterial = this.godRaysMaterial;\n    godRaysMaterial.density = density;\n    godRaysMaterial.decay = decay;\n    godRaysMaterial.weight = weight;\n    godRaysMaterial.exposure = exposure;\n    godRaysMaterial.maxIntensity = clampMax;\n    godRaysMaterial.samples = samples;\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n  }\n  set mainCamera(value) {\n    this.camera = value;\n    this.renderPassLight.mainCamera = value;\n    this.depthMaskMaterial.copyCameraSettings(value);\n  }\n  getBlurPass() {\n    return this.blurPass;\n  }\n  get texture() {\n    return this.renderTargetB.texture;\n  }\n  getTexture() {\n    return this.texture;\n  }\n  get depthMaskMaterial() {\n    return this.depthMaskPass.fullscreenMaterial;\n  }\n  get godRaysMaterial() {\n    return this.godRaysPass.fullscreenMaterial;\n  }\n  getGodRaysMaterial() {\n    return this.godRaysMaterial;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  get width() {\n    return this.resolution.width;\n  }\n  set width(value) {\n    this.resolution.preferredWidth = value;\n  }\n  get height() {\n    return this.resolution.height;\n  }\n  set height(value) {\n    this.resolution.preferredHeight = value;\n  }\n  get dithering() {\n    return this.godRaysMaterial.dithering;\n  }\n  set dithering(value) {\n    const material = this.godRaysMaterial;\n    material.dithering = value;\n    material.needsUpdate = true;\n  }\n  get blur() {\n    return this.blurPass.enabled;\n  }\n  set blur(value) {\n    this.blurPass.enabled = value;\n  }\n  get kernelSize() {\n    return this.blurPass.kernelSize;\n  }\n  set kernelSize(value) {\n    this.blurPass.kernelSize = value;\n  }\n  getResolutionScale() {\n    return this.resolution.scale;\n  }\n  setResolutionScale(scale) {\n    this.resolution.scale = scale;\n  }\n  get samples() {\n    return this.godRaysMaterial.samples;\n  }\n  set samples(value) {\n    this.godRaysMaterial.samples = value;\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking15) {\n    this.depthMaskPass.fullscreenMaterial.depthBuffer0 = depthTexture;\n    this.depthMaskPass.fullscreenMaterial.depthPacking0 = depthPacking;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    const lightSource = this.lightSource;\n    const parent = lightSource.parent;\n    const matrixAutoUpdate = lightSource.matrixAutoUpdate;\n    const renderTargetA = this.renderTargetA;\n    const renderTargetLight = this.renderTargetLight;\n    lightSource.material.depthWrite = true;\n    lightSource.matrixAutoUpdate = false;\n    lightSource.updateWorldMatrix(true, false);\n    if (parent !== null) {\n      if (!matrixAutoUpdate) {\n        m.copy(lightSource.matrix);\n      }\n      lightSource.matrix.copy(lightSource.matrixWorld);\n    }\n    this.lightScene.add(lightSource);\n    this.renderPassLight.render(renderer, renderTargetLight);\n    this.clearPass.render(renderer, renderTargetA);\n    this.depthMaskPass.render(renderer, renderTargetLight, renderTargetA);\n    lightSource.material.depthWrite = false;\n    lightSource.matrixAutoUpdate = matrixAutoUpdate;\n    if (parent !== null) {\n      if (!matrixAutoUpdate) {\n        lightSource.matrix.copy(m);\n      }\n      parent.add(lightSource);\n    }\n    v.setFromMatrixPosition(lightSource.matrixWorld).project(this.camera);\n    this.screenPosition.set(\n      Math.min(Math.max((v.x + 1) * 0.5, -1), 2),\n      Math.min(Math.max((v.y + 1) * 0.5, -1), 2)\n    );\n    if (this.blurPass.enabled) {\n      this.blurPass.render(renderer, renderTargetA, renderTargetA);\n    }\n    this.godRaysPass.render(renderer, renderTargetA, this.renderTargetB);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    const w = resolution.width, h = resolution.height;\n    this.renderTargetA.setSize(w, h);\n    this.renderTargetB.setSize(w, h);\n    this.renderTargetLight.setSize(w, h);\n    this.blurPass.resolution.copy(resolution);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    this.blurPass.initialize(renderer, alpha, frameBufferType);\n    this.renderPassLight.initialize(renderer, alpha, frameBufferType);\n    this.depthMaskPass.initialize(renderer, alpha, frameBufferType);\n    this.godRaysPass.initialize(renderer, alpha, frameBufferType);\n    if (frameBufferType !== void 0) {\n      this.renderTargetA.texture.type = frameBufferType;\n      this.renderTargetB.texture.type = frameBufferType;\n      this.renderTargetLight.texture.type = frameBufferType;\n      if (renderer.outputEncoding === sRGBEncoding12) {\n        this.renderTargetA.texture.encoding = sRGBEncoding12;\n        this.renderTargetB.texture.encoding = sRGBEncoding12;\n        this.renderTargetLight.texture.encoding = sRGBEncoding12;\n      }\n    }\n  }\n};\n\n// src/effects/GridEffect.js\nimport { Uniform as Uniform34, Vector2 as Vector222 } from \"three\";\n\n// src/effects/glsl/grid.frag\nvar grid_default = \"uniform vec2 scale;uniform float lineWidth;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float grid=0.5-max(abs(mod(uv.x*scale.x,1.0)-0.5),abs(mod(uv.y*scale.y,1.0)-0.5));outputColor=vec4(vec3(smoothstep(0.0,lineWidth,grid)),inputColor.a);}\";\n\n// src/effects/GridEffect.js\nvar GridEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.OVERLAY, scale = 1, lineWidth = 0 } = {}) {\n    super(\"GridEffect\", grid_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"scale\", new Uniform34(new Vector222())],\n        [\"lineWidth\", new Uniform34(lineWidth)]\n      ])\n    });\n    this.resolution = new Vector222();\n    this.s = 0;\n    this.scale = scale;\n    this.l = 0;\n    this.lineWidth = lineWidth;\n  }\n  get scale() {\n    return this.s;\n  }\n  set scale(value) {\n    this.s = Math.max(value, 1e-6);\n    this.setSize(this.resolution.width, this.resolution.height);\n  }\n  getScale() {\n    return this.scale;\n  }\n  setScale(value) {\n    this.scale = value;\n  }\n  get lineWidth() {\n    return this.l;\n  }\n  set lineWidth(value) {\n    this.l = value;\n    this.setSize(this.resolution.width, this.resolution.height);\n  }\n  getLineWidth() {\n    return this.lineWidth;\n  }\n  setLineWidth(value) {\n    this.lineWidth = value;\n  }\n  setSize(width, height) {\n    this.resolution.set(width, height);\n    const aspect = width / height;\n    const scale = this.scale * (height * 0.125);\n    this.uniforms.get(\"scale\").value.set(aspect * scale, scale);\n    this.uniforms.get(\"lineWidth\").value = scale / height + this.lineWidth;\n  }\n};\n\n// src/effects/HueSaturationEffect.js\nimport { Uniform as Uniform35, Vector3 as Vector32 } from \"three\";\n\n// src/effects/glsl/hue-saturation.frag\nvar hue_saturation_default = \"uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}\";\n\n// src/effects/HueSaturationEffect.js\nvar HueSaturationEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.SRC, hue = 0, saturation = 0 } = {}) {\n    super(\"HueSaturationEffect\", hue_saturation_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"hue\", new Uniform35(new Vector32())],\n        [\"saturation\", new Uniform35(saturation)]\n      ])\n    });\n    this.hue = hue;\n  }\n  get saturation() {\n    return this.uniforms.get(\"saturation\").value;\n  }\n  set saturation(value) {\n    this.uniforms.get(\"saturation\").value = value;\n  }\n  getSaturation() {\n    return this.saturation;\n  }\n  setSaturation(value) {\n    this.saturation = value;\n  }\n  get hue() {\n    const hue = this.uniforms.get(\"hue\").value;\n    return Math.acos((hue.x * 3 - 1) / 2);\n  }\n  set hue(value) {\n    const s = Math.sin(value), c2 = Math.cos(value);\n    this.uniforms.get(\"hue\").value.set(\n      (2 * c2 + 1) / 3,\n      (-Math.sqrt(3) * s - c2 + 1) / 3,\n      (Math.sqrt(3) * s - c2 + 1) / 3\n    );\n  }\n  getHue() {\n    return this.hue;\n  }\n  setHue(value) {\n    this.hue = value;\n  }\n};\n\n// src/effects/LUT1DEffect.js\nimport { FloatType as FloatType4, HalfFloatType, Uniform as Uniform36 } from \"three\";\n\n// src/effects/glsl/lut-1d.frag\nvar lut_1d_default = \"#ifdef LUT_PRECISION_HIGH\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D lut;\\n#else\\nuniform mediump sampler2D lut;\\n#endif\\n#else\\nuniform lowp sampler2D lut;\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(texture2D(lut,vec2(inputColor.r,0.5)).r,texture2D(lut,vec2(inputColor.g,0.5)).r,texture2D(lut,vec2(inputColor.b,0.5)).r,inputColor.a);}\";\n\n// src/effects/LUT1DEffect.js\nvar LUT1DEffect = class extends Effect {\n  constructor(lut, { blendFunction = BlendFunction.SRC } = {}) {\n    super(\"LUT1DEffect\", lut_1d_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([[\"lut\", new Uniform36(null)]])\n    });\n    this.lut = lut;\n  }\n  get lut() {\n    return this.uniforms.get(\"lut\").value;\n  }\n  set lut(value) {\n    this.uniforms.get(\"lut\").value = value;\n    if (value !== null && (value.type === FloatType4 || value.type === HalfFloatType)) {\n      this.defines.set(\"LUT_PRECISION_HIGH\", \"1\");\n    }\n  }\n};\n\n// src/effects/LUT3DEffect.js\nimport {\n  DataTexture3D as DataTexture3D2,\n  FloatType as FloatType6,\n  HalfFloatType as HalfFloatType2,\n  LinearFilter as LinearFilter4,\n  NearestFilter as NearestFilter7,\n  sRGBEncoding as sRGBEncoding14,\n  Uniform as Uniform37,\n  Vector3 as Vector34\n} from \"three\";\n\n// src/textures/lut/LookupTexture.js\nimport {\n  Color as Color5,\n  ClampToEdgeWrapping,\n  DataTexture as DataTexture2,\n  DataTexture3D,\n  FloatType as FloatType5,\n  LinearFilter as LinearFilter3,\n  LinearEncoding as LinearEncoding4,\n  RGBAFormat as RGBAFormat4,\n  sRGBEncoding as sRGBEncoding13,\n  UnsignedByteType as UnsignedByteType15,\n  Vector3 as Vector33\n} from \"three\";\n\n// src/textures/RawImageData.js\nfunction createCanvas(width, height, data) {\n  const canvas = document.createElement(\"canvas\");\n  const context = canvas.getContext(\"2d\");\n  canvas.width = width;\n  canvas.height = height;\n  if (data instanceof Image) {\n    context.drawImage(data, 0, 0);\n  } else {\n    const imageData = context.createImageData(width, height);\n    imageData.data.set(data);\n    context.putImageData(imageData, 0, 0);\n  }\n  return canvas;\n}\nvar RawImageData = class {\n  constructor(width = 0, height = 0, data = null) {\n    this.width = width;\n    this.height = height;\n    this.data = data;\n  }\n  toCanvas() {\n    return typeof document === \"undefined\" ? null : createCanvas(this.width, this.height, this.data);\n  }\n  static from(image) {\n    const { width, height } = image;\n    let data;\n    if (image instanceof Image) {\n      const canvas = createCanvas(width, height, image);\n      if (canvas !== null) {\n        const context = canvas.getContext(\"2d\");\n        data = context.getImageData(0, 0, width, height).data;\n      }\n    } else {\n      data = image.data;\n    }\n    return new RawImageData(width, height, data);\n  }\n};\n\n// tmp/lut/worker.txt\nvar worker_default = '\"use strict\";(()=>{var O=Math.pow;var _={SCALE_UP:\"lut.scaleup\"};var k=[new Float32Array(3),new Float32Array(3)],n=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],Z=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]];function d(a,t,r,m){let i=r[0]-t[0],e=r[1]-t[1],y=r[2]-t[2],h=a[0]-t[0],A=a[1]-t[1],w=a[2]-t[2],c=e*w-y*A,l=y*h-i*w,x=i*A-e*h,u=Math.sqrt(c*c+l*l+x*x),b=u*.5,s=c/u,F=l/u,f=x/u,p=-(a[0]*s+a[1]*F+a[2]*f),M=m[0]*s+m[1]*F+m[2]*f;return Math.abs(M+p)*b/3}function V(a,t,r,m,i,e){let y=(r+m*t+i*t*t)*4;e[0]=a[y+0],e[1]=a[y+1],e[2]=a[y+2]}function j(a,t,r,m,i,e){let y=r*(t-1),h=m*(t-1),A=i*(t-1),w=Math.floor(y),c=Math.floor(h),l=Math.floor(A),x=Math.ceil(y),u=Math.ceil(h),b=Math.ceil(A),s=y-w,F=h-c,f=A-l;if(w===y&&c===h&&l===A)V(a,t,y,h,A,e);else{let p;s>=F&&F>=f?p=Z[0]:s>=f&&f>=F?p=Z[1]:f>=s&&s>=F?p=Z[2]:F>=s&&s>=f?p=Z[3]:F>=f&&f>=s?p=Z[4]:f>=F&&F>=s&&(p=Z[5]);let[M,g,X,Y]=p,P=k[0];P[0]=s,P[1]=F,P[2]=f;let o=k[1],L=x-w,S=u-c,U=b-l;o[0]=L*M[0]+w,o[1]=S*M[1]+c,o[2]=U*M[2]+l,V(a,t,o[0],o[1],o[2],n[0]),o[0]=L*g[0]+w,o[1]=S*g[1]+c,o[2]=U*g[2]+l,V(a,t,o[0],o[1],o[2],n[1]),o[0]=L*X[0]+w,o[1]=S*X[1]+c,o[2]=U*X[2]+l,V(a,t,o[0],o[1],o[2],n[2]),o[0]=L*Y[0]+w,o[1]=S*Y[1]+c,o[2]=U*Y[2]+l,V(a,t,o[0],o[1],o[2],n[3]);let T=d(g,X,Y,P)*6,q=d(M,X,Y,P)*6,C=d(M,g,Y,P)*6,E=d(M,g,X,P)*6;n[0][0]*=T,n[0][1]*=T,n[0][2]*=T,n[1][0]*=q,n[1][1]*=q,n[1][2]*=q,n[2][0]*=C,n[2][1]*=C,n[2][2]*=C,n[3][0]*=E,n[3][1]*=E,n[3][2]*=E,e[0]=n[0][0]+n[1][0]+n[2][0]+n[3][0],e[1]=n[0][1]+n[1][1]+n[2][1]+n[3][1],e[2]=n[0][2]+n[1][2]+n[2][2]+n[3][2]}}var v=class{static expand(t,r){let m=Math.cbrt(t.length/4),i=new Float32Array(3),e=new t.constructor(O(r,3)*4),y=t instanceof Uint8Array?255:1,h=O(r,2),A=1/(r-1);for(let w=0;w<r;++w)for(let c=0;c<r;++c)for(let l=0;l<r;++l){let x=l*A,u=c*A,b=w*A,s=Math.round(l+c*r+w*h)*4;j(t,m,x,u,b,i),e[s+0]=i[0],e[s+1]=i[1],e[s+2]=i[2],e[s+3]=y}return e}};self.addEventListener(\"message\",a=>{let t=a.data,r=t.data;switch(t.operation){case _.SCALE_UP:r=v.expand(r,t.size);break}postMessage(r,[r.buffer]),close()});})();\\n';\n\n// src/textures/lut/LookupTexture.js\nvar c = new Color5();\nvar LookupTexture = class extends DataTexture3D {\n  constructor(data, size) {\n    super(data, size, size, size);\n    this.type = FloatType5;\n    this.format = RGBAFormat4;\n    this.encoding = LinearEncoding4;\n    this.minFilter = LinearFilter3;\n    this.magFilter = LinearFilter3;\n    this.wrapS = ClampToEdgeWrapping;\n    this.wrapT = ClampToEdgeWrapping;\n    this.wrapR = ClampToEdgeWrapping;\n    this.unpackAlignment = 1;\n    this.needsUpdate = true;\n    this.domainMin = new Vector33(0, 0, 0);\n    this.domainMax = new Vector33(1, 1, 1);\n  }\n  get isLookupTexture3D() {\n    return true;\n  }\n  scaleUp(size, transferData = true) {\n    const image = this.image;\n    let promise;\n    if (size <= image.width) {\n      promise = Promise.reject(new Error(\"The target size must be greater than the current size\"));\n    } else {\n      promise = new Promise((resolve, reject) => {\n        const workerURL = URL.createObjectURL(new Blob([worker_default], {\n          type: \"text/javascript\"\n        }));\n        const worker = new Worker(workerURL);\n        worker.addEventListener(\"error\", (event) => reject(event.error));\n        worker.addEventListener(\"message\", (event) => {\n          const lut = new LookupTexture(event.data, size);\n          lut.encoding = this.encoding;\n          lut.type = this.type;\n          lut.name = this.name;\n          URL.revokeObjectURL(workerURL);\n          resolve(lut);\n        });\n        const transferList = transferData ? [image.data.buffer] : [];\n        worker.postMessage({\n          operation: LUTOperation.SCALE_UP,\n          data: image.data,\n          size\n        }, transferList);\n      });\n    }\n    return promise;\n  }\n  applyLUT(lut) {\n    const img0 = this.image;\n    const img1 = lut.image;\n    const size0 = Math.min(img0.width, img0.height, img0.depth);\n    const size1 = Math.min(img1.width, img1.height, img1.depth);\n    if (size0 !== size1) {\n      console.error(\"Size mismatch\");\n    } else if (lut.type !== FloatType5 || this.type !== FloatType5) {\n      console.error(\"Both LUTs must be FloatType textures\");\n    } else if (lut.format !== RGBAFormat4 || this.format !== RGBAFormat4) {\n      console.error(\"Both LUTs must be RGBA textures\");\n    } else {\n      const data0 = img0.data;\n      const data1 = img1.data;\n      const size = size0;\n      const sizeSq = size ** 2;\n      const s = size - 1;\n      for (let i = 0, l = size ** 3; i < l; ++i) {\n        const i4 = i * 4;\n        const r = data0[i4 + 0] * s;\n        const g = data0[i4 + 1] * s;\n        const b = data0[i4 + 2] * s;\n        const iRGB = Math.round(r + g * size + b * sizeSq) * 4;\n        data0[i4 + 0] = data1[iRGB + 0];\n        data0[i4 + 1] = data1[iRGB + 1];\n        data0[i4 + 2] = data1[iRGB + 2];\n      }\n      this.needsUpdate = true;\n    }\n    return this;\n  }\n  convertToUint8() {\n    if (this.type === FloatType5) {\n      const floatData = this.image.data;\n      const uint8Data = new Uint8Array(floatData.length);\n      for (let i = 0, l = floatData.length; i < l; ++i) {\n        uint8Data[i] = floatData[i] * 255 + 0.5;\n      }\n      this.image.data = uint8Data;\n      this.type = UnsignedByteType15;\n      this.needsUpdate = true;\n    }\n    return this;\n  }\n  convertToFloat() {\n    if (this.type === UnsignedByteType15) {\n      const uint8Data = this.image.data;\n      const floatData = new Float32Array(uint8Data.length);\n      for (let i = 0, l = uint8Data.length; i < l; ++i) {\n        floatData[i] = uint8Data[i] / 255;\n      }\n      this.image.data = floatData;\n      this.type = FloatType5;\n      this.needsUpdate = true;\n    }\n    return this;\n  }\n  convertToRGBA() {\n    console.warn(\"LookupTexture\", \"convertToRGBA() is deprecated, LUTs are now RGBA by default\");\n    return this;\n  }\n  convertLinearToSRGB() {\n    const data = this.image.data;\n    if (this.type === FloatType5) {\n      for (let i = 0, l = data.length; i < l; i += 4) {\n        c.fromArray(data, i).convertLinearToSRGB().toArray(data, i);\n      }\n      this.encoding = sRGBEncoding13;\n      this.needsUpdate = true;\n    } else {\n      console.error(\"Color space conversion requires FloatType data\");\n    }\n    return this;\n  }\n  convertSRGBToLinear() {\n    const data = this.image.data;\n    if (this.type === FloatType5) {\n      for (let i = 0, l = data.length; i < l; i += 4) {\n        c.fromArray(data, i).convertSRGBToLinear().toArray(data, i);\n      }\n      this.encoding = LinearEncoding4;\n      this.needsUpdate = true;\n    } else {\n      console.error(\"Color space conversion requires FloatType data\");\n    }\n    return this;\n  }\n  toDataTexture() {\n    const width = this.image.width;\n    const height = this.image.height * this.image.depth;\n    const texture = new DataTexture2(this.image.data, width, height);\n    texture.name = this.name;\n    texture.type = this.type;\n    texture.format = this.format;\n    texture.encoding = this.encoding;\n    texture.minFilter = LinearFilter3;\n    texture.magFilter = LinearFilter3;\n    texture.wrapS = this.wrapS;\n    texture.wrapT = this.wrapT;\n    texture.generateMipmaps = false;\n    texture.needsUpdate = true;\n    return texture;\n  }\n  static from(texture) {\n    const image = texture.image;\n    const { width, height } = image;\n    const size = Math.min(width, height);\n    let data;\n    if (image instanceof Image) {\n      const rawImageData = RawImageData.from(image);\n      const src = rawImageData.data;\n      if (width > height) {\n        data = new Uint8Array(src.length);\n        for (let z = 0; z < size; ++z) {\n          for (let y = 0; y < size; ++y) {\n            for (let x = 0; x < size; ++x) {\n              const i4 = (x + z * size + y * size * size) * 4;\n              const j4 = (x + y * size + z * size * size) * 4;\n              data[j4 + 0] = src[i4 + 0];\n              data[j4 + 1] = src[i4 + 1];\n              data[j4 + 2] = src[i4 + 2];\n              data[j4 + 3] = src[i4 + 3];\n            }\n          }\n        }\n      } else {\n        data = new Uint8Array(src.buffer);\n      }\n    } else {\n      data = image.data.slice();\n    }\n    const lut = new LookupTexture(data, size);\n    lut.encoding = texture.encoding;\n    lut.type = texture.type;\n    lut.name = texture.name;\n    return lut;\n  }\n  static createNeutral(size) {\n    const data = new Float32Array(size ** 3 * 4);\n    const sizeSq = size ** 2;\n    const s = 1 / (size - 1);\n    for (let r = 0; r < size; ++r) {\n      for (let g = 0; g < size; ++g) {\n        for (let b = 0; b < size; ++b) {\n          const i4 = (r + g * size + b * sizeSq) * 4;\n          data[i4 + 0] = r * s;\n          data[i4 + 1] = g * s;\n          data[i4 + 2] = b * s;\n          data[i4 + 3] = 1;\n        }\n      }\n    }\n    const lut = new LookupTexture(data, size);\n    lut.name = \"neutral\";\n    return lut;\n  }\n};\n\n// src/textures/lut/TetrahedralUpscaler.js\nvar P = [\n  new Float32Array(3),\n  new Float32Array(3)\n];\nvar C = [\n  new Float32Array(3),\n  new Float32Array(3),\n  new Float32Array(3),\n  new Float32Array(3)\n];\nvar T = [\n  [\n    new Float32Array([0, 0, 0]),\n    new Float32Array([1, 0, 0]),\n    new Float32Array([1, 1, 0]),\n    new Float32Array([1, 1, 1])\n  ],\n  [\n    new Float32Array([0, 0, 0]),\n    new Float32Array([1, 0, 0]),\n    new Float32Array([1, 0, 1]),\n    new Float32Array([1, 1, 1])\n  ],\n  [\n    new Float32Array([0, 0, 0]),\n    new Float32Array([0, 0, 1]),\n    new Float32Array([1, 0, 1]),\n    new Float32Array([1, 1, 1])\n  ],\n  [\n    new Float32Array([0, 0, 0]),\n    new Float32Array([0, 1, 0]),\n    new Float32Array([1, 1, 0]),\n    new Float32Array([1, 1, 1])\n  ],\n  [\n    new Float32Array([0, 0, 0]),\n    new Float32Array([0, 1, 0]),\n    new Float32Array([0, 1, 1]),\n    new Float32Array([1, 1, 1])\n  ],\n  [\n    new Float32Array([0, 0, 0]),\n    new Float32Array([0, 0, 1]),\n    new Float32Array([0, 1, 1]),\n    new Float32Array([1, 1, 1])\n  ]\n];\nfunction calculateTetrahedronVolume(a, b, c2, d) {\n  const bcX = c2[0] - b[0];\n  const bcY = c2[1] - b[1];\n  const bcZ = c2[2] - b[2];\n  const baX = a[0] - b[0];\n  const baY = a[1] - b[1];\n  const baZ = a[2] - b[2];\n  const crossX = bcY * baZ - bcZ * baY;\n  const crossY = bcZ * baX - bcX * baZ;\n  const crossZ = bcX * baY - bcY * baX;\n  const length = Math.sqrt(crossX * crossX + crossY * crossY + crossZ * crossZ);\n  const triangleArea = length * 0.5;\n  const normalX = crossX / length;\n  const normalY = crossY / length;\n  const normalZ = crossZ / length;\n  const constant = -(a[0] * normalX + a[1] * normalY + a[2] * normalZ);\n  const dot = d[0] * normalX + d[1] * normalY + d[2] * normalZ;\n  const height = Math.abs(dot + constant);\n  return height * triangleArea / 3;\n}\nfunction sample(data, size, x, y, z, color2) {\n  const i4 = (x + y * size + z * size * size) * 4;\n  color2[0] = data[i4 + 0];\n  color2[1] = data[i4 + 1];\n  color2[2] = data[i4 + 2];\n}\nfunction tetrahedralSample(data, size, u, v3, w, color2) {\n  const px = u * (size - 1);\n  const py = v3 * (size - 1);\n  const pz = w * (size - 1);\n  const minX = Math.floor(px);\n  const minY = Math.floor(py);\n  const minZ = Math.floor(pz);\n  const maxX = Math.ceil(px);\n  const maxY = Math.ceil(py);\n  const maxZ = Math.ceil(pz);\n  const su = px - minX;\n  const sv = py - minY;\n  const sw = pz - minZ;\n  if (minX === px && minY === py && minZ === pz) {\n    sample(data, size, px, py, pz, color2);\n  } else {\n    let vertices;\n    if (su >= sv && sv >= sw) {\n      vertices = T[0];\n    } else if (su >= sw && sw >= sv) {\n      vertices = T[1];\n    } else if (sw >= su && su >= sv) {\n      vertices = T[2];\n    } else if (sv >= su && su >= sw) {\n      vertices = T[3];\n    } else if (sv >= sw && sw >= su) {\n      vertices = T[4];\n    } else if (sw >= sv && sv >= su) {\n      vertices = T[5];\n    }\n    const [P0, P1, P2, P3] = vertices;\n    const coords = P[0];\n    coords[0] = su;\n    coords[1] = sv;\n    coords[2] = sw;\n    const tmp = P[1];\n    const diffX = maxX - minX;\n    const diffY = maxY - minY;\n    const diffZ = maxZ - minZ;\n    tmp[0] = diffX * P0[0] + minX;\n    tmp[1] = diffY * P0[1] + minY;\n    tmp[2] = diffZ * P0[2] + minZ;\n    sample(data, size, tmp[0], tmp[1], tmp[2], C[0]);\n    tmp[0] = diffX * P1[0] + minX;\n    tmp[1] = diffY * P1[1] + minY;\n    tmp[2] = diffZ * P1[2] + minZ;\n    sample(data, size, tmp[0], tmp[1], tmp[2], C[1]);\n    tmp[0] = diffX * P2[0] + minX;\n    tmp[1] = diffY * P2[1] + minY;\n    tmp[2] = diffZ * P2[2] + minZ;\n    sample(data, size, tmp[0], tmp[1], tmp[2], C[2]);\n    tmp[0] = diffX * P3[0] + minX;\n    tmp[1] = diffY * P3[1] + minY;\n    tmp[2] = diffZ * P3[2] + minZ;\n    sample(data, size, tmp[0], tmp[1], tmp[2], C[3]);\n    const V0 = calculateTetrahedronVolume(P1, P2, P3, coords) * 6;\n    const V1 = calculateTetrahedronVolume(P0, P2, P3, coords) * 6;\n    const V2 = calculateTetrahedronVolume(P0, P1, P3, coords) * 6;\n    const V3 = calculateTetrahedronVolume(P0, P1, P2, coords) * 6;\n    C[0][0] *= V0;\n    C[0][1] *= V0;\n    C[0][2] *= V0;\n    C[1][0] *= V1;\n    C[1][1] *= V1;\n    C[1][2] *= V1;\n    C[2][0] *= V2;\n    C[2][1] *= V2;\n    C[2][2] *= V2;\n    C[3][0] *= V3;\n    C[3][1] *= V3;\n    C[3][2] *= V3;\n    color2[0] = C[0][0] + C[1][0] + C[2][0] + C[3][0];\n    color2[1] = C[0][1] + C[1][1] + C[2][1] + C[3][1];\n    color2[2] = C[0][2] + C[1][2] + C[2][2] + C[3][2];\n  }\n}\nvar TetrahedralUpscaler = class {\n  static expand(data, size) {\n    const originalSize = Math.cbrt(data.length / 4);\n    const rgb = new Float32Array(3);\n    const array = new data.constructor(size ** 3 * 4);\n    const maxValue = data instanceof Uint8Array ? 255 : 1;\n    const sizeSq = size ** 2;\n    const s = 1 / (size - 1);\n    for (let z = 0; z < size; ++z) {\n      for (let y = 0; y < size; ++y) {\n        for (let x = 0; x < size; ++x) {\n          const u = x * s;\n          const v3 = y * s;\n          const w = z * s;\n          const i4 = Math.round(x + y * size + z * sizeSq) * 4;\n          tetrahedralSample(data, originalSize, u, v3, w, rgb);\n          array[i4 + 0] = rgb[0];\n          array[i4 + 1] = rgb[1];\n          array[i4 + 2] = rgb[2];\n          array[i4 + 3] = maxValue;\n        }\n      }\n    }\n    return array;\n  }\n};\n\n// src/textures/smaa/SMAAAreaImageData.js\nvar area = [\n  new Float32Array(2),\n  new Float32Array(2)\n];\nvar ORTHOGONAL_SIZE = 16;\nvar DIAGONAL_SIZE = 20;\nvar DIAGONAL_SAMPLES = 30;\nvar SMOOTH_MAX_DISTANCE = 32;\nvar orthogonalSubsamplingOffsets = new Float32Array([\n  0,\n  -0.25,\n  0.25,\n  -0.125,\n  0.125,\n  -0.375,\n  0.375\n]);\nvar diagonalSubsamplingOffsets = [\n  new Float32Array([0, 0]),\n  new Float32Array([0.25, -0.25]),\n  new Float32Array([-0.25, 0.25]),\n  new Float32Array([0.125, -0.125]),\n  new Float32Array([-0.125, 0.125])\n];\nvar orthogonalEdges = [\n  new Uint8Array([0, 0]),\n  new Uint8Array([3, 0]),\n  new Uint8Array([0, 3]),\n  new Uint8Array([3, 3]),\n  new Uint8Array([1, 0]),\n  new Uint8Array([4, 0]),\n  new Uint8Array([1, 3]),\n  new Uint8Array([4, 3]),\n  new Uint8Array([0, 1]),\n  new Uint8Array([3, 1]),\n  new Uint8Array([0, 4]),\n  new Uint8Array([3, 4]),\n  new Uint8Array([1, 1]),\n  new Uint8Array([4, 1]),\n  new Uint8Array([1, 4]),\n  new Uint8Array([4, 4])\n];\nvar diagonalEdges = [\n  new Uint8Array([0, 0]),\n  new Uint8Array([1, 0]),\n  new Uint8Array([0, 2]),\n  new Uint8Array([1, 2]),\n  new Uint8Array([2, 0]),\n  new Uint8Array([3, 0]),\n  new Uint8Array([2, 2]),\n  new Uint8Array([3, 2]),\n  new Uint8Array([0, 1]),\n  new Uint8Array([1, 1]),\n  new Uint8Array([0, 3]),\n  new Uint8Array([1, 3]),\n  new Uint8Array([2, 1]),\n  new Uint8Array([3, 1]),\n  new Uint8Array([2, 3]),\n  new Uint8Array([3, 3])\n];\nfunction lerp(a, b, p) {\n  return a + (b - a) * p;\n}\nfunction saturate(a) {\n  return Math.min(Math.max(a, 0), 1);\n}\nfunction smoothArea(d) {\n  const a1 = area[0];\n  const a2 = area[1];\n  const b1X = Math.sqrt(a1[0] * 2) * 0.5;\n  const b1Y = Math.sqrt(a1[1] * 2) * 0.5;\n  const b2X = Math.sqrt(a2[0] * 2) * 0.5;\n  const b2Y = Math.sqrt(a2[1] * 2) * 0.5;\n  const p = saturate(d / SMOOTH_MAX_DISTANCE);\n  a1[0] = lerp(b1X, a1[0], p);\n  a1[1] = lerp(b1Y, a1[1], p);\n  a2[0] = lerp(b2X, a2[0], p);\n  a2[1] = lerp(b2Y, a2[1], p);\n}\nfunction getOrthArea(p1X, p1Y, p2X, p2Y, x, result) {\n  const dX = p2X - p1X;\n  const dY = p2Y - p1Y;\n  const x1 = x;\n  const x2 = x + 1;\n  const y1 = p1Y + dY * (x1 - p1X) / dX;\n  const y2 = p1Y + dY * (x2 - p1X) / dX;\n  if (x1 >= p1X && x1 < p2X || x2 > p1X && x2 <= p2X) {\n    if (Math.sign(y1) === Math.sign(y2) || Math.abs(y1) < 1e-4 || Math.abs(y2) < 1e-4) {\n      const a = (y1 + y2) / 2;\n      if (a < 0) {\n        result[0] = Math.abs(a);\n        result[1] = 0;\n      } else {\n        result[0] = 0;\n        result[1] = Math.abs(a);\n      }\n    } else {\n      const t = -p1Y * dX / dY + p1X;\n      const tInt = Math.trunc(t);\n      const a1 = t > p1X ? y1 * (t - tInt) / 2 : 0;\n      const a2 = t < p2X ? y2 * (1 - (t - tInt)) / 2 : 0;\n      const a = Math.abs(a1) > Math.abs(a2) ? a1 : -a2;\n      if (a < 0) {\n        result[0] = Math.abs(a1);\n        result[1] = Math.abs(a2);\n      } else {\n        result[0] = Math.abs(a2);\n        result[1] = Math.abs(a1);\n      }\n    }\n  } else {\n    result[0] = 0;\n    result[1] = 0;\n  }\n  return result;\n}\nfunction getOrthAreaForPattern(pattern, left, right, offset, result) {\n  const a1 = area[0];\n  const a2 = area[1];\n  const o1 = 0.5 + offset;\n  const o2 = 0.5 + offset - 1;\n  const d = left + right + 1;\n  switch (pattern) {\n    case 0: {\n      result[0] = 0;\n      result[1] = 0;\n      break;\n    }\n    case 1: {\n      if (left <= right) {\n        getOrthArea(0, o2, d / 2, 0, left, result);\n      } else {\n        result[0] = 0;\n        result[1] = 0;\n      }\n      break;\n    }\n    case 2: {\n      if (left >= right) {\n        getOrthArea(d / 2, 0, d, o2, left, result);\n      } else {\n        result[0] = 0;\n        result[1] = 0;\n      }\n      break;\n    }\n    case 3: {\n      getOrthArea(0, o2, d / 2, 0, left, a1);\n      getOrthArea(d / 2, 0, d, o2, left, a2);\n      smoothArea(d, area);\n      result[0] = a1[0] + a2[0];\n      result[1] = a1[1] + a2[1];\n      break;\n    }\n    case 4: {\n      if (left <= right) {\n        getOrthArea(0, o1, d / 2, 0, left, result);\n      } else {\n        result[0] = 0;\n        result[1] = 0;\n      }\n      break;\n    }\n    case 5: {\n      result[0] = 0;\n      result[1] = 0;\n      break;\n    }\n    case 6: {\n      if (Math.abs(offset) > 0) {\n        getOrthArea(0, o1, d, o2, left, a1);\n        getOrthArea(0, o1, d / 2, 0, left, a2);\n        getOrthArea(d / 2, 0, d, o2, left, result);\n        a2[0] = a2[0] + result[0];\n        a2[1] = a2[1] + result[1];\n        result[0] = (a1[0] + a2[0]) / 2;\n        result[1] = (a1[1] + a2[1]) / 2;\n      } else {\n        getOrthArea(0, o1, d, o2, left, result);\n      }\n      break;\n    }\n    case 7: {\n      getOrthArea(0, o1, d, o2, left, result);\n      break;\n    }\n    case 8: {\n      if (left >= right) {\n        getOrthArea(d / 2, 0, d, o1, left, result);\n      } else {\n        result[0] = 0;\n        result[1] = 0;\n      }\n      break;\n    }\n    case 9: {\n      if (Math.abs(offset) > 0) {\n        getOrthArea(0, o2, d, o1, left, a1);\n        getOrthArea(0, o2, d / 2, 0, left, a2);\n        getOrthArea(d / 2, 0, d, o1, left, result);\n        a2[0] = a2[0] + result[0];\n        a2[1] = a2[1] + result[1];\n        result[0] = (a1[0] + a2[0]) / 2;\n        result[1] = (a1[1] + a2[1]) / 2;\n      } else {\n        getOrthArea(0, o2, d, o1, left, result);\n      }\n      break;\n    }\n    case 10: {\n      result[0] = 0;\n      result[1] = 0;\n      break;\n    }\n    case 11: {\n      getOrthArea(0, o2, d, o1, left, result);\n      break;\n    }\n    case 12: {\n      getOrthArea(0, o1, d / 2, 0, left, a1);\n      getOrthArea(d / 2, 0, d, o1, left, a2);\n      smoothArea(d, area);\n      result[0] = a1[0] + a2[0];\n      result[1] = a1[1] + a2[1];\n      break;\n    }\n    case 13: {\n      getOrthArea(0, o2, d, o1, left, result);\n      break;\n    }\n    case 14: {\n      getOrthArea(0, o1, d, o2, left, result);\n      break;\n    }\n    case 15: {\n      result[0] = 0;\n      result[1] = 0;\n      break;\n    }\n  }\n  return result;\n}\nfunction isInsideArea(a1X, a1Y, a2X, a2Y, x, y) {\n  let result = a1X === a2X && a1Y === a2Y;\n  if (!result) {\n    const xm = (a1X + a2X) / 2;\n    const ym = (a1Y + a2Y) / 2;\n    const a = a2Y - a1Y;\n    const b = a1X - a2X;\n    const c2 = a * (x - xm) + b * (y - ym);\n    result = c2 > 0;\n  }\n  return result;\n}\nfunction getDiagAreaForPixel(a1X, a1Y, a2X, a2Y, pX, pY) {\n  let n = 0;\n  for (let y = 0; y < DIAGONAL_SAMPLES; ++y) {\n    for (let x = 0; x < DIAGONAL_SAMPLES; ++x) {\n      const offsetX = x / (DIAGONAL_SAMPLES - 1);\n      const offsetY = y / (DIAGONAL_SAMPLES - 1);\n      if (isInsideArea(a1X, a1Y, a2X, a2Y, pX + offsetX, pY + offsetY)) {\n        ++n;\n      }\n    }\n  }\n  return n / (DIAGONAL_SAMPLES * DIAGONAL_SAMPLES);\n}\nfunction getDiagArea(pattern, a1X, a1Y, a2X, a2Y, left, offset, result) {\n  const e = diagonalEdges[pattern];\n  const e1 = e[0];\n  const e2 = e[1];\n  if (e1 > 0) {\n    a1X += offset[0];\n    a1Y += offset[1];\n  }\n  if (e2 > 0) {\n    a2X += offset[0];\n    a2Y += offset[1];\n  }\n  result[0] = 1 - getDiagAreaForPixel(a1X, a1Y, a2X, a2Y, 1 + left, 0 + left);\n  result[1] = getDiagAreaForPixel(a1X, a1Y, a2X, a2Y, 1 + left, 1 + left);\n  return result;\n}\nfunction getDiagAreaForPattern(pattern, left, right, offset, result) {\n  const a1 = area[0];\n  const a2 = area[1];\n  const d = left + right + 1;\n  switch (pattern) {\n    case 0: {\n      getDiagArea(pattern, 1, 1, 1 + d, 1 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 1: {\n      getDiagArea(pattern, 1, 0, 0 + d, 0 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 2: {\n      getDiagArea(pattern, 0, 0, 1 + d, 0 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 3: {\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, result);\n      break;\n    }\n    case 4: {\n      getDiagArea(pattern, 1, 1, 0 + d, 0 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 1, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 5: {\n      getDiagArea(pattern, 1, 1, 0 + d, 0 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 6: {\n      getDiagArea(pattern, 1, 1, 1 + d, 0 + d, left, offset, result);\n      break;\n    }\n    case 7: {\n      getDiagArea(pattern, 1, 1, 1 + d, 0 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 8: {\n      getDiagArea(pattern, 0, 0, 1 + d, 1 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 1 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 9: {\n      getDiagArea(pattern, 1, 0, 1 + d, 1 + d, left, offset, result);\n      getDiagArea(pattern, 1, 0, 1 + d, 1 + d, left, offset, result);\n      break;\n    }\n    case 10: {\n      getDiagArea(pattern, 0, 0, 1 + d, 1 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 11: {\n      getDiagArea(pattern, 1, 0, 1 + d, 1 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 12: {\n      getDiagArea(pattern, 1, 1, 1 + d, 1 + d, left, offset, result);\n      break;\n    }\n    case 13: {\n      getDiagArea(pattern, 1, 1, 1 + d, 1 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 1 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 14: {\n      getDiagArea(pattern, 1, 1, 1 + d, 1 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 1, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 15: {\n      getDiagArea(pattern, 1, 1, 1 + d, 1 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n  }\n  return result;\n}\nfunction generatePatterns(patterns, offset, orthogonal) {\n  const result = new Float32Array(2);\n  for (let i = 0, l = patterns.length; i < l; ++i) {\n    const pattern = patterns[i];\n    const data = pattern.data;\n    const size = pattern.width;\n    for (let y = 0; y < size; ++y) {\n      for (let x = 0; x < size; ++x) {\n        if (orthogonal) {\n          getOrthAreaForPattern(i, x, y, offset, result);\n        } else {\n          getDiagAreaForPattern(i, x, y, offset, result);\n        }\n        const c2 = (y * size + x) * 2;\n        data[c2] = result[0] * 255;\n        data[c2 + 1] = result[1] * 255;\n      }\n    }\n  }\n}\nfunction assemble(baseX, baseY, patterns, edges2, size, orthogonal, target) {\n  const dstData = target.data;\n  const dstWidth = target.width;\n  for (let i = 0, l = patterns.length; i < l; ++i) {\n    const edge = edges2[i];\n    const pattern = patterns[i];\n    const srcData = pattern.data;\n    const srcWidth = pattern.width;\n    for (let y = 0; y < size; ++y) {\n      for (let x = 0; x < size; ++x) {\n        const pX = edge[0] * size + baseX + x;\n        const pY = edge[1] * size + baseY + y;\n        const c2 = (pY * dstWidth + pX) * 4;\n        const d = orthogonal ? (y * y * srcWidth + x * x) * 2 : (y * srcWidth + x) * 2;\n        dstData[c2] = srcData[d];\n        dstData[c2 + 1] = srcData[d + 1];\n        dstData[c2 + 2] = 0;\n        dstData[c2 + 3] = 255;\n      }\n    }\n  }\n}\nvar SMAAAreaImageData = class {\n  static generate() {\n    const width = 2 * 5 * ORTHOGONAL_SIZE;\n    const height = orthogonalSubsamplingOffsets.length * 5 * ORTHOGONAL_SIZE;\n    const data = new Uint8ClampedArray(width * height * 4);\n    const result = new RawImageData(width, height, data);\n    const orthPatternSize = Math.pow(ORTHOGONAL_SIZE - 1, 2) + 1;\n    const diagPatternSize = DIAGONAL_SIZE;\n    const orthogonalPatterns = [];\n    const diagonalPatterns = [];\n    for (let i = 3, l = data.length; i < l; i += 4) {\n      data[i] = 255;\n    }\n    for (let i = 0; i < 16; ++i) {\n      orthogonalPatterns.push(new RawImageData(\n        orthPatternSize,\n        orthPatternSize,\n        new Uint8ClampedArray(orthPatternSize * orthPatternSize * 2),\n        2\n      ));\n      diagonalPatterns.push(new RawImageData(\n        diagPatternSize,\n        diagPatternSize,\n        new Uint8ClampedArray(diagPatternSize * diagPatternSize * 2),\n        2\n      ));\n    }\n    for (let i = 0, l = orthogonalSubsamplingOffsets.length; i < l; ++i) {\n      generatePatterns(orthogonalPatterns, orthogonalSubsamplingOffsets[i], true);\n      assemble(\n        0,\n        5 * ORTHOGONAL_SIZE * i,\n        orthogonalPatterns,\n        orthogonalEdges,\n        ORTHOGONAL_SIZE,\n        true,\n        result\n      );\n    }\n    for (let i = 0, l = diagonalSubsamplingOffsets.length; i < l; ++i) {\n      generatePatterns(diagonalPatterns, diagonalSubsamplingOffsets[i], false);\n      assemble(\n        5 * ORTHOGONAL_SIZE,\n        4 * DIAGONAL_SIZE * i,\n        diagonalPatterns,\n        diagonalEdges,\n        DIAGONAL_SIZE,\n        false,\n        result\n      );\n    }\n    return result;\n  }\n};\n\n// src/textures/smaa/SMAAImageGenerator.js\nimport { LoadingManager } from \"three\";\n\n// tmp/smaa/worker.txt\nvar worker_default2 = '\"use strict\";(()=>{function q(t,a,s){let e=document.createElement(\"canvas\"),n=e.getContext(\"2d\");if(e.width=t,e.height=a,s instanceof Image)n.drawImage(s,0,0);else{let r=n.createImageData(t,a);r.data.set(s),n.putImageData(r,0,0)}return e}var m=class{constructor(a=0,s=0,e=null){this.width=a,this.height=s,this.data=e}toCanvas(){return typeof document==\"undefined\"?null:q(this.width,this.height,this.data)}static from(a){let{width:s,height:e}=a,n;if(a instanceof Image){let r=q(s,e,a);r!==null&&(n=r.getContext(\"2d\").getImageData(0,0,s,e).data)}else n=a.data;return new m(s,e,n)}};var M=[new Float32Array(2),new Float32Array(2)],D=16,W=20,I=30,j=32,v=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),N=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],z=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],R=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])];function C(t,a,s){return t+(a-t)*s}function B(t){return Math.min(Math.max(t,0),1)}function _(t){let a=M[0],s=M[1],e=Math.sqrt(a[0]*2)*.5,n=Math.sqrt(a[1]*2)*.5,r=Math.sqrt(s[0]*2)*.5,o=Math.sqrt(s[1]*2)*.5,c=B(t/j);a[0]=C(e,a[0],c),a[1]=C(n,a[1],c),s[0]=C(r,s[0],c),s[1]=C(o,s[1],c)}function d(t,a,s,e,n,r){let o=s-t,c=e-a,h=n,i=n+1,w=a+c*(h-t)/o,g=a+c*(i-t)/o;if(h>=t&&h<s||i>t&&i<=s)if(Math.sign(w)===Math.sign(g)||Math.abs(w)<1e-4||Math.abs(g)<1e-4){let b=(w+g)/2;b<0?(r[0]=Math.abs(b),r[1]=0):(r[0]=0,r[1]=Math.abs(b))}else{let b=-a*o/c+t,F=Math.trunc(b),k=b>t?w*(b-F)/2:0,U=b<s?g*(1-(b-F))/2:0;(Math.abs(k)>Math.abs(U)?k:-U)<0?(r[0]=Math.abs(k),r[1]=Math.abs(U)):(r[0]=Math.abs(U),r[1]=Math.abs(k))}else r[0]=0,r[1]=0;return r}function J(t,a,s,e,n){let r=M[0],o=M[1],c=.5+e,h=.5+e-1,i=a+s+1;switch(t){case 0:{n[0]=0,n[1]=0;break}case 1:{a<=s?d(0,h,i/2,0,a,n):(n[0]=0,n[1]=0);break}case 2:{a>=s?d(i/2,0,i,h,a,n):(n[0]=0,n[1]=0);break}case 3:{d(0,h,i/2,0,a,r),d(i/2,0,i,h,a,o),_(i,M),n[0]=r[0]+o[0],n[1]=r[1]+o[1];break}case 4:{a<=s?d(0,c,i/2,0,a,n):(n[0]=0,n[1]=0);break}case 5:{n[0]=0,n[1]=0;break}case 6:{Math.abs(e)>0?(d(0,c,i,h,a,r),d(0,c,i/2,0,a,o),d(i/2,0,i,h,a,n),o[0]=o[0]+n[0],o[1]=o[1]+n[1],n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2):d(0,c,i,h,a,n);break}case 7:{d(0,c,i,h,a,n);break}case 8:{a>=s?d(i/2,0,i,c,a,n):(n[0]=0,n[1]=0);break}case 9:{Math.abs(e)>0?(d(0,h,i,c,a,r),d(0,h,i/2,0,a,o),d(i/2,0,i,c,a,n),o[0]=o[0]+n[0],o[1]=o[1]+n[1],n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2):d(0,h,i,c,a,n);break}case 10:{n[0]=0,n[1]=0;break}case 11:{d(0,h,i,c,a,n);break}case 12:{d(0,c,i/2,0,a,r),d(i/2,0,i,c,a,o),_(i,M),n[0]=r[0]+o[0],n[1]=r[1]+o[1];break}case 13:{d(0,h,i,c,a,n);break}case 14:{d(0,c,i,h,a,n);break}case 15:{n[0]=0,n[1]=0;break}}return n}function K(t,a,s,e,n,r){let o=t===s&&a===e;if(!o){let c=(t+s)/2,h=(a+e)/2,i=e-a,w=t-s;o=i*(n-c)+w*(r-h)>0}return o}function G(t,a,s,e,n,r){let o=0;for(let c=0;c<I;++c)for(let h=0;h<I;++h){let i=h/(I-1),w=c/(I-1);K(t,a,s,e,n+i,r+w)&&++o}return o/(I*I)}function A(t,a,s,e,n,r,o,c){let h=R[t],i=h[0],w=h[1];return i>0&&(a+=o[0],s+=o[1]),w>0&&(e+=o[0],n+=o[1]),c[0]=1-G(a,s,e,n,1+r,0+r),c[1]=G(a,s,e,n,1+r,1+r),c}function Q(t,a,s,e,n){let r=M[0],o=M[1],c=a+s+1;switch(t){case 0:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 1:{A(t,1,0,0+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 2:{A(t,0,0,1+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 3:{A(t,1,0,1+c,0+c,a,e,n);break}case 4:{A(t,1,1,0+c,0+c,a,e,r),A(t,1,1,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 5:{A(t,1,1,0+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 6:{A(t,1,1,1+c,0+c,a,e,n);break}case 7:{A(t,1,1,1+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 8:{A(t,0,0,1+c,1+c,a,e,r),A(t,1,0,1+c,1+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 9:{A(t,1,0,1+c,1+c,a,e,n),A(t,1,0,1+c,1+c,a,e,n);break}case 10:{A(t,0,0,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 11:{A(t,1,0,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 12:{A(t,1,1,1+c,1+c,a,e,n);break}case 13:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,0,1+c,1+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 14:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,1,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 15:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}}return n}function T(t,a,s){let e=new Float32Array(2);for(let n=0,r=t.length;n<r;++n){let o=t[n],c=o.data,h=o.width;for(let i=0;i<h;++i)for(let w=0;w<h;++w){s?J(n,w,i,a,e):Q(n,w,i,a,e);let g=(i*h+w)*2;c[g]=e[0]*255,c[g+1]=e[1]*255}}}function p(t,a,s,e,n,r,o){let c=o.data,h=o.width;for(let i=0,w=s.length;i<w;++i){let g=e[i],b=s[i],F=b.data,k=b.width;for(let U=0;U<n;++U)for(let x=0;x<n;++x){let Z=g[0]*n+t+x,O=((g[1]*n+a+U)*h+Z)*4,L=r?(U*U*k+x*x)*2:(U*k+x)*2;c[O]=F[L],c[O+1]=F[L+1],c[O+2]=0,c[O+3]=255}}}var S=class{static generate(){let a=10*D,s=v.length*5*D,e=new Uint8ClampedArray(a*s*4),n=new m(a,s,e),r=Math.pow(D-1,2)+1,o=W,c=[],h=[];for(let i=3,w=e.length;i<w;i+=4)e[i]=255;for(let i=0;i<16;++i)c.push(new m(r,r,new Uint8ClampedArray(r*r*2),2)),h.push(new m(o,o,new Uint8ClampedArray(o*o*2),2));for(let i=0,w=v.length;i<w;++i)T(c,v[i],!0),p(0,5*D*i,c,z,D,!0,n);for(let i=0,w=N.length;i<w;++i)T(h,N[i],!1),p(5*D,4*W*i,h,R,W,!1,n);return n}};var P=new Map([[y(0,0,0,0),new Float32Array([0,0,0,0])],[y(0,0,0,1),new Float32Array([0,0,0,1])],[y(0,0,1,0),new Float32Array([0,0,1,0])],[y(0,0,1,1),new Float32Array([0,0,1,1])],[y(0,1,0,0),new Float32Array([0,1,0,0])],[y(0,1,0,1),new Float32Array([0,1,0,1])],[y(0,1,1,0),new Float32Array([0,1,1,0])],[y(0,1,1,1),new Float32Array([0,1,1,1])],[y(1,0,0,0),new Float32Array([1,0,0,0])],[y(1,0,0,1),new Float32Array([1,0,0,1])],[y(1,0,1,0),new Float32Array([1,0,1,0])],[y(1,0,1,1),new Float32Array([1,0,1,1])],[y(1,1,0,0),new Float32Array([1,1,0,0])],[y(1,1,0,1),new Float32Array([1,1,0,1])],[y(1,1,1,0),new Float32Array([1,1,1,0])],[y(1,1,1,1),new Float32Array([1,1,1,1])]]);function H(t,a,s){return t+(a-t)*s}function y(t,a,s,e){let n=H(t,a,.75),r=H(s,e,1-.25);return H(n,r,1-.125)}function V(t,a){let s=0;return a[3]===1&&(s+=1),s===1&&a[2]===1&&t[1]!==1&&t[3]!==1&&(s+=1),s}function $(t,a){let s=0;return a[3]===1&&t[1]!==1&&t[3]!==1&&(s+=1),s===1&&a[2]===1&&t[0]!==1&&t[2]!==1&&(s+=1),s}var E=class{static generate(){let o=new Uint8ClampedArray(2178),c=new Uint8ClampedArray(64*16*4);for(let h=0;h<33;++h)for(let i=0;i<66;++i){let w=.03125*i,g=.03125*h;if(P.has(w)&&P.has(g)){let b=P.get(w),F=P.get(g),k=h*66+i;o[k]=127*V(b,F),o[k+33]=127*$(b,F)}}for(let h=0,i=33-16;i<33;++i)for(let w=0;w<64;++w,h+=4)c[h]=o[i*66+w],c[h+3]=255;return new m(64,16,c)}};self.addEventListener(\"message\",t=>{let a=S.generate(),s=E.generate();postMessage({areaImageData:a,searchImageData:s},[a.data.buffer,s.data.buffer]),close()});})();\\n';\n\n// src/textures/smaa/SMAAImageGenerator.js\nfunction generate(useCache = true) {\n  const workerURL = URL.createObjectURL(new Blob([worker_default2], {\n    type: \"text/javascript\"\n  }));\n  const worker = new Worker(workerURL);\n  URL.revokeObjectURL(workerURL);\n  return new Promise((resolve, reject) => {\n    worker.addEventListener(\"error\", (event) => reject(event.error));\n    worker.addEventListener(\"message\", (event) => {\n      const searchImageData = RawImageData.from(event.data.searchImageData);\n      const areaImageData = RawImageData.from(event.data.areaImageData);\n      const urls = [\n        searchImageData.toCanvas().toDataURL(\"image/png\", 1),\n        areaImageData.toCanvas().toDataURL(\"image/png\", 1)\n      ];\n      if (useCache) {\n        localStorage.setItem(\"smaa-search\", urls[0]);\n        localStorage.setItem(\"smaa-area\", urls[1]);\n      }\n      resolve(urls);\n    });\n    worker.postMessage(null);\n  });\n}\nvar SMAAImageGenerator = class {\n  constructor() {\n    this.disableCache = false;\n  }\n  setCacheEnabled(value) {\n    this.disableCache = !value;\n  }\n  generate() {\n    const useCache = !this.disableCache && window.localStorage !== void 0;\n    const cachedURLs = useCache ? [\n      localStorage.getItem(\"smaa-search\"),\n      localStorage.getItem(\"smaa-area\")\n    ] : [null, null];\n    const promise = cachedURLs[0] !== null && cachedURLs[1] !== null ? Promise.resolve(cachedURLs) : generate(useCache);\n    return promise.then((urls) => {\n      return new Promise((resolve, reject) => {\n        const searchImage = new Image();\n        const areaImage = new Image();\n        const manager = new LoadingManager();\n        manager.onLoad = () => resolve([searchImage, areaImage]);\n        manager.onError = reject;\n        searchImage.addEventListener(\"error\", (e) => manager.itemError(\"smaa-search\"));\n        areaImage.addEventListener(\"error\", (e) => manager.itemError(\"smaa-area\"));\n        searchImage.addEventListener(\"load\", () => manager.itemEnd(\"smaa-search\"));\n        areaImage.addEventListener(\"load\", () => manager.itemEnd(\"smaa-area\"));\n        manager.itemStart(\"smaa-search\");\n        manager.itemStart(\"smaa-area\");\n        searchImage.src = urls[0];\n        areaImage.src = urls[1];\n      });\n    });\n  }\n};\n\n// src/textures/smaa/SMAASearchImageData.js\nvar edges = /* @__PURE__ */ new Map([\n  [bilinear(0, 0, 0, 0), new Float32Array([0, 0, 0, 0])],\n  [bilinear(0, 0, 0, 1), new Float32Array([0, 0, 0, 1])],\n  [bilinear(0, 0, 1, 0), new Float32Array([0, 0, 1, 0])],\n  [bilinear(0, 0, 1, 1), new Float32Array([0, 0, 1, 1])],\n  [bilinear(0, 1, 0, 0), new Float32Array([0, 1, 0, 0])],\n  [bilinear(0, 1, 0, 1), new Float32Array([0, 1, 0, 1])],\n  [bilinear(0, 1, 1, 0), new Float32Array([0, 1, 1, 0])],\n  [bilinear(0, 1, 1, 1), new Float32Array([0, 1, 1, 1])],\n  [bilinear(1, 0, 0, 0), new Float32Array([1, 0, 0, 0])],\n  [bilinear(1, 0, 0, 1), new Float32Array([1, 0, 0, 1])],\n  [bilinear(1, 0, 1, 0), new Float32Array([1, 0, 1, 0])],\n  [bilinear(1, 0, 1, 1), new Float32Array([1, 0, 1, 1])],\n  [bilinear(1, 1, 0, 0), new Float32Array([1, 1, 0, 0])],\n  [bilinear(1, 1, 0, 1), new Float32Array([1, 1, 0, 1])],\n  [bilinear(1, 1, 1, 0), new Float32Array([1, 1, 1, 0])],\n  [bilinear(1, 1, 1, 1), new Float32Array([1, 1, 1, 1])]\n]);\nfunction lerp2(a, b, p) {\n  return a + (b - a) * p;\n}\nfunction bilinear(e0, e1, e2, e3) {\n  const a = lerp2(e0, e1, 1 - 0.25);\n  const b = lerp2(e2, e3, 1 - 0.25);\n  return lerp2(a, b, 1 - 0.125);\n}\nfunction deltaLeft(left, top) {\n  let d = 0;\n  if (top[3] === 1) {\n    d += 1;\n  }\n  if (d === 1 && top[2] === 1 && left[1] !== 1 && left[3] !== 1) {\n    d += 1;\n  }\n  return d;\n}\nfunction deltaRight(left, top) {\n  let d = 0;\n  if (top[3] === 1 && left[1] !== 1 && left[3] !== 1) {\n    d += 1;\n  }\n  if (d === 1 && top[2] === 1 && left[0] !== 1 && left[2] !== 1) {\n    d += 1;\n  }\n  return d;\n}\nvar SMAASearchImageData = class {\n  static generate() {\n    const width = 66;\n    const height = 33;\n    const halfWidth = width / 2;\n    const croppedWidth = 64;\n    const croppedHeight = 16;\n    const data = new Uint8ClampedArray(width * height);\n    const croppedData = new Uint8ClampedArray(croppedWidth * croppedHeight * 4);\n    for (let y = 0; y < height; ++y) {\n      for (let x = 0; x < width; ++x) {\n        const s = 0.03125 * x;\n        const t = 0.03125 * y;\n        if (edges.has(s) && edges.has(t)) {\n          const e1 = edges.get(s);\n          const e2 = edges.get(t);\n          const i = y * width + x;\n          data[i] = 127 * deltaLeft(e1, e2);\n          data[i + halfWidth] = 127 * deltaRight(e1, e2);\n        }\n      }\n    }\n    for (let i = 0, y = height - croppedHeight; y < height; ++y) {\n      for (let x = 0; x < croppedWidth; ++x, i += 4) {\n        croppedData[i] = data[y * width + x];\n        croppedData[i + 3] = 255;\n      }\n    }\n    return new RawImageData(croppedWidth, croppedHeight, croppedData);\n  }\n};\n\n// src/effects/glsl/lut-3d.frag\nvar lut_3d_default = \"uniform vec3 scale;uniform vec3 offset;\\n#ifdef CUSTOM_INPUT_DOMAIN\\nuniform vec3 domainMin;uniform vec3 domainMax;\\n#endif\\n#ifdef LUT_3D\\n#ifdef LUT_PRECISION_HIGH\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler3D lut;\\n#else\\nuniform mediump sampler3D lut;\\n#endif\\n#else\\nuniform lowp sampler3D lut;\\n#endif\\nvec4 applyLUT(const in vec3 rgb){\\n#ifdef TETRAHEDRAL_INTERPOLATION\\nvec3 p=floor(rgb);vec3 f=rgb-p;vec3 v1=(p+0.5)*LUT_TEXEL_WIDTH;vec3 v4=(p+1.5)*LUT_TEXEL_WIDTH;vec3 v2,v3;vec3 frac;if(f.r>=f.g){if(f.g>f.b){frac=f.rgb;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else if(f.r>=f.b){frac=f.rbg;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v1.y,v4.z);}else{frac=f.brg;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v4.x,v1.y,v4.z);}}else{if(f.b>f.g){frac=f.bgr;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v1.x,v4.y,v4.z);}else if(f.r>=f.b){frac=f.grb;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else{frac=f.gbr;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v1.x,v4.y,v4.z);}}vec4 n1=texture(lut,v1);vec4 n2=texture(lut,v2);vec4 n3=texture(lut,v3);vec4 n4=texture(lut,v4);vec4 weights=vec4(1.0-frac.x,frac.x-frac.y,frac.y-frac.z,frac.z);vec4 result=weights*mat4(vec4(n1.r,n2.r,n3.r,n4.r),vec4(n1.g,n2.g,n3.g,n4.g),vec4(n1.b,n2.b,n3.b,n4.b),vec4(1.0));return vec4(result.rgb,1.0);\\n#else\\nreturn texture(lut,rgb);\\n#endif\\n}\\n#else\\n#ifdef LUT_PRECISION_HIGH\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D lut;\\n#else\\nuniform mediump sampler2D lut;\\n#endif\\n#else\\nuniform lowp sampler2D lut;\\n#endif\\nvec4 applyLUT(const in vec3 rgb){float slice=rgb.b*LUT_SIZE;float slice0=floor(slice);float interp=slice-slice0;float centeredInterp=interp-0.5;float slice1=slice0+sign(centeredInterp);\\n#ifdef LUT_STRIP_HORIZONTAL\\nfloat xOffset=clamp(rgb.r*LUT_TEXEL_HEIGHT,LUT_TEXEL_WIDTH*0.5,LUT_TEXEL_HEIGHT-LUT_TEXEL_WIDTH*0.5);vec2 uv0=vec2(slice0*LUT_TEXEL_HEIGHT+xOffset,rgb.g);vec2 uv1=vec2(slice1*LUT_TEXEL_HEIGHT+xOffset,rgb.g);\\n#else\\nfloat yOffset=clamp(rgb.g*LUT_TEXEL_WIDTH,LUT_TEXEL_HEIGHT*0.5,LUT_TEXEL_WIDTH-LUT_TEXEL_HEIGHT*0.5);vec2 uv0=vec2(rgb.r,slice0*LUT_TEXEL_WIDTH+yOffset);vec2 uv1=vec2(rgb.r,slice1*LUT_TEXEL_WIDTH+yOffset);\\n#endif\\nvec4 sample0=texture2D(lut,uv0);vec4 sample1=texture2D(lut,uv1);return mix(sample0,sample1,abs(centeredInterp));}\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 c=inputColor.rgb;\\n#ifdef CUSTOM_INPUT_DOMAIN\\nif(c.r>=domainMin.r&&c.g>=domainMin.g&&c.b>=domainMin.b&&c.r<=domainMax.r&&c.g<=domainMax.g&&c.b<=domainMax.b){c=applyLUT(scale*c+offset).rgb;}else{c=inputColor.rgb;}\\n#else\\n#if !defined(LUT_3D) || defined(TETRAHEDRAL_INTERPOLATION)\\nc=clamp(c,0.0,1.0);\\n#endif\\nc=applyLUT(scale*c+offset).rgb;\\n#endif\\noutputColor=vec4(c,inputColor.a);}\";\n\n// src/effects/LUT3DEffect.js\nvar LUT3DEffect = class extends Effect {\n  constructor(lut, {\n    blendFunction = BlendFunction.SRC,\n    tetrahedralInterpolation = false,\n    inputEncoding = sRGBEncoding14\n  } = {}) {\n    super(\"LUT3DEffect\", lut_3d_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"lut\", new Uniform37(null)],\n        [\"scale\", new Uniform37(new Vector34())],\n        [\"offset\", new Uniform37(new Vector34())],\n        [\"domainMin\", new Uniform37(null)],\n        [\"domainMax\", new Uniform37(null)]\n      ])\n    });\n    this.tetrahedralInterpolation = tetrahedralInterpolation;\n    this.inputColorSpace = inputEncoding;\n    this.lut = lut;\n  }\n  get inputEncoding() {\n    return this.inputColorSpace;\n  }\n  set inputEncoding(value) {\n    this.inputColorSpace = value;\n  }\n  getInputEncoding() {\n    return this.inputColorSpace;\n  }\n  setInputEncoding(value) {\n    this.inputColorSpace = value;\n  }\n  getOutputEncoding() {\n    return this.outputColorSpace;\n  }\n  get lut() {\n    return this.uniforms.get(\"lut\").value;\n  }\n  set lut(value) {\n    const defines = this.defines;\n    const uniforms = this.uniforms;\n    if (this.lut !== value) {\n      uniforms.get(\"lut\").value = value;\n      if (value !== null) {\n        const image = value.image;\n        const tetrahedralInterpolation = this.tetrahedralInterpolation;\n        defines.clear();\n        defines.set(\"LUT_SIZE\", Math.min(image.width, image.height).toFixed(16));\n        defines.set(\"LUT_TEXEL_WIDTH\", (1 / image.width).toFixed(16));\n        defines.set(\"LUT_TEXEL_HEIGHT\", (1 / image.height).toFixed(16));\n        uniforms.get(\"domainMin\").value = null;\n        uniforms.get(\"domainMax\").value = null;\n        if (value.type === FloatType6 || value.type === HalfFloatType2) {\n          defines.set(\"LUT_PRECISION_HIGH\", \"1\");\n        }\n        if (image.width > image.height) {\n          defines.set(\"LUT_STRIP_HORIZONTAL\", \"1\");\n        } else if (value instanceof DataTexture3D2) {\n          defines.set(\"LUT_3D\", \"1\");\n        }\n        if (value instanceof LookupTexture) {\n          const min = value.domainMin;\n          const max = value.domainMax;\n          if (min.x !== 0 || min.y !== 0 || min.z !== 0 || max.x !== 1 || max.y !== 1 || max.z !== 1) {\n            defines.set(\"CUSTOM_INPUT_DOMAIN\", \"1\");\n            uniforms.get(\"domainMin\").value = min.clone();\n            uniforms.get(\"domainMax\").value = max.clone();\n          }\n        }\n        this.tetrahedralInterpolation = tetrahedralInterpolation;\n      }\n    }\n  }\n  getLUT() {\n    return this.lut;\n  }\n  setLUT(value) {\n    this.lut = value;\n  }\n  updateScaleOffset() {\n    const lut = this.lut;\n    if (lut !== null) {\n      const size = Math.min(lut.image.width, lut.image.height);\n      const scale = this.uniforms.get(\"scale\").value;\n      const offset = this.uniforms.get(\"offset\").value;\n      if (this.tetrahedralInterpolation && lut instanceof DataTexture3D2) {\n        if (this.defines.has(\"CUSTOM_INPUT_DOMAIN\")) {\n          const domainScale = lut.domainMax.clone().sub(lut.domainMin);\n          scale.setScalar(size - 1).divide(domainScale);\n          offset.copy(lut.domainMin).negate().multiply(scale);\n        } else {\n          scale.setScalar(size - 1);\n          offset.setScalar(0);\n        }\n      } else {\n        if (this.defines.has(\"CUSTOM_INPUT_DOMAIN\")) {\n          const domainScale = lut.domainMax.clone().sub(lut.domainMin).multiplyScalar(size);\n          scale.setScalar(size - 1).divide(domainScale);\n          offset.copy(lut.domainMin).negate().multiply(scale).addScalar(1 / (2 * size));\n        } else {\n          scale.setScalar((size - 1) / size);\n          offset.setScalar(1 / (2 * size));\n        }\n      }\n    }\n  }\n  configureTetrahedralInterpolation() {\n    const lut = this.lut;\n    if (lut !== null) {\n      lut.minFilter = LinearFilter4;\n      lut.magFilter = LinearFilter4;\n      if (this.tetrahedralInterpolation) {\n        if (lut instanceof DataTexture3D2) {\n          lut.minFilter = NearestFilter7;\n          lut.magFilter = NearestFilter7;\n        } else {\n          console.warn(\"Tetrahedral interpolation requires a 3D texture\");\n        }\n      }\n      if (lut.source === void 0) {\n        lut.needsUpdate = true;\n      }\n    }\n  }\n  get tetrahedralInterpolation() {\n    return this.defines.has(\"TETRAHEDRAL_INTERPOLATION\");\n  }\n  set tetrahedralInterpolation(value) {\n    if (value) {\n      this.defines.set(\"TETRAHEDRAL_INTERPOLATION\", \"1\");\n    } else {\n      this.defines.delete(\"TETRAHEDRAL_INTERPOLATION\");\n    }\n    this.configureTetrahedralInterpolation();\n    this.updateScaleOffset();\n    this.setChanged();\n  }\n  setTetrahedralInterpolationEnabled(value) {\n    this.tetrahedralInterpolation = value;\n  }\n};\n\n// src/effects/glsl/noise.frag\nvar noise_default = \"void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\\n#ifdef PREMULTIPLY\\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\\n#else\\noutputColor=vec4(noise,inputColor.a);\\n#endif\\n}\";\n\n// src/effects/NoiseEffect.js\nvar NoiseEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.SCREEN, premultiply = false } = {}) {\n    super(\"NoiseEffect\", noise_default, { blendFunction });\n    this.premultiply = premultiply;\n  }\n  get premultiply() {\n    return this.defines.has(\"PREMULTIPLY\");\n  }\n  set premultiply(value) {\n    if (this.premultiply !== value) {\n      if (value) {\n        this.defines.set(\"PREMULTIPLY\", \"1\");\n      } else {\n        this.defines.delete(\"PREMULTIPLY\");\n      }\n      this.setChanged();\n    }\n  }\n  isPremultiplied() {\n    return this.premultiply;\n  }\n  setPremultiplied(value) {\n    this.premultiply = value;\n  }\n};\n\n// src/effects/OutlineEffect.js\nimport { Color as Color6, RepeatWrapping as RepeatWrapping2, Uniform as Uniform38, UnsignedByteType as UnsignedByteType16, WebGLRenderTarget as WebGLRenderTarget18 } from \"three\";\n\n// src/effects/glsl/outline.frag\nvar outline_default3 = \"uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;\\n#ifdef USE_PATTERN\\nuniform lowp sampler2D patternTexture;varying vec2 vUvPattern;\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;\\n#ifndef X_RAY\\nedge.y=0.0;\\n#endif\\nedge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;\\n#ifdef USE_PATTERN\\nvec4 patternColor=texelToLinear(texture2D(patternTexture,vUvPattern));\\n#ifdef X_RAY\\nfloat hiddenFactor=0.5;\\n#else\\nfloat hiddenFactor=0.0;\\n#endif\\nvisibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;\\n#endif\\nfloat alpha=max(max(edge.x,edge.y),visibilityFactor);\\n#ifdef ALPHA\\noutputColor=vec4(color,alpha);\\n#else\\noutputColor=vec4(color,max(alpha,inputColor.a));\\n#endif\\n}\";\n\n// src/effects/glsl/outline.vert\nvar outline_default4 = \"uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}\";\n\n// src/effects/OutlineEffect.js\nvar OutlineEffect = class extends Effect {\n  constructor(scene, camera, {\n    blendFunction = BlendFunction.SCREEN,\n    patternTexture = null,\n    patternScale = 1,\n    edgeStrength = 1,\n    pulseSpeed = 0,\n    visibleEdgeColor = 16777215,\n    hiddenEdgeColor = 2230538,\n    kernelSize = KernelSize.VERY_SMALL,\n    blur = false,\n    xRay = true,\n    multisampling = 0,\n    resolutionScale = 0.5,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"OutlineEffect\", outline_default3, {\n      uniforms: /* @__PURE__ */ new Map([\n        [\"maskTexture\", new Uniform38(null)],\n        [\"edgeTexture\", new Uniform38(null)],\n        [\"edgeStrength\", new Uniform38(edgeStrength)],\n        [\"visibleEdgeColor\", new Uniform38(new Color6(visibleEdgeColor))],\n        [\"hiddenEdgeColor\", new Uniform38(new Color6(hiddenEdgeColor))],\n        [\"pulse\", new Uniform38(1)],\n        [\"patternScale\", new Uniform38(patternScale)],\n        [\"patternTexture\", new Uniform38(null)]\n      ])\n    });\n    this.blendMode.addEventListener(\"change\", (event) => {\n      if (this.blendMode.getBlendFunction() === BlendFunction.ALPHA) {\n        this.defines.set(\"ALPHA\", \"1\");\n      } else {\n        this.defines.delete(\"ALPHA\");\n      }\n      this.setChanged();\n    });\n    this.blendMode.setBlendFunction(blendFunction);\n    this.patternTexture = patternTexture;\n    this.xRay = xRay;\n    this.scene = scene;\n    this.camera = camera;\n    this.renderTargetMask = new WebGLRenderTarget18(1, 1);\n    this.renderTargetMask.samples = multisampling;\n    this.renderTargetMask.texture.name = \"Outline.Mask\";\n    this.uniforms.get(\"maskTexture\").value = this.renderTargetMask.texture;\n    this.renderTargetOutline = new WebGLRenderTarget18(1, 1, { depthBuffer: false });\n    this.renderTargetOutline.texture.name = \"Outline.Edges\";\n    this.uniforms.get(\"edgeTexture\").value = this.renderTargetOutline.texture;\n    this.clearPass = new ClearPass();\n    this.clearPass.overrideClearColor = new Color6(0);\n    this.clearPass.overrideClearAlpha = 1;\n    this.depthPass = new DepthPass(scene, camera);\n    this.maskPass = new RenderPass(scene, camera, new DepthComparisonMaterial(this.depthPass.texture, camera));\n    const clearPass = this.maskPass.clearPass;\n    clearPass.overrideClearColor = new Color6(16777215);\n    clearPass.overrideClearAlpha = 1;\n    this.blurPass = new KawaseBlurPass({ resolutionScale, resolutionX, resolutionY, kernelSize });\n    this.blurPass.enabled = blur;\n    const resolution = this.blurPass.resolution;\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n    this.outlinePass = new ShaderPass(new OutlineMaterial());\n    const outlineMaterial = this.outlinePass.fullscreenMaterial;\n    outlineMaterial.inputBuffer = this.renderTargetMask.texture;\n    this.time = 0;\n    this.active = false;\n    this.selection = new Selection();\n    this.selection.layer = 10;\n    this.pulseSpeed = pulseSpeed;\n  }\n  set mainScene(value) {\n    this.scene = value;\n    this.depthPass.mainScene = value;\n    this.maskPass.mainScene = value;\n  }\n  set mainCamera(value) {\n    this.camera = value;\n    this.depthPass.mainCamera = value;\n    this.maskPass.mainCamera = value;\n    this.maskPass.overrideMaterial.copyCameraSettings(value);\n  }\n  get resolution() {\n    return this.blurPass.resolution;\n  }\n  getResolution() {\n    return this.blurPass.getResolution();\n  }\n  get multisampling() {\n    return this.renderTargetMask.samples;\n  }\n  set multisampling(value) {\n    this.renderTargetMask.samples = value;\n    this.renderTargetMask.dispose();\n  }\n  get patternScale() {\n    return this.uniforms.get(\"patternScale\").value;\n  }\n  set patternScale(value) {\n    this.uniforms.get(\"patternScale\").value = value;\n  }\n  get edgeStrength() {\n    return this.uniforms.get(\"edgeStrength\").value;\n  }\n  set edgeStrength(value) {\n    this.uniforms.get(\"edgeStrength\").value = value;\n  }\n  get visibleEdgeColor() {\n    return this.uniforms.get(\"visibleEdgeColor\").value;\n  }\n  set visibleEdgeColor(value) {\n    this.uniforms.get(\"visibleEdgeColor\").value = value;\n  }\n  get hiddenEdgeColor() {\n    return this.uniforms.get(\"hiddenEdgeColor\").value;\n  }\n  set hiddenEdgeColor(value) {\n    this.uniforms.get(\"hiddenEdgeColor\").value = value;\n  }\n  getBlurPass() {\n    return this.blurPass;\n  }\n  getSelection() {\n    return this.selection;\n  }\n  getPulseSpeed() {\n    return this.pulseSpeed;\n  }\n  setPulseSpeed(value) {\n    this.pulseSpeed = value;\n  }\n  get width() {\n    return this.resolution.width;\n  }\n  set width(value) {\n    this.resolution.preferredWidth = value;\n  }\n  get height() {\n    return this.resolution.height;\n  }\n  set height(value) {\n    this.resolution.preferredHeight = value;\n  }\n  get selectionLayer() {\n    return this.selection.layer;\n  }\n  set selectionLayer(value) {\n    this.selection.layer = value;\n  }\n  get dithering() {\n    return this.blurPass.dithering;\n  }\n  set dithering(value) {\n    this.blurPass.dithering = value;\n  }\n  get kernelSize() {\n    return this.blurPass.kernelSize;\n  }\n  set kernelSize(value) {\n    this.blurPass.kernelSize = value;\n  }\n  get blur() {\n    return this.blurPass.enabled;\n  }\n  set blur(value) {\n    this.blurPass.enabled = value;\n  }\n  get xRay() {\n    return this.defines.has(\"X_RAY\");\n  }\n  set xRay(value) {\n    if (this.xRay !== value) {\n      if (value) {\n        this.defines.set(\"X_RAY\", \"1\");\n      } else {\n        this.defines.delete(\"X_RAY\");\n      }\n      this.setChanged();\n    }\n  }\n  isXRayEnabled() {\n    return this.xRay;\n  }\n  setXRayEnabled(value) {\n    this.xRay = value;\n  }\n  get patternTexture() {\n    return this.uniforms.get(\"patternTexture\").value;\n  }\n  set patternTexture(value) {\n    if (value !== null) {\n      value.wrapS = value.wrapT = RepeatWrapping2;\n      this.defines.set(\"USE_PATTERN\", \"1\");\n      this.setVertexShader(outline_default4);\n    } else {\n      this.defines.delete(\"USE_PATTERN\");\n      this.setVertexShader(null);\n    }\n    if (this.renderer !== null) {\n      const decoding = getTextureDecoding(value, this.renderer.capabilities.isWebGL2);\n      this.defines.set(\"texelToLinear(texel)\", decoding);\n    }\n    this.uniforms.get(\"patternTexture\").value = value;\n    this.setChanged();\n  }\n  setPatternTexture(value) {\n    this.patternTexture = value;\n  }\n  getResolutionScale() {\n    return this.resolution.scale;\n  }\n  setResolutionScale(scale) {\n    this.resolution.scale = scale;\n  }\n  setSelection(objects) {\n    this.selection.set(objects);\n    return this;\n  }\n  clearSelection() {\n    this.selection.clear();\n    return this;\n  }\n  selectObject(object) {\n    this.selection.add(object);\n    return this;\n  }\n  deselectObject(object) {\n    this.selection.delete(object);\n    return this;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    const scene = this.scene;\n    const camera = this.camera;\n    const selection = this.selection;\n    const uniforms = this.uniforms;\n    const pulse = uniforms.get(\"pulse\");\n    const background = scene.background;\n    const mask = camera.layers.mask;\n    if (selection.size > 0) {\n      scene.background = null;\n      pulse.value = 1;\n      if (this.pulseSpeed > 0) {\n        pulse.value = Math.cos(this.time * this.pulseSpeed * 10) * 0.375 + 0.625;\n      }\n      this.active = true;\n      this.time += deltaTime;\n      selection.setVisible(false);\n      this.depthPass.render(renderer);\n      selection.setVisible(true);\n      camera.layers.set(selection.layer);\n      this.maskPass.render(renderer, this.renderTargetMask);\n      camera.layers.mask = mask;\n      scene.background = background;\n      this.outlinePass.render(renderer, null, this.renderTargetOutline);\n      if (this.blurPass.enabled) {\n        this.blurPass.render(renderer, this.renderTargetOutline, this.renderTargetOutline);\n      }\n    } else if (this.active) {\n      this.clearPass.render(renderer, this.renderTargetOutline);\n      this.active = false;\n    }\n  }\n  setSize(width, height) {\n    this.blurPass.setSize(width, height);\n    this.renderTargetMask.setSize(width, height);\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    const w = resolution.width, h = resolution.height;\n    this.depthPass.setSize(w, h);\n    this.renderTargetOutline.setSize(w, h);\n    this.outlinePass.fullscreenMaterial.setSize(w, h);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    const texture = this.patternTexture;\n    const decoding = getTextureDecoding(texture, renderer.capabilities.isWebGL2);\n    this.defines.set(\"texelToLinear(texel)\", decoding);\n    this.blurPass.initialize(renderer, alpha, UnsignedByteType16);\n    if (frameBufferType !== void 0) {\n      this.depthPass.initialize(renderer, alpha, frameBufferType);\n      this.maskPass.initialize(renderer, alpha, frameBufferType);\n      this.outlinePass.initialize(renderer, alpha, frameBufferType);\n    }\n  }\n};\n\n// src/effects/PixelationEffect.js\nimport { Uniform as Uniform39, Vector2 as Vector223, Vector4 as Vector43 } from \"three\";\n\n// src/effects/glsl/pixelation.frag\nvar pixelation_default = \"uniform bool active;uniform vec4 d;void mainUv(inout vec2 uv){if(active){uv=d.xy*(floor(uv*d.zw)+0.5);}}\";\n\n// src/effects/PixelationEffect.js\nvar PixelationEffect = class extends Effect {\n  constructor(granularity = 30) {\n    super(\"PixelationEffect\", pixelation_default, {\n      uniforms: /* @__PURE__ */ new Map([\n        [\"active\", new Uniform39(false)],\n        [\"d\", new Uniform39(new Vector43())]\n      ])\n    });\n    this.resolution = new Vector223();\n    this._granularity = 0;\n    this.granularity = granularity;\n  }\n  get granularity() {\n    return this._granularity;\n  }\n  set granularity(value) {\n    let d = Math.floor(value);\n    if (d % 2 > 0) {\n      d += 1;\n    }\n    this._granularity = d;\n    this.uniforms.get(\"active\").value = d > 0;\n    this.setSize(this.resolution.width, this.resolution.height);\n  }\n  getGranularity() {\n    return this.granularity;\n  }\n  setGranularity(value) {\n    this.granularity = value;\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.set(width, height);\n    const d = this.granularity;\n    const x = d / resolution.x;\n    const y = d / resolution.y;\n    this.uniforms.get(\"d\").value.set(x, y, 1 / x, 1 / y);\n  }\n};\n\n// src/effects/RealisticBokehEffect.js\nimport { Uniform as Uniform40, Vector4 as Vector44 } from \"three\";\n\n// src/effects/glsl/realistic-bokeh.frag\nvar realistic_bokeh_default = \"uniform float focus;uniform float focalLength;uniform float fStop;uniform float maxBlur;uniform float luminanceThreshold;uniform float luminanceGain;uniform float bias;uniform float fringe;\\n#ifdef MANUAL_DOF\\nuniform vec4 dof;\\n#endif\\n#ifdef PENTAGON\\nfloat pentagon(const in vec2 coords){const vec4 HS0=vec4(1.0,0.0,0.0,1.0);const vec4 HS1=vec4(0.309016994,0.951056516,0.0,1.0);const vec4 HS2=vec4(-0.809016994,0.587785252,0.0,1.0);const vec4 HS3=vec4(-0.809016994,-0.587785252,0.0,1.0);const vec4 HS4=vec4(0.309016994,-0.951056516,0.0,1.0);const vec4 HS5=vec4(0.0,0.0,1.0,1.0);const vec4 ONE=vec4(1.0);const float P_FEATHER=0.4;const float N_FEATHER=-P_FEATHER;float inOrOut=-4.0;vec4 P=vec4(coords,vec2(RINGS_FLOAT-1.3));vec4 dist=vec4(dot(P,HS0),dot(P,HS1),dot(P,HS2),dot(P,HS3));dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dot(dist,ONE);dist.x=dot(P,HS4);dist.y=HS5.w-abs(P.z);dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dist.x;return clamp(inOrOut,0.0,1.0);}\\n#endif\\nvec3 processTexel(const in vec2 coords,const in float blur){vec2 scale=texelSize*fringe*blur;vec3 c=vec3(texture2D(inputBuffer,coords+vec2(0.0,1.0)*scale).r,texture2D(inputBuffer,coords+vec2(-0.866,-0.5)*scale).g,texture2D(inputBuffer,coords+vec2(0.866,-0.5)*scale).b);float luminance=linearToRelativeLuminance(c);float threshold=max((luminance-luminanceThreshold)*luminanceGain,0.0);return c+mix(vec3(0.0),c,threshold*blur);}float gather(const in float i,const in float j,const in float ringSamples,const in vec2 uv,const in vec2 blurFactor,const in float blur,inout vec3 color){float step=PI2/ringSamples;vec2 wh=vec2(cos(j*step)*i,sin(j*step)*i);\\n#ifdef PENTAGON\\nfloat p=pentagon(wh);\\n#else\\nfloat p=1.0;\\n#endif\\ncolor+=processTexel(wh*blurFactor+uv,blur)*mix(1.0,i/RINGS_FLOAT,bias)*p;return mix(1.0,i/RINGS_FLOAT,bias)*p;}void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearDepth=depth;\\n#endif\\n#ifdef MANUAL_DOF\\nfloat focalPlane=linearDepth-focus;float farDoF=(focalPlane-dof.z)/dof.w;float nearDoF=(-focalPlane-dof.x)/dof.y;float blur=(focalPlane>0.0)?farDoF:nearDoF;\\n#else\\nconst float CIRCLE_OF_CONFUSION=0.03;float focalPlaneMM=focus*1000.0;float depthMM=linearDepth*1000.0;float focalPlane=(depthMM*focalLength)/(depthMM-focalLength);float farDoF=(focalPlaneMM*focalLength)/(focalPlaneMM-focalLength);float nearDoF=(focalPlaneMM-focalLength)/(focalPlaneMM*fStop*CIRCLE_OF_CONFUSION);float blur=abs(focalPlane-farDoF)*nearDoF;\\n#endif\\nconst int MAX_RING_SAMPLES=RINGS_INT*SAMPLES_INT;blur=clamp(blur,0.0,1.0);vec3 color=inputColor.rgb;if(blur>=0.05){vec2 blurFactor=blur*maxBlur*texelSize;float s=1.0;int ringSamples;for(int i=1;i<=RINGS_INT;i++){ringSamples=i*SAMPLES_INT;for(int j=0;j<MAX_RING_SAMPLES;j++){if(j>=ringSamples){break;}s+=gather(float(i),float(j),float(ringSamples),uv,blurFactor,blur,color);}}color/=s;}\\n#ifdef SHOW_FOCUS\\nfloat edge=0.002*linearDepth;float m=clamp(smoothstep(0.0,edge,blur),0.0,1.0);float e=clamp(smoothstep(1.0-edge,1.0,blur),0.0,1.0);color=mix(color,vec3(1.0,0.5,0.0),(1.0-m)*0.6);color=mix(color,vec3(0.0,0.5,1.0),((1.0-e)-(1.0-m))*0.2);\\n#endif\\noutputColor=vec4(color,inputColor.a);}\";\n\n// src/effects/RealisticBokehEffect.js\nvar RealisticBokehEffect = class extends Effect {\n  constructor({\n    blendFunction,\n    focus = 1,\n    focalLength = 24,\n    fStop = 0.9,\n    luminanceThreshold = 0.5,\n    luminanceGain = 2,\n    bias = 0.5,\n    fringe = 0.7,\n    maxBlur = 1,\n    rings = 3,\n    samples = 2,\n    showFocus = false,\n    manualDoF = false,\n    pentagon = false\n  } = {}) {\n    super(\"RealisticBokehEffect\", realistic_bokeh_default, {\n      blendFunction,\n      attributes: EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"focus\", new Uniform40(focus)],\n        [\"focalLength\", new Uniform40(focalLength)],\n        [\"fStop\", new Uniform40(fStop)],\n        [\"luminanceThreshold\", new Uniform40(luminanceThreshold)],\n        [\"luminanceGain\", new Uniform40(luminanceGain)],\n        [\"bias\", new Uniform40(bias)],\n        [\"fringe\", new Uniform40(fringe)],\n        [\"maxBlur\", new Uniform40(maxBlur)],\n        [\"dof\", new Uniform40(null)]\n      ])\n    });\n    this.rings = rings;\n    this.samples = samples;\n    this.showFocus = showFocus;\n    this.manualDoF = manualDoF;\n    this.pentagon = pentagon;\n  }\n  get rings() {\n    return Number.parseInt(this.defines.get(\"RINGS_INT\"));\n  }\n  set rings(value) {\n    const r = Math.floor(value);\n    this.defines.set(\"RINGS_INT\", r.toFixed(0));\n    this.defines.set(\"RINGS_FLOAT\", r.toFixed(1));\n    this.setChanged();\n  }\n  get samples() {\n    return Number.parseInt(this.defines.get(\"SAMPLES_INT\"));\n  }\n  set samples(value) {\n    const s = Math.floor(value);\n    this.defines.set(\"SAMPLES_INT\", s.toFixed(0));\n    this.defines.set(\"SAMPLES_FLOAT\", s.toFixed(1));\n    this.setChanged();\n  }\n  get showFocus() {\n    return this.defines.has(\"SHOW_FOCUS\");\n  }\n  set showFocus(value) {\n    if (this.showFocus !== value) {\n      if (value) {\n        this.defines.set(\"SHOW_FOCUS\", \"1\");\n      } else {\n        this.defines.delete(\"SHOW_FOCUS\");\n      }\n      this.setChanged();\n    }\n  }\n  get manualDoF() {\n    return this.defines.has(\"MANUAL_DOF\");\n  }\n  set manualDoF(value) {\n    if (this.manualDoF !== value) {\n      if (value) {\n        this.defines.set(\"MANUAL_DOF\", \"1\");\n        this.uniforms.get(\"dof\").value = new Vector44(0.2, 1, 0.2, 2);\n      } else {\n        this.defines.delete(\"MANUAL_DOF\");\n        this.uniforms.get(\"dof\").value = null;\n      }\n      this.setChanged();\n    }\n  }\n  get pentagon() {\n    return this.defines.has(\"PENTAGON\");\n  }\n  set pentagon(value) {\n    if (this.pentagon !== value) {\n      if (value) {\n        this.defines.set(\"PENTAGON\", \"1\");\n      } else {\n        this.defines.delete(\"PENTAGON\");\n      }\n      this.setChanged();\n    }\n  }\n};\n\n// src/effects/ScanlineEffect.js\nimport { Uniform as Uniform41, Vector2 as Vector224 } from \"three\";\n\n// src/effects/glsl/scanlines.frag\nvar scanlines_default = \"uniform float count;\\n#ifdef SCROLL\\nuniform float scrollSpeed;\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float y=uv.y;\\n#ifdef SCROLL\\ny+=time*scrollSpeed;\\n#endif\\nvec2 sl=vec2(sin(y*count),cos(y*count));outputColor=vec4(sl.xyx,inputColor.a);}\";\n\n// src/effects/ScanlineEffect.js\nvar ScanlineEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.OVERLAY, density = 1.25, scrollSpeed = 0 } = {}) {\n    super(\"ScanlineEffect\", scanlines_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"count\", new Uniform41(0)],\n        [\"scrollSpeed\", new Uniform41(0)]\n      ])\n    });\n    this.resolution = new Vector224();\n    this.d = density;\n    this.scrollSpeed = scrollSpeed;\n  }\n  get density() {\n    return this.d;\n  }\n  set density(value) {\n    this.d = value;\n    this.setSize(this.resolution.width, this.resolution.height);\n  }\n  getDensity() {\n    return this.density;\n  }\n  setDensity(value) {\n    this.density = value;\n  }\n  get scrollSpeed() {\n    return this.uniforms.get(\"scrollSpeed\").value;\n  }\n  set scrollSpeed(value) {\n    this.uniforms.get(\"scrollSpeed\").value = value;\n    if (value === 0) {\n      if (this.defines.delete(\"SCROLL\")) {\n        this.setChanged();\n      }\n    } else if (!this.defines.has(\"SCROLL\")) {\n      this.defines.set(\"SCROLL\", \"1\");\n      this.setChanged();\n    }\n  }\n  setSize(width, height) {\n    this.resolution.set(width, height);\n    this.uniforms.get(\"count\").value = Math.round(height * this.density);\n  }\n};\n\n// src/effects/ShockWaveEffect.js\nimport { Uniform as Uniform42, Vector2 as Vector225, Vector3 as Vector35 } from \"three\";\n\n// src/effects/glsl/shock-wave.frag\nvar shock_wave_default = \"uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}\";\n\n// src/effects/glsl/shock-wave.vert\nvar shock_wave_default2 = \"uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}\";\n\n// src/effects/ShockWaveEffect.js\nvar HALF_PI = Math.PI * 0.5;\nvar v2 = new Vector35();\nvar ab = new Vector35();\nvar ShockWaveEffect = class extends Effect {\n  constructor(camera, position = new Vector35(), {\n    speed = 2,\n    maxRadius = 1,\n    waveSize = 0.2,\n    amplitude = 0.05\n  } = {}) {\n    super(\"ShockWaveEffect\", shock_wave_default, {\n      vertexShader: shock_wave_default2,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"active\", new Uniform42(false)],\n        [\"center\", new Uniform42(new Vector225(0.5, 0.5))],\n        [\"cameraDistance\", new Uniform42(1)],\n        [\"size\", new Uniform42(1)],\n        [\"radius\", new Uniform42(-waveSize)],\n        [\"maxRadius\", new Uniform42(maxRadius)],\n        [\"waveSize\", new Uniform42(waveSize)],\n        [\"amplitude\", new Uniform42(amplitude)]\n      ])\n    });\n    this.position = position;\n    this.speed = speed;\n    this.camera = camera;\n    this.screenPosition = this.uniforms.get(\"center\").value;\n    this.time = 0;\n    this.active = false;\n  }\n  set mainCamera(value) {\n    this.camera = value;\n  }\n  get amplitude() {\n    return this.uniforms.get(\"amplitude\").value;\n  }\n  set amplitude(value) {\n    this.uniforms.get(\"amplitude\").value = value;\n  }\n  get waveSize() {\n    return this.uniforms.get(\"waveSize\").value;\n  }\n  set waveSize(value) {\n    this.uniforms.get(\"waveSize\").value = value;\n  }\n  get maxRadius() {\n    return this.uniforms.get(\"maxRadius\").value;\n  }\n  set maxRadius(value) {\n    this.uniforms.get(\"maxRadius\").value = value;\n  }\n  get epicenter() {\n    return this.position;\n  }\n  set epicenter(value) {\n    this.position = value;\n  }\n  getPosition() {\n    return this.position;\n  }\n  setPosition(value) {\n    this.position = value;\n  }\n  getSpeed() {\n    return this.speed;\n  }\n  setSpeed(value) {\n    this.speed = value;\n  }\n  explode() {\n    this.time = 0;\n    this.active = true;\n    this.uniforms.get(\"active\").value = true;\n  }\n  update(renderer, inputBuffer, delta) {\n    const position = this.position;\n    const camera = this.camera;\n    const uniforms = this.uniforms;\n    const uActive = uniforms.get(\"active\");\n    if (this.active) {\n      const waveSize = uniforms.get(\"waveSize\").value;\n      camera.getWorldDirection(v2);\n      ab.copy(camera.position).sub(position);\n      uActive.value = v2.angleTo(ab) > HALF_PI;\n      if (uActive.value) {\n        uniforms.get(\"cameraDistance\").value = camera.position.distanceTo(position);\n        v2.copy(position).project(camera);\n        this.screenPosition.set((v2.x + 1) * 0.5, (v2.y + 1) * 0.5);\n      }\n      this.time += delta * this.speed;\n      const radius = this.time - waveSize;\n      uniforms.get(\"radius\").value = radius;\n      if (radius >= (uniforms.get(\"maxRadius\").value + waveSize) * 2) {\n        this.active = false;\n        uActive.value = false;\n      }\n    }\n  }\n};\n\n// src/effects/SelectiveBloomEffect.js\nimport {\n  BasicDepthPacking as BasicDepthPacking16,\n  Color as Color7,\n  NotEqualDepth as NotEqualDepth2,\n  EqualDepth as EqualDepth2,\n  RGBADepthPacking as RGBADepthPacking5,\n  sRGBEncoding as sRGBEncoding15,\n  WebGLRenderTarget as WebGLRenderTarget19\n} from \"three\";\nvar SelectiveBloomEffect = class extends BloomEffect {\n  constructor(scene, camera, options) {\n    super(options);\n    this.setAttributes(this.getAttributes() | EffectAttribute.DEPTH);\n    this.camera = camera;\n    this.depthPass = new DepthPass(scene, camera);\n    this.clearPass = new ClearPass(true, false, false);\n    this.clearPass.overrideClearColor = new Color7(0);\n    this.depthMaskPass = new ShaderPass(new DepthMaskMaterial());\n    const depthMaskMaterial = this.depthMaskMaterial;\n    depthMaskMaterial.copyCameraSettings(camera);\n    depthMaskMaterial.depthBuffer1 = this.depthPass.texture;\n    depthMaskMaterial.depthPacking1 = RGBADepthPacking5;\n    depthMaskMaterial.depthMode = EqualDepth2;\n    this.renderTargetMasked = new WebGLRenderTarget19(1, 1, { depthBuffer: false });\n    this.renderTargetMasked.texture.name = \"Bloom.Masked\";\n    this.selection = new Selection();\n    this.selection.layer = 11;\n    this._inverted = false;\n    this._ignoreBackground = false;\n  }\n  set mainScene(value) {\n    this.depthPass.mainScene = value;\n  }\n  set mainCamera(value) {\n    this.camera = value;\n    this.depthPass.mainCamera = value;\n    this.depthMaskMaterial.copyCameraSettings(value);\n  }\n  getSelection() {\n    return this.selection;\n  }\n  get depthMaskMaterial() {\n    return this.depthMaskPass.fullscreenMaterial;\n  }\n  get inverted() {\n    return this._inverted;\n  }\n  set inverted(value) {\n    this._inverted = value;\n    this.depthMaskMaterial.depthMode = value ? NotEqualDepth2 : EqualDepth2;\n  }\n  isInverted() {\n    return this.inverted;\n  }\n  setInverted(value) {\n    this.inverted = value;\n  }\n  get ignoreBackground() {\n    return this._ignoreBackground;\n  }\n  set ignoreBackground(value) {\n    this._ignoreBackground = value;\n    this.depthMaskMaterial.maxDepthStrategy = value ? DepthTestStrategy.DISCARD_MAX_DEPTH : DepthTestStrategy.KEEP_MAX_DEPTH;\n  }\n  isBackgroundDisabled() {\n    return this.ignoreBackground;\n  }\n  setBackgroundDisabled(value) {\n    this.ignoreBackground = value;\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking16) {\n    this.depthMaskMaterial.depthBuffer0 = depthTexture;\n    this.depthMaskMaterial.depthPacking0 = depthPacking;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    const camera = this.camera;\n    const selection = this.selection;\n    const inverted = this.inverted;\n    let renderTarget = inputBuffer;\n    if (this.ignoreBackground || !inverted || selection.size > 0) {\n      const mask = camera.layers.mask;\n      camera.layers.set(selection.layer);\n      this.depthPass.render(renderer);\n      camera.layers.mask = mask;\n      renderTarget = this.renderTargetMasked;\n      this.clearPass.render(renderer, renderTarget);\n      this.depthMaskPass.render(renderer, inputBuffer, renderTarget);\n    }\n    super.update(renderer, renderTarget, deltaTime);\n  }\n  setSize(width, height) {\n    super.setSize(width, height);\n    this.renderTargetMasked.setSize(width, height);\n    this.depthPass.setSize(width, height);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    super.initialize(renderer, alpha, frameBufferType);\n    this.clearPass.initialize(renderer, alpha, frameBufferType);\n    this.depthPass.initialize(renderer, alpha, frameBufferType);\n    this.depthMaskPass.initialize(renderer, alpha, frameBufferType);\n    if (frameBufferType !== void 0) {\n      this.renderTargetMasked.texture.type = frameBufferType;\n      if (renderer.outputEncoding === sRGBEncoding15) {\n        this.renderTargetMasked.texture.encoding = sRGBEncoding15;\n      }\n    }\n  }\n};\n\n// src/effects/SepiaEffect.js\nimport { Uniform as Uniform43, Vector3 as Vector36 } from \"three\";\n\n// src/effects/glsl/sepia.frag\nvar sepia_default = \"uniform vec3 weightsR;uniform vec3 weightsG;uniform vec3 weightsB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,weightsR),dot(inputColor.rgb,weightsG),dot(inputColor.rgb,weightsB));outputColor=vec4(color,inputColor.a);}\";\n\n// src/effects/SepiaEffect.js\nvar SepiaEffect = class extends Effect {\n  constructor({ blendFunction, intensity = 1 } = {}) {\n    super(\"SepiaEffect\", sepia_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"weightsR\", new Uniform43(new Vector36(0.393, 0.769, 0.189))],\n        [\"weightsG\", new Uniform43(new Vector36(0.349, 0.686, 0.168))],\n        [\"weightsB\", new Uniform43(new Vector36(0.272, 0.534, 0.131))]\n      ])\n    });\n  }\n  get intensity() {\n    return this.blendMode.opacity.value;\n  }\n  set intensity(value) {\n    this.blendMode.opacity.value = value;\n  }\n  getIntensity() {\n    return this.intensity;\n  }\n  setIntensity(value) {\n    this.intensity = value;\n  }\n  get weightsR() {\n    return this.uniforms.get(\"weightsR\").value;\n  }\n  get weightsG() {\n    return this.uniforms.get(\"weightsG\").value;\n  }\n  get weightsB() {\n    return this.uniforms.get(\"weightsB\").value;\n  }\n};\n\n// src/effects/SMAAEffect.js\nimport {\n  BasicDepthPacking as BasicDepthPacking17,\n  Color as Color8,\n  LinearFilter as LinearFilter5,\n  LoadingManager as LoadingManager2,\n  NearestFilter as NearestFilter8,\n  Texture as Texture3,\n  Uniform as Uniform44,\n  WebGLRenderTarget as WebGLRenderTarget20\n} from \"three\";\n\n// src/textures/smaa/searchImageDataURL.js\nvar searchImageDataURL_default = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC\";\n\n// src/textures/smaa/areaImageDataURL.js\nvar areaImageDataURL_default = \"data:image/png;base64,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\";\n\n// src/effects/glsl/smaa.frag\nvar smaa_default = \"uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}\";\n\n// src/effects/glsl/smaa.vert\nvar smaa_default2 = \"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}\";\n\n// src/effects/SMAAEffect.js\nvar SMAAEffect = class extends Effect {\n  constructor({\n    blendFunction = BlendFunction.SRC,\n    preset = SMAAPreset.MEDIUM,\n    edgeDetectionMode = EdgeDetectionMode.COLOR,\n    predicationMode = PredicationMode.DISABLED\n  } = {}) {\n    super(\"SMAAEffect\", smaa_default, {\n      vertexShader: smaa_default2,\n      blendFunction,\n      attributes: EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"weightMap\", new Uniform44(null)]\n      ])\n    });\n    let searchImage, areaImage;\n    if (arguments.length > 1) {\n      searchImage = arguments[0];\n      areaImage = arguments[1];\n      if (arguments.length > 2) {\n        preset = arguments[2];\n      }\n      if (arguments.length > 3) {\n        edgeDetectionMode = arguments[3];\n      }\n    }\n    this.renderTargetEdges = new WebGLRenderTarget20(1, 1, { depthBuffer: false });\n    this.renderTargetEdges.texture.name = \"SMAA.Edges\";\n    this.renderTargetWeights = this.renderTargetEdges.clone();\n    this.renderTargetWeights.texture.name = \"SMAA.Weights\";\n    this.uniforms.get(\"weightMap\").value = this.renderTargetWeights.texture;\n    this.clearPass = new ClearPass(true, false, false);\n    this.clearPass.overrideClearColor = new Color8(0);\n    this.clearPass.overrideClearAlpha = 1;\n    this.edgeDetectionPass = new ShaderPass(new EdgeDetectionMaterial());\n    this.edgeDetectionMaterial.edgeDetectionMode = edgeDetectionMode;\n    this.edgeDetectionMaterial.predicationMode = predicationMode;\n    this.weightsPass = new ShaderPass(new SMAAWeightsMaterial());\n    const loadingManager = new LoadingManager2();\n    loadingManager.onLoad = () => {\n      const searchTexture = new Texture3(searchImage);\n      searchTexture.name = \"SMAA.Search\";\n      searchTexture.magFilter = NearestFilter8;\n      searchTexture.minFilter = NearestFilter8;\n      searchTexture.generateMipmaps = false;\n      searchTexture.needsUpdate = true;\n      searchTexture.flipY = true;\n      this.weightsMaterial.searchTexture = searchTexture;\n      const areaTexture = new Texture3(areaImage);\n      areaTexture.name = \"SMAA.Area\";\n      areaTexture.magFilter = LinearFilter5;\n      areaTexture.minFilter = LinearFilter5;\n      areaTexture.generateMipmaps = false;\n      areaTexture.needsUpdate = true;\n      areaTexture.flipY = false;\n      this.weightsMaterial.areaTexture = areaTexture;\n      this.dispatchEvent({ type: \"load\" });\n    };\n    loadingManager.itemStart(\"search\");\n    loadingManager.itemStart(\"area\");\n    if (searchImage !== void 0 && areaImage !== void 0) {\n      loadingManager.itemEnd(\"search\");\n      loadingManager.itemEnd(\"area\");\n    } else if (typeof Image !== \"undefined\") {\n      searchImage = new Image();\n      areaImage = new Image();\n      searchImage.addEventListener(\"load\", () => loadingManager.itemEnd(\"search\"));\n      areaImage.addEventListener(\"load\", () => loadingManager.itemEnd(\"area\"));\n      searchImage.src = searchImageDataURL_default;\n      areaImage.src = areaImageDataURL_default;\n    }\n    this.applyPreset(preset);\n  }\n  get edgesTexture() {\n    return this.renderTargetEdges.texture;\n  }\n  getEdgesTexture() {\n    return this.edgesTexture;\n  }\n  get weightsTexture() {\n    return this.renderTargetWeights.texture;\n  }\n  getWeightsTexture() {\n    return this.weightsTexture;\n  }\n  get edgeDetectionMaterial() {\n    return this.edgeDetectionPass.fullscreenMaterial;\n  }\n  get colorEdgesMaterial() {\n    return this.edgeDetectionMaterial;\n  }\n  getEdgeDetectionMaterial() {\n    return this.edgeDetectionMaterial;\n  }\n  get weightsMaterial() {\n    return this.weightsPass.fullscreenMaterial;\n  }\n  getWeightsMaterial() {\n    return this.weightsMaterial;\n  }\n  setEdgeDetectionThreshold(threshold) {\n    this.edgeDetectionMaterial.edgeDetectionThreshold = threshold;\n  }\n  setOrthogonalSearchSteps(steps) {\n    this.weightsMaterial.orthogonalSearchSteps = steps;\n  }\n  applyPreset(preset) {\n    const edgeDetectionMaterial = this.edgeDetectionMaterial;\n    const weightsMaterial = this.weightsMaterial;\n    switch (preset) {\n      case SMAAPreset.LOW:\n        edgeDetectionMaterial.edgeDetectionThreshold = 0.15;\n        weightsMaterial.orthogonalSearchSteps = 4;\n        weightsMaterial.diagonalDetection = false;\n        weightsMaterial.cornerDetection = false;\n        break;\n      case SMAAPreset.MEDIUM:\n        edgeDetectionMaterial.edgeDetectionThreshold = 0.1;\n        weightsMaterial.orthogonalSearchSteps = 8;\n        weightsMaterial.diagonalDetection = false;\n        weightsMaterial.cornerDetection = false;\n        break;\n      case SMAAPreset.HIGH:\n        edgeDetectionMaterial.edgeDetectionThreshold = 0.1;\n        weightsMaterial.orthogonalSearchSteps = 16;\n        weightsMaterial.diagonalSearchSteps = 8;\n        weightsMaterial.cornerRounding = 25;\n        weightsMaterial.diagonalDetection = true;\n        weightsMaterial.cornerDetection = true;\n        break;\n      case SMAAPreset.ULTRA:\n        edgeDetectionMaterial.edgeDetectionThreshold = 0.05;\n        weightsMaterial.orthogonalSearchSteps = 32;\n        weightsMaterial.diagonalSearchSteps = 16;\n        weightsMaterial.cornerRounding = 25;\n        weightsMaterial.diagonalDetection = true;\n        weightsMaterial.cornerDetection = true;\n        break;\n    }\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking17) {\n    this.edgeDetectionMaterial.depthBuffer = depthTexture;\n    this.edgeDetectionMaterial.depthPacking = depthPacking;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    this.clearPass.render(renderer, this.renderTargetEdges);\n    this.edgeDetectionPass.render(renderer, inputBuffer, this.renderTargetEdges);\n    this.weightsPass.render(renderer, this.renderTargetEdges, this.renderTargetWeights);\n  }\n  setSize(width, height) {\n    this.edgeDetectionMaterial.setSize(width, height);\n    this.weightsMaterial.setSize(width, height);\n    this.renderTargetEdges.setSize(width, height);\n    this.renderTargetWeights.setSize(width, height);\n  }\n  dispose() {\n    const { searchTexture, areaTexture } = this.weightsMaterial;\n    if (searchTexture !== null && areaTexture !== null) {\n      searchTexture.dispose();\n      areaTexture.dispose();\n    }\n    super.dispose();\n  }\n  static get searchImageDataURL() {\n    return searchImageDataURL_default;\n  }\n  static get areaImageDataURL() {\n    return areaImageDataURL_default;\n  }\n};\n\n// src/effects/SSAOEffect.js\nimport { BasicDepthPacking as BasicDepthPacking18, Color as Color9, RepeatWrapping as RepeatWrapping3, RGBAFormat as RGBAFormat5, Uniform as Uniform45, WebGLRenderTarget as WebGLRenderTarget21 } from \"three\";\n\n// src/effects/glsl/ssao.frag\nvar ssao_default3 = \"uniform lowp sampler2D aoBuffer;uniform float luminanceInfluence;uniform float intensity;\\n#if THREE_REVISION < 143\\n#define luminance(v) linearToRelativeLuminance(v)\\n#endif\\n#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH)\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D normalDepthBuffer;\\n#else\\nuniform mediump sampler2D normalDepthBuffer;\\n#endif\\n#endif\\n#ifdef COLORIZE\\nuniform vec3 color;\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float aoLinear=texture2D(aoBuffer,uv).r;\\n#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH) && __VERSION__ == 300\\nvec4 normalDepth[4];normalDepth[0]=textureOffset(normalDepthBuffer,uv,ivec2(0,0));normalDepth[1]=textureOffset(normalDepthBuffer,uv,ivec2(0,1));normalDepth[2]=textureOffset(normalDepthBuffer,uv,ivec2(1,0));normalDepth[3]=textureOffset(normalDepthBuffer,uv,ivec2(1,1));float dot01=dot(normalDepth[0].rgb,normalDepth[1].rgb);float dot02=dot(normalDepth[0].rgb,normalDepth[2].rgb);float dot03=dot(normalDepth[0].rgb,normalDepth[3].rgb);float minDot=min(dot01,min(dot02,dot03));float s=step(THRESHOLD,minDot);float smallestDistance=1.0;int index;for(int i=0;i<4;++i){float distance=abs(depth-normalDepth[i].a);if(distance<smallestDistance){smallestDistance=distance;index=i;}}ivec2 offsets[4];offsets[0]=ivec2(0,0);offsets[1]=ivec2(0,1);offsets[2]=ivec2(1,0);offsets[3]=ivec2(1,1);ivec2 coord=ivec2(uv*vec2(textureSize(aoBuffer,0)))+offsets[index];float aoNearest=texelFetch(aoBuffer,coord,0).r;float ao=mix(aoNearest,aoLinear,s);\\n#else\\nfloat ao=aoLinear;\\n#endif\\nfloat l=luminance(inputColor.rgb);ao=mix(ao,0.0,l*luminanceInfluence);ao=clamp(ao*intensity,0.0,1.0);\\n#ifdef COLORIZE\\noutputColor=vec4(1.0-ao*(1.0-color),inputColor.a);\\n#else\\noutputColor=vec4(vec3(1.0-ao),inputColor.a);\\n#endif\\n}\";\n\n// src/effects/SSAOEffect.js\nvar NOISE_TEXTURE_SIZE = 64;\nvar SSAOEffect = class extends Effect {\n  constructor(camera, normalBuffer, {\n    blendFunction = BlendFunction.MULTIPLY,\n    samples = 9,\n    rings = 7,\n    normalDepthBuffer = null,\n    depthAwareUpsampling = true,\n    worldDistanceThreshold,\n    worldDistanceFalloff,\n    worldProximityThreshold,\n    worldProximityFalloff,\n    distanceThreshold = 0.97,\n    distanceFalloff = 0.03,\n    rangeThreshold = 5e-4,\n    rangeFalloff = 1e-3,\n    minRadiusScale = 0.1,\n    luminanceInfluence = 0.7,\n    radius = 0.1825,\n    intensity = 1,\n    bias = 0.025,\n    fade = 0.01,\n    color: color2 = null,\n    resolutionScale = 1,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"SSAOEffect\", ssao_default3, {\n      blendFunction,\n      attributes: EffectAttribute.DEPTH,\n      defines: /* @__PURE__ */ new Map([\n        [\"THRESHOLD\", \"0.997\"]\n      ]),\n      uniforms: /* @__PURE__ */ new Map([\n        [\"aoBuffer\", new Uniform45(null)],\n        [\"normalDepthBuffer\", new Uniform45(normalDepthBuffer)],\n        [\"luminanceInfluence\", new Uniform45(luminanceInfluence)],\n        [\"color\", new Uniform45(null)],\n        [\"intensity\", new Uniform45(intensity)],\n        [\"scale\", new Uniform45(0)]\n      ])\n    });\n    this.renderTarget = new WebGLRenderTarget21(1, 1, { depthBuffer: false });\n    this.renderTarget.texture.name = \"AO.Target\";\n    this.uniforms.get(\"aoBuffer\").value = this.renderTarget.texture;\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n    this.camera = camera;\n    this.depthDownsamplingPass = new DepthDownsamplingPass({ normalBuffer, resolutionScale });\n    this.depthDownsamplingPass.enabled = normalDepthBuffer === null;\n    this.ssaoPass = new ShaderPass(new SSAOMaterial(camera));\n    const noiseTexture = new NoiseTexture(NOISE_TEXTURE_SIZE, NOISE_TEXTURE_SIZE, RGBAFormat5);\n    noiseTexture.wrapS = noiseTexture.wrapT = RepeatWrapping3;\n    const ssaoMaterial = this.ssaoMaterial;\n    ssaoMaterial.normalBuffer = normalBuffer;\n    ssaoMaterial.noiseTexture = noiseTexture;\n    ssaoMaterial.minRadiusScale = minRadiusScale;\n    ssaoMaterial.samples = samples;\n    ssaoMaterial.radius = radius;\n    ssaoMaterial.rings = rings;\n    ssaoMaterial.fade = fade;\n    ssaoMaterial.bias = bias;\n    ssaoMaterial.distanceThreshold = distanceThreshold;\n    ssaoMaterial.distanceFalloff = distanceFalloff;\n    ssaoMaterial.proximityThreshold = rangeThreshold;\n    ssaoMaterial.proximityFalloff = rangeFalloff;\n    if (worldDistanceThreshold !== void 0) {\n      ssaoMaterial.worldDistanceThreshold = worldDistanceThreshold;\n    }\n    if (worldDistanceFalloff !== void 0) {\n      ssaoMaterial.worldDistanceFalloff = worldDistanceFalloff;\n    }\n    if (worldProximityThreshold !== void 0) {\n      ssaoMaterial.worldProximityThreshold = worldProximityThreshold;\n    }\n    if (worldProximityFalloff !== void 0) {\n      ssaoMaterial.worldProximityFalloff = worldProximityFalloff;\n    }\n    if (normalDepthBuffer !== null) {\n      this.ssaoMaterial.normalDepthBuffer = normalDepthBuffer;\n      this.defines.set(\"NORMAL_DEPTH\", \"1\");\n    }\n    this.depthAwareUpsampling = depthAwareUpsampling;\n    this.color = color2;\n  }\n  set mainCamera(value) {\n    this.camera = value;\n    this.ssaoMaterial.copyCameraSettings(value);\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  get ssaoMaterial() {\n    return this.ssaoPass.fullscreenMaterial;\n  }\n  getSSAOMaterial() {\n    return this.ssaoMaterial;\n  }\n  get samples() {\n    return this.ssaoMaterial.samples;\n  }\n  set samples(value) {\n    this.ssaoMaterial.samples = value;\n  }\n  get rings() {\n    return this.ssaoMaterial.rings;\n  }\n  set rings(value) {\n    this.ssaoMaterial.rings = value;\n  }\n  get radius() {\n    return this.ssaoMaterial.radius;\n  }\n  set radius(value) {\n    this.ssaoMaterial.radius = value;\n  }\n  get depthAwareUpsampling() {\n    return this.defines.has(\"DEPTH_AWARE_UPSAMPLING\");\n  }\n  set depthAwareUpsampling(value) {\n    if (this.depthAwareUpsampling !== value) {\n      if (value) {\n        this.defines.set(\"DEPTH_AWARE_UPSAMPLING\", \"1\");\n      } else {\n        this.defines.delete(\"DEPTH_AWARE_UPSAMPLING\");\n      }\n      this.setChanged();\n    }\n  }\n  isDepthAwareUpsamplingEnabled() {\n    return this.depthAwareUpsampling;\n  }\n  setDepthAwareUpsamplingEnabled(value) {\n    this.depthAwareUpsampling = value;\n  }\n  get distanceScaling() {\n    return true;\n  }\n  set distanceScaling(value) {\n  }\n  get color() {\n    return this.uniforms.get(\"color\").value;\n  }\n  set color(value) {\n    const uniforms = this.uniforms;\n    const defines = this.defines;\n    if (value !== null) {\n      if (defines.has(\"COLORIZE\")) {\n        uniforms.get(\"color\").value.set(value);\n      } else {\n        defines.set(\"COLORIZE\", \"1\");\n        uniforms.get(\"color\").value = new Color9(value);\n        this.setChanged();\n      }\n    } else if (defines.has(\"COLORIZE\")) {\n      defines.delete(\"COLORIZE\");\n      uniforms.get(\"color\").value = null;\n      this.setChanged();\n    }\n  }\n  get luminanceInfluence() {\n    return this.uniforms.get(\"luminanceInfluence\").value;\n  }\n  set luminanceInfluence(value) {\n    this.uniforms.get(\"luminanceInfluence\").value = value;\n  }\n  get intensity() {\n    return this.uniforms.get(\"intensity\").value;\n  }\n  set intensity(value) {\n    this.uniforms.get(\"intensity\").value = value;\n  }\n  getColor() {\n    return this.color;\n  }\n  setColor(value) {\n    this.color = value;\n  }\n  setDistanceCutoff(threshold, falloff) {\n    this.ssaoMaterial.distanceThreshold = threshold;\n    this.ssaoMaterial.distanceFalloff = falloff;\n  }\n  setProximityCutoff(threshold, falloff) {\n    this.ssaoMaterial.proximityThreshold = threshold;\n    this.ssaoMaterial.proximityFalloff = falloff;\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking18) {\n    this.depthDownsamplingPass.setDepthTexture(depthTexture, depthPacking);\n    this.ssaoMaterial.depthBuffer = depthTexture;\n    this.ssaoMaterial.depthPacking = depthPacking;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    const renderTarget = this.renderTarget;\n    if (this.depthDownsamplingPass.enabled) {\n      this.depthDownsamplingPass.render(renderer);\n    }\n    this.ssaoPass.render(renderer, null, renderTarget);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    const w = resolution.width, h = resolution.height;\n    this.ssaoMaterial.copyCameraSettings(this.camera);\n    this.ssaoMaterial.setSize(w, h);\n    this.renderTarget.setSize(w, h);\n    this.depthDownsamplingPass.resolution.scale = resolution.scale;\n    this.depthDownsamplingPass.setSize(width, height);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    try {\n      let normalDepthBuffer = this.uniforms.get(\"normalDepthBuffer\").value;\n      if (normalDepthBuffer === null) {\n        this.depthDownsamplingPass.initialize(renderer, alpha, frameBufferType);\n        normalDepthBuffer = this.depthDownsamplingPass.texture;\n        this.uniforms.get(\"normalDepthBuffer\").value = normalDepthBuffer;\n        this.ssaoMaterial.normalDepthBuffer = normalDepthBuffer;\n        this.defines.set(\"NORMAL_DEPTH\", \"1\");\n      }\n    } catch (e) {\n      this.depthDownsamplingPass.enabled = false;\n    }\n  }\n};\n\n// src/effects/TextureEffect.js\nimport { Uniform as Uniform46, UnsignedByteType as UnsignedByteType17 } from \"three\";\n\n// src/effects/glsl/texture.frag\nvar texture_default = \"#ifdef TEXTURE_PRECISION_HIGH\\nuniform mediump sampler2D map;\\n#else\\nuniform lowp sampler2D map;\\n#endif\\nvarying vec2 vUv2;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){\\n#ifdef UV_TRANSFORM\\nvec4 texel=texelToLinear(texture2D(map,vUv2));\\n#else\\nvec4 texel=texelToLinear(texture2D(map,uv));\\n#endif\\noutputColor=TEXEL;}\";\n\n// src/effects/glsl/texture.vert\nvar texture_default2 = \"#ifdef ASPECT_CORRECTION\\nuniform float scale;\\n#else\\nuniform mat3 uvTransform;\\n#endif\\nvarying vec2 vUv2;void mainSupport(const in vec2 uv){\\n#ifdef ASPECT_CORRECTION\\nvUv2=uv*vec2(aspect,1.0)*scale;\\n#else\\nvUv2=(uvTransform*vec3(uv,1.0)).xy;\\n#endif\\n}\";\n\n// src/effects/TextureEffect.js\nvar TextureEffect = class extends Effect {\n  constructor({ blendFunction, texture = null, aspectCorrection = false } = {}) {\n    super(\"TextureEffect\", texture_default, {\n      blendFunction,\n      defines: /* @__PURE__ */ new Map([\n        [\"TEXEL\", \"texel\"]\n      ]),\n      uniforms: /* @__PURE__ */ new Map([\n        [\"map\", new Uniform46(null)],\n        [\"scale\", new Uniform46(1)],\n        [\"uvTransform\", new Uniform46(null)]\n      ])\n    });\n    this.texture = texture;\n    this.aspectCorrection = aspectCorrection;\n  }\n  get texture() {\n    return this.uniforms.get(\"map\").value;\n  }\n  set texture(value) {\n    const prevTexture = this.texture;\n    const uniforms = this.uniforms;\n    const defines = this.defines;\n    if (prevTexture !== value) {\n      uniforms.get(\"map\").value = value;\n      uniforms.get(\"uvTransform\").value = value.matrix;\n      defines.delete(\"TEXTURE_PRECISION_HIGH\");\n      if (this.renderer !== null) {\n        const decoding = getTextureDecoding(value, this.renderer.capabilities.isWebGL2);\n        defines.set(\"texelToLinear(texel)\", decoding);\n      }\n      if (value !== null) {\n        if (value.matrixAutoUpdate) {\n          defines.set(\"UV_TRANSFORM\", \"1\");\n          this.setVertexShader(texture_default2);\n        } else {\n          defines.delete(\"UV_TRANSFORM\");\n          this.setVertexShader(null);\n        }\n        if (value.type !== UnsignedByteType17) {\n          defines.set(\"TEXTURE_PRECISION_HIGH\", \"1\");\n        }\n        if (prevTexture === null || prevTexture.type !== value.type || prevTexture.encoding !== value.encoding) {\n          this.setChanged();\n        }\n      }\n    }\n  }\n  getTexture() {\n    return this.texture;\n  }\n  setTexture(value) {\n    this.texture = value;\n  }\n  get aspectCorrection() {\n    return this.defines.has(\"ASPECT_CORRECTION\");\n  }\n  set aspectCorrection(value) {\n    if (this.aspectCorrection !== value) {\n      if (value) {\n        this.defines.set(\"ASPECT_CORRECTION\", \"1\");\n      } else {\n        this.defines.delete(\"ASPECT_CORRECTION\");\n      }\n      this.setChanged();\n    }\n  }\n  get uvTransform() {\n    const texture = this.texture;\n    return texture !== null && texture.matrixAutoUpdate;\n  }\n  set uvTransform(value) {\n    const texture = this.texture;\n    if (texture !== null) {\n      texture.matrixAutoUpdate = value;\n    }\n  }\n  setTextureSwizzleRGBA(r, g = r, b = r, a = r) {\n    const rgba = \"rgba\";\n    let swizzle = \"\";\n    if (r !== ColorChannel.RED || g !== ColorChannel.GREEN || b !== ColorChannel.BLUE || a !== ColorChannel.ALPHA) {\n      swizzle = [\".\", rgba[r], rgba[g], rgba[b], rgba[a]].join(\"\");\n    }\n    this.defines.set(\"TEXEL\", \"texel\" + swizzle);\n    this.setChanged();\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    if (this.texture.matrixAutoUpdate) {\n      this.texture.updateMatrix();\n    }\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    const decoding = getTextureDecoding(this.texture, renderer.capabilities.isWebGL2);\n    this.defines.set(\"texelToLinear(texel)\", decoding);\n    this.renderer = renderer;\n  }\n};\n\n// src/effects/TiltShiftEffect.js\nimport { sRGBEncoding as sRGBEncoding16, Uniform as Uniform47, Vector2 as Vector226, WebGLRenderTarget as WebGLRenderTarget22 } from \"three\";\n\n// src/effects/glsl/tilt-shift.frag\nvar tilt_shift_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D map;\\n#else\\nuniform lowp sampler2D map;\\n#endif\\nuniform vec2 maskParams;varying vec2 vUv2;float linearGradientMask(const in float x){return step(maskParams.x,x)-step(maskParams.y,x);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float mask=linearGradientMask(vUv2.y);vec4 texel=texture2D(map,uv);outputColor=mix(texel,inputColor,mask);}\";\n\n// src/effects/glsl/tilt-shift.vert\nvar tilt_shift_default2 = \"uniform vec2 rotation;varying vec2 vUv2;void mainSupport(const in vec2 uv){vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));}\";\n\n// src/effects/TiltShiftEffect.js\nvar TiltShiftEffect = class extends Effect {\n  constructor({\n    blendFunction,\n    offset = 0,\n    rotation = 0,\n    focusArea = 0.4,\n    feather = 0.3,\n    kernelSize = KernelSize.MEDIUM,\n    resolutionScale = 0.5,\n    resolutionX = Resolution.AUTO_SIZE,\n    resolutionY = Resolution.AUTO_SIZE\n  } = {}) {\n    super(\"TiltShiftEffect\", tilt_shift_default, {\n      vertexShader: tilt_shift_default2,\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"rotation\", new Uniform47(new Vector226())],\n        [\"maskParams\", new Uniform47(new Vector226())],\n        [\"map\", new Uniform47(null)]\n      ])\n    });\n    this._offset = offset;\n    this._focusArea = focusArea;\n    this._feather = feather;\n    this.renderTarget = new WebGLRenderTarget22(1, 1, { depthBuffer: false });\n    this.renderTarget.texture.name = \"TiltShift.Target\";\n    this.uniforms.get(\"map\").value = this.renderTarget.texture;\n    this.blurPass = new TiltShiftBlurPass({\n      kernelSize,\n      resolutionScale,\n      resolutionX,\n      resolutionY,\n      offset,\n      rotation,\n      focusArea,\n      feather\n    });\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n    this.rotation = rotation;\n    this.updateParams();\n  }\n  updateParams() {\n    const params = this.uniforms.get(\"maskParams\").value;\n    const x = Math.max(this.focusArea - this.feather, 0);\n    params.set(this.offset - x, this.offset + x);\n  }\n  get rotation() {\n    return Math.acos(this.uniforms.get(\"rotation\").value.x);\n  }\n  set rotation(value) {\n    this.uniforms.get(\"rotation\").value.set(Math.cos(value), Math.sin(value));\n    this.blurPass.blurMaterial.rotation = value;\n  }\n  get offset() {\n    return this._offset;\n  }\n  set offset(value) {\n    this._offset = value;\n    this.blurPass.blurMaterial.offset = value;\n    this.updateParams();\n  }\n  get focusArea() {\n    return this._focusArea;\n  }\n  set focusArea(value) {\n    this._focusArea = value;\n    this.blurPass.blurMaterial.focusArea = value;\n    this.updateParams();\n  }\n  get feather() {\n    return this._feather;\n  }\n  set feather(value) {\n    this._feather = value;\n    this.blurPass.blurMaterial.feather = value;\n    this.updateParams();\n  }\n  get bias() {\n    return 0;\n  }\n  set bias(value) {\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    this.blurPass.render(renderer, inputBuffer, this.renderTarget);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    this.renderTarget.setSize(resolution.width, resolution.height);\n    this.blurPass.resolution.copy(resolution);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    this.blurPass.initialize(renderer, alpha, frameBufferType);\n    if (frameBufferType !== void 0) {\n      this.renderTarget.texture.type = frameBufferType;\n      if (renderer.outputEncoding === sRGBEncoding16) {\n        this.renderTarget.texture.encoding = sRGBEncoding16;\n      }\n    }\n  }\n};\n\n// src/effects/ToneMappingEffect.js\nimport { LinearMipmapLinearFilter, Uniform as Uniform48, WebGLRenderTarget as WebGLRenderTarget23 } from \"three\";\n\n// src/effects/glsl/tone-mapping.frag\nvar tone_mapping_default = \"#include <tonemapping_pars_fragment>\\n#if THREE_REVISION < 143\\n#define luminance(v) linearToRelativeLuminance(v)\\n#endif\\nuniform lowp sampler2D luminanceBuffer;uniform float whitePoint;uniform float middleGrey;\\n#if TONE_MAPPING_MODE != 2\\nuniform float averageLuminance;\\n#endif\\nvec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);\\n#if TONE_MAPPING_MODE == 2\\nfloat lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));\\n#else\\nfloat lumAvg=averageLuminance;\\n#endif\\nfloat lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){\\n#if TONE_MAPPING_MODE == 1 || TONE_MAPPING_MODE == 2\\noutputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);\\n#else\\noutputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);\\n#endif\\n}\";\n\n// src/effects/ToneMappingEffect.js\nvar ToneMappingEffect = class extends Effect {\n  constructor({\n    blendFunction = BlendFunction.SRC,\n    adaptive = true,\n    mode = adaptive ? ToneMappingMode.REINHARD2_ADAPTIVE : ToneMappingMode.REINHARD2,\n    resolution = 256,\n    maxLuminance = 16,\n    whitePoint = maxLuminance,\n    middleGrey = 0.6,\n    minLuminance = 0.01,\n    averageLuminance = 1,\n    adaptationRate = 1\n  } = {}) {\n    super(\"ToneMappingEffect\", tone_mapping_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"luminanceBuffer\", new Uniform48(null)],\n        [\"maxLuminance\", new Uniform48(maxLuminance)],\n        [\"whitePoint\", new Uniform48(whitePoint)],\n        [\"middleGrey\", new Uniform48(middleGrey)],\n        [\"averageLuminance\", new Uniform48(averageLuminance)]\n      ])\n    });\n    this.renderTargetLuminance = new WebGLRenderTarget23(1, 1, {\n      minFilter: LinearMipmapLinearFilter,\n      depthBuffer: false\n    });\n    this.renderTargetLuminance.texture.generateMipmaps = true;\n    this.renderTargetLuminance.texture.name = \"Luminance\";\n    this.luminancePass = new LuminancePass({\n      renderTarget: this.renderTargetLuminance\n    });\n    this.adaptiveLuminancePass = new AdaptiveLuminancePass(this.luminancePass.texture, {\n      minLuminance,\n      adaptationRate\n    });\n    this.uniforms.get(\"luminanceBuffer\").value = this.adaptiveLuminancePass.texture;\n    this.resolution = resolution;\n    this.mode = mode;\n  }\n  get mode() {\n    return Number(this.defines.get(\"TONE_MAPPING_MODE\"));\n  }\n  set mode(value) {\n    if (this.mode !== value) {\n      this.defines.clear();\n      this.defines.set(\"TONE_MAPPING_MODE\", value.toFixed(0));\n      switch (value) {\n        case ToneMappingMode.REINHARD:\n          this.defines.set(\"toneMapping(texel)\", \"ReinhardToneMapping(texel)\");\n          break;\n        case ToneMappingMode.OPTIMIZED_CINEON:\n          this.defines.set(\"toneMapping(texel)\", \"OptimizedCineonToneMapping(texel)\");\n          break;\n        case ToneMappingMode.ACES_FILMIC:\n          this.defines.set(\"toneMapping(texel)\", \"ACESFilmicToneMapping(texel)\");\n          break;\n        default:\n          this.defines.set(\"toneMapping(texel)\", \"texel\");\n          break;\n      }\n      this.adaptiveLuminancePass.enabled = value === ToneMappingMode.REINHARD2_ADAPTIVE;\n      this.setChanged();\n    }\n  }\n  getMode() {\n    return this.mode;\n  }\n  setMode(value) {\n    this.mode = value;\n  }\n  get whitePoint() {\n    return this.uniforms.get(\"whitePoint\").value;\n  }\n  set whitePoint(value) {\n    this.uniforms.get(\"whitePoint\").value = value;\n  }\n  get middleGrey() {\n    return this.uniforms.get(\"middleGrey\").value;\n  }\n  set middleGrey(value) {\n    this.uniforms.get(\"middleGrey\").value = value;\n  }\n  get averageLuminance() {\n    return this.uniforms.get(\"averageLuminance\").value;\n  }\n  set averageLuminance(value) {\n    this.uniforms.get(\"averageLuminance\").value = value;\n  }\n  get adaptiveLuminanceMaterial() {\n    return this.adaptiveLuminancePass.fullscreenMaterial;\n  }\n  getAdaptiveLuminanceMaterial() {\n    return this.adaptiveLuminanceMaterial;\n  }\n  get resolution() {\n    return this.luminancePass.resolution.width;\n  }\n  set resolution(value) {\n    const exponent = Math.max(0, Math.ceil(Math.log2(value)));\n    const size = Math.pow(2, exponent);\n    this.luminancePass.resolution.setPreferredSize(size, size);\n    this.adaptiveLuminanceMaterial.mipLevel1x1 = exponent;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  setResolution(value) {\n    this.resolution = value;\n  }\n  get adaptive() {\n    return this.mode === ToneMappingMode.REINHARD2_ADAPTIVE;\n  }\n  set adaptive(value) {\n    this.mode = value ? ToneMappingMode.REINHARD2_ADAPTIVE : ToneMappingMode.REINHARD2;\n  }\n  get adaptationRate() {\n    return this.adaptiveLuminanceMaterial.adaptationRate;\n  }\n  set adaptationRate(value) {\n    this.adaptiveLuminanceMaterial.adaptationRate = value;\n  }\n  get distinction() {\n    console.warn(this.name, \"distinction was removed.\");\n    return 1;\n  }\n  set distinction(value) {\n    console.warn(this.name, \"distinction was removed.\");\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    if (this.adaptiveLuminancePass.enabled) {\n      this.luminancePass.render(renderer, inputBuffer);\n      this.adaptiveLuminancePass.render(renderer, null, null, deltaTime);\n    }\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    this.adaptiveLuminancePass.initialize(renderer, alpha, frameBufferType);\n  }\n};\n\n// src/effects/VignetteEffect.js\nimport { Uniform as Uniform49 } from \"three\";\n\n// src/effects/glsl/vignette.frag\nvar vignette_default = \"uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\\n#if VIGNETTE_TECHNIQUE == 0\\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\\n#else\\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\\n#endif\\noutputColor=vec4(color,inputColor.a);}\";\n\n// src/effects/VignetteEffect.js\nvar VignetteEffect = class extends Effect {\n  constructor({\n    blendFunction,\n    technique = VignetteTechnique.DEFAULT,\n    eskil = false,\n    offset = 0.5,\n    darkness = 0.5\n  } = {}) {\n    super(\"VignetteEffect\", vignette_default, {\n      blendFunction,\n      defines: /* @__PURE__ */ new Map([\n        [\"VIGNETTE_TECHNIQUE\", technique.toFixed(0)]\n      ]),\n      uniforms: /* @__PURE__ */ new Map([\n        [\"offset\", new Uniform49(offset)],\n        [\"darkness\", new Uniform49(darkness)]\n      ])\n    });\n  }\n  get technique() {\n    return Number(this.defines.get(\"VIGNETTE_TECHNIQUE\"));\n  }\n  set technique(value) {\n    if (this.technique !== value) {\n      this.defines.set(\"VIGNETTE_TECHNIQUE\", value.toFixed(0));\n      this.setChanged();\n    }\n  }\n  get eskil() {\n    return this.technique === VignetteTechnique.ESKIL;\n  }\n  set eskil(value) {\n    this.technique = value ? VignetteTechnique.ESKIL : VignetteTechnique.DEFAULT;\n  }\n  getTechnique() {\n    return this.technique;\n  }\n  setTechnique(value) {\n    this.technique = value;\n  }\n  get offset() {\n    return this.uniforms.get(\"offset\").value;\n  }\n  set offset(value) {\n    this.uniforms.get(\"offset\").value = value;\n  }\n  getOffset() {\n    return this.offset;\n  }\n  setOffset(value) {\n    this.offset = value;\n  }\n  get darkness() {\n    return this.uniforms.get(\"darkness\").value;\n  }\n  set darkness(value) {\n    this.uniforms.get(\"darkness\").value = value;\n  }\n  getDarkness() {\n    return this.darkness;\n  }\n  setDarkness(value) {\n    this.darkness = value;\n  }\n};\n\n// src/loaders/LUT3dlLoader.js\nimport { FileLoader, Loader, LoadingManager as LoadingManager3 } from \"three\";\nvar LUT3dlLoader = class extends Loader {\n  load(url, onLoad = () => {\n  }, onProgress = () => {\n  }, onError = null) {\n    const externalManager = this.manager;\n    const internalManager = new LoadingManager3();\n    const loader = new FileLoader(internalManager);\n    loader.setPath(this.path);\n    loader.setResponseType(\"text\");\n    return new Promise((resolve, reject) => {\n      internalManager.onError = (url2) => {\n        externalManager.itemError(url2);\n        if (onError !== null) {\n          onError(`Failed to load ${url2}`);\n          resolve();\n        } else {\n          reject(`Failed to load ${url2}`);\n        }\n      };\n      externalManager.itemStart(url);\n      loader.load(url, (data) => {\n        try {\n          const result = this.parse(data);\n          externalManager.itemEnd(url);\n          onLoad(result);\n          resolve(result);\n        } catch (e) {\n          console.error(e);\n          internalManager.onError(url);\n        }\n      }, onProgress);\n    });\n  }\n  parse(input) {\n    const regExpGridInfo = /^[\\d ]+$/m;\n    const regExpDataPoints = /^([\\d.e+-]+) +([\\d.e+-]+) +([\\d.e+-]+) *$/gm;\n    let result = regExpGridInfo.exec(input);\n    if (result === null) {\n      throw new Error(\"Missing grid information\");\n    }\n    const gridLines = result[0].trim().split(/\\s+/g).map((n) => Number(n));\n    const gridStep = gridLines[1] - gridLines[0];\n    const size = gridLines.length;\n    const sizeSq = size ** 2;\n    for (let i = 1, l = gridLines.length; i < l; ++i) {\n      if (gridStep !== gridLines[i] - gridLines[i - 1]) {\n        throw new Error(\"Inconsistent grid size\");\n      }\n    }\n    const data = new Float32Array(size ** 3 * 4);\n    let maxValue = 0;\n    let index = 0;\n    while ((result = regExpDataPoints.exec(input)) !== null) {\n      const r = Number(result[1]);\n      const g = Number(result[2]);\n      const b = Number(result[3]);\n      maxValue = Math.max(maxValue, r, g, b);\n      const bLayer = index % size;\n      const gLayer = Math.floor(index / size) % size;\n      const rLayer = Math.floor(index / sizeSq) % size;\n      const d4 = (bLayer * sizeSq + gLayer * size + rLayer) * 4;\n      data[d4 + 0] = r;\n      data[d4 + 1] = g;\n      data[d4 + 2] = b;\n      data[d4 + 3] = 1;\n      ++index;\n    }\n    const bits = Math.ceil(Math.log2(maxValue));\n    const maxBitValue = Math.pow(2, bits);\n    for (let i = 0, l = data.length; i < l; i += 4) {\n      data[i + 0] /= maxBitValue;\n      data[i + 1] /= maxBitValue;\n      data[i + 2] /= maxBitValue;\n    }\n    return new LookupTexture(data, size);\n  }\n};\n\n// src/loaders/LUTCubeLoader.js\nimport { FileLoader as FileLoader2, Loader as Loader2, LoadingManager as LoadingManager4, Vector3 as Vector37 } from \"three\";\nvar LUTCubeLoader = class extends Loader2 {\n  load(url, onLoad = () => {\n  }, onProgress = () => {\n  }, onError = null) {\n    const externalManager = this.manager;\n    const internalManager = new LoadingManager4();\n    const loader = new FileLoader2(internalManager);\n    loader.setPath(this.path);\n    loader.setResponseType(\"text\");\n    return new Promise((resolve, reject) => {\n      internalManager.onError = (url2) => {\n        externalManager.itemError(url2);\n        if (onError !== null) {\n          onError(`Failed to load ${url2}`);\n          resolve();\n        } else {\n          reject(`Failed to load ${url2}`);\n        }\n      };\n      externalManager.itemStart(url);\n      loader.load(url, (data) => {\n        try {\n          const result = this.parse(data);\n          externalManager.itemEnd(url);\n          onLoad(result);\n          resolve(result);\n        } catch (e) {\n          console.error(e);\n          internalManager.onError(url);\n        }\n      }, onProgress);\n    });\n  }\n  parse(input) {\n    const regExpTitle = /TITLE +\"([^\"]*)\"/;\n    const regExpSize = /LUT_3D_SIZE +(\\d+)/;\n    const regExpDomainMin = /DOMAIN_MIN +([\\d.]+) +([\\d.]+) +([\\d.]+)/;\n    const regExpDomainMax = /DOMAIN_MAX +([\\d.]+) +([\\d.]+) +([\\d.]+)/;\n    const regExpDataPoints = /^([\\d.e+-]+) +([\\d.e+-]+) +([\\d.e+-]+) *$/gm;\n    let result = regExpTitle.exec(input);\n    const title = result !== null ? result[1] : null;\n    result = regExpSize.exec(input);\n    if (result === null) {\n      throw new Error(\"Missing LUT_3D_SIZE information\");\n    }\n    const size = Number(result[1]);\n    const data = new Float32Array(size ** 3 * 4);\n    const domainMin = new Vector37(0, 0, 0);\n    const domainMax = new Vector37(1, 1, 1);\n    result = regExpDomainMin.exec(input);\n    if (result !== null) {\n      domainMin.set(Number(result[1]), Number(result[2]), Number(result[3]));\n    }\n    result = regExpDomainMax.exec(input);\n    if (result !== null) {\n      domainMax.set(Number(result[1]), Number(result[2]), Number(result[3]));\n    }\n    if (domainMin.x > domainMax.x || domainMin.y > domainMax.y || domainMin.z > domainMax.z) {\n      domainMin.set(0, 0, 0);\n      domainMax.set(1, 1, 1);\n      throw new Error(\"Invalid input domain\");\n    }\n    let i = 0;\n    while ((result = regExpDataPoints.exec(input)) !== null) {\n      data[i++] = Number(result[1]);\n      data[i++] = Number(result[2]);\n      data[i++] = Number(result[3]);\n      data[i++] = 1;\n    }\n    const lut = new LookupTexture(data, size);\n    lut.domainMin.copy(domainMin);\n    lut.domainMax.copy(domainMax);\n    if (title !== null) {\n      lut.name = title;\n    }\n    return lut;\n  }\n};\n\n// src/loaders/SMAAImageLoader.js\nimport { Loader as Loader3, LoadingManager as LoadingManager5 } from \"three\";\nvar SMAAImageLoader = class extends Loader3 {\n  load(onLoad = () => {\n  }, onError = null) {\n    if (arguments.length === 4) {\n      onLoad = arguments[1];\n      onError = arguments[3];\n    } else if (arguments.length === 3 || typeof arguments[0] !== \"function\") {\n      onLoad = arguments[1];\n      onError = null;\n    }\n    const externalManager = this.manager;\n    const internalManager = new LoadingManager5();\n    return new Promise((resolve, reject) => {\n      const searchImage = new Image();\n      const areaImage = new Image();\n      internalManager.onError = (url) => {\n        externalManager.itemError(url);\n        if (onError !== null) {\n          onError(`Failed to load ${url}`);\n          resolve();\n        } else {\n          reject(`Failed to load ${url}`);\n        }\n      };\n      internalManager.onLoad = () => {\n        const result = [searchImage, areaImage];\n        onLoad(result);\n        resolve(result);\n      };\n      searchImage.addEventListener(\"error\", (e) => {\n        internalManager.itemError(\"smaa-search\");\n      });\n      areaImage.addEventListener(\"error\", (e) => {\n        internalManager.itemError(\"smaa-area\");\n      });\n      searchImage.addEventListener(\"load\", () => {\n        externalManager.itemEnd(\"smaa-search\");\n        internalManager.itemEnd(\"smaa-search\");\n      });\n      areaImage.addEventListener(\"load\", () => {\n        externalManager.itemEnd(\"smaa-area\");\n        internalManager.itemEnd(\"smaa-area\");\n      });\n      externalManager.itemStart(\"smaa-search\");\n      externalManager.itemStart(\"smaa-area\");\n      internalManager.itemStart(\"smaa-search\");\n      internalManager.itemStart(\"smaa-area\");\n      searchImage.src = searchImageDataURL_default;\n      areaImage.src = areaImageDataURL_default;\n    });\n  }\n};\nexport {\n  AdaptiveLuminanceMaterial,\n  AdaptiveLuminancePass,\n  BlendFunction,\n  BlendMode,\n  BloomEffect,\n  KawaseBlurPass as BlurPass,\n  BokehEffect,\n  BokehMaterial,\n  BoxBlurMaterial,\n  BoxBlurPass,\n  BrightnessContrastEffect,\n  ChromaticAberrationEffect,\n  CircleOfConfusionMaterial,\n  ClearMaskPass,\n  ClearPass,\n  ColorAverageEffect,\n  ColorChannel,\n  ColorDepthEffect,\n  EdgeDetectionMaterial as ColorEdgesMaterial,\n  KawaseBlurMaterial as ConvolutionMaterial,\n  CopyMaterial,\n  CopyPass,\n  DepthComparisonMaterial,\n  DepthCopyMaterial,\n  DepthCopyMode,\n  DepthCopyPass,\n  DepthDownsamplingMaterial,\n  DepthDownsamplingPass,\n  DepthEffect,\n  DepthMaskMaterial,\n  DepthOfFieldEffect,\n  DepthPass,\n  DepthPickingPass,\n  DepthCopyPass as DepthSavePass,\n  DepthTestStrategy,\n  Disposable,\n  DotScreenEffect,\n  DownsamplingMaterial,\n  EdgeDetectionMaterial,\n  EdgeDetectionMode,\n  Effect,\n  EffectAttribute,\n  EffectComposer,\n  EffectMaterial,\n  EffectPass,\n  EffectShaderData,\n  EffectShaderSection,\n  FXAAEffect,\n  GammaCorrectionEffect,\n  GaussKernel,\n  GaussianBlurMaterial,\n  GaussianBlurPass,\n  GlitchEffect,\n  GlitchMode,\n  GodRaysEffect,\n  GodRaysMaterial,\n  GridEffect,\n  HueSaturationEffect,\n  Initializable,\n  KawaseBlurMaterial,\n  KawaseBlurPass,\n  KernelSize,\n  LUT1DEffect,\n  LUT3DEffect,\n  LUT3dlLoader,\n  LUTCubeLoader,\n  LUT3DEffect as LUTEffect,\n  LUTOperation,\n  LambdaPass,\n  LookupTexture,\n  LookupTexture as LookupTexture3D,\n  LuminanceMaterial,\n  LuminancePass,\n  MaskFunction,\n  MaskMaterial,\n  MaskPass,\n  MipmapBlurPass,\n  NoiseEffect,\n  NoiseTexture,\n  NormalPass,\n  OutlineMaterial as OutlineEdgesMaterial,\n  OutlineEffect,\n  OutlineMaterial,\n  OverrideMaterialManager,\n  Pass,\n  PixelationEffect,\n  PredicationMode,\n  RawImageData,\n  RealisticBokehEffect,\n  RenderPass,\n  Resizable,\n  Resolution as Resizer,\n  Resolution,\n  SMAAAreaImageData,\n  SMAAEffect,\n  SMAAImageGenerator,\n  SMAAImageLoader,\n  SMAAPreset,\n  SMAASearchImageData,\n  SMAAWeightsMaterial,\n  SSAOEffect,\n  SSAOMaterial,\n  CopyPass as SavePass,\n  ScanlineEffect,\n  EffectShaderSection as Section,\n  Selection,\n  SelectiveBloomEffect,\n  SepiaEffect,\n  ShaderPass,\n  ShockWaveEffect,\n  TetrahedralUpscaler,\n  TextureEffect,\n  TiltShiftBlurMaterial,\n  TiltShiftBlurPass,\n  TiltShiftEffect,\n  Timer,\n  ToneMappingEffect,\n  ToneMappingMode,\n  UpsamplingMaterial,\n  VignetteEffect,\n  VignetteTechnique,\n  WebGLExtension\n};\n","import { BlendFunction, BloomEffect, BrightnessContrastEffect, ChromaticAberrationEffect, ColorAverageEffect, ColorDepthEffect, DepthEffect, EffectComposer as EffectComposer$1, RenderPass, NormalPass, DepthDownsamplingPass, EffectPass, DepthOfFieldEffect, DotScreenEffect, GlitchEffect, GlitchMode, GodRaysEffect, GridEffect, HueSaturationEffect, NoiseEffect, OutlineEffect, PixelationEffect, ScanlineEffect, SelectiveBloomEffect, SepiaEffect, SSAOEffect, SMAAPreset, EdgeDetectionMode, SMAAImageLoader, SMAAEffect, TextureEffect, ToneMappingEffect, VignetteEffect, ShockWaveEffect, LUTEffect } from 'postprocessing';\nimport React, { forwardRef, useMemo, useLayoutEffect, createContext, useEffect, useRef, useImperativeHandle, useContext, useState } from 'react';\nimport { Vector2, HalfFloatType, Vector3, TextureLoader, sRGBEncoding, RepeatWrapping } from 'three';\nimport { useThree, useFrame, useLoader } from '@react-three/fiber';\nimport { isWebGL2Available } from 'three-stdlib';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport { SSREffect } from 'screen-space-reflections';\n\nconst isRef = ref => !!ref.current;\n\nconst resolveRef = ref => isRef(ref) ? ref.current : ref;\nconst wrapEffect = function (effectImpl, defaultBlendMode) {\n  if (defaultBlendMode === void 0) {\n    defaultBlendMode = BlendFunction.NORMAL;\n  }\n\n  return /*#__PURE__*/forwardRef(function Wrap(_ref, ref) {\n    let {\n      blendFunction,\n      opacity,\n      ...props\n    } = _ref;\n    const invalidate = useThree(state => state.invalidate);\n    const effect = useMemo(() => new effectImpl(props), [props]);\n    useLayoutEffect(() => {\n      effect.blendMode.blendFunction = !blendFunction && blendFunction !== 0 ? defaultBlendMode : blendFunction;\n      if (opacity !== undefined) effect.blendMode.opacity.value = opacity;\n      invalidate();\n    }, [blendFunction, effect.blendMode, opacity]);\n    return /*#__PURE__*/React.createElement(\"primitive\", {\n      ref: ref,\n      object: effect,\n      dispose: null\n    });\n  });\n};\nconst useVector2 = (props, key) => {\n  const vec = props[key];\n  return useMemo(() => {\n    if (vec instanceof Vector2) {\n      return new Vector2().set(vec.x, vec.y);\n    } else if (Array.isArray(vec)) {\n      const [x, y] = vec;\n      return new Vector2().set(x, y);\n    }\n  }, [vec]);\n};\n\nconst Bloom = wrapEffect(BloomEffect, BlendFunction.ADD);\n\nconst BrightnessContrast = wrapEffect(BrightnessContrastEffect);\n\nconst ChromaticAberration = /*#__PURE__*/forwardRef(function ChromaticAberration(props, ref) {\n  const offset = useVector2(props, 'offset');\n  const effect = useMemo(() => new ChromaticAberrationEffect({ ...props,\n    offset\n  }), [offset, props]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst ColorAverage = /*#__PURE__*/forwardRef(function ColorAverage(_ref, ref) {\n  let {\n    blendFunction = BlendFunction.NORMAL\n  } = _ref;\n\n  /** Because ColorAverage blendFunction is not an object but a number, we have to define a custom prop \"blendFunction\" */\n  const effect = useMemo(() => new ColorAverageEffect(blendFunction), [blendFunction]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst ColorDepth = wrapEffect(ColorDepthEffect);\n\nconst Depth = wrapEffect(DepthEffect);\n\nconst EffectComposerContext = /*#__PURE__*/createContext(null);\nconst EffectComposer = /*#__PURE__*/React.memo( /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    children,\n    camera,\n    scene,\n    resolutionScale,\n    enabled = true,\n    renderPriority = 1,\n    autoClear = true,\n    depthBuffer,\n    disableNormalPass,\n    stencilBuffer,\n    multisampling = 8,\n    frameBufferType = HalfFloatType\n  } = _ref;\n  const {\n    gl,\n    scene: defaultScene,\n    camera: defaultCamera,\n    size\n  } = useThree();\n  scene = scene || defaultScene;\n  camera = camera || defaultCamera;\n  const [composer, normalPass, downSamplingPass] = useMemo(() => {\n    const webGL2Available = isWebGL2Available(); // Initialize composer\n\n    const effectComposer = new EffectComposer$1(gl, {\n      depthBuffer,\n      stencilBuffer,\n      multisampling: multisampling > 0 && webGL2Available ? multisampling : 0,\n      frameBufferType\n    }); // Add render pass\n\n    effectComposer.addPass(new RenderPass(scene, camera)); // Create normal pass\n\n    let downSamplingPass = null;\n    let normalPass = null;\n\n    if (!disableNormalPass) {\n      normalPass = new NormalPass(scene, camera);\n      normalPass.enabled = false;\n      effectComposer.addPass(normalPass);\n\n      if (resolutionScale !== undefined && webGL2Available) {\n        downSamplingPass = new DepthDownsamplingPass({\n          normalBuffer: normalPass.texture,\n          resolutionScale\n        });\n        downSamplingPass.enabled = false;\n        effectComposer.addPass(downSamplingPass);\n      }\n    }\n\n    return [effectComposer, normalPass, downSamplingPass];\n  }, [camera, gl, depthBuffer, stencilBuffer, multisampling, frameBufferType, scene, disableNormalPass, resolutionScale]);\n  useEffect(() => composer == null ? void 0 : composer.setSize(size.width, size.height), [composer, size]);\n  useFrame((_, delta) => {\n    if (enabled) {\n      gl.autoClear = autoClear;\n      composer.render(delta);\n    }\n  }, enabled ? renderPriority : 0);\n  const group = useRef(null);\n  useLayoutEffect(() => {\n    let effectPass;\n\n    if (group.current && group.current.__r3f && composer) {\n      effectPass = new EffectPass(camera, ...group.current.__r3f.objects);\n      effectPass.renderToScreen = true;\n      composer.addPass(effectPass);\n      if (normalPass) normalPass.enabled = true;\n      if (downSamplingPass) downSamplingPass.enabled = true;\n    }\n\n    return () => {\n      if (effectPass) composer == null ? void 0 : composer.removePass(effectPass);\n      if (normalPass) normalPass.enabled = false;\n      if (downSamplingPass) downSamplingPass.enabled = false;\n    };\n  }, [composer, children, camera, normalPass, downSamplingPass]); // Memoize state, otherwise it would trigger all consumers on every render\n\n  const state = useMemo(() => ({\n    composer,\n    normalPass,\n    downSamplingPass,\n    resolutionScale,\n    camera,\n    scene\n  }), [composer, normalPass, downSamplingPass, resolutionScale, camera, scene]); // Expose the composer\n\n  useImperativeHandle(ref, () => composer, [composer]);\n  return /*#__PURE__*/React.createElement(EffectComposerContext.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, children));\n}));\n\nconst DepthOfField = /*#__PURE__*/forwardRef(function DepthOfField(_ref, ref) {\n  let {\n    target,\n    depthTexture,\n    ...props\n  } = _ref;\n  const invalidate = useThree(state => state.invalidate);\n  const {\n    camera\n  } = useContext(EffectComposerContext);\n  const effect = useMemo(() => new DepthOfFieldEffect(camera, props), [camera, props]);\n  useLayoutEffect(() => {\n    if (target) {\n      const vec = target instanceof Vector3 ? new Vector3().set(target.x, target.y, target.z) : new Vector3().set(target[0], target[1], target[2]);\n      effect.target = vec;\n    }\n\n    if (depthTexture) effect.setDepthTexture(depthTexture.texture, depthTexture.packing);\n    invalidate();\n  }, [target, depthTexture, effect]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst DotScreen = wrapEffect(DotScreenEffect);\n\nconst Glitch = /*#__PURE__*/forwardRef(function Glitch(_ref, ref) {\n  let {\n    active = true,\n    ...props\n  } = _ref;\n  const invalidate = useThree(state => state.invalidate);\n  const delay = useVector2(props, 'delay');\n  const duration = useVector2(props, 'duration');\n  const strength = useVector2(props, 'strength');\n  const effect = useMemo(() => new GlitchEffect({ ...props,\n    delay,\n    duration,\n    strength\n  }), [delay, duration, props, strength]);\n  useLayoutEffect(() => {\n    effect.mode = active ? props.mode || GlitchMode.SPORADIC : GlitchMode.DISABLED;\n    invalidate();\n  }, [active, effect, props.mode]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst GodRays = /*#__PURE__*/forwardRef(function GodRays(props, ref) {\n  const {\n    camera\n  } = useContext(EffectComposerContext);\n  const effect = useMemo(() => new GodRaysEffect(camera, props.sun, props), [camera, props]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst Grid = /*#__PURE__*/forwardRef(function Grid(_ref, ref) {\n  let {\n    size,\n    ...props\n  } = _ref;\n  const invalidate = useThree(state => state.invalidate);\n  const effect = useMemo(() => new GridEffect(props), [props]);\n  useLayoutEffect(() => {\n    if (size) effect.setSize(size.width, size.height);\n    invalidate();\n  }, [effect, size]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst HueSaturation = wrapEffect(HueSaturationEffect);\n\nconst Noise = wrapEffect(NoiseEffect, BlendFunction.COLOR_DODGE);\n\nconst selectionContext = /*#__PURE__*/createContext(null);\nfunction Selection(_ref) {\n  let {\n    children,\n    enabled = true\n  } = _ref;\n  const [selected, select] = useState([]);\n  const value = useMemo(() => ({\n    selected,\n    select,\n    enabled\n  }), [selected, select, enabled]);\n  return /*#__PURE__*/React.createElement(selectionContext.Provider, {\n    value: value\n  }, children);\n}\nfunction Select(_ref2) {\n  let {\n    enabled = false,\n    children,\n    ...props\n  } = _ref2;\n  const group = useRef(null);\n  const api = useContext(selectionContext);\n  useEffect(() => {\n    if (api && enabled) {\n      let changed = false;\n      const current = [];\n      group.current.traverse(o => {\n        o.type === 'Mesh' && current.push(o);\n        if (api.selected.indexOf(o) === -1) changed = true;\n      });\n\n      if (changed) {\n        api.select(state => [...state, ...current]);\n        return () => {\n          api.select(state => state.filter(selected => !current.includes(selected)));\n        };\n      }\n    }\n  }, [enabled, children]);\n  return /*#__PURE__*/React.createElement(\"group\", _extends({\n    ref: group\n  }, props), children);\n}\n\nconst Outline = /*#__PURE__*/forwardRef(function Outline(_ref, forwardRef) {\n  let {\n    selection = [],\n    selectionLayer = 10,\n    blendFunction,\n    patternTexture,\n    edgeStrength,\n    pulseSpeed,\n    visibleEdgeColor,\n    hiddenEdgeColor,\n    width,\n    height,\n    kernelSize,\n    blur,\n    xRay,\n    ...props\n  } = _ref;\n  const invalidate = useThree(state => state.invalidate);\n  const {\n    scene,\n    camera\n  } = useContext(EffectComposerContext);\n  const effect = useMemo(() => new OutlineEffect(scene, camera, {\n    blendFunction,\n    patternTexture,\n    edgeStrength,\n    pulseSpeed,\n    visibleEdgeColor,\n    hiddenEdgeColor,\n    width,\n    height,\n    kernelSize,\n    blur,\n    xRay,\n    ...props\n  }), [blendFunction, blur, camera, edgeStrength, height, hiddenEdgeColor, kernelSize, patternTexture, pulseSpeed, scene, visibleEdgeColor, width, xRay]);\n  const api = useContext(selectionContext);\n  useEffect(() => {\n    // Do not allow array selection if declarative selection is active\n    // TODO: array selection should probably be deprecated altogether\n    if (!api && selection) {\n      effect.selection.set(Array.isArray(selection) ? selection.map(resolveRef) : [resolveRef(selection)]);\n      invalidate();\n      return () => {\n        effect.selection.clear();\n        invalidate();\n      };\n    }\n  }, [effect, selection, api]);\n  useEffect(() => {\n    effect.selectionLayer = selectionLayer;\n    invalidate();\n  }, [effect, selectionLayer]);\n  useRef();\n  useEffect(() => {\n    if (api && api.enabled) {\n      var _api$selected;\n\n      if ((_api$selected = api.selected) != null && _api$selected.length) {\n        effect.selection.set(api.selected);\n        invalidate();\n        return () => {\n          effect.selection.clear();\n          invalidate();\n        };\n      }\n    }\n  }, [api]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: forwardRef,\n    object: effect\n  });\n});\n\nconst Pixelation = /*#__PURE__*/forwardRef(function Pixelation(_ref, ref) {\n  let {\n    granularity = 5\n  } = _ref;\n\n  /** Because GlitchEffect granularity is not an object but a number, we have to define a custom prop \"granularity\" */\n  const effect = useMemo(() => new PixelationEffect(granularity), [granularity]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst Scanline = wrapEffect(ScanlineEffect, BlendFunction.OVERLAY);\n\nconst addLight = (light, effect) => light.layers.enable(effect.selection.layer);\n\nconst removeLight = (light, effect) => light.layers.disable(effect.selection.layer);\n\nconst SelectiveBloom = /*#__PURE__*/forwardRef(function SelectiveBloom(_ref, forwardRef) {\n  let {\n    selection = [],\n    selectionLayer = 10,\n    lights = [],\n    luminanceThreshold,\n    luminanceSmoothing,\n    intensity,\n    width,\n    height,\n    kernelSize,\n    mipmapBlur,\n    radius,\n    levels,\n    ...props\n  } = _ref;\n\n  if (lights.length === 0) {\n    console.warn('SelectiveBloom requires lights to work.');\n  }\n\n  const invalidate = useThree(state => state.invalidate);\n  const {\n    scene,\n    camera\n  } = useContext(EffectComposerContext);\n  const effect = useMemo(() => new SelectiveBloomEffect(scene, camera, {\n    blendFunction: BlendFunction.ADD,\n    luminanceThreshold,\n    luminanceSmoothing,\n    intensity,\n    width,\n    height,\n    kernelSize,\n    mipmapBlur,\n    radius,\n    levels,\n    ...props\n  }), [camera, height, intensity, kernelSize, luminanceSmoothing, luminanceThreshold, scene, width, height, mipmapBlur, radius, levels]);\n  const api = useContext(selectionContext);\n  useEffect(() => {\n    // Do not allow array selection if declarative selection is active\n    // TODO: array selection should probably be deprecated altogether\n    if (!api && selection) {\n      effect.selection.set(Array.isArray(selection) ? selection.map(resolveRef) : [resolveRef(selection)]);\n      invalidate();\n      return () => {\n        effect.selection.clear();\n        invalidate();\n      };\n    }\n  }, [effect, selection, api]);\n  useEffect(() => {\n    effect.selection.layer = selectionLayer;\n    invalidate();\n  }, [effect, selectionLayer]);\n  useEffect(() => {\n    if (lights && lights.length > 0) {\n      lights.forEach(light => addLight(resolveRef(light), effect));\n      invalidate();\n      return () => {\n        lights.forEach(light => removeLight(resolveRef(light), effect));\n        invalidate();\n      };\n    }\n  }, [effect, lights, selectionLayer]);\n  useRef();\n  useEffect(() => {\n    if (api && api.enabled) {\n      var _api$selected;\n\n      if ((_api$selected = api.selected) != null && _api$selected.length) {\n        effect.selection.set(api.selected);\n        invalidate();\n        return () => {\n          effect.selection.clear();\n          invalidate();\n        };\n      }\n    }\n  }, [api]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: forwardRef,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst Sepia = wrapEffect(SepiaEffect);\n\nconst SSAO = /*#__PURE__*/forwardRef(function SSAO(props, ref) {\n  const {\n    camera,\n    normalPass,\n    downSamplingPass,\n    resolutionScale\n  } = useContext(EffectComposerContext);\n  const effect = useMemo(() => {\n    if (normalPass === null && downSamplingPass === null) {\n      console.error('Please enable the NormalPass in the EffectComposer in order to use SSAO.');\n      return null;\n    }\n\n    return new SSAOEffect(camera, normalPass && !downSamplingPass ? normalPass.texture : null, {\n      blendFunction: BlendFunction.MULTIPLY,\n      samples: 30,\n      rings: 4,\n      distanceThreshold: 1.0,\n      distanceFalloff: 0.0,\n      rangeThreshold: 0.5,\n      rangeFalloff: 0.1,\n      luminanceInfluence: 0.9,\n      radius: 20,\n      scale: 0.5,\n      bias: 0.5,\n      intensity: 1.0,\n      color: null,\n      // @ts-ignore\n      normalDepthBuffer: downSamplingPass ? downSamplingPass.texture : null,\n      resolutionScale: resolutionScale != null ? resolutionScale : 1,\n      depthAwareUpsampling: true,\n      ...props\n    });\n  }, [camera, normalPass, props]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst SMAA = /*#__PURE__*/forwardRef(function SMAA(_ref, ref) {\n  let {\n    preset = SMAAPreset.HIGH,\n    edgeDetectionMode = EdgeDetectionMode.COLOR\n  } = _ref;\n  const smaaProps = useLoader(SMAAImageLoader, '');\n  const effect = useMemo(() => new SMAAEffect(...smaaProps, preset, edgeDetectionMode), [smaaProps, preset, edgeDetectionMode]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst Texture = /*#__PURE__*/forwardRef(function Texture(_ref, ref) {\n  let {\n    textureSrc,\n    texture,\n    ...props\n  } = _ref;\n  const t = useLoader(TextureLoader, textureSrc);\n  useLayoutEffect(() => {\n    t.encoding = sRGBEncoding;\n    t.wrapS = t.wrapT = RepeatWrapping;\n  }, [t]);\n  const effect = useMemo(() => new TextureEffect({ ...props,\n    texture: t || texture\n  }), [props, t, texture]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst ToneMapping = wrapEffect(ToneMappingEffect);\n\nconst Vignette = wrapEffect(VignetteEffect);\n\nconst ShockWave = wrapEffect(ShockWaveEffect);\n\nconst LUT = /*#__PURE__*/forwardRef(function LUT(_ref, ref) {\n  let {\n    lut,\n    tetrahedralInterpolation,\n    ...props\n  } = _ref;\n  const invalidate = useThree(state => state.invalidate);\n  const effect = useMemo(() => new LUTEffect(lut, props), [lut, props]);\n  useLayoutEffect(() => {\n    if (lut) effect.setLUT(lut);\n    if (tetrahedralInterpolation) effect.setTetrahedralInterpolationEnabled(tetrahedralInterpolation);\n    invalidate();\n  }, [effect, lut, tetrahedralInterpolation]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst SSR = /*#__PURE__*/forwardRef(function SSR(_ref, ref) {\n  let {\n    ENABLE_BLUR = true,\n    USE_MRT = true,\n    ...props\n  } = _ref;\n  const {\n    invalidate\n  } = useThree();\n  const {\n    scene,\n    camera\n  } = useContext(EffectComposerContext);\n  const effect = useMemo(() => new SSREffect(scene, camera, {\n    ENABLE_BLUR,\n    USE_MRT,\n    ...props\n  }), [SSREffect, scene, camera, ENABLE_BLUR, USE_MRT]);\n  useLayoutEffect(() => {\n    Object.keys(props).forEach(key => effect[key] = props[key]);\n    invalidate();\n  }, [props]);\n  const api = useContext(selectionContext);\n  useEffect(() => {\n    if (api && api.enabled) {\n      var _api$selected;\n\n      if ((_api$selected = api.selected) != null && _api$selected.length) {\n        effect.selection.set(api.selected);\n        invalidate();\n        return () => {\n          effect.selection.clear();\n          invalidate();\n        };\n      }\n    }\n  }, [api]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect\n  });\n});\n\nexport { Bloom, BrightnessContrast, ChromaticAberration, ColorAverage, ColorDepth, Depth, DepthOfField, DotScreen, EffectComposer, EffectComposerContext, Glitch, GodRays, Grid, HueSaturation, LUT, Noise, Outline, Pixelation, SMAA, SSAO, SSR, Scanline, Select, Selection, SelectiveBloom, Sepia, ShockWave, Texture, ToneMapping, Vignette, selectionContext };\n","/*\r\n * @Author: FMC\r\n * @Date: 2024-09-02 20:44:17\r\n * @LastEditors: FMC\r\n * @LastEditTime: 2024-09-04 23:32:15\r\n * @FilePath: \\fmc-personal-blog\\src\\example\\maxwell-car\\maxwell-car-three\\maxwell-effects\\maxwell-effects.jsx\r\n * @Description: \r\n */\r\nimport { useLoader } from '@react-three/fiber'\r\nimport { EffectComposer, SSR, Bloom, LUT } from '@react-three/postprocessing'\r\nimport { useControls } from 'leva'\r\nimport { LUTCubeLoader } from 'postprocessing'\r\n\r\n function MaxwellEffects() {\r\n  const texture = useLoader(LUTCubeLoader, __VITE_URL__ + '/F-6800-STD.cube')\r\n  // const { enabled, ...props } = useControls({\r\n  //   enabled: true,\r\n  //   temporalResolve: true,\r\n  //   STRETCH_MISSED_RAYS: true,\r\n  //   USE_MRT: true,\r\n  //   USE_NORMALMAP: true,\r\n  //   USE_ROUGHNESSMAP: true,\r\n  //   ENABLE_JITTERING: true,\r\n  //   ENABLE_BLUR: true,\r\n  //   DITHERING: false,\r\n  //   temporalResolveMix: { value: 0.9, min: 0, max: 1 },\r\n  //   temporalResolveCorrectionMix: { value: 0.4, min: 0, max: 1 },\r\n  //   maxSamples: { value: 0, min: 0, max: 1 },\r\n  //   resolutionScale: { value: 1, min: 0, max: 1 },\r\n  //   blurMix: { value: 0.2, min: 0, max: 1 },\r\n  //   blurKernelSize: { value: 8, min: 0, max: 8 },\r\n  //   BLUR_EXPONENT: { value: 10, min: 0, max: 20 },\r\n  //   rayStep: { value: 0.5, min: 0, max: 1 },\r\n  //   intensity: { value: 2.5, min: 0, max: 5 },\r\n  //   maxRoughness: { value: 1, min: 0, max: 1 },\r\n  //   jitter: { value: 0.3, min: 0, max: 5 },\r\n  //   jitterSpread: { value: 0.25, min: 0, max: 1 },\r\n  //   jitterRough: { value: 0.1, min: 0, max: 1 },\r\n  //   roughnessFadeOut: { value: 1, min: 0, max: 1 },\r\n  //   rayFadeOut: { value: 0, min: 0, max: 1 },\r\n  //   MAX_STEPS: { value: 20, min: 0, max: 20 },\r\n  //   NUM_BINARY_SEARCH_STEPS: { value: 6, min: 0, max: 10 },\r\n  //   maxDepthDifference: { value: 5, min: 0, max: 10 },\r\n  //   maxDepth: { value: 1, min: 0, max: 1 },\r\n  //   thickness: { value: 3, min: 0, max: 10 },\r\n  //   ior: { value: 1.45, min: 0, max: 2 }\r\n  // })\r\n  return (\r\n\r\n      <EffectComposer disableNormalPass>\r\n        <Bloom luminanceThreshold={0.7} mipmapBlur luminanceSmoothing={0} intensity={1.4} radius={0.85}/>\r\n        {/* <LUT lut={texture} /> */}\r\n      </EffectComposer>\r\n\r\n  )\r\n}\r\nexport default MaxwellEffects","import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tFileLoader,\n\tLoader\n} from 'three';\n\nconst _taskCache = new WeakMap();\n\nclass DRACOLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.decoderPath = '';\n\t\tthis.decoderConfig = {};\n\t\tthis.decoderBinary = null;\n\t\tthis.decoderPending = null;\n\n\t\tthis.workerLimit = 4;\n\t\tthis.workerPool = [];\n\t\tthis.workerNextTaskID = 1;\n\t\tthis.workerSourceURL = '';\n\n\t\tthis.defaultAttributeIDs = {\n\t\t\tposition: 'POSITION',\n\t\t\tnormal: 'NORMAL',\n\t\t\tcolor: 'COLOR',\n\t\t\tuv: 'TEX_COORD'\n\t\t};\n\t\tthis.defaultAttributeTypes = {\n\t\t\tposition: 'Float32Array',\n\t\t\tnormal: 'Float32Array',\n\t\t\tcolor: 'Float32Array',\n\t\t\tuv: 'Float32Array'\n\t\t};\n\n\t}\n\n\tsetDecoderPath( path ) {\n\n\t\tthis.decoderPath = path;\n\n\t\treturn this;\n\n\t}\n\n\tsetDecoderConfig( config ) {\n\n\t\tthis.decoderConfig = config;\n\n\t\treturn this;\n\n\t}\n\n\tsetWorkerLimit( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tthis.decodeDracoFile( buffer, onLoad ).catch( onError );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tdecodeDracoFile( buffer, callback, attributeIDs, attributeTypes ) {\n\n\t\tconst taskConfig = {\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\tuseUniqueIDs: !! attributeIDs\n\t\t};\n\n\t\treturn this.decodeGeometry( buffer, taskConfig ).then( callback );\n\n\t}\n\n\tdecodeGeometry( buffer, taskConfig ) {\n\n\t\tconst taskKey = JSON.stringify( taskConfig );\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( _taskCache.has( buffer ) ) {\n\n\t\t\tconst cachedTask = _taskCache.get( buffer );\n\n\t\t\tif ( cachedTask.key === taskKey ) {\n\n\t\t\t\treturn cachedTask.promise;\n\n\t\t\t} else if ( buffer.byteLength === 0 ) {\n\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\tthrow new Error(\n\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tlet worker;\n\t\tconst taskID = this.workerNextTaskID ++;\n\t\tconst taskCost = buffer.byteLength;\n\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t// when the task completes.\n\t\tconst geometryPending = this._getWorker( taskID, taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\n\n\t\t// Remove task from the task list.\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\tgeometryPending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tthis._releaseTask( worker, taskID );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\t_taskCache.set( buffer, {\n\n\t\t\tkey: taskKey,\n\t\t\tpromise: geometryPending\n\n\t\t} );\n\n\t\treturn geometryPending;\n\n\t}\n\n\t_createGeometry( geometryData ) {\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tif ( geometryData.index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < geometryData.attributes.length; i ++ ) {\n\n\t\t\tconst attribute = geometryData.attributes[ i ];\n\t\t\tconst name = attribute.name;\n\t\t\tconst array = attribute.array;\n\t\t\tconst itemSize = attribute.itemSize;\n\n\t\t\tgeometry.setAttribute( name, new BufferAttribute( array, itemSize ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n\t_loadLibrary( url, responseType ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.decoderPath );\n\t\tloader.setResponseType( responseType );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tloader.load( url, resolve, undefined, reject );\n\n\t\t} );\n\n\t}\n\n\tpreload() {\n\n\t\tthis._initDecoder();\n\n\t\treturn this;\n\n\t}\n\n\t_initDecoder() {\n\n\t\tif ( this.decoderPending ) return this.decoderPending;\n\n\t\tconst useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\tconst librariesPending = [];\n\n\t\tif ( useJS ) {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\n\n\t\t} else {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\n\n\t\t}\n\n\t\tthis.decoderPending = Promise.all( librariesPending )\n\t\t\t.then( ( libraries ) => {\n\n\t\t\t\tconst jsContent = libraries[ 0 ];\n\n\t\t\t\tif ( ! useJS ) {\n\n\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tconst fn = DRACOWorker.toString();\n\n\t\t\t\tconst body = [\n\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\tjsContent,\n\t\t\t\t\t'',\n\t\t\t\t\t'/* worker */',\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\n\t\t\t} );\n\n\t\treturn this.decoderPending;\n\n\t}\n\n\t_getWorker( taskID, taskCost ) {\n\n\t\treturn this._initDecoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tconst worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskCosts = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tconst message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tconst worker = this.workerPool[ this.workerPool.length - 1 ];\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\n\t\t\tworker._taskLoad += taskCost;\n\t\t\treturn worker;\n\n\t\t} );\n\n\t}\n\n\t_releaseTask( worker, taskID ) {\n\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\n\t\tdelete worker._callbacks[ taskID ];\n\t\tdelete worker._taskCosts[ taskID ];\n\n\t}\n\n\tdebug() {\n\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\n\n\t}\n\n\tdispose() {\n\n\t\tfor ( let i = 0; i < this.workerPool.length; ++ i ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\treturn this;\n\n\t}\n\n}\n\n/* WEB WORKER */\n\nfunction DRACOWorker() {\n\n\tlet decoderConfig;\n\tlet decoderPending;\n\n\tonmessage = function ( e ) {\n\n\t\tconst message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\n\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\n\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\tresolve( { draco: draco } );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tDracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'decode':\n\t\t\t\tconst buffer = message.buffer;\n\t\t\t\tconst taskConfig = message.taskConfig;\n\t\t\t\tdecoderPending.then( ( module ) => {\n\n\t\t\t\t\tconst draco = module.draco;\n\t\t\t\t\tconst decoder = new draco.Decoder();\n\t\t\t\t\tconst decoderBuffer = new draco.DecoderBuffer();\n\t\t\t\t\tdecoderBuffer.Init( new Int8Array( buffer ), buffer.byteLength );\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tconst geometry = decodeGeometry( draco, decoder, decoderBuffer, taskConfig );\n\n\t\t\t\t\t\tconst buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\n\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t} finally {\n\n\t\t\t\t\t\tdraco.destroy( decoderBuffer );\n\t\t\t\t\t\tdraco.destroy( decoder );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction decodeGeometry( draco, decoder, decoderBuffer, taskConfig ) {\n\n\t\tconst attributeIDs = taskConfig.attributeIDs;\n\t\tconst attributeTypes = taskConfig.attributeTypes;\n\n\t\tlet dracoGeometry;\n\t\tlet decodingStatus;\n\n\t\tconst geometryType = decoder.GetEncodedGeometryType( decoderBuffer );\n\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\tdecodingStatus = decoder.DecodeBufferToMesh( decoderBuffer, dracoGeometry );\n\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\n\n\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\tdecodingStatus = decoder.DecodeBufferToPointCloud( decoderBuffer, dracoGeometry );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\n\n\t\t}\n\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\n\n\t\t}\n\n\t\tconst geometry = { index: null, attributes: [] };\n\n\t\t// Gather all vertex attributes.\n\t\tfor ( const attributeName in attributeIDs ) {\n\n\t\t\tconst attributeType = self[ attributeTypes[ attributeName ] ];\n\n\t\t\tlet attribute;\n\t\t\tlet attributeID;\n\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\tif ( taskConfig.useUniqueIDs ) {\n\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\n\n\t\t\t} else {\n\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\n\n\t\t\t\tif ( attributeID === - 1 ) continue;\n\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\n\n\t\t\t}\n\n\t\t\tgeometry.attributes.push( decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) );\n\n\t\t}\n\n\t\t// Add index.\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tgeometry.index = decodeIndex( draco, decoder, dracoGeometry );\n\n\t\t}\n\n\t\tdraco.destroy( dracoGeometry );\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction decodeIndex( draco, decoder, dracoGeometry ) {\n\n\t\tconst numFaces = dracoGeometry.num_faces();\n\t\tconst numIndices = numFaces * 3;\n\t\tconst byteLength = numIndices * 4;\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetTrianglesUInt32Array( dracoGeometry, byteLength, ptr );\n\t\tconst index = new Uint32Array( draco.HEAPF32.buffer, ptr, numIndices ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn { array: index, itemSize: 1 };\n\n\t}\n\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\n\n\t\tconst numComponents = attribute.num_components();\n\t\tconst numPoints = dracoGeometry.num_points();\n\t\tconst numValues = numPoints * numComponents;\n\t\tconst byteLength = numValues * attributeType.BYTES_PER_ELEMENT;\n\t\tconst dataType = getDracoDataType( draco, attributeType );\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetAttributeDataArrayForAllPoints( dracoGeometry, attribute, dataType, byteLength, ptr );\n\t\tconst array = new attributeType( draco.HEAPF32.buffer, ptr, numValues ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn {\n\t\t\tname: attributeName,\n\t\t\tarray: array,\n\t\t\titemSize: numComponents\n\t\t};\n\n\t}\n\n\tfunction getDracoDataType( draco, attributeType ) {\n\n\t\tswitch ( attributeType ) {\n\n\t\t\tcase Float32Array: return draco.DT_FLOAT32;\n\t\t\tcase Int8Array: return draco.DT_INT8;\n\t\t\tcase Int16Array: return draco.DT_INT16;\n\t\t\tcase Int32Array: return draco.DT_INT32;\n\t\t\tcase Uint8Array: return draco.DT_UINT8;\n\t\t\tcase Uint16Array: return draco.DT_UINT16;\n\t\t\tcase Uint32Array: return draco.DT_UINT32;\n\n\t\t}\n\n\t}\n\n}\n\nexport { DRACOLoader };\n","import {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tImageBitmapLoader,\n\tInstancedMesh,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternion,\n\tQuaternionKeyframeTrack,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTexture,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tsRGBEncoding\n} from 'three';\n\nclass GLTFLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSheenExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIorExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsEmissiveStrengthExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSpecularExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIridescenceExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshGpuInstancing( parser );\n\n\t\t} );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet resourcePath;\n\n\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\tresourcePath = this.resourcePath;\n\n\t\t} else if ( this.path !== '' ) {\n\n\t\t\tresourcePath = this.path;\n\n\t\t} else {\n\n\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t}\n\n\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\tthis.manager.itemStart( url );\n\n\t\tconst _onError = function ( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t};\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, _onError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\t_onError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, _onError );\n\n\t}\n\n\tsetDRACOLoader( dracoLoader ) {\n\n\t\tthis.dracoLoader = dracoLoader;\n\t\treturn this;\n\n\t}\n\n\tsetDDSLoader() {\n\n\t\tthrow new Error(\n\n\t\t\t'THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".'\n\n\t\t);\n\n\t}\n\n\tsetKTX2Loader( ktx2Loader ) {\n\n\t\tthis.ktx2Loader = ktx2Loader;\n\t\treturn this;\n\n\t}\n\n\tsetMeshoptDecoder( meshoptDecoder ) {\n\n\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\treturn this;\n\n\t}\n\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tparse( data, path, onLoad, onError ) {\n\n\t\tlet json;\n\t\tconst extensions = {};\n\t\tconst plugins = {};\n\n\t\tif ( typeof data === 'string' ) {\n\n\t\t\tjson = JSON.parse( data );\n\n\t\t} else if ( data instanceof ArrayBuffer ) {\n\n\t\t\tconst magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tjson = JSON.parse( extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content );\n\n\t\t\t} else {\n\n\t\t\t\tjson = JSON.parse( LoaderUtils.decodeText( new Uint8Array( data ) ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tjson = data;\n\n\t\t}\n\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst parser = new GLTFParser( json, {\n\n\t\t\tpath: path || this.resourcePath || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\trequestHeader: this.requestHeader,\n\t\t\tmanager: this.manager,\n\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t} );\n\n\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\tfor ( let i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\tconst plugin = this.pluginCallbacks[ i ]( parser );\n\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t// Remove this workaround if we move all the existing\n\t\t\t// extension handlers to plugin system\n\t\t\textensions[ plugin.name ] = true;\n\n\t\t}\n\n\t\tif ( json.extensionsUsed ) {\n\n\t\t\tfor ( let i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\tconst extensionName = json.extensionsUsed[ i ];\n\t\t\t\tconst extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tparser.setExtensions( extensions );\n\t\tparser.setPlugins( plugins );\n\t\tparser.parse( onLoad, onError );\n\n\t}\n\n\tparseAsync( data, path ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.parse( data, path, resolve, reject );\n\n\t\t} );\n\n\t}\n\n}\n\n/* GLTFREGISTRY */\n\nfunction GLTFRegistry() {\n\n\tlet objects = {};\n\n\treturn\t{\n\n\t\tget: function ( key ) {\n\n\t\t\treturn objects[ key ];\n\n\t\t},\n\n\t\tadd: function ( key, object ) {\n\n\t\t\tobjects[ key ] = object;\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete objects[ key ];\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tobjects = {};\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** EXTENSIONS ***********/\n/*********************************/\n\nconst EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\tKHR_MATERIALS_IOR: 'KHR_materials_ior',\n\tKHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\n\tKHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\tKHR_MATERIALS_IRIDESCENCE: 'KHR_materials_iridescence',\n\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\tKHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\tKHR_MATERIALS_EMISSIVE_STRENGTH: 'KHR_materials_emissive_strength',\n\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression',\n\tEXT_MESH_GPU_INSTANCING: 'EXT_mesh_gpu_instancing'\n};\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\nclass GLTFLightsExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\t_markDefs() {\n\n\t\tconst parser = this.parser;\n\t\tconst nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_loadLight( lightIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst cacheKey = 'light:' + lightIndex;\n\t\tlet dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tconst json = parser.json;\n\t\tconst extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tconst lightDefs = extensions.lights || [];\n\t\tconst lightDef = lightDefs[ lightIndex ];\n\t\tlet lightNode;\n\n\t\tconst color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tconst range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tassignExtrasToUserData( lightNode, lightDef );\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t}\n\n\tgetDependency( type, index ) {\t\n\n\t\tif ( type !== 'light' ) return;\n\n\t\treturn this._loadLight( index );\n\n\t}\n\n\tcreateNodeAttachment( nodeIndex ) {\n\n\t\tconst self = this;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\t\tconst lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tconst lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn MeshBasicMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, sRGBEncoding ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Emissive Strength Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/blob/5768b3ce0ef32bc39cdf1bef10b948586635ead3/extensions/2.0/Khronos/KHR_materials_emissive_strength/README.md\n */\nclass GLTFMaterialsEmissiveStrengthExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst emissiveStrength = materialDef.extensions[ this.name ].emissiveStrength;\n\n\t\tif ( emissiveStrength !== undefined ) {\n\n\t\t\tmaterialParams.emissiveIntensity = emissiveStrength;\n\n\t\t}\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Iridescence Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_iridescence\n */\nclass GLTFMaterialsIridescenceExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IRIDESCENCE;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.iridescenceFactor !== undefined ) {\n\n\t\t\tmaterialParams.iridescence = extension.iridescenceFactor;\n\n\t\t}\n\n\t\tif ( extension.iridescenceTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceMap', extension.iridescenceTexture ) );\n\n\t\t}\n\n\t\tif ( extension.iridescenceIor !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceIOR = extension.iridescenceIor;\n\n\t\t}\n\n\t\tif ( materialParams.iridescenceThicknessRange === undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange = [ 100, 400 ];\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMinimum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 0 ] = extension.iridescenceThicknessMinimum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMaximum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 1 ] = extension.iridescenceThicknessMaximum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceThicknessMap', extension.iridescenceThicknessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n */\nclass GLTFMaterialsSheenExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.sheenColor = new Color( 0, 0, 0 );\n\t\tmaterialParams.sheenRoughness = 0;\n\t\tmaterialParams.sheen = 1;\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.sheenColorFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenColor.fromArray( extension.sheenColorFactor );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenRoughness = extension.sheenRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.sheenColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenColorMap', extension.sheenColorTexture, sRGBEncoding ) );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\nclass GLTFMaterialsVolumeExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n\t\tif ( extension.thicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'thicknessMap', extension.thicknessTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.attenuationDistance = extension.attenuationDistance || Infinity;\n\n\t\tconst colorArray = extension.attenuationColor || [ 1, 1, 1 ];\n\t\tmaterialParams.attenuationColor = new Color( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ] );\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\nclass GLTFMaterialsIorExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IOR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\nclass GLTFMaterialsSpecularExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n\t\tif ( extension.specularTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularIntensityMap', extension.specularTexture ) );\n\n\t\t}\n\n\t\tconst colorArray = extension.specularColorFactor || [ 1, 1, 1 ];\n\t\tmaterialParams.specularColor = new Color( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ] );\n\n\t\tif ( extension.specularColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularColorMap', extension.specularColorTexture, sRGBEncoding ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\nclass GLTFTextureBasisUExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ this.name ];\n\t\tconst loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t}\n\n}\n\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\nclass GLTFTextureWebPExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\n\t\t\t\t// WebP images, unfortunately.\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\nclass GLTFMeshoptCompression {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tloadBufferView( index ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tconst extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tconst buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tconst decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn buffer.then( function ( res ) {\n\n\t\t\t\tconst byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tconst byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tconst count = extensionDef.count;\n\t\t\t\tconst stride = extensionDef.byteStride;\n\n\t\t\t\tconst source = new Uint8Array( res, byteOffset, byteLength );\n\n\t\t\t\tif ( decoder.decodeGltfBufferAsync ) {\n\n\t\t\t\t\treturn decoder.decodeGltfBufferAsync( count, stride, source, extensionDef.mode, extensionDef.filter ).then( function ( res ) {\n\n\t\t\t\t\t\treturn res.buffer;\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Support for MeshoptDecoder 0.18 or earlier, without decodeGltfBufferAsync\n\t\t\t\t\treturn decoder.ready.then( function () {\n\n\t\t\t\t\t\tconst result = new ArrayBuffer( count * stride );\n\t\t\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\t\t\treturn result;\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * GPU Instancing Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_mesh_gpu_instancing\n *\n */\nclass GLTFMeshGpuInstancing {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESH_GPU_INSTANCING;\n\t\tthis.parser = parser;\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( ! nodeDef.extensions || ! nodeDef.extensions[ this.name ] ||\n\t\t\tnodeDef.mesh === undefined ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst meshDef = json.meshes[ nodeDef.mesh ];\n\n\t\t// No Points or Lines + Instancing support yet\n\n\t\tfor ( const primitive of meshDef.primitives ) {\n\n\t\t\tif ( primitive.mode !== WEBGL_CONSTANTS.TRIANGLES &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_STRIP &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_FAN &&\n\t\t\t\t primitive.mode !== undefined ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst extensionDef = nodeDef.extensions[ this.name ];\n\t\tconst attributesDef = extensionDef.attributes;\n\n\t\t// @TODO: Can we support InstancedMesh + SkinnedMesh?\n\n\t\tconst pending = [];\n\t\tconst attributes = {};\n\n\t\tfor ( const key in attributesDef ) {\n\n\t\t\tpending.push( this.parser.getDependency( 'accessor', attributesDef[ key ] ).then( accessor => {\n\n\t\t\t\tattributes[ key ] = accessor;\n\t\t\t\treturn attributes[ key ];\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tif ( pending.length < 1 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tpending.push( this.parser.createNodeMesh( nodeIndex ) );\n\n\t\treturn Promise.all( pending ).then( results => {\n\n\t\t\tconst nodeObject = results.pop();\n\t\t\tconst meshes = nodeObject.isGroup ? nodeObject.children : [ nodeObject ];\n\t\t\tconst count = results[ 0 ].count; // All attribute counts should be same\n\t\t\tconst instancedMeshes = [];\n\n\t\t\tfor ( const mesh of meshes ) {\n\n\t\t\t\t// Temporal variables\n\t\t\t\tconst m = new Matrix4();\n\t\t\t\tconst p = new Vector3();\n\t\t\t\tconst q = new Quaternion();\n\t\t\t\tconst s = new Vector3( 1, 1, 1 );\n\n\t\t\t\tconst instancedMesh = new InstancedMesh( mesh.geometry, mesh.material, count );\n\n\t\t\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\t\t\tif ( attributes.TRANSLATION ) {\n\n\t\t\t\t\t\tp.fromBufferAttribute( attributes.TRANSLATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.ROTATION ) {\n\n\t\t\t\t\t\tq.fromBufferAttribute( attributes.ROTATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.SCALE ) {\n\n\t\t\t\t\t\ts.fromBufferAttribute( attributes.SCALE, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tinstancedMesh.setMatrixAt( i, m.compose( p, q, s ) );\n\n\t\t\t\t}\n\n\t\t\t\t// Add instance attributes to the geometry, excluding TRS.\n\t\t\t\tfor ( const attributeName in attributes ) {\n\n\t\t\t\t\tif ( attributeName !== 'TRANSLATION' &&\n\t\t\t\t\t\t attributeName !== 'ROTATION' &&\n\t\t\t\t\t\t attributeName !== 'SCALE' ) {\n\n\t\t\t\t\t\tmesh.geometry.setAttribute( attributeName, attributes[ attributeName ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Just in case\n\t\t\t\tObject3D.prototype.copy.call( instancedMesh, mesh );\n\n\t\t\t\t// https://github.com/mrdoob/three.js/issues/18334\n\t\t\t\tinstancedMesh.frustumCulled = false;\n\t\t\t\tthis.parser.assignFinalMaterial( instancedMesh );\n\n\t\t\t\tinstancedMeshes.push( instancedMesh );\n\n\t\t\t}\n\n\t\t\tif ( nodeObject.isGroup ) {\n\n\t\t\t\tnodeObject.clear();\n\n\t\t\t\tnodeObject.add( ... instancedMeshes );\n\n\t\t\t\treturn nodeObject;\n\n\t\t\t}\n\n\t\t\treturn instancedMeshes[ 0 ];\n\n\t\t} );\n\n\t}\n\n}\n\n/* BINARY EXTENSION */\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nclass GLTFBinaryExtension {\n\n\tconstructor( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tconst headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tconst chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tconst chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tlet chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tconst chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tconst chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tconst contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tconst byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\nclass GLTFDracoMeshCompressionExtension {\n\n\tconstructor( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tdecodePrimitive( primitive, parser ) {\n\n\t\tconst json = this.json;\n\t\tconst dracoLoader = this.dracoLoader;\n\t\tconst bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tconst gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tconst threeAttributeMap = {};\n\t\tconst attributeNormalizedMap = {};\n\t\tconst attributeTypeMap = {};\n\n\t\tfor ( const attributeName in gltfAttributeMap ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( const attributeName in primitive.attributes ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tconst accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tconst componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType.name;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( const attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tconst normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\nclass GLTFTextureTransformExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\textendTexture( texture, transform ) {\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\tif ( transform.offset === undefined && transform.rotation === undefined && transform.scale === undefined ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21819.\n\t\t\treturn texture;\n\n\t\t}\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\nclass GLTFMeshQuantizationExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n}\n\n/*********************************/\n/********** INTERPOLATION ********/\n/*********************************/\n\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\nclass GLTFCubicSplineInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( let i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer;\n\t\tconst values = this.sampleValues;\n\t\tconst stride = this.valueSize;\n\n\t\tconst stride2 = stride * 2;\n\t\tconst stride3 = stride * 3;\n\n\t\tconst td = t1 - t0;\n\n\t\tconst p = ( t - t0 ) / td;\n\t\tconst pp = p * p;\n\t\tconst ppp = pp * p;\n\n\t\tconst offset1 = i1 * stride3;\n\t\tconst offset0 = offset1 - stride3;\n\n\t\tconst s2 = - 2 * ppp + 3 * pp;\n\t\tconst s3 = ppp - pp;\n\t\tconst s0 = 1 - s2;\n\t\tconst s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( let i = 0; i !== stride; i ++ ) {\n\n\t\t\tconst p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tconst m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tconst p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tconst m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nconst _q = new Quaternion();\n\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = super.interpolate_( i1, t0, t, t1 );\n\n\t\t_q.fromArray( result ).normalize().toArray( result );\n\n\t\treturn result;\n\n\t}\n\n}\n\n\n/*********************************/\n/********** INTERNALS ************/\n/*********************************/\n\n/* CONSTANTS */\n\nconst WEBGL_CONSTANTS = {\n\tFLOAT: 5126,\n\t//FLOAT_MAT2: 35674,\n\tFLOAT_MAT3: 35675,\n\tFLOAT_MAT4: 35676,\n\tFLOAT_VEC2: 35664,\n\tFLOAT_VEC3: 35665,\n\tFLOAT_VEC4: 35666,\n\tLINEAR: 9729,\n\tREPEAT: 10497,\n\tSAMPLER_2D: 35678,\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6,\n\tUNSIGNED_BYTE: 5121,\n\tUNSIGNED_SHORT: 5123\n};\n\nconst WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nconst WEBGL_FILTERS = {\n\t9728: NearestFilter,\n\t9729: LinearFilter,\n\t9984: NearestMipmapNearestFilter,\n\t9985: LinearMipmapNearestFilter,\n\t9986: NearestMipmapLinearFilter,\n\t9987: LinearMipmapLinearFilter\n};\n\nconst WEBGL_WRAPPINGS = {\n\t33071: ClampToEdgeWrapping,\n\t33648: MirroredRepeatWrapping,\n\t10497: RepeatWrapping\n};\n\nconst WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nconst ATTRIBUTES = {\n\tPOSITION: 'position',\n\tNORMAL: 'normal',\n\tTANGENT: 'tangent',\n\tTEXCOORD_0: 'uv',\n\tTEXCOORD_1: 'uv2',\n\tCOLOR_0: 'color',\n\tWEIGHTS_0: 'skinWeight',\n\tJOINTS_0: 'skinIndex',\n};\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nconst INTERPOLATION = {\n\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\tLINEAR: InterpolateLinear,\n\tSTEP: InterpolateDiscrete\n};\n\nconst ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n */\nfunction createDefaultMaterial( cache ) {\n\n\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\tcolor: 0xFFFFFF,\n\t\t\temissive: 0x000000,\n\t\t\tmetalness: 1,\n\t\t\troughness: 1,\n\t\t\ttransparent: false,\n\t\t\tdepthTest: true,\n\t\t\tside: FrontSide\n\t\t} );\n\n\t}\n\n\treturn cache[ 'DefaultMaterial' ];\n\n}\n\nfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t// Add unknown glTF extensions to an object's userData.\n\n\tfor ( const name in objectDef.extensions ) {\n\n\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\nfunction assignExtrasToUserData( object, gltfDef ) {\n\n\tif ( gltfDef.extras !== undefined ) {\n\n\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addMorphTargets( geometry, targets, parser ) {\n\n\tlet hasMorphPosition = false;\n\tlet hasMorphNormal = false;\n\tlet hasMorphColor = false;\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\t\tif ( target.COLOR_0 !== undefined ) hasMorphColor = true;\n\n\t\tif ( hasMorphPosition && hasMorphNormal && hasMorphColor ) break;\n\n\t}\n\n\tif ( ! hasMorphPosition && ! hasMorphNormal && ! hasMorphColor ) return Promise.resolve( geometry );\n\n\tconst pendingPositionAccessors = [];\n\tconst pendingNormalAccessors = [];\n\tconst pendingColorAccessors = [];\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( hasMorphPosition ) {\n\n\t\t\tconst pendingAccessor = target.POSITION !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t: geometry.attributes.position;\n\n\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphNormal ) {\n\n\t\t\tconst pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t: geometry.attributes.normal;\n\n\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphColor ) {\n\n\t\t\tconst pendingAccessor = target.COLOR_0 !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.COLOR_0 )\n\t\t\t\t: geometry.attributes.color;\n\n\t\t\tpendingColorAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t}\n\n\treturn Promise.all( [\n\t\tPromise.all( pendingPositionAccessors ),\n\t\tPromise.all( pendingNormalAccessors ),\n\t\tPromise.all( pendingColorAccessors )\n\t] ).then( function ( accessors ) {\n\n\t\tconst morphPositions = accessors[ 0 ];\n\t\tconst morphNormals = accessors[ 1 ];\n\t\tconst morphColors = accessors[ 2 ];\n\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\tif ( hasMorphColor ) geometry.morphAttributes.color = morphColors;\n\t\tgeometry.morphTargetsRelative = true;\n\n\t\treturn geometry;\n\n\t} );\n\n}\n\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\nfunction updateMorphTargets( mesh, meshDef ) {\n\n\tmesh.updateMorphTargets();\n\n\tif ( meshDef.weights !== undefined ) {\n\n\t\tfor ( let i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t}\n\n\t}\n\n\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\tconst targetNames = meshDef.extras.targetNames;\n\n\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\tfor ( let i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t}\n\n\t}\n\n}\n\nfunction createPrimitiveKey( primitiveDef ) {\n\n\tconst dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\tlet geometryKey;\n\n\tif ( dracoExtension ) {\n\n\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t} else {\n\n\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t}\n\n\treturn geometryKey;\n\n}\n\nfunction createAttributesKey( attributes ) {\n\n\tlet attributesKey = '';\n\n\tconst keys = Object.keys( attributes ).sort();\n\n\tfor ( let i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t}\n\n\treturn attributesKey;\n\n}\n\nfunction getNormalizedComponentScale( constructor ) {\n\n\t// Reference:\n\t// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n\n\tswitch ( constructor ) {\n\n\t\tcase Int8Array:\n\t\t\treturn 1 / 127;\n\n\t\tcase Uint8Array:\n\t\t\treturn 1 / 255;\n\n\t\tcase Int16Array:\n\t\t\treturn 1 / 32767;\n\n\t\tcase Uint16Array:\n\t\t\treturn 1 / 65535;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported normalized accessor component type.' );\n\n\t}\n\n}\n\nfunction getImageURIMimeType( uri ) {\n\n\tif ( uri.search( /\\.jpe?g($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/jpeg/ ) === 0 ) return 'image/jpeg';\n\tif ( uri.search( /\\.webp($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/webp/ ) === 0 ) return 'image/webp';\n\n\treturn 'image/png';\n\n}\n\nconst _identityMatrix = new Matrix4();\n\n/* GLTF PARSER */\n\nclass GLTFParser {\n\n\tconstructor( json = {}, options = {} ) {\n\n\t\tthis.json = json;\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options;\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\tthis.sourceCache = {};\n\t\tthis.textureCache = {};\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\t\t\n\t\tlet isSafari = false;\n\t\tlet isFirefox = false;\n\t\tlet firefoxVersion = - 1;\n\n\t\tif ( typeof navigator !== 'undefined' ) {\n\n\t\t\tisSafari = /^((?!chrome|android).)*safari/i.test( navigator.userAgent ) === true;\n\t\t\tisFirefox = navigator.userAgent.indexOf( 'Firefox' ) > - 1;\n\t\t\tfirefoxVersion = isFirefox ? navigator.userAgent.match( /Firefox\\/([0-9]+)\\./ )[ 1 ] : - 1;\n\n\t\t}\n\n\t\tif ( typeof createImageBitmap === 'undefined' || isSafari || ( isFirefox && firefoxVersion < 98 ) ) {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tsetExtensions( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\tparse( onLoad, onError ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tconst result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tPromise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t}\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\t_markDefs() {\n\n\t\tconst nodeDefs = this.json.nodes || [];\n\t\tconst skinDefs = this.json.skins || [];\n\t\tconst meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tconst joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( let i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\t_addNodeRef( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t}\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\t_getNodeRef( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tconst ref = object.clone();\n\n\t\t// Propagates mappings to the cloned object, prevents mappings on the\n\t\t// original object from being lost.\n\t\tconst updateMappings = ( original, clone ) => {\n\n\t\t\tconst mappings = this.associations.get( original );\n\t\t\tif ( mappings != null ) {\n\n\t\t\t\tthis.associations.set( clone, mappings );\n\n\t\t\t}\n\n\t\t\tfor ( const [ i, child ] of original.children.entries() ) {\n\n\t\t\t\tupdateMappings( child, clone.children[ i ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tupdateMappings( object, ref );\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t}\n\n\t_invokeOne( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t}\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tgetDependency( type, index ) {\n\n\t\tconst cacheKey = type + ':' + index;\n\t\tlet dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadNode && ext.loadNode( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadAnimation && ext.loadAnimation( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext != this && ext.getDependency && ext.getDependency( type, index );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tif ( ! dependency ) {\n\n\t\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t}\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tgetDependencies( type ) {\n\n\t\tlet dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tconst parser = this;\n\t\t\tconst defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBuffer( bufferIndex ) {\n\n\t\tconst bufferDef = this.json.buffers[ bufferIndex ];\n\t\tconst loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tconst options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( LoaderUtils.resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBufferView( bufferViewIndex ) {\n\n\t\tconst bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tconst byteLength = bufferViewDef.byteLength || 0;\n\t\t\tconst byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tloadAccessor( accessorIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\t\t\tconst normalized = accessorDef.normalized === true;\n\n\t\t\tconst array = new TypedArray( accessorDef.count * itemSize );\n\t\t\treturn Promise.resolve( new BufferAttribute( array, itemSize, normalized ) );\n\n\t\t}\n\n\t\tconst pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tconst bufferView = bufferViews[ 0 ];\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tconst elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tconst itemBytes = elementBytes * itemSize;\n\t\t\tconst byteOffset = accessorDef.byteOffset || 0;\n\t\t\tconst byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tconst normalized = accessorDef.normalized === true;\n\t\t\tlet array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tconst ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tconst ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tlet ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tconst itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tconst TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tconst byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tconst byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tconst sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tconst sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture|null>}\n\t */\n\tloadTexture( textureIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceIndex = textureDef.source;\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tlet loader = this.textureLoader;\n\n\t\tif ( sourceDef.uri ) {\n\n\t\t\tconst handler = options.manager.getHandler( sourceDef.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, sourceIndex, loader );\n\n\t}\n\n\tloadTextureImage( textureIndex, sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst cacheKey = ( sourceDef.uri || sourceDef.bufferView ) + ':' + textureDef.sampler;\n\n\t\tif ( this.textureCache[ cacheKey ] ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21559.\n\t\t\treturn this.textureCache[ cacheKey ];\n\n\t\t}\n\n\t\tconst promise = this.loadImageSource( sourceIndex, loader ).then( function ( texture ) {\n\n\t\t\ttexture.flipY = false;\n\n\t\t\ttexture.name = textureDef.name || sourceDef.name || '';\n\n\t\t\tconst samplers = json.samplers || {};\n\t\t\tconst sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\tparser.associations.set( texture, { textures: textureIndex } );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function () {\n\n\t\t\treturn null;\n\n\t\t} );\n\n\t\tthis.textureCache[ cacheKey ] = promise;\n\n\t\treturn promise;\n\n\t}\n\n\tloadImageSource( sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tif ( this.sourceCache[ sourceIndex ] !== undefined ) {\n\n\t\t\treturn this.sourceCache[ sourceIndex ].then( ( texture ) => texture.clone() );\n\n\t\t}\n\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst URL = self.URL || self.webkitURL;\n\n\t\tlet sourceURI = sourceDef.uri || '';\n\t\tlet isObjectURL = false;\n\n\t\tif ( sourceDef.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', sourceDef.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tconst blob = new Blob( [ bufferView ], { type: sourceDef.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( sourceDef.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + sourceIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\tconst promise = Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tlet onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tconst texture = new Texture( imageBitmap );\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tresolve( texture );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( LoaderUtils.resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.userData.mimeType = sourceDef.mimeType || getImageURIMimeType( sourceDef.uri );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function ( error ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader: Couldn\\'t load texture', sourceURI );\n\t\t\tthrow error;\n\n\t\t} );\n\n\t\tthis.sourceCache[ sourceIndex ] = promise;\n\t\treturn promise;\n\n\t}\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise<Texture>}\n\t */\n\tassignTexture( materialParams, mapName, mapDef, encoding ) {\n\n\t\tconst parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\tif ( ! texture ) return null;\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tconst transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tconst gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( encoding !== undefined ) {\n\n\t\t\t\ttexture.encoding = encoding;\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tassignFinalMaterial( mesh ) {\n\n\t\tconst geometry = mesh.geometry;\n\t\tlet material = mesh.material;\n\n\t\tconst useDerivativeTangents = geometry.attributes.tangent === undefined;\n\t\tconst useVertexColors = geometry.attributes.color !== undefined;\n\t\tconst useFlatShading = geometry.attributes.normal === undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tconst cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tlet pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tconst cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tlet lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useDerivativeTangents || useVertexColors || useFlatShading ) {\n\n\t\t\tlet cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( useDerivativeTangents ) cacheKey += 'derivative-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\n\t\t\tlet cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\n\t\t\t\tif ( useDerivativeTangents ) {\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', geometry.attributes.uv );\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t}\n\n\tgetMaterialType( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tloadMaterial( materialIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst materialDef = json.materials[ materialIndex ];\n\n\t\tlet materialType;\n\t\tconst materialParams = {};\n\t\tconst materialExtensions = materialDef.extensions || {};\n\n\t\tconst pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tconst kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, sRGBEncoding ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tconst alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = materialDef.normalTexture.scale;\n\n\t\t\t\tmaterialParams.normalScale.set( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture, sRGBEncoding ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tconst material = new materialType( materialParams );\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { materials: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t}\n\n\t/** When Object3D instances are targeted by animation, they need unique names. */\n\tcreateUniqueName( originalName ) {\n\n\t\tconst sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tlet name = sanitizedName;\n\n\t\tfor ( let i = 1; this.nodeNamesUsed[ name ]; ++ i ) {\n\n\t\t\tname = sanitizedName + '_' + i;\n\n\t\t}\n\n\t\tthis.nodeNamesUsed[ name ] = true;\n\n\t\treturn name;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tloadGeometries( primitives ) {\n\n\t\tconst parser = this;\n\t\tconst extensions = this.extensions;\n\t\tconst cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = primitives[ i ];\n\t\t\tconst cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tconst cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tlet geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tloadMesh( meshIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\tconst meshDef = json.meshes[ meshIndex ];\n\t\tconst primitives = meshDef.primitives;\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst materials = results.slice( 0, results.length - 1 );\n\t\t\tconst geometries = results[ results.length - 1 ];\n\n\t\t\tconst meshes = [];\n\n\t\t\tfor ( let i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tconst geometry = geometries[ i ];\n\t\t\t\tconst primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tconst material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tparser.associations.set( meshes[ i ], {\n\t\t\t\t\tmeshes: meshIndex,\n\t\t\t\t\tprimitives: i\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tconst group = new Group();\n\n\t\t\tparser.associations.set( group, { meshes: meshIndex } );\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tloadCamera( cameraIndex ) {\n\n\t\tlet camera;\n\t\tconst cameraDef = this.json.cameras[ cameraIndex ];\n\t\tconst params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Skeleton>}\n\t */\n\tloadSkin( skinIndex ) {\n\n\t\tconst skinDef = this.json.skins[ skinIndex ];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = skinDef.joints.length; i < il; i ++ ) {\n\n\t\t\tpending.push( this.getDependency( 'node', skinDef.joints[ i ] ) );\n\n\t\t}\n\n\t\tif ( skinDef.inverseBindMatrices !== undefined ) {\n\n\t\t\tpending.push( this.getDependency( 'accessor', skinDef.inverseBindMatrices ) );\n\n\t\t} else {\n\n\t\t\tpending.push( null );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst inverseBindMatrices = results.pop();\n\t\t\tconst jointNodes = results;\n\n\t\t\tconst bones = [];\n\t\t\tconst boneInverses = [];\n\n\t\t\tfor ( let i = 0, il = jointNodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst jointNode = jointNodes[ i ];\n\n\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\tconst mat = new Matrix4();\n\n\t\t\t\t\tif ( inverseBindMatrices !== null ) {\n\n\t\t\t\t\t\tmat.fromArray( inverseBindMatrices.array, i * 16 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinDef.joints[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new Skeleton( bones, boneInverses );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tloadAnimation( animationIndex ) {\n\n\t\tconst json = this.json;\n\n\t\tconst animationDef = json.animations[ animationIndex ];\n\n\t\tconst pendingNodes = [];\n\t\tconst pendingInputAccessors = [];\n\t\tconst pendingOutputAccessors = [];\n\t\tconst pendingSamplers = [];\n\t\tconst pendingTargets = [];\n\n\t\tfor ( let i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tconst channel = animationDef.channels[ i ];\n\t\t\tconst sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tconst target = channel.target;\n\t\t\tconst name = target.node;\n\t\t\tconst input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tconst output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tconst nodes = dependencies[ 0 ];\n\t\t\tconst inputAccessors = dependencies[ 1 ];\n\t\t\tconst outputAccessors = dependencies[ 2 ];\n\t\t\tconst samplers = dependencies[ 3 ];\n\t\t\tconst targets = dependencies[ 4 ];\n\n\t\t\tconst tracks = [];\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst node = nodes[ i ];\n\t\t\t\tconst inputAccessor = inputAccessors[ i ];\n\t\t\t\tconst outputAccessor = outputAccessors[ i ];\n\t\t\t\tconst sampler = samplers[ i ];\n\t\t\t\tconst target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\n\t\t\t\tlet TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tconst targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tconst interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\t\t\t\tconst targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tlet outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tconst scale = getNormalizedComponentScale( outputArray.constructor );\n\t\t\t\t\tconst scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( let j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\tconst interpolantType = ( this instanceof QuaternionKeyframeTrack ) ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n\n\t\t\t\t\t\t\treturn new interpolantType( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( nodeDef.mesh === undefined ) return null;\n\n\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\tconst node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\tfor ( let i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tloadNode( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst parser = this;\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tconst nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\treturn ( function () {\n\n\t\t\tconst objectPending = [];\n\n\t\t\tconst meshPromise = parser._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeMesh && ext.createNodeMesh( nodeIndex );\n\n\t\t\t} );\n\n\t\t\tif ( meshPromise ) {\n\n\t\t\t\tobjectPending.push( meshPromise );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tobjectPending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t\t} ).forEach( function ( promise ) {\n\n\t\t\t\tobjectPending.push( promise );\n\n\t\t\t} );\n\n\t\t\tconst childPending = [];\n\t\t\tconst childrenDef = nodeDef.children || [];\n\n\t\t\tfor ( let i = 0, il = childrenDef.length; i < il; i ++ ) {\n\n\t\t\t\tchildPending.push( parser.getDependency( 'node', childrenDef[ i ] ) );\n\n\t\t\t}\n\n\t\t\tconst skeletonPending = nodeDef.skin === undefined\n\t\t\t\t? Promise.resolve( null )\n\t\t\t\t: parser.getDependency( 'skin', nodeDef.skin );\n\n\t\t\treturn Promise.all( [\n\t\t\t\tPromise.all( objectPending ),\n\t\t\t\tPromise.all( childPending ),\n\t\t\t\tskeletonPending\n\t\t\t] );\n\n\t\t}() ).then( function ( results ) {\n\n\t\t\tconst objects = results[ 0 ];\n\t\t\tconst children = results[ 1 ];\n\t\t\tconst skeleton = results[ 2 ];\n\n\t\t\tlet node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( let i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tconst matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! parser.associations.has( node ) ) {\n\n\t\t\t\tparser.associations.set( node, {} );\n\n\t\t\t}\n\n\t\t\tparser.associations.get( node ).nodes = nodeIndex;\n\n\t\t\tif ( skeleton !== null ) {\n\n\t\t\t\t// This full traverse should be fine because\n\t\t\t\t// child glTF nodes have not been added to this node yet.\n\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\tif ( ! mesh.isSkinnedMesh ) return;\n\n\t\t\t\t\tmesh.bind( skeleton, _identityMatrix );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\tnode.add( children[ i ] );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tloadScene( sceneIndex ) {\n\n\t\tconst extensions = this.extensions;\n\t\tconst sceneDef = this.json.scenes[ sceneIndex ];\n\t\tconst parser = this;\n\n\t\t// Loader returns Group, not Scene.\n\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\tconst scene = new Group();\n\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\tconst nodeIds = sceneDef.nodes || [];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\tpending.push( parser.getDependency( 'node', nodeIds[ i ] ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( nodes ) {\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tscene.add( nodes[ i ] );\n\n\t\t\t}\n\n\t\t\t// Removes dangling associations, associations that reference a node that\n\t\t\t// didn't make it into the scene.\n\t\t\tconst reduceAssociations = ( node ) => {\n\n\t\t\t\tconst reducedAssociations = new Map();\n\n\t\t\t\tfor ( const [ key, value ] of parser.associations ) {\n\n\t\t\t\t\tif ( key instanceof Material || key instanceof Texture ) {\n\n\t\t\t\t\t\treducedAssociations.set( key, value );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tnode.traverse( ( node ) => {\n\n\t\t\t\t\tconst mappings = parser.associations.get( node );\n\n\t\t\t\t\tif ( mappings != null ) {\n\n\t\t\t\t\t\treducedAssociations.set( node, mappings );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\treturn reducedAssociations;\n\n\t\t\t};\n\n\t\t\tparser.associations = reduceAssociations( scene );\n\n\t\t\treturn scene;\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\nfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst box = new Box3();\n\n\tif ( attributes.POSITION !== undefined ) {\n\n\t\tconst accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\tconst min = accessor.min;\n\t\tconst max = accessor.max;\n\n\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\tbox.set(\n\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] )\n\t\t\t);\n\n\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\tbox.min.multiplyScalar( boxScale );\n\t\t\t\tbox.max.multiplyScalar( boxScale );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t} else {\n\n\t\treturn;\n\n\t}\n\n\tconst targets = primitiveDef.targets;\n\n\tif ( targets !== undefined ) {\n\n\t\tconst maxDisplacement = new Vector3();\n\t\tconst vector = new Vector3();\n\n\t\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tconst target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\tconst accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\tconst min = accessor.min;\n\t\t\t\tconst max = accessor.max;\n\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\n\t\t\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\t\t\tvector.multiplyScalar( boxScale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\tbox.expandByVector( maxDisplacement );\n\n\t}\n\n\tgeometry.boundingBox = box;\n\n\tconst sphere = new Sphere();\n\n\tbox.getCenter( sphere.center );\n\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\tgeometry.boundingSphere = sphere;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst pending = [];\n\n\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t.then( function ( accessor ) {\n\n\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t} );\n\n\t}\n\n\tfor ( const gltfAttributeName in attributes ) {\n\n\t\tconst threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t}\n\n\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\tconst accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\tgeometry.setIndex( accessor );\n\n\t\t} );\n\n\t\tpending.push( accessor );\n\n\t}\n\n\tassignExtrasToUserData( geometry, primitiveDef );\n\n\tcomputeBounds( geometry, primitiveDef, parser );\n\n\treturn Promise.all( pending ).then( function () {\n\n\t\treturn primitiveDef.targets !== undefined\n\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t: geometry;\n\n\t} );\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {Number} drawMode\n * @return {BufferGeometry}\n */\nfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\tlet index = geometry.getIndex();\n\n\t// generate index if not present\n\n\tif ( index === null ) {\n\n\t\tconst indices = [];\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\t\tindices.push( i );\n\n\t\t\t}\n\n\t\t\tgeometry.setIndex( indices );\n\t\t\tindex = geometry.getIndex();\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\treturn geometry;\n\n\t\t}\n\n\t}\n\n\t//\n\n\tconst numberOfTriangles = index.count - 2;\n\tconst newIndices = [];\n\n\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t// gl.TRIANGLE_FAN\n\n\t\tfor ( let i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t}\n\n\t} else {\n\n\t\t// gl.TRIANGLE_STRIP\n\n\t\tfor ( let i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t} else {\n\n\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t}\n\n\t// build final geometry\n\n\tconst newGeometry = geometry.clone();\n\tnewGeometry.setIndex( newIndices );\n\n\treturn newGeometry;\n\n}\n\nexport { GLTFLoader };\n","\r\n\r\nuniform vec3 uColor;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main(){\r\n    // 创建渐变色效果\r\n    vec3 color=uColor;\r\n    float distanceToCenter=length(vUv-.5);\r\n    float alpha=.05/distanceToCenter-.1;\r\n    alpha=clamp(0.,1.,alpha);\r\n    if(alpha<0.01) discard;\r\n    // \\\r\n    // float progress=smoothstep(0.0, 1.0,uProgress-uOffset );\r\n    // float fade=1.-progress;\r\n    \r\n    // 动态变化的颜色（可选）\r\n    // float dynamicColor=sin(uTime*0.1)*.5+.5;\r\n    // color=mix(color,vec3(1.,0.,0.),dynamicColor);\r\n    // gl_FragColor=vec4(uColor,1.0);\r\n    csm_DiffuseColor=vec4(color,alpha);\r\n}","\r\n\r\nvarying vec2 vUv;\r\nvoid main(){\r\n    vUv=uv;    \r\n}","import * as THREE from \"three\";\r\nimport CustomShaderMaterial from \"three-custom-shader-material/vanilla\";\r\nimport fs from \"./shader/loadingMaterial.fs.glsl\";\r\nimport vs from \"./shader/loadingMaterial.vs.glsl\";\r\nexport default class LoadingMaterial extends CustomShaderMaterial {\r\n  constructor() {\r\n    super({\r\n      baseMaterial: THREE.MeshBasicMaterial,\r\n      transparent: true,\r\n      blending: THREE.AdditiveBlending,\r\n      uniforms: {\r\n        uColor: { value: new THREE.Color(\"#4a884f\") },\r\n      },\r\n      // depthWrite: false,\r\n      vertexShader: vs,\r\n      fragmentShader: fs,\r\n    });\r\n  }\r\n}\r\n\r\n","import { useEffect, useState } from \"react\";\r\nimport * as THREE from \"three\";\r\nconst useProcessModelShaders = (model) => {\r\n    const [shaderLogicQueue, setShaderLogicQueue] = useState([]);\r\n\r\n    const registerShaderLogic = (applyShaderLogic) => {\r\n        if(shaderLogicQueue.every(fn => fn.toString()!==applyShaderLogic.toString())){\r\n            setShaderLogicQueue((prevQueue) => [...prevQueue, applyShaderLogic]);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!model||shaderLogicQueue.length===0) return;\r\n        // console.log('applyShaderLogic')\r\n        model.traverse((item) => {\r\n            if (item instanceof THREE.Mesh && item.material) {\r\n                item.material.transparent = true;\r\n                // console.log('applyShaderLogic')\r\n                item.material.needsUpdate = true;\r\n                // 合并所有逻辑到一个 onBeforeCompile\r\n                item.material.onBeforeCompile = (shader) => {\r\n                    // console.log('applyShaderLogic')\r\n                    shaderLogicQueue.forEach((applyShaderLogic,index) => {\r\n                        applyShaderLogic(shader, item.material);\r\n                    });\r\n                };\r\n            }\r\n        });\r\n    }, [model,shaderLogicQueue]);\r\n\r\n    return { registerShaderLogic };\r\n};\r\n\r\nexport default useProcessModelShaders;\r\n","import * as THREE from \"three\";\r\n\r\n\r\n/**\r\n * 计算模型尺寸\r\n * @param {*} model \r\n * @returns \r\n */\r\nexport const computeModelSize=(model)=>{\r\n    const boundingBox = new THREE.Box3();\r\n\r\n    model.traverse((item) => {\r\n        if(item.isMesh){\r\n            \r\n            const itemBoundingBox = new THREE.Box3().setFromObject(item);\r\n            boundingBox.union(itemBoundingBox);\r\n        }\r\n    });\r\n\r\n    return boundingBox;\r\n}","/*\r\n* 粒子聚合动画\r\n* */\r\nimport * as THREE from \"three\";\r\nimport {useTexture} from \"@react-three/drei\";\r\nimport {useEffect, useState} from \"react\";\r\nimport {computeModelSize} from \"@/example/maxwell-car/utils/utils.js\";\r\nimport TWEEN from \"@tweenjs/tween.js\";\r\nimport {useThree} from \"@react-three/fiber\";\r\nconst loadTexture=new THREE.TextureLoader();\r\nconst pointsTexture=loadTexture.load(\"texture/粒子.png\");\r\n\r\n\r\nfunction MaxWellParticleAggregation({hoda,registerShaderLogic}){\r\n    const [isInit, setIsInit] = useState(false);\r\n    const {scene}=useThree();\r\n    const pointTransitionTime = {\r\n            value: 0,\r\n        },\r\n        initialModelTransitionTime = {\r\n            value: NaN,\r\n        },\r\n        targetModelTransitionTime = {\r\n            value: NaN,\r\n        };\r\n    // const pointsTexture = useTexture(\"texture/粒子.png\");\r\n    /**\r\n     * 创建粒子材质\r\n     */\r\n    const createPointsMaterial = (box3) => {\r\n        const initialModelMaxValue = box3.max.y;\r\n        const initialModelMinValue = box3.min.y;\r\n        const material = new THREE.PointsMaterial();\r\n        material.size = 0.25;\r\n        material.color.set(0x409eff);\r\n        material.map = pointsTexture;\r\n        material.alphaMap = pointsTexture;\r\n        material.transparent = true;\r\n        material.depthWrite = false;\r\n        material.blending = THREE.AdditiveBlending;\r\n        material.onBeforeCompile = (shader) => {\r\n            shader.uniforms.uTime = pointTransitionTime;\r\n            shader.uniforms.uInitialModelTransitionTime = initialModelTransitionTime;\r\n            shader.uniforms.uTargetModelTransitionTime = targetModelTransitionTime;\r\n\r\n            shader.uniforms.uHeight = {\r\n                value: initialModelMaxValue - initialModelMinValue,\r\n            };\r\n            shader.uniforms.uOffset = {\r\n                value: initialModelMinValue,\r\n            };\r\n\r\n            shader.vertexShader = shader.vertexShader.replace(\r\n                \"#include <common>\",\r\n                /* glsl */ `\r\n\r\n            #include <common>\r\n\r\n            attribute vec3 aPosition;\r\n\r\n            uniform float uTime;\r\n            uniform float uInitialModelTransitionTime;\r\n            uniform float uTargetModelTransitionTime;\r\n\r\n            uniform float uHeight;\r\n            uniform float uOffset;\r\n\r\n        `\r\n            );\r\n            shader.vertexShader = shader.vertexShader.replace(\r\n                \"#include <begin_vertex>\",\r\n                /* glsl */ `\r\n\r\n            #include <begin_vertex>\r\n\r\n            float time = uTime - (transformed.y - uOffset) / (uHeight + 0.016 - 0.065);\r\n\r\n            if (time > 0.0 && time < 1.0) {\r\n                vec3 direction = aPosition - transformed;\r\n                transformed = transformed + direction * time;\r\n            } else if (time >= 1.0) {\r\n                transformed = aPosition;\r\n            }\r\n\r\n\r\n        `\r\n            );\r\n            shader.vertexShader = shader.vertexShader.replace(\r\n                \"#include <fog_vertex>\",\r\n                /* glsl */ `\r\n\r\n            #include <fog_vertex>\r\n\r\n            vec3 positionNormalize = normalize(aPosition);\r\n\r\n            float angle = acos(dot(positionNormalize, vec3(1.0, 0.0, 0.0)));\r\n\r\n            float strength = sin(angle * 10.0) / 2.0;\r\n\r\n            if (transformed.y > uInitialModelTransitionTime && transformed == position) {\r\n                gl_PointSize = 0.0;\r\n            } else if (aPosition.y > uTargetModelTransitionTime + strength) {\r\n                gl_PointSize = 0.0;\r\n            }                        \r\n\r\n        `\r\n            );\r\n        };\r\n        return material;\r\n    };\r\n    /**\r\n     * 列表长度对齐\r\n     */\r\n    const listLengthAlignment = (...list) => {\r\n        let maxLength = 0;\r\n\r\n        list.forEach((item) => {\r\n            maxLength = item.length > maxLength ? item.length : maxLength;\r\n        });\r\n\r\n        list.forEach((item, index) => {\r\n            let alignmentList = [];\r\n\r\n            const count = Math.floor(maxLength / item.length),\r\n                remainder = maxLength % item.length;\r\n\r\n            for (let i = 0; i < count; i++) {\r\n                alignmentList = alignmentList.concat(item);\r\n            }\r\n\r\n            alignmentList = alignmentList.concat(item.slice(0, remainder));\r\n\r\n            list[index] = alignmentList;\r\n        });\r\n        return list;\r\n    };\r\n    /**\r\n     * 组装顶点数据\r\n     */\r\n    const assembleVertexData = (\r\n        object,\r\n        offsetVector = new THREE.Vector3(0, 0, 0),\r\n        scaleVector = new THREE.Vector3(1.0, 1.0, 1.0)\r\n    ) => {\r\n        const vertexList = [];\r\n        object.traverse((item) => {\r\n            if (item instanceof THREE.Mesh && item.geometry) {\r\n                // item.updateMatrixWorld();\r\n\r\n                // const geometry = new THREE.BufferGeometry();\r\n                // console.log('offsetVector', offsetVector)\r\n                // console.log('old array', item.geometry.attributes.position.array)\r\n                const array = item.geometry.attributes.position.array.slice();\r\n                for (let i = 0; i < array.length / 3; i++) {\r\n                    const i3 = i * 3;\r\n\r\n                    array[i3] = array[i3] * scaleVector.x;\r\n                    array[i3 + 1] = array[i3 + 1] * scaleVector.y;\r\n                    array[i3 + 2] = array[i3 + 2] * scaleVector.z;\r\n\r\n                    array[i3] = array[i3] + offsetVector.x;\r\n                    array[i3 + 1] = array[i3 + 1] + offsetVector.y;\r\n                    array[i3 + 2] = array[i3 + 2] + offsetVector.z;\r\n                }\r\n                array.forEach((item2) => {\r\n                    vertexList.push(item2);\r\n                });\r\n            }\r\n        });\r\n        return vertexList;\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        if (hoda&&!isInit) {\r\n            // setTimeout(() => {\r\n            //   // disposeTargetModelMaterial(hoda);\r\n\r\n            //   // console.log('targetVertexList', targetVertexList)\r\n            // }, 100)\r\n            const offset = new THREE.Vector3(0, 1.5, 0);\r\n            const scale = new THREE.Vector3(1.2, 1.2, 1.2);\r\n\r\n            const targetBox3 = computeModelSize(hoda);\r\n            let sourceBox3 = targetBox3.clone();\r\n            sourceBox3.expandByVector(scale);\r\n            sourceBox3.translate(offset);\r\n\r\n            const targetSize = new THREE.Vector3();\r\n            targetBox3.getSize(targetSize);\r\n            const planeGeometry = new THREE.PlaneGeometry(\r\n                targetSize.x,\r\n                targetSize.z,\r\n                100,\r\n                100\r\n            );\r\n            planeGeometry.rotateX(Math.PI * 0.5);\r\n            planeGeometry.translate(0, 1.5, 1.5);\r\n            planeGeometry.scale(1.2, 1.2, 1.2);\r\n            const posArray = planeGeometry.attributes.position.array.slice();\r\n            const uvArray = planeGeometry.attributes.uv.array.slice();\r\n            const offsetHight = 1.2;\r\n            const pp = 2;\r\n            for (let i = 0; i < posArray.length / 3; i++) {\r\n                const i3 = i * 3;\r\n                const i2 = i * 2;\r\n\r\n                const uv = [uvArray[i2] * 2 - 1, uvArray[i2 + 1] * 2 - 1];\r\n\r\n                posArray[i3] = posArray[i3];\r\n                posArray[i3 + 1] =\r\n                    posArray[i3 + 1] +\r\n                    offsetHight * (1 - Math.pow(uv[0], pp)) +\r\n                    offsetHight * (1 - Math.pow(uv[1], pp)) +\r\n                    Math.sin(Math.random() * 100) * 0.4;\r\n                posArray[i3 + 2] = posArray[i3 + 2];\r\n            }\r\n            planeGeometry.setAttribute(\r\n                \"position\",\r\n                new THREE.BufferAttribute(new Float32Array(posArray), 3)\r\n            );\r\n            const mesh = new THREE.Mesh(\r\n                planeGeometry,\r\n                new THREE.MeshBasicMaterial({ wireframe: true })\r\n            );\r\n            sourceBox3 = computeModelSize(mesh);\r\n            // const targetHelper = new THREE.Box3Helper(targetBox3, 0xffff00);\r\n            // const sourceHelper = new THREE.Box3Helper(sourceBox3, 0xff0000);\r\n\r\n            initialModelTransitionTime.value = sourceBox3.min.y - 0.08;\r\n            targetModelTransitionTime.value = targetBox3.max.y + 1;\r\n\r\n            // const targetVertexList = assembleVertexData(hoda)\r\n            // const sourceVertexList = assembleVertexData(mesh)\r\n\r\n            const [targetVertexList, sourceVertexList] = listLengthAlignment(\r\n                assembleVertexData(hoda),\r\n                assembleVertexData(mesh)\r\n            );\r\n            // 创建几何体\r\n            const geometry = new THREE.BufferGeometry();\r\n            geometry.setAttribute(\r\n                \"position\",\r\n                new THREE.BufferAttribute(new Float32Array(sourceVertexList), 3)\r\n            );\r\n            geometry.setAttribute(\r\n                \"aPosition\",\r\n                new THREE.BufferAttribute(new Float32Array(targetVertexList), 3)\r\n            );\r\n            // 创建粒子材质\r\n            const pointsMaterial = createPointsMaterial(sourceBox3);\r\n            const totalTime = 4;\r\n            const ponits=new THREE.Points(geometry, pointsMaterial)\r\n            scene.add(ponits);\r\n            const tween1 = new TWEEN.Tween(pointTransitionTime).to(\r\n                { value: 2 },\r\n                totalTime * 1000\r\n            );\r\n\r\n            const tween2 = new TWEEN.Tween(initialModelTransitionTime).to(\r\n                { value: sourceBox3.max.y + 0.08 },\r\n                totalTime * 0.5 * 1000\r\n            );\r\n\r\n            const tween3 = new TWEEN.Tween(targetModelTransitionTime)\r\n                .to({ value: targetBox3.min.y - 1 }, totalTime * 0.75 * 1000)\r\n                .delay(totalTime * 0.25 * 1000).onComplete(()=>{\r\n                    setIsInit(true);\r\n                    ponits.material.dispose();\r\n                    scene.remove(ponits);\r\n                })\r\n\r\n            if (tween1) {\r\n                tween1.start();\r\n                tween2.start();\r\n                tween3.start();\r\n            }\r\n            return () => {\r\n                if (tween1) {\r\n                    tween1.stop();\r\n                    tween2.stop();\r\n                    tween3.stop();\r\n                }\r\n            };\r\n        }\r\n    }, [hoda,isInit]);\r\n\r\n    const applyParticleAnimation = (shader,materail) => {\r\n        // console.log('shader3333',shader)\r\n        shader.uniforms.uTargetModelTransitionTime = targetModelTransitionTime;\r\n\r\n        shader.vertexShader = shader.vertexShader.replace(\r\n            \"#include <common>\",\r\n            /* glsl */ `\r\n        #include <common>\r\n        varying vec3 vPosition;\r\n    `\r\n        );\r\n\r\n        shader.vertexShader = shader.vertexShader.replace(\r\n            \"#include <begin_vertex>\",\r\n            /* glsl */ `\r\n        #include <begin_vertex>\r\n        vPosition = transformed;\r\n    `\r\n        );\r\n\r\n        shader.fragmentShader = shader.fragmentShader.replace(\r\n            \"#include <common>\",\r\n            /* glsl */ `\r\n        #include <common>\r\n        varying vec3 vPosition;\r\n        uniform float uTargetModelTransitionTime;\r\n    `\r\n        );\r\n\r\n        shader.fragmentShader = shader.fragmentShader.replace(\r\n            \"#include <dithering_fragment>\",\r\n            /* glsl */ `\r\n        #include <dithering_fragment>\r\n        vec3 positionNormalize = normalize(vPosition);\r\n        float angle = acos(dot(positionNormalize, vec3(1.0, 0.0, 0.0)));\r\n        float strength = sin(angle * 10.0) / 2.0;\r\n\r\n        if (vPosition.y < uTargetModelTransitionTime + strength) {\r\n            gl_FragColor = vec4(0.0);\r\n        } else if (vPosition.y < uTargetModelTransitionTime + strength + 0.1) {\r\n            gl_FragColor = vec4(0.25, 0.62, 1.0, 1.0);\r\n        }\r\n    `\r\n        );\r\n    };\r\n\r\n    useEffect(() => {\r\n        if(hoda){\r\n            registerShaderLogic(applyParticleAnimation)\r\n        }\r\n    }, [registerShaderLogic]);\r\n\r\n    return null\r\n}\r\nexport default MaxWellParticleAggregation","import {useCubeCamera, useEnvironment} from \"@react-three/drei\";\r\nimport {useFrame} from \"@react-three/fiber\";\r\nimport * as THREE from \"three\";\r\n\r\n\r\n\r\n\r\nfunction useDynamicLightformers() {\r\n    const baseEnvMap=useEnvironment(\r\n        {files: __VITE_URL__ + '/envMap/abstract-lighting-ray-room-style-01_2K_f478fdd1-243a-4cc8-b454-0f522f1afb6b.exr'}\r\n    )\r\n    const cubeCamera = useCubeCamera(1, 1000, 256);\r\n    cubeCamera.camera.layers.set(1);\r\n    const dynamicEnvMap=cubeCamera.camera.renderTarget.texture;\r\n\r\n\r\n\r\n\r\n    useFrame(() => {\r\n        cubeCamera.update();\r\n    });\r\n\r\n    return {dynamicEnvMap,baseEnvMap}; // 返回纹理\r\n}\r\n\r\nexport default useDynamicLightformers;","/*\r\n* 混合环境贴图，模拟动态光照\r\n* */\r\nimport useDynamicLightformers from \"@/example/maxwell-car/hooks/useDynamicLightformers.js\";\r\nimport {useEffect} from \"react\";\r\n\r\nfunction MaxWellMixEnvMap({registerShaderLogic}){\r\n    const {dynamicEnvMap}=useDynamicLightformers();\r\n    const applyDynamicEnvMap = (shader,material) => {\r\n        if(material.name==='Car paint'){\r\n            // item.material.envMap=dynamicEnvMap;\r\n            shader.uniforms.uDynamicEnvMap={value:dynamicEnvMap};\r\n            shader.fragmentShader=shader.fragmentShader.replace('#include <envmap_common_pars_fragment>',\r\n                `\r\n            #ifdef USE_ENVMAP\r\n            \r\n                uniform float envMapIntensity;\r\n                uniform float flipEnvMap;\r\n                // uniform sampler2D uBaseEnvMap;\r\n                uniform samplerCube uDynamicEnvMap;\r\n            \r\n                #ifdef ENVMAP_TYPE_CUBE\r\n                    uniform samplerCube envMap;\r\n                #else\r\n                    uniform sampler2D envMap;\r\n                #endif\r\n                \r\n            #endif\r\n`\r\n            )\r\n            shader.fragmentShader=shader.fragmentShader.replace('#include <envmap_physical_pars_fragment>',\r\n                `\r\n#if defined( USE_ENVMAP )\r\n\r\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\r\n\r\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\r\n\r\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\r\n\r\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\r\n\r\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\r\n\r\n\t\t#else\r\n\r\n\t\t\treturn vec3( 0.0 );\r\n\r\n\t\t#endif\r\n\r\n\t}\r\n\r\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\r\n\r\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\r\n\r\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\r\n\r\n\t\t\t// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\r\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\r\n\r\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\r\n\r\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\r\n\t\t\t//textureCube 只能够使用它，否则会报错1\r\n\t\t\tvec4 envMapColor2 = textureCube( uDynamicEnvMap,reflectVec);\r\n\t\t\t// 0.25 是控制环境贴图混合强度\r\n\t\t\t// \r\n\t\t\tvec4 mixEnvMapColor=mix(envMapColor,envMapColor2,0.25);\r\n\r\n\t\t\treturn mixEnvMapColor.rgb * envMapIntensity;\r\n\r\n\t\t#else\r\n\r\n\t\t\treturn vec3( 0.0 );\r\n\r\n\t\t#endif\r\n\r\n\t}\r\n\r\n#endif\r\n`\r\n            )\r\n        }\r\n    };\r\n    useEffect(() => {\r\n        registerShaderLogic(applyDynamicEnvMap);\r\n    }, []);\r\n\r\n    return null;\r\n}\r\nexport default MaxWellMixEnvMap","/*\r\n * @Author: FMC\r\n * @Date: 2024-09-01 11:50:08\r\n * @LastEditors: FMC\r\n * @LastEditTime: 2024-09-28 19:36:41\r\n * @FilePath: \\fmc-personal-blog\\src\\example\\maxwell-car\\maxwell-car-three\\maxwell-hoda\\maxwell-hoda.jsx\r\n * @Description:\r\n */\r\n\r\nimport {extend, useFrame, useLoader, useThree,} from \"@react-three/fiber\";\r\nimport {Suspense, useContext, useEffect, useMemo, useRef, useState} from \"react\";\r\nimport * as THREE from \"three\";\r\nimport {DRACOLoader} from \"three/examples/jsm/loaders/DRACOLoader\";\r\nimport {GLTFLoader} from \"three/examples/jsm/loaders/GLTFLoader\";\r\nimport LoadingMaterial from \"../material/loadingMaterial/loadingMaterial\";\r\nimport {useTexture} from \"@react-three/drei\";\r\nimport {CAR_COLOR} from \"../../enum/enum\";\r\nimport {MaxWellContext} from \"../../context/maxwell-car-context\";\r\nimport useProcessModelShaders from \"@/example/maxwell-car/hooks/useProcessModelShaders.js\";\r\nimport MaxwellParticleAggregation\r\n  from \"@/example/maxwell-car/maxwell-car-three/maxwell-particle-aggregation/maxwell-particle-aggregation.jsx\";\r\nimport MaxwellMixEnvMap from \"@/example/maxwell-car/maxwell-car-three/maxwell-mix-env-map/maxwell-mix-env-map.jsx\";\r\n\r\nextend({LoadingMaterial});\r\n\r\nfunction Model({speed, rotation, position}) {\r\n    const {carColor} = useContext(MaxWellContext);\r\n    const scaleNum = 1;\r\n    const state = useThree();\r\n    const [hoda, setHoda] = useState(null);\r\n    // const frontWheelRef = useRef(null);\r\n    /**\r\n     * 加载Draco模型\r\n     */\r\n    const {scene, nodes, materials} = useLoader(\r\n        GLTFLoader,\r\n        \"model/汽车.glb\",\r\n        (loader) => {\r\n            const dracoLoader = new DRACOLoader();\r\n            dracoLoader.setDecoderPath(\"draco/\");\r\n            loader.setDRACOLoader(dracoLoader);\r\n        }\r\n    );\r\n    const otherColor = useTexture(\"texture/car_base_color_tc.png\");\r\n    otherColor.format = THREE.RGBAFormat;\r\n    otherColor.type = THREE.UnsignedByteType;\r\n    // otherColor.colorSpace=THREE.SRGBColorSpace;\r\n    otherColor.encoding = 3001;\r\n    otherColor.flipY = false;\r\n\r\n    const sliverColor = useTexture(\"texture/银色车漆.png\");\r\n    sliverColor.format = THREE.RGBAFormat;\r\n    sliverColor.type = THREE.UnsignedByteType;\r\n    // otherColor.colorSpace=THREE.SRGBColorSpace;\r\n    sliverColor.encoding = 3001;\r\n    sliverColor.flipY = false;\r\n\r\n\r\n    const defalutColor = useTexture(\"texture/蓝色车漆.png\");\r\n    defalutColor.format = THREE.RGBAFormat;\r\n    defalutColor.type = THREE.UnsignedByteType;\r\n    // otherColor.colorSpace=THREE.SRGBColorSpace;\r\n    defalutColor.encoding = 3001;\r\n    defalutColor.flipY = false;\r\n\r\n    const frontWheelRef = useRef(null);\r\n    /**\r\n     * 车辆运动状态初始化\r\n     */\r\n    useEffect(() => {\r\n        const fontWheel = [\r\n            \"polySurface481_前左轮毂\",\r\n            \"polySurface491_phong2_0\",\r\n            \"polySurface480_blinn7_0\",\r\n        ];\r\n        const rearWeel = [\r\n            \"polySurface477_后左轮毂\",\r\n            \"polySurface476_blinn7_0\",\r\n            \"polySurface539_phong2_0\",\r\n        ];\r\n        const list = [];\r\n        const meshList = [];\r\n        if (hoda) {\r\n            hoda.traverse((child) => {\r\n                if (child.isMesh) {\r\n                    meshList.push(child);\r\n                }\r\n            });\r\n            meshList.forEach((mesh, index) => {\r\n                if (fontWheel.includes(mesh.name) || rearWeel.includes(mesh.name)) {\r\n                    list.push(mesh);\r\n                }\r\n            });\r\n            //\r\n            frontWheelRef.current = list;\r\n        }\r\n    }, [hoda]);\r\n    useFrame((state, delta) => {\r\n        if (hoda) {\r\n            if (frontWheelRef.current) {\r\n                const wheelRadius = 1.0; // 轮子的半径，假设是0.2\r\n                const distance = delta * speed; // 移动的距离\r\n                frontWheelRef.current.forEach((item) => {\r\n                    item.rotation.x += (distance / wheelRadius) * 0.4;\r\n                });\r\n            }\r\n            // hodaRef.current.position.x-=distance*0.1;\\\r\n        }\r\n    });\r\n\r\n    const {registerShaderLogic} = useProcessModelShaders(hoda);\r\n    const maxwellMixEnvMap = useMemo(() => <MaxwellMixEnvMap registerShaderLogic={registerShaderLogic}/>,\r\n        []); // 通过 useMemo 缓存 MaxWellGround\r\n    const maxwellParticleAggregation = useMemo(() =>{\r\n        return <MaxwellParticleAggregation\r\n            hoda={hoda}\r\n            registerShaderLogic={registerShaderLogic}\r\n        />\r\n        },\r\n        [hoda]);\r\n    /**\r\n     *\r\n     */\r\n    useEffect(() => {\r\n        if (hoda) {\r\n            switch (carColor) {\r\n                case CAR_COLOR.OTHER:\r\n                    hoda.traverse((child) => {\r\n                        if (child.isMesh && child.material.name == 'Car paint') {\r\n                            child.material.map = otherColor;\r\n                            child.material.map.colorSpace = THREE.SRGBColorSpace;\r\n                            child.material.needsUpdate = true; // 确保材质更新\r\n                        }\r\n                    });\r\n                    break;\r\n                case CAR_COLOR.SLIVER:\r\n                    hoda.traverse((child) => {\r\n                        if (child.isMesh && child.material.name == 'Car paint') {\r\n                            child.material.map = sliverColor;\r\n                            child.material.map.colorSpace = THREE.SRGBColorSpace;\r\n                            child.material.needsUpdate = true; // 确保材质更新\r\n                        }\r\n                    });\r\n                    break;\r\n                default:\r\n                    hoda.traverse((child) => {\r\n                        if (child.isMesh && child.material.name == 'Car paint') {\r\n                            child.material.map = defalutColor;\r\n                            child.material.map.colorSpace = THREE.SRGBColorSpace;\r\n                            child.material.needsUpdate = true; // 确保材质更新\r\n                        }\r\n                    });\r\n                    break;\r\n\r\n            }\r\n        }\r\n    }, [hoda, carColor]);\r\n\r\n\r\n    return (\r\n        <group\r\n        >\r\n            <primitive\r\n                ref={setHoda}\r\n                object={scene ? scene : null}\r\n                scale={[scaleNum, scaleNum, scaleNum]}\r\n            />\r\n            {maxwellParticleAggregation}\r\n            {maxwellMixEnvMap}\r\n        </group>\r\n    );\r\n}\r\n\r\nfunction MaxwellHoda({speed, position, rotation}) {\r\n    return (\r\n        <Suspense>\r\n            <Model speed={speed} rotation={rotation} position={position}/>\r\n        </Suspense>\r\n    );\r\n}\r\n\r\nexport default MaxwellHoda;\r\n","import {useRef} from \"react\";\r\nimport {useFrame} from \"@react-three/fiber\";\r\nimport {Lightformer} from \"@react-three/drei\";\r\n\r\n/**\r\n * 模拟光源\r\n * */\r\nfunction MaxwellLightformers({positions = [2, 0, 2, 0, 2, 0, 2, 0], layers = 1}) {\r\n    const group = useRef();\r\n    useFrame((state, delta) => (\r\n        group.current.position.z -= delta * 10) < -30 && (group.current.position.z = 30)\r\n    )\r\n    return (\r\n        <>\r\n            <group rotation={[0, 0.5, 0]}>\r\n                <group ref={group}>\r\n                    {positions.map((x, i) => (\r\n                        <Lightformer layers={layers} key={i} form=\"circle\" intensity={2} rotation={[Math.PI / 2, 0, 0]}\r\n                                     position={[x, 4, i * 4]} scale={[3, 1, 1]}/>\r\n                    ))}\r\n                </group>\r\n            </group>\r\n            <Lightformer layers={layers} form=\"ring\" color=\"red\" intensity={1} scale={10} position={[-15, 4, -18]}\r\n                         target={[0, 0, 0]}/>\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default MaxwellLightformers;","/*\r\n * @Author: FMC\r\n * @Date: 2024-09-24 20:41:25\r\n * @LastEditors: FMC\r\n * @LastEditTime: 2024-11-19 22:09:47\r\n * @FilePath: \\fmc-personal-blog\\src\\example\\maxwell-car\\maxwell-car-three\\maxwell-road-scene\\maxwell-road-scene.jsx\r\n * @Description:\r\n */\r\n\r\nimport MaxwellLightformers from \"@/example/maxwell-car/maxwell-car-three/maxwell-lightformers/maxwell-lightformers.jsx\";\r\nimport { Clone, useEnvironment, useTexture } from \"@react-three/drei\";\r\nimport { useFrame, useLoader, useThree } from \"@react-three/fiber\";\r\nimport TWEEN from \"@tweenjs/tween.js\";\r\nimport { Suspense, useEffect, useRef, useState } from \"react\";\r\nimport * as THREE from \"three\";\r\nimport { DRACOLoader } from \"three/examples/jsm/loaders/DRACOLoader\";\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\nfunction Model({runState='STOP',speed,setSpeed,isShow=true}) {\r\n  // const [speed,setSpeed] = useState(20);\r\n  const  {scene: threeScene}=useThree()\r\n  const [street, setStreet] = useState(null);\r\n  //必须的\r\n  const [viseabk, setViseabk] = useState(false);\r\n  const [cloneStreet1, setCloneStreet1] = useState(null);\r\n  const [cloneStreet2, setCloneStreet2] = useState(null);\r\n  const [cloneStreet3, setCloneStreet3] = useState(null);\r\n  const [size, setSize] = useState(0);\r\n  const opacity=useRef({value:0});\r\n  const roadEnvMap=useEnvironment(\r\n      {files:__VITE_URL__ + '/envMap/路灯.hdr'}\r\n  )\r\n\r\n  /**\r\n   * 加载Draco模型\r\n   */\r\n  const { scene, nodes, materials } = useLoader(\r\n    GLTFLoader,\r\n    \"model/街景.glb\",\r\n    (loader) => {\r\n      const dracoLoader = new DRACOLoader();\r\n      dracoLoader.setDecoderPath(\"draco/\");\r\n      loader.setDRACOLoader(dracoLoader);\r\n    }\r\n  );\r\n  const bakedImg = useTexture(\"model/baking.png\");\r\n  const getGroupBox3 = (group) => {\r\n    let box3 = new THREE.Box3();\r\n    group.traverse((child) => {\r\n      if (child.isMesh) {\r\n        const mesh = child.clone();\r\n        mesh.updateMatrixWorld(true);\r\n        const childBoundingBox = new THREE.Box3().setFromObject(mesh);\r\n        box3.union(childBoundingBox);\r\n      }\r\n    });\r\n    // const  boxh=new THREE.Box3Helper(box3);\r\n    // threeScene.add(boxh);\r\n    // console.log(\"size\", box3.max.z - box3.min.z -5);\r\n    setSize(box3.max.z - box3.min.z -1);\r\n    // setCarBox3(box3);\r\n  };\r\n  useEffect(() => {\r\n    if (street) {\r\n      getGroupBox3(street);\r\n      // bakedImg.flipY=false;\r\n      // bakedImg.\r\n      const bakedBuildMaterail = new THREE.MeshBasicMaterial({\r\n        map: bakedImg,\r\n      });\r\n      // street.traverse((child) => {\r\n      //   if(child.name=='建筑aa'){\r\n      //     child.traverse(item=>{\r\n      //       if(item.isMesh){\r\n      //         item.material=bakedBuildMaterail;\r\n      //       }\r\n      //     })\r\n      //   }\r\n      // })\r\n      // ;\r\n    }\r\n  }, [street]);\r\n  useFrame((state, delta) => {\r\n    const a = -size * 2.0;\r\n    const outView = -1 * (100 + size * 0.5);\r\n    if (cloneStreet1 && street&&cloneStreet2) {\r\n      // if(street.position.z<size*0.9){\r\n      //   street.position.z += speed * delta;\r\n      // }\r\n      // cloneStreet1.position.z -= speed * delta;\r\n      // street.position.z -= speed * delta;\r\n      // if (street.position.z < a) {\r\n      //   street.position.z = cloneStreet1.position.z + size;\r\n      // }\r\n      // if (cloneStreet1.position.z < a) {\r\n      //   cloneStreet1.position.z = street.position.z + size;\r\n      // }\r\n\r\n      const list=[cloneStreet1,street,cloneStreet2];\r\n      list.forEach(item1=>{\r\n        item1.position.z -= speed * delta;\r\n      })\r\n      //升序排列\r\n      list.sort((a,b) => a.position.z - b.position.z);\r\n      // console.log(sortByz);\r\n      if(list[0].position.z <a){\r\n        list[0].position.z = list[1].position.z + size*2;\r\n      }\r\n      list[0].position.y=[0.01]\r\n      list[1].position.y=[0]\r\n      list[2].position.y=[0.01]\r\n    }\r\n  });\r\n  const reset=()=>{\r\n    if(street&&cloneStreet1&&cloneStreet2){\r\n      cloneStreet1.position.z=size;\r\n      cloneStreet2.position.z=-size;\r\n      street.position.z=0\r\n    }\r\n  }\r\n  useEffect(()=>{\r\n    let tween=null;\r\n    const seconds=2;\r\n    reset();\r\n    if(runState==='RUNNING'){\r\n      tween = new TWEEN.Tween({ value: 0 })\r\n      .to({ value: 20 }, seconds * 1000)\r\n      .onUpdate(({ value }) => {\r\n        setSpeed(value);\r\n      })\r\n    }else if(runState==='STOP'){\r\n      tween = new TWEEN.Tween({ value: 20 })\r\n      .to({ value: 0 }, seconds * 1000)\r\n      .onUpdate(({ value }) => {\r\n        setSpeed(value);\r\n      })\r\n    }\r\n    if(tween){\r\n      tween.start();\r\n    }\r\n    return ()=>{\r\n      if(tween){\r\n        tween.stop()\r\n      }\r\n    }\r\n  },[runState])\r\n\r\n\r\n  /**\r\n   * 渐变切换控制\r\n   */\r\n  useEffect(()=>{\r\n    for (let materialsName in materials) {\r\n      const material = materials[materialsName];\r\n      material.transparent=true;\r\n      // material.opacity=opacity.current.value;\r\n    }\r\n  },[materials])\r\n  const  setMaterialsOpacity=(opacity)=>{\r\n    for (let materialsName in materials) {\r\n      const material = materials[materialsName];\r\n      material.opacity=opacity\r\n    }\r\n  }\r\n  useEffect(()=>{\r\n    let tween=null;\r\n    if(isShow){\r\n      reset();\r\n      setViseabk(true);\r\n      tween = new TWEEN.Tween(opacity.current).to(\r\n          { value: 1.0 },\r\n          5 * 1000\r\n      ).onUpdate(({ value }) => {\r\n        setMaterialsOpacity(value);\r\n      })\r\n    }else{\r\n      tween = new TWEEN.Tween(opacity.current).to(\r\n          { value: 0.0 },\r\n          5 * 1000\r\n      ).onUpdate(({ value }) => {\r\n        setMaterialsOpacity(value);\r\n      }).onComplete(()=>{\r\n        setViseabk(false);\r\n      })\r\n    }\r\n    if(tween){\r\n      tween.start();\r\n    }\r\n    return ()=>{\r\n      if(tween){\r\n        tween.stop();\r\n      }\r\n    }\r\n  },[isShow])\r\n\r\n\r\n  useEffect(()=>{\r\n    if(materials){\r\n      // materials['8k Wet road with puddles'].envMap=roadEnvMap;\r\n    }\r\n  },[materials])\r\n\r\n\r\n  /**\r\n   * 路灯光源\r\n   */\r\n  // useEffect(()=>{\r\n  //   if(street){\r\n  //     street.traverse(child=>{\r\n  //       if(child.isMesh&&child.name.includes('光源')&&(!child.children||!child.children.length===0)){\r\n  //         const light=new THREE.PointLight(0xffffff,0);\r\n  //         child.add(light);\r\n  //       }\r\n  //       if(child.isLight&&isShow){\r\n  //         child.intensity=1.0;\r\n  //         console.log('设置管')\r\n  //       }\r\n  //     })\r\n  //   }\r\n  // },[street,isShow])\r\n  return (\r\n    <group >\r\n      {/* <mesh position-y={0.51}>\r\n        <boxGeometry></boxGeometry>\r\n        <meshStandardMaterial color={\"red\"}></meshStandardMaterial>\r\n      </mesh> */}\r\n      <mesh  scale={[50, 50, 50]} position-z={-100} >\r\n        <planeGeometry></planeGeometry >\r\n        <meshBasicMaterial color={\"#000\"} side={THREE.DoubleSide}></meshBasicMaterial>\r\n      </mesh>\r\n      <primitive visible={viseabk}  ref={setStreet}    object={scene ? scene : null} />\r\n      {street && (\r\n        <Clone\r\n          visible={viseabk}\r\n          ref={setCloneStreet1}\r\n          object={street}\r\n          // position-y={0.1}\r\n          // position-z={0.01}\r\n        ></Clone>\r\n      )}\r\n       {street && <Clone  visible={viseabk}  ref={setCloneStreet2} object={street} position-z={-size} ></Clone>}\r\n      {/* {street && <Clone ref={setCloneStreet3} object={street} position-z={-size*3}></Clone>} */}\r\n      {/* <boxHelper></boxHelper> */}\r\n      {isShow&& (\r\n          <MaxwellLightformers/>\r\n      )}\r\n    </group>\r\n  );\r\n}\r\n\r\nfunction MaxWellRoadScene({runState,speed,setSpeed,isShow}) {\r\n  return (\r\n    <Suspense>\r\n      <Model runState={runState} speed={speed} setSpeed={setSpeed} isShow={isShow}/>\r\n    </Suspense>\r\n  );\r\n}\r\nexport default MaxWellRoadScene;\r\n","import { MeshReflectorMaterial, useTexture } from \"@react-three/drei\";\r\nimport { useRef } from \"react\";\r\n/*\r\n * @Author: FMC\r\n * @Date: 2024-08-29 21:05:01\r\n * @LastEditors: FMC\r\n * @LastEditTime: 2024-09-04 23:34:55\r\n * @FilePath: \\fmc-personal-blog\\src\\example\\maxwell-car\\maxwell-car-three\\maxwell-ground\\maxwell-ground.jsx\r\n * @Description:\r\n */\r\nfunction MaxWellGround() {\r\n  const ref = useRef(null);\r\n  const scuffed_cement_disp_1k=useTexture( __VITE_URL__ +'/texture/scuffed_cement_1k/scuffed_cement_disp_1k.png')\r\n  const scuffed_cement_diff_1k=useTexture(__VITE_URL__ + '/texture/scuffed_cement_1k/scuffed_cement_diff_1k.jpg')\r\n  // useEffect(()=>{\r\n  //   const grid=ref.current;\r\n  //   grid.material.opacity = 0.2;\r\n  //   grid.material.depthWrite = false;\r\n  //   grid.material.transparent = true;\r\n  // },[])\r\n  return (\r\n    // <gridHelper ref={ref} args={[20, 40, 0xffffff, 0xffffff]}></gridHelper>\r\n    // <Helper  ref={ref} type={THREE.GridHelper} args={[20, 40, 0xffffff, 0xffffff]}></Helper>\r\n\r\n\r\n    //tood  映入地面粗糙度纹理\r\n    <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, -0.1, 0]}>\r\n      <planeGeometry args={[50, 50]} />\r\n      <MeshReflectorMaterial\r\n        blur={[600, 200]}\r\n        resolution={1024}\r\n        mixBlur={1}\r\n        mixStrength={300}\r\n        roughness={1}\r\n        depthScale={1.2}\r\n        minDepthThreshold={0.4}\r\n        maxDepthThreshold={1.4}\r\n        color=\"#111111\"\r\n        metalness={0.5}\r\n        displacementMap={scuffed_cement_disp_1k}\r\n        map={scuffed_cement_diff_1k}\r\n      />\r\n    </mesh>\r\n  );\r\n}\r\nexport default MaxWellGround;\r\n","/*\r\n * @Author: FMC\r\n * @Date: 2024-09-04 22:04:29\r\n * @LastEditors: FMC\r\n * @LastEditTime: 2024-09-08 11:35:25\r\n * @FilePath: \\fmc-personal-blog\\src\\example\\maxwell-car\\maxwell-car-three\\maxwell-text\\maxwell-text.jsx\r\n * @Description:\r\n */\r\nimport {\r\n  Billboard,\r\n  Center,\r\n  Text3D,\r\n  useTexture\r\n} from \"@react-three/drei\";\r\nimport { useThree,useLoader } from \"@react-three/fiber\";\r\n// import { Depth, LayerMaterial } from \"lamina\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\nimport { DRACOLoader } from \"three/examples/jsm/loaders/DRACOLoader\";\r\nimport TWEEN from \"@tweenjs/tween.js\";\r\nimport * as THREE from \"three\";\r\n\r\n// const Glow = ({\r\n//   color,\r\n//   scale = 1.5,\r\n//   size = new THREE.Vector3(1, 1, 1),\r\n//   near = -2,\r\n//   far = 1.4,\r\n// }) => {\r\n//   return (\r\n//     <Billboard>\r\n//       <mesh>\r\n//         <circleGeometry args={[2 * scale, 16]} />\r\n//         {/* <boxGeometry args={[2 * scale,2 * scale,2 * scale]}/> */}\r\n//         <LayerMaterial\r\n//           transparent\r\n//           depthWrite={false}\r\n//           blending={THREE.CustomBlending}\r\n//           blendEquation={THREE.AddEquation}\r\n//           blendSrc={THREE.SrcAlphaFactor}\r\n//           blendDst={THREE.DstAlphaFactor}\r\n//         >\r\n//           <Depth\r\n//             colorA={color}\r\n//             colorB=\"black\"\r\n//             alpha={1}\r\n//             mode=\"normal\"\r\n//             near={near * scale}\r\n//             far={far * scale}\r\n//             origin={[0, 0, 0]}\r\n//           />\r\n//           <Depth\r\n//             colorA={color}\r\n//             colorB=\"black\"\r\n//             alpha={0.5}\r\n//             mode=\"add\"\r\n//             near={-40 * scale}\r\n//             far={far * 1.2 * scale}\r\n//             origin={[0, 0, 0]}\r\n//           />\r\n//           <Depth\r\n//             colorA={color}\r\n//             colorB=\"black\"\r\n//             alpha={1}\r\n//             mode=\"add\"\r\n//             near={-15 * scale}\r\n//             far={far * 0.7 * scale}\r\n//             origin={[0, 0, 0]}\r\n//           />\r\n//           <Depth\r\n//             colorA={color}\r\n//             colorB=\"black\"\r\n//             alpha={1}\r\n//             mode=\"add\"\r\n//             near={-10 * scale}\r\n//             far={far * 0.68 * scale}\r\n//             origin={[0, 0, 0]}\r\n//           />\r\n//         </LayerMaterial>\r\n//       </mesh>\r\n//     </Billboard>\r\n//   );\r\n// };\r\n\r\nfunction MaxwellText({isShow=true}) {\r\n  // const [isShow,setShow]=useState(false);\r\n  const uProgress=useRef({\r\n    value: 1,\r\n  })\r\n  const textRef = useRef(null);\r\n  const [golwSize, setGlowSize] = useState(new THREE.Vector3(1, 1, 1));\r\n  const [text,setText]=useState();\r\n  const { scene, nodes} = useLoader(\r\n    GLTFLoader,\r\n    \"model/字体.glb\",\r\n    (loader) => {\r\n      const dracoLoader = new DRACOLoader();\r\n      dracoLoader.setDecoderPath(\"draco/\");\r\n      loader.setDRACOLoader(dracoLoader);\r\n    }\r\n  );\r\n  const perlinTexture=useTexture('texture/noiseTexture.png');\r\n  // 0显示 ，1隐藏\r\n  // const uProgress = {\r\n  //   value: 1,\r\n  // }\r\n  const uType = {\r\n    value: 0,\r\n  }\r\n  useEffect(() => {\r\n    if(!text||!textRef)return;\r\n    const boundingBox=new THREE.Box3();\r\n    boundingBox.setFromObject(text);\r\n    const size = new THREE.Vector3();\r\n    boundingBox.getSize(size);\r\n    const help=new THREE.Box3Helper(boundingBox,'#ffffff')\r\n    scene.add(help);\r\n    // console.log('text',text)\r\n    const w=boundingBox.max.z-boundingBox.min.z\r\n    const h=boundingBox.max.y-boundingBox.min.y\r\n    // debugger\r\n    \r\n    // // // 4. 打印包围盒的最小点和最大点\r\n    // console.log(\"大小\", size);\r\n    let opopo=0;\r\n    const count=text.geometry.attributes.position.count;\r\n    const posArray=text.geometry.attributes.position.array.slice();   \r\n    const aUv=[];\r\n    for(let i=0;i<count;i++){\r\n        const i3=i*3;\r\n        const i2=i*2;\r\n        aUv[i2]=(posArray[i3+2]-boundingBox.min.z)/w;\r\n        aUv[i2+1]=((posArray[i3+1]-boundingBox.min.y)/h)*1;\r\n        if(aUv[i2]>1||aUv[i2+1]>1){\r\n          opopo++;\r\n        }\r\n    }\r\n    text.geometry.setAttribute(\r\n      \"aUv\",\r\n      new THREE.BufferAttribute(new Float32Array(aUv), 2)\r\n    );\r\n    // setShow(true);\r\n  }, [text]);\r\n  const shaderCallback=(shader)=>{\r\n      shader.uniforms.uProgress=uProgress.current;\r\n      shader.uniforms.uPerlinTexture={value:perlinTexture};\r\n      shader.vertexShader = shader.vertexShader.replace(\r\n        \"#include <common>\",\r\n        /* glsl */ `\r\n\r\n                #include <common>\r\n\r\n                uniform float uProgress;\r\n                varying vec2 vUv;\r\n                attribute vec2 aUv;\r\n\r\n            `\r\n      );\r\n      shader.vertexShader = shader.vertexShader.replace(\r\n        \"#include <begin_vertex>\",\r\n        /* glsl */ `\r\n\r\n                #include <begin_vertex>\r\n                vUv=aUv;\r\n\r\n            `\r\n      );\r\n      shader.fragmentShader = shader.fragmentShader.replace(\r\n        \"#include <common>\",\r\n        /* glsl */ `\r\n\r\n                 varying vec2 vUv;\r\n                 uniform float uProgress;\r\n                 uniform sampler2D uPerlinTexture;\r\n                #include <common>\r\n\r\n            `\r\n      );\r\n\r\n      shader.fragmentShader = shader.fragmentShader.replace(\r\n        \"vec4 diffuseColor = vec4( diffuse, opacity );\",\r\n        /* glsl */ `\r\n                \r\n                vec4 diffuseColor = vec4( diffuse, opacity );\r\n            `\r\n      );\r\n      shader.fragmentShader = shader.fragmentShader.replace(\r\n        \"vec3 totalEmissiveRadiance = emissive;\",\r\n        /* glsl */ `\r\n        vec3 totalEmissiveRadiance = emissive;\r\n        vec2 fmcUv=clamp(vUv,0.0,1.0);\r\n        float fmcDuration=0.4;\r\n        float noise=texture(uPerlinTexture,vec2(fmcUv.x,fmcUv.x)).r;\r\n        float fmcDelay=(1.0-fmcDuration)*noise;\r\n        float fmcEnd=fmcDuration+fmcDelay;\r\n        float fmcProgress=smoothstep(fmcDelay,fmcEnd ,uProgress );\r\n\r\n        fmcProgress=fmcProgress*1.02-0.01;\r\n        float strength=1.0-step(fmcUv.y,fmcProgress);\r\n        if(strength<0.01) discard;\r\n            `\r\n      );\r\n  }\r\n  useEffect(()=>{\r\n    let tween=null;\r\n    if(isShow){\r\n      tween = new TWEEN.Tween(uProgress.current).to(\r\n        { value: 0 },\r\n        5 * 1000\r\n      )\r\n    }else{\r\n      tween = new TWEEN.Tween(uProgress.current).to(\r\n        { value: 1 },\r\n        5 * 1000\r\n      );\r\n    }\r\n    if(tween){\r\n      tween.start();\r\n    } \r\n    return ()=>{\r\n      if(tween){\r\n        tween.stop();\r\n      }\r\n    }\r\n  },[isShow])\r\n  return (\r\n\r\n    <group position={[4, 2, 1]} rotation={[0, -Math.PI, 0]} scale={[1.5, 1.5, 1.5]} dispose={null}>\r\n      <mesh\r\n          scale={[0.8, 0.8,0.8]}\r\n        ref={setText}\r\n        geometry={nodes['文本'].geometry}\r\n      >\r\n        <meshPhysicalMaterial\r\n          color={'#1e90ff'}\r\n          toneMapped={false}\r\n          transparent={true}\r\n          emissive={'#1e90ff'}\r\n          emissiveIntensity={1.3}\r\n          onBeforeCompile={shaderCallback}\r\n        ></meshPhysicalMaterial>\r\n      </mesh>\r\n    </group>\r\n    // <Center {...prpos} center ref={textRef}>\r\n    //   <Text3D\r\n    //     font=\"/fonts/cn.json\"\r\n    //     ref={setText}\r\n    //     size={0.75}\r\n    //     height={0.2}\r\n    //     curveSegments={12}\r\n    //     bevelEnabled\r\n    //     bevelThickness={0.05}\r\n    //     bevelSize={0.02}\r\n    //     bevelOffset={0}\r\n    //     bevelSegments={5}\r\n    //     letterSpacing={0.5}\r\n    //   >\r\n    //     {\"MAXWELL\"}\r\n    //     {/* <meshBasicMaterial color={\"red\"}></meshBasicMaterial> */}\r\n    //     {/* <meshPhysicalMaterial roughness={0} color={\"#999\"} emissive=\"green\" envMapIntensity={0.2} />\r\n    //     <Glow size={golwSize}  near={-25} color={'lightgreen'} /> */}\r\n    //     {/* <meshMatcapMaterial matcap={matcap} /> */}\r\n    //     {/* <Helper type={THREE.BoxHelper}></Helper> */}\r\n    //     <meshPhysicalMaterial\r\n    //       color={'#1e90ff'}\r\n    //       toneMapped={false}\r\n    //       transparent={true}\r\n    //       emissive={'#1e90ff'}\r\n    //       emissiveIntensity={1.3}\r\n    //       onBeforeCompile={shaderCallback}\r\n    //     ></meshPhysicalMaterial>\r\n    //   </Text3D>\r\n    //   {/* <Helper type={THREE.BoxHelper}></Helper> */}\r\n    // </Center>\r\n  );\r\n}\r\nexport default MaxwellText;\r\n","import MaxWellGround from \"../maxwell-ground/maxwell-ground\";\r\nimport MaxwellText from \"../maxwell-text/maxwell-text\";\r\nimport { Suspense, useMemo } from \"react\";\r\n\r\nfunction MaxWellRoomScene() {\r\n  const maxWellGround = useMemo(() => <MaxWellGround />, []); // 通过 useMemo 缓存 MaxWellGround\r\n\r\n  return (\r\n    <>\r\n      <Suspense>\r\n        {maxWellGround} {/* 使用缓存的 MaxWellGround */}\r\n      </Suspense>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MaxWellRoomScene;\r\n","/**\r\n * 科技展示场景\r\n * @returns {JSX.Element}\r\n * @constructor\r\n */\r\nimport { extend, useFrame, useLoader, useThree } from \"@react-three/fiber\";\r\n\r\n\r\n/*\r\n * @Author: FMC\r\n * @Date: 2024-09-04 22:04:29\r\n * @LastEditors: FMC\r\n * @LastEditTime: 2024-11-19 22:21:17\r\n * @FilePath: \\fmc-personal-blog\\src\\example\\maxwell-car\\maxwell-car-three\\maxwell-tech-scene\\maxwell-tech-scene.jsx\r\n * @Description:\r\n */\r\n// import { Depth, LayerMaterial } from \"lamina\";\r\nimport MaxWellGround from \"@/example/maxwell-car/maxwell-car-three/maxwell-ground/maxwell-ground.jsx\";\r\nimport {Clone, useTexture} from \"@react-three/drei\";\r\nimport {Suspense, useContext, useEffect, useMemo, useRef, useState} from \"react\";\r\nimport * as THREE from \"three\";\r\nimport { DRACOLoader } from \"three/examples/jsm/loaders/DRACOLoader\";\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\nimport radaMaterailFs from './shader/rada.fs.glsl';\r\nimport radaMaterailVs from './shader/rada.vs.glsl';\r\nimport {MaxWellContext} from \"@/example/maxwell-car/context/maxwell-car-context.js\";\r\nimport {CAR_TECH_TYPE} from \"@/example/maxwell-car/enum/enum.js\";\r\n\r\nfunction MaxwellCarFlow() {\r\n    const {nodes, materials} = useLoader(\r\n        GLTFLoader,\r\n        \"model/流.glb\",\r\n        (loader) => {\r\n            const dracoLoader = new DRACOLoader();\r\n            dracoLoader.setDecoderPath(\"draco/\");\r\n            loader.setDRACOLoader(dracoLoader);\r\n        }\r\n    );\r\n    useFrame((state, delta)=>{\r\n\r\n        if(materials&&materials['空气流材质']){\r\n            const {map}=materials['空气流材质'];\r\n             map.offset.y+=delta;\r\n\r\n        }\r\n    })\r\n\r\n    return (\r\n        <Suspense>\r\n            <group>\r\n                <mesh geometry={nodes['流'].geometry} material={materials['空气流材质']}/>\r\n            </group>\r\n        </Suspense>\r\n    );\r\n}\r\n\r\nfunction MaxwellCircleWave(){\r\n    const {scene}=useThree();\r\n    const pointsTexture = useTexture(\"texture/circle_05.png\");\r\n    const perlinTexture=useTexture('texture/noiseTexture.png');\r\n    const innerRadius=8;\r\n    const uTime=useRef({value:0});\r\n    const pointsRef=useRef(null);\r\n    // const outerRadius=2;\r\n\r\n    const  initGeometry = () => {\r\n        const curve = new THREE.EllipseCurve(\r\n            0,  0,            // ax, aY\r\n            innerRadius, innerRadius,           // xRadius, yRadius\r\n            0,  2 * Math.PI,  // aStartAngle, aEndAngle\r\n            false,            // aClockwise\r\n            0                 // aRotation\r\n        );\r\n        let pointsPos=[];\r\n        let singleNum=720-1;\r\n        // const pointsPos=curve.getPoints(180);\r\n        for(let i=0;i<5;i++){\r\n            pointsPos=[...pointsPos,...curve.getPoints(singleNum)]\r\n            curve.xRadius+=0.2;\r\n            curve.yRadius+=0.2;\r\n            // singleNum+=20;\r\n        }\r\n        const aIndex=pointsPos.map((item,index)=>index);\r\n        const geometry = new THREE.BufferGeometry().setFromPoints( pointsPos);\r\n\r\n        geometry.rotateX(Math.PI*0.5);\r\n        geometry.translate(0,0.1,2.5);\r\n        let geoPosList=geometry.getAttribute('position').array.slice();\r\n\r\n        for(let i=0;i<geoPosList.length/3;i++){\r\n            const i3=i*3;\r\n            geoPosList[i3+1]+=Math.floor(i/720)*0.15;\r\n        }\r\n\r\n        const aNormals=[];\r\n        for(let i=0;i<geoPosList.length/3;i++){\r\n            const i3=i*3;\r\n            aNormals[i3]=geoPosList[(i%720+720*4)*3]-geoPosList[(i%720)*3]\r\n            aNormals[i3+1]=geoPosList[(i%720+720*4)*3+1]-geoPosList[(i%720)*3+1]\r\n            aNormals[i3+2]=geoPosList[(i%720+720*4)*3+2]-geoPosList[(i%720)*3+2]\r\n        }\r\n        geometry.setAttribute('aNormal',new THREE.BufferAttribute(new Float32Array(aNormals), 3));\r\n        geometry.setAttribute('aIndex',new THREE.BufferAttribute(new Float32Array(aIndex), 1));\r\n        geometry.setAttribute('position',new THREE.BufferAttribute(new Float32Array(geoPosList), 3));\r\n        const pointsMaterial = new THREE.PointsMaterial({\r\n            color:0x409eff,\r\n            size:0.5,\r\n            map:pointsTexture,\r\n            alphaMap:pointsTexture,\r\n            transparent:true,\r\n            depthWrite:false,\r\n\r\n            blending:THREE.AdditiveBlending,\r\n        })\r\n        pointsMaterial.onBeforeCompile=((shader)=>{\r\n            shader.uniforms.uTime = uTime.current;\r\n            shader.uniforms.uPerlinTexture={value:perlinTexture};\r\n            shader.uniforms.baseColor1={value:new THREE.Color(0x90EE90)};\r\n            shader.uniforms.baseColor2={value:new THREE.Color(0xFFA500)};\r\n            shader.uniforms.baseColor3={value:new THREE.Color(0x9B30FF)};\r\n            shader.vertexShader = shader.vertexShader.replace(\r\n                \"#include <common>\",\r\n                /* glsl */ `\r\n\r\n            #include <common>\r\n            attribute float aIndex;\r\n            attribute vec3 aNormal;\r\n            uniform float uTime;\r\n            uniform sampler2D uPerlinTexture;\r\n            varying float vIndex;\r\n            varying float vSelfIndex;\r\n            varying float vCircleNum;\r\n            \r\n            float getStrength(float aIndex,float uTime,vec3 aNormal){\r\n                    float selfIndex = mod(aIndex, 720.0);      // 计算每个点在圆环上的位置索引\r\n                    float circleNum = (aIndex - selfIndex) / 720.0; // 计算点所在的“圈号”，但此值目前未使用\r\n                \r\n                    vec3 pDir = normalize(aNormal);            // 获取法线方向，后续将用其调整偏移方向\r\n                    float waveWidth = 90.0;                    // 波动效果的宽度\r\n                    float totalLength = 720.0;                 // 圆的总长度（720度）\r\n                    float modUtime = mod(uTime * 50.0, 720.0); // 时间的循环，乘以 30.0 是加速效果\r\n                    float dw = waveWidth*0.5;              // 平滑过渡的宽度，控制波动的范围\r\n                \r\n                    // 计算波动强度\r\n                    // 对首尾连接部分（0 和 720）进行平滑过渡处理\r\n                    float smoothStart = smoothstep(modUtime , modUtime+dw, selfIndex);\r\n                    float smoothEnd = 1.0-smoothstep(modUtime+waveWidth - dw,modUtime+waveWidth, selfIndex);\r\n                    \r\n                    // 创建平滑连接：确保波动在 [720 - dw, 720 + waveWidth] 和 [0, dw] 区间内平滑过渡\r\n                    float strength = min(smoothStart,smoothEnd);\r\n                    \r\n                    \r\n                    float isOver=step(720.0,modUtime+waveWidth);\r\n                    float over=(modUtime+waveWidth-720.0);\r\n                    float isOverStep1=(1.0-step(dw,over))*isOver;\r\n                    float isOverStep2=step(dw,over);\r\n                    \r\n                    float overStep1Left=min(smoothstep(modUtime,modUtime+dw,selfIndex),(1.0-smoothstep(modUtime+waveWidth - dw,modUtime+waveWidth, selfIndex)));\r\n                    float overStep1Right=1.0-smoothstep(modUtime+waveWidth - dw,modUtime+waveWidth, selfIndex+720.0);\r\n                    float overStep1=max(overStep1Left,overStep1Right);\r\n                    \r\n                    float overStep2Left=smoothstep(modUtime,modUtime+dw,selfIndex);\r\n                    float overStep2Right=min(smoothstep(modUtime,modUtime+dw,selfIndex+720.0),(1.0-smoothstep(modUtime+waveWidth - dw,modUtime+waveWidth, selfIndex+720.0)));\r\n                    float overStep2=max(overStep2Left,overStep2Right);\r\n                    \r\n                    float os=isOverStep1*overStep1+overStep2*isOverStep2;\r\n\r\n\r\n \r\n                    \r\n                    \r\n     \r\n                    strength=(1.0-isOver)*strength+isOver*os;\r\n                    return strength;\r\n            }\r\n        `\r\n            );\r\n            shader.vertexShader = shader.vertexShader.replace(\r\n                \"#include <begin_vertex>\",\r\n                /* glsl */ `\r\n\r\n                   #include <begin_vertex>\r\n                       float selfIndex = mod(aIndex, 720.0);\r\n                     float circleNum = (aIndex - selfIndex) / 720.0;\r\n                    vec3 pDir = normalize(aNormal);  \r\n\r\n                \r\n                    float noise=texture(uPerlinTexture,vec2((selfIndex/720.0),mod(uTime*0.1,1.0))).r;\r\n                \r\n               \r\n                    float strength=getStrength(aIndex,uTime,aNormal);\r\n                        strength+=getStrength(aIndex,uTime+10.0+noise,aNormal);\r\n                        strength+=getStrength(aIndex,uTime+20.0+noise,aNormal);\r\n                        strength+=getStrength(aIndex,uTime+30.0+noise,aNormal);\r\n                        strength+=getStrength(aIndex,uTime+40.0+noise,aNormal);                        \r\n                        strength+=getStrength(aIndex,uTime+50.0+noise,aNormal); \r\n                        strength+=getStrength(aIndex,uTime+60.0+noise,aNormal); \r\n                        strength+=getStrength(aIndex,uTime+70.0+noise,aNormal);  \r\n                        strength+=getStrength(aIndex,uTime+80.0+noise,aNormal);\r\n                        strength+=getStrength(aIndex,uTime+90.0+noise,aNormal);                         \r\n\r\n\r\n                                     // 偏移的强度因子，当前没有动态变化\r\n                \r\n                    // 基于法线方向和波动强度偏移点的 x 和 z 坐标\r\n                    transformed.x += pDir.x * strength*0.5;\r\n                    transformed.z += pDir.z* strength*0.5;\r\n                     transformed.y += strength*circleNum*noise*0.6 ;\r\n                    //transformed.y +=strength * circleNum*0.08;\r\n                    \r\n                \r\n                    vIndex = aIndex;                          // 将索引传递给片段着色器（或者用于调试）\r\n            `\r\n            );\r\n            shader.fragmentShader = shader.fragmentShader.replace(\r\n                \"#include <common>\",\r\n                /* glsl */ `\r\n\r\n                 varying float vIndex;\r\n                 \r\n                  uniform float uTime;\r\n                  uniform vec3 baseColor1;\r\n                  uniform sampler2D uPerlinTexture;\r\n                  uniform vec3 baseColor2;\r\n                  uniform vec3 baseColor3;\r\n                #include <common>\r\n            `\r\n            );\r\n\r\n            shader.fragmentShader = shader.fragmentShader.replace(\r\n                \"vec4 diffuseColor = vec4( diffuse, opacity );\",\r\n                /* glsl */ `\r\n                vec3 whiteColor = vec3( 1.0,1.0,1.0);\r\n                float selfIndex=mod(vIndex,720.0);\r\n                float circleNum=(vIndex - selfIndex)/720.0;\r\n                //float nuo=mod(uTime*0.2,1.0);\r\n                vec3  baseColor=mix(baseColor1,baseColor2,mod(uTime*0.1,1.0));\r\n                 baseColor=mix(baseColor,baseColor3,mod(uTime*0.2,1.0));\r\n                vec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\r\n                finalColor*=1.0;\r\n                vec4 diffuseColor = vec4( finalColor, opacity );\r\n            `\r\n            );\r\n        })\r\n        const points=new THREE.Points(geometry, pointsMaterial);\r\n        scene.add(points);\r\n\r\n        return points;\r\n    }\r\n  useEffect(()=>{\r\n      const points=initGeometry();\r\n    return()=>{\r\n        scene.remove(points);\r\n    }\r\n  },[]);\r\n    useFrame((state, delta)=>{\r\n        uTime.current.value+=delta;\r\n    })\r\n\r\n    return (\r\n    <></>\r\n    )\r\n}\r\n\r\n\r\n\r\nfunction MaxwellRaDa(){\r\n    const [rada, setRada] = useState(null);\r\n    const [size, setSize] = useState(0);\r\n    const radaRadius=9;\r\n    const [otherCarScene, setOtherCarScene] = useState(null);\r\n    const [otherCarScene1, setOtherCarScene1] = useState(null);\r\n    const [otherCarScene2, setOtherCarScene2] = useState(null);\r\n    const carScanMaterail=useRef(null)\r\n\r\n    const uTime=useRef({value:0});\r\n\r\n    /**\r\n     * 加载Draco模型\r\n     */\r\n    const { scene, nodes, materials } = useLoader(\r\n        GLTFLoader,\r\n        \"model/low_poly_cars_pack.glb\",\r\n        (loader) => {\r\n            const dracoLoader = new DRACOLoader();\r\n            dracoLoader.setDecoderPath(\"draco/\");\r\n            loader.setDRACOLoader(dracoLoader);\r\n        }\r\n    );\r\n    const getGroupBox3 = (group) => {\r\n        let box3 = new THREE.Box3();\r\n        group.traverse((child) => {\r\n            if (child.isMesh) {\r\n                const mesh = child.clone();\r\n                mesh.updateMatrixWorld(true);\r\n                const childBoundingBox = new THREE.Box3().setFromObject(mesh);\r\n                box3.union(childBoundingBox);\r\n            }\r\n        });\r\n        setSize(box3.max.z - box3.min.z -1);\r\n\r\n    };\r\n    const updateCar=(carScene)=>{\r\n        const worldPos=new THREE.Vector3();\r\n        carScene.traverse((child)=>{\r\n            if(child.isMesh&&child.name.includes('car')){\r\n                child.updateMatrixWorld(true);\r\n                const pos3=child.getWorldPosition(worldPos);\r\n                const pos2=new THREE.Vector2(pos3.x,pos3.z);\r\n                if(pos2.length()<=radaRadius){\r\n                    if(carScanMaterail.current){\r\n                        child.material=carScanMaterail.current;\r\n                    }\r\n                }else{\r\n                    child.material=materials['车白模'];\r\n                }\r\n            }\r\n        })\r\n    }\r\n    const reset=()=>{\r\n        if (otherCarScene1&&otherCarScene2&&otherCarScene) {\r\n            otherCarScene.position.z=0;\r\n            otherCarScene1.position.z=size;\r\n            otherCarScene2.position.z=-size;\r\n        }\r\n    }\r\n    useEffect(()=>{\r\n        if(otherCarScene){\r\n            getGroupBox3(otherCarScene);\r\n            // updateCar(otherCarScene);\r\n        }\r\n    },[otherCarScene]);\r\n    useEffect(()=>{\r\n        if(materials&&!carScanMaterail.current){\r\n            const carMaterials=materials['车白模'];\r\n            carScanMaterail.current=carMaterials.clone();\r\n        }\r\n    },[materials])\r\n    useEffect(()=>{\r\n        if(!carScanMaterail.current) return;\r\n        carScanMaterail.current.onBeforeCompile=((shader)=>{\r\n            {\r\n\r\n                shader.uniforms.uTime = uTime.current;\r\n                shader.vertexShader = shader.vertexShader.replace(\r\n                    \"#include <common>\",\r\n                    /* glsl */ `\r\n\r\n                    #include <common>\r\n                    varying vec3 vPosition;\r\n                 `\r\n                );\r\n                shader.vertexShader = shader.vertexShader.replace(\r\n                    \"#include <begin_vertex>\",\r\n                    /* glsl */ `\r\n               #include <begin_vertex>                    \r\n                vPosition = transformed; \r\n        `\r\n                );\r\n                shader.fragmentShader = shader.fragmentShader.replace(\r\n                    \"#include <common>\",\r\n                    /* glsl */ `\r\n     \r\n                    uniform float uTime;            \r\n                    varying vec3 vPosition;\r\n                    #include <common>\r\n                `\r\n                );\r\n                shader.fragmentShader = shader.fragmentShader.replace(\r\n                    \"vec4 diffuseColor = vec4( diffuse, opacity );\",\r\n                    /* glsl */ `\r\n                    float progress=clamp(0.0,1.0,vPosition.y/3.2);\r\n                    float dw=0.05;\r\n                    float start=uTime*0.6;\r\n                    start=mod(start,1.0);\r\n                    float end=start+0.1;\r\n                    float strength=min(smoothstep(start,start+dw,progress),(1.0-smoothstep(end-dw,end,progress)));\r\n                    \r\n                    vec3 mixColor=mix(diffuse,vec3(0.6,0.6,0.6),strength);\r\n                    vec4 diffuseColor =vec4(mixColor, opacity );;\r\n        `\r\n                );\r\n            }\r\n        })\r\n    },[carScanMaterail.current])\r\n    // useEffect(()=>{\r\n    //     if(nodes){\r\n    //         const mesh=nodes['car12'];\r\n    //         mesh.updateMatrixWorld(true);\r\n    //         let box3 = new THREE.Box3();\r\n    //         box3=box3.setFromObject(mesh);\r\n    //         console.log(box3);\r\n    //         // const tesh=new THREE.Box3Helper(box3);\r\n    //         // scene.add(tesh);\r\n    //     }\r\n    // },[nodes])\r\n\r\n    const radaShader =(shader)=>{\r\n        const props={\r\n            position: [0, 0, 0],\r\n            radius: radaRadius*0.99,\r\n            size: radaRadius,\r\n            color: 0x409eff,\r\n            opacity: 0.9,\r\n            speed: 110,\r\n            followWidth: 90, //扇面大小\r\n        }\r\n        shader.uniforms.uTime = uTime.current;\r\n        shader.uniforms.uSpeed={value:props.speed};\r\n        shader.uniforms.uRadius={value:props.radius};\r\n        shader.uniforms.uFollowWidth={value:props.followWidth};\r\n        shader.uniforms.ncolor={value:new THREE.Color(props.color)};\r\n\r\n        shader.vertexShader = shader.vertexShader.replace(\r\n            \"#include <common>\",\r\n            /* glsl */ `\r\n\r\n        #include <common>\r\n        varying vec3 vPosition;\r\n        `\r\n        );\r\n        shader.vertexShader = shader.vertexShader.replace(\r\n            \"#include <begin_vertex>\",\r\n            /* glsl */ `\r\n               #include <begin_vertex>                    \r\n                vPosition = position; \r\n        `\r\n        );\r\n        shader.fragmentShader = shader.fragmentShader.replace(\r\n            \"#include <common>\",\r\n            /* glsl */ `\r\n            uniform float uRadius;     \r\n            uniform float uTime;            \r\n            uniform float uSpeed; \r\n            uniform float uFollowWidth; \r\n            varying vec3 vPosition;\r\n            uniform vec3 ncolor;\r\n            float calcAngle(vec3 oFrag){\r\n                float fragAngle;\r\n                const vec3 ox = vec3(1,0,0);\r\n                float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\r\n                float oFrag_length = length(oFrag); // length是内置函数\r\n                float ox_length = length(ox); // length是内置函数\r\n                float yuxian = dianji / (oFrag_length * ox_length);\r\n                fragAngle = acos(yuxian);\r\n                fragAngle = degrees(fragAngle);\r\n                if(oFrag.z > 0.0) {\r\n                fragAngle = -fragAngle + 360.0;\r\n                }\r\n                float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\r\n                float angle = scanAngle - fragAngle;\r\n                if(angle < 0.0){\r\n                angle = angle + 360.0;\r\n                }\r\n                return angle;\r\n            }\r\n            #include <common>\r\n        `\r\n        );\r\n        shader.fragmentShader = shader.fragmentShader.replace(\r\n            \"vec4 diffuseColor = vec4( diffuse, opacity );\",\r\n            /* glsl */ `\r\n            vec4 finalColor=vec4(0.0,0.0,0.0,1.0);\r\n        if(length(vPosition) == 0.0 || length(vPosition) > uRadius){\r\n\t\t\tfinalColor = vec4( ncolor, 1.0);\r\n\t\t} else {\r\n\t\t\tfloat angle = calcAngle(vPosition);\r\n\t\t\tif(angle < uFollowWidth){\r\n\t\t\t\t// 尾焰区域\r\n\t\t\t\tfloat opacity1 =  1.0 - angle / uFollowWidth; \r\n\t\t\t\tfinalColor = vec4( ncolor, 1.0 * opacity1 );  \r\n\t\t\t} else {\r\n\t\t\t\t// 其他位置的像素均为透明\r\n\t\t\t\tfinalColor = vec4( ncolor, 0.0 ); \r\n\t\t\t}\r\n\t\t}\r\n            float angle = calcAngle(vPosition);\r\n            //vec4 diffuseColor =vec4((angle/360.0),0.0,0.0,1.0);\r\n            vec4 diffuseColor =finalColor;\r\n        `\r\n        );\r\n    }\r\n    useFrame((state,delta)=>{\r\n        if(rada){\r\n            uTime.current.value+=delta;\r\n        }\r\n\r\n    })\r\n    useEffect(()=>{\r\n        reset();\r\n    },[otherCarScene,otherCarScene1,otherCarScene2])\r\n    useFrame((state, delta) => {\r\n        const a = -size * 2.0;\r\n        if (otherCarScene1&&otherCarScene2&&otherCarScene) {\r\n            const speed=10.0;\r\n            updateCar(otherCarScene1);\r\n            updateCar(otherCarScene);\r\n            updateCar(otherCarScene2);\r\n            const list=[otherCarScene1,otherCarScene,otherCarScene2];\r\n            list.forEach(item1=>{\r\n                item1.position.z -= speed * delta;\r\n            })\r\n            //升序排列\r\n            list.sort((a,b) => a.position.z - b.position.z);\r\n            if(list[0].position.z <a){\r\n                list[0].position.z = list[1].position.z + size*2;\r\n            }\r\n            list[0].position.y=[0.01]\r\n            list[1].position.y=[0]\r\n            list[2].position.y=[0.01]\r\n        }\r\n    });\r\n    return (\r\n        <>\r\n            <group\r\n            >\r\n                <primitive\r\n                    ref={setOtherCarScene}\r\n                    castShadow={false}\r\n                    receiveShadow={false}\r\n                    object={scene ? scene : null}\r\n                />\r\n                {otherCarScene && (\r\n                    <Clone\r\n                        ref={setOtherCarScene1}\r\n                        object={otherCarScene}\r\n                        deep={true}\r\n                        position-z={size}\r\n                        castShadow={false}\r\n                        receiveShadow={false}\r\n                        inject={(clone) => {\r\n                            // console.log('更新')\r\n                            // clone.traverse((child) => {\r\n                            //     if (child.isMesh) {\r\n                            //         child.updateMatrixWorld(true)\r\n                            //     }\r\n                            // });\r\n                        }}\r\n                    ></Clone>\r\n                )}\r\n                {otherCarScene && (\r\n                    <Clone\r\n                        ref={setOtherCarScene2}\r\n                        object={otherCarScene}\r\n                        deep={true}\r\n                        castShadow={false}\r\n                        receiveShadow={false}\r\n                        position-z={-size}\r\n                        inject={(clone) => {\r\n                            // clone.traverse((child) => {\r\n                            //     if (child.isMesh) {\r\n                            //         child.updateMatrixWorld(true);\r\n                            //     }\r\n                            // });\r\n                        }}\r\n                    ></Clone>\r\n                )}\r\n            </group>\r\n            <mesh ref={setRada} position-y={0.2} rotation-x={Math.PI*0.5} rotation-z={Math.PI*0.5}>\r\n                <circleGeometry args={[radaRadius,1000]}></circleGeometry>\r\n                <meshBasicMaterial  \r\n                transparent={true} \r\n                 blending={THREE.AdditiveBlending} \r\n                 side={THREE.DoubleSide}\r\n                 depthTest={true}\r\n                 depthWrite={false}\r\n                 onBeforeCompile={radaShader }></meshBasicMaterial>\r\n            </mesh>\r\n        </>\r\n    )\r\n}\r\nfunction  TY(){\r\n    const [box,setBox]=useState(null);\r\n    const [box2,setBox2]=useState(null);\r\n    useEffect(()=>{\r\n        const vec3=new THREE.Vector3();\r\n        const vec3a=new THREE.Vector3();\r\n        if(box2&&box){\r\n            box.updateMatrixWorld(true);\r\n            box2.updateMatrixWorld(true);\r\n        }\r\n    },[box,box2])\r\n    return <>\r\n        <mesh ref={setBox} position-y={2.5}>\r\n            <boxGeometry></boxGeometry>\r\n            <meshBasicMaterial color={'#550000'}></meshBasicMaterial>\r\n        </mesh>\r\n        {\r\n            box&&<Clone ref={setBox2} object={box} position-x={3}></Clone>\r\n        }\r\n    </>\r\n}\r\n\r\nfunction MaxwellTechScene() {\r\n    const {techType} = useContext(MaxWellContext);\r\n    const maxWellGround = useMemo(() => <MaxWellGround/>, []);\r\n\r\n    return <>\r\n        {techType===CAR_TECH_TYPE.FLOW&&<MaxwellCarFlow/>}\r\n        {techType!==CAR_TECH_TYPE.LD&&maxWellGround}\r\n        {techType===CAR_TECH_TYPE.MEDEA&&<MaxwellCircleWave/>}\r\n        {techType===CAR_TECH_TYPE.LD&&<MaxwellRaDa/>}\r\n    </>\r\n}\r\n\r\nexport default MaxwellTechScene;","import MaxwellHoda from \"../maxwell-hoda/maxwell-hoda-re.jsx\";\r\nimport {useContext, useEffect, useState} from \"react\";\r\nimport TWEEN from \"@tweenjs/tween.js\";\r\nimport MaxWellRoadScene from \"../maxwell-road-scene/maxwell-road-scene\";\r\nimport {MaxWellContext} from \"../../context/maxwell-car-context\";\r\nimport {CAR_SCENE_TYPE, CAR_TECH_TYPE} from \"../../enum/enum\";\r\nimport MaxWellRoomScene from \"../maxwll-room-scene/maxwll-room-scene\";\r\nimport MaxwellText from \"@/example/maxwell-car/maxwell-car-three/maxwell-text/maxwell-text.jsx\";\r\nimport MaxwellTechScene from \"@/example/maxwell-car/maxwell-car-three/maxwell-tech-scene/maxwell-tech-scene.jsx\";\r\n\r\nfunction MaxwellSceneManager() {\r\n    const {sceneType,techType} = useContext(MaxWellContext);\r\n    const [speed, setSpeed] = useState(0);\r\n    const [runState, setRunState] = useState(\"RUNNING\");\r\n    // const maxwellHoda = useMemo(() => <MaxWellGround speed={speed}/>, [speed]);\r\n    useEffect(() => {\r\n        let tween = null;\r\n        if (sceneType === CAR_SCENE_TYPE.SHOWROOM) {\r\n            tween = new TWEEN.Tween({value: 20})\r\n                .to({value: 0}, 2 * 1000)\r\n                .onUpdate(({value}) => {\r\n                    setSpeed(value);\r\n                });\r\n            setRunState(\"STOP\");\r\n        }else if(sceneType===CAR_SCENE_TYPE.TECH){\r\n            switch (techType) {\r\n                case CAR_TECH_TYPE.MEDEA:\r\n                    if(speed===20){\r\n                        tween = new TWEEN.Tween({value: 20})\r\n                            .to({value: 0}, 2 * 1000)\r\n                            .onUpdate(({value}) => {\r\n                                setSpeed(value);\r\n                            });\r\n                        setRunState(\"STOP\");\r\n                    }\r\n                    break;\r\n                case CAR_TECH_TYPE.FLOW:\r\n                case CAR_TECH_TYPE.LD:\r\n                    if(speed===0){\r\n                        setRunState(\"RUNNING\");\r\n                        tween = new TWEEN.Tween({value: 0})\r\n                            .to({value: 20}, 2 * 1000)\r\n                            .onUpdate(({value}) => {\r\n                                setSpeed(value);\r\n                            });\r\n                    }\r\n                    break;\r\n            }\r\n\r\n        }\r\n        else if (sceneType === CAR_SCENE_TYPE.ROAD) {\r\n            setRunState(\"RUNNING\");\r\n            tween = new TWEEN.Tween({value: 0})\r\n                .to({value: 20}, 2 * 1000)\r\n                .onUpdate(({value}) => {\r\n                    setSpeed(value);\r\n                });\r\n        }\r\n        if (tween) {\r\n            tween.start();\r\n        }\r\n        return () => {\r\n            if (tween) {\r\n                tween.stop();\r\n            }\r\n        };\r\n    }, [sceneType,techType]);\r\n    return (\r\n        <>\r\n            <MaxwellHoda speed={speed}></MaxwellHoda>\r\n            <MaxwellText isShow={sceneType === CAR_SCENE_TYPE.SHOWROOM}/>\r\n            {sceneType === CAR_SCENE_TYPE.SHOWROOM && (\r\n                <MaxWellRoomScene></MaxWellRoomScene>\r\n            )}\r\n            <MaxWellRoadScene\r\n                runState={runState}\r\n                speed={speed}\r\n                setSpeed={(val) => {\r\n                    setSpeed(val);\r\n                }}\r\n                isShow={sceneType === CAR_SCENE_TYPE.ROAD}\r\n            ></MaxWellRoadScene>\r\n            {sceneType === CAR_SCENE_TYPE.TECH && (\r\n                // <mesh>\r\n                //     <boxGeometry></boxGeometry>\r\n                //     <meshBasicMaterial></meshBasicMaterial>\r\n                // </mesh>\r\n                <MaxwellTechScene></MaxwellTechScene>\r\n            )}\r\n            {/*{sceneType === CAR_SCENE_TYPE.ROAD && (*/}\r\n            {/*  <MaxWellRoadScene*/}\r\n            {/*    runState={runState}*/}\r\n            {/*    speed={speed}*/}\r\n            {/*    setSpeed={(val) => {*/}\r\n            {/*      setSpeed(val);*/}\r\n            {/*    }}*/}\r\n            {/*    isShow={sceneType === CAR_SCENE_TYPE.ROAD}*/}\r\n            {/*  ></MaxWellRoadScene>*/}\r\n            {/*)}*/}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default MaxwellSceneManager;\r\n","/*\r\n * @Author: FMC\r\n * @Date: 2024-07-15 21:16:27\r\n * @LastEditors: FMC\r\n * @LastEditTime: 2024-11-19 22:18:47\r\n * @FilePath: \\fmc-personal-blog\\src\\example\\maxwell-car\\maxwell-car-three\\maxwell-car-three.jsx\r\n * @Description:\r\n *\r\n */\r\nimport { ContactShadows, Loader, Stats } from \"@react-three/drei\";\r\nimport { Canvas } from \"@react-three/fiber\";\r\nimport { Leva } from \"leva\";\r\nimport * as THREE from \"three\";\r\nimport MaxWellCarBaeEnv from \"./maxwell-car-base-env/maxwell-car-base-env\";\r\nimport \"./maxwell-car-three.less\";\r\nimport MaxwellEffects from \"./maxwell-effects/maxwell-effects\";\r\nimport MaxwellSceneManager from \"./maxwell-scene-manager/maxwell-scene-manager\";\r\nfunction MaxWellCarThree() {\r\n  return (\r\n    <div className=\"maxwell-car-three\">\r\n      <Canvas\r\n        gl={{\r\n          logarithmicDepthBuffer: true,\r\n          antialias: true,\r\n          outputColorSpace: THREE.SRGBColorSpace,\r\n        }}\r\n        dpr={[1, 1.5]}\r\n        camera={{ position: [0, 0, 15], fov: 25 }}\r\n      >\r\n        <color attach=\"background\" args={[\"#000000\"]} />\r\n        <hemisphereLight intensity={0.8} />\r\n        {/*<ContactShadows*/}\r\n        {/*  resolution={1024}*/}\r\n        {/*  frames={1}*/}\r\n        {/*  position={[0, -0.01, 0]}*/}\r\n        {/*  scale={15}*/}\r\n        {/*  blur={0.5}*/}\r\n        {/*  opacity={1}*/}\r\n        {/*  far={20}*/}\r\n        {/*/>*/}\r\n        <MaxWellCarBaeEnv></MaxWellCarBaeEnv>\r\n        <MaxwellEffects/>\r\n        <MaxwellSceneManager/>\r\n      </Canvas>\r\n      <Stats />\r\n      {/*<Leva collapsed />*/}\r\n      {/* <Stats/> */}\r\n      <Loader />\r\n    </div>\r\n  );\r\n}\r\nexport default MaxWellCarThree;","import { useContext } from \"react\";\r\nimport {CAR_COLOR, CAR_SCENE_TYPE, CAR_TECH_TYPE} from \"../../enum/enum\";\r\nimport \"./maxwell-home.less\";\r\nimport { MaxWellContext } from \"../../context/maxwell-car-context\";\r\nfunction MaxWellHome({ handleSceneChange,handleColorChange ,handleTechTypeChange }) {\r\n  const { sceneType, carColor,techType } = useContext(MaxWellContext);\r\n  const getIndex = (type) => {\r\n    if (type == CAR_SCENE_TYPE.SHOWROOM) {\r\n      return 3.5;\r\n    } else if (type == CAR_SCENE_TYPE.ROAD) {\r\n      return 17.5;\r\n    }\r\n    else if (type == CAR_SCENE_TYPE.TECH) {\r\n      return 31.5;\r\n    }\r\n  };\r\n  const getBottom = (color) => {\r\n    return color * 8 + 2;\r\n  };\r\n  const  resetTechTye=()=>{\r\n      handleTechTypeChange(CAR_TECH_TYPE.MEDEA)\r\n  }\r\n  return (\r\n    <>\r\n      <div className=\"maxwell-home\">\r\n        <div className=\"maxwell-home-header maxwell-home-fixed\">\r\n          {sceneType == CAR_SCENE_TYPE.SHOWROOM && (\r\n            <>\r\n              <h1 className=\"blue mb-10 brand\">Luxvire</h1>\r\n              <p className=\"wihte mb-5\">Beyond Luxury, Beyond Speed</p>\r\n              <p className=\"wihte mb-5\">\r\n                麦克斯韦全新跑车，专为极致性能与奢华体验而生\r\n              </p>\r\n            </>\r\n          )}\r\n          {sceneType == CAR_SCENE_TYPE.ROAD && (\r\n            <>\r\n              <h2 className=\"blue mb-10\">Beyond Luxury, Beyond Speed</h2>\r\n              <p className=\"wihte mb-5\">\r\n                搭载顶级动力系统，提供非凡加速与优雅流畅的驾驶体验\r\n              </p>\r\n              <p className=\"wihte mb-5\">\r\n                内饰结合细腻材质与智能科技，带来无与伦比的舒适与控制感\r\n              </p>\r\n              <p className=\"wihte mb-5\">\r\n                这不仅是一辆跑车，更是奢华与速度的完美体现\r\n              </p>\r\n            </>\r\n          )}\r\n            {sceneType == CAR_SCENE_TYPE.TECH&&techType==CAR_TECH_TYPE.MEDEA && (\r\n                <>\r\n                    <h2 className=\"blue mb-10\">沉浸式车载娱乐系统</h2>\r\n                    <p className=\"wihte mb-5\">\r\n                        杜比环绕声，让每一个音符触动心弦\r\n                    </p>\r\n                    <p className=\"wihte mb-5\">\r\n                        智能在线连接，畅享音乐、电影与导航的无缝融合\r\n                    </p>\r\n                    <p className=\"wihte mb-5\">\r\n\r\n                    </p>\r\n                </>\r\n            )}\r\n            {sceneType == CAR_SCENE_TYPE.TECH&&techType==CAR_TECH_TYPE.FLOW && (\r\n                <>\r\n                    <h2 className=\"blue mb-10\">突破风的桎梏，尽享速度的激情</h2>\r\n                    <p className=\"wihte mb-5\">\r\n                        流线型车身，宛如风中舞者，将阻力降至最低\r\n                    </p>\r\n                    <p className=\"wihte mb-5\">\r\n                        卓越空气动力性能，赋予您无与伦比的加速体验\r\n                    </p>\r\n                </>\r\n            )}\r\n            {sceneType == CAR_SCENE_TYPE.TECH&&techType==CAR_TECH_TYPE.LD && (\r\n                <>\r\n                    <h2 className=\"blue mb-10\">智感未来，驾驭无忧</h2>\r\n                    <p className=\"wihte mb-5\">\r\n                        智能雷达系统，全天候感知周围环境，精准扫描、实时反馈，助您从容应对复杂路况\r\n                    </p>\r\n                    <p className=\"wihte mb-5\">\r\n                        先进智驾系统，融合AI科技，智能规划行车路线，自动辅助驾驶，让每一次出行更安全、更高效。\r\n                    </p>\r\n                </>\r\n            )}\r\n        </div>\r\n          <div className=\"maxwell-home-right maxwell-home-fixed\">\r\n              {/* 造型 */}\r\n          <div\r\n              className=\"item\"\r\n              onClick={() => {\r\n                  resetTechTye();\r\n                handleSceneChange(CAR_SCENE_TYPE.SHOWROOM)\r\n              }\r\n              }\r\n          >\r\n            <div\r\n                className={\r\n                  sceneType == CAR_SCENE_TYPE.SHOWROOM\r\n                      ? \"item-text active\"\r\n                      : \"item-text\"\r\n                }\r\n            >\r\n              造型\r\n            </div>\r\n            <div className=\"item-Line\"></div>\r\n          </div>\r\n\r\n          {/* 行驶 */}\r\n          <div\r\n              className=\"item\"\r\n              onClick={() => {\r\n                  resetTechTye();\r\n                handleSceneChange(CAR_SCENE_TYPE.ROAD)\r\n              }}\r\n          >\r\n            <div\r\n                className={\r\n                  sceneType == CAR_SCENE_TYPE.ROAD\r\n                      ? \"item-text active\"\r\n                      : \"item-text\"\r\n                }\r\n            >\r\n              行驶\r\n            </div>\r\n\r\n            <div className=\"item-Line\"></div>\r\n          </div>\r\n          <div\r\n              className=\"item\"\r\n              onClick={() => {\r\n                  resetTechTye();\r\n                handleSceneChange(CAR_SCENE_TYPE.TECH)\r\n              }}\r\n          >\r\n            <div\r\n                className={\r\n                  sceneType === CAR_SCENE_TYPE.TECH\r\n                      ? \"item-text active\"\r\n                      : \"item-text\"\r\n                }\r\n            >\r\n              科技\r\n            </div>\r\n\r\n            <div className=\"item-Line\"></div>\r\n          </div>\r\n          <div\r\n              className=\"line\"\r\n              style={{top: `${getIndex(sceneType)}vmin`}}\r\n          ></div>\r\n          {/* <div>行驶</div> */}\r\n        </div>\r\n          <div className=\"maxwell-home-bottom maxwell-home-fixed\">\r\n              {(sceneType == CAR_SCENE_TYPE.SHOWROOM || sceneType == CAR_SCENE_TYPE.ROAD) && (<div className=\"bar-content\">\r\n                  <div\r\n                      className=\"bar\"\r\n                      onClick={() => {\r\n                          handleColorChange(CAR_COLOR.BLUE)\r\n                      }}\r\n                  >\r\n                      <img src={ __VITE_URL__ + \"/texture/蓝色车漆预览.png\"} className=\"active\"/>\r\n                      <div className=\"bar-line\"></div>\r\n                  </div>\r\n                  <div\r\n                      className=\"bar\"\r\n                      onClick={() => {\r\n                          handleColorChange(CAR_COLOR.SLIVER)\r\n                      }}\r\n                  >\r\n                      <img src={__VITE_URL__ + \"/img/银色.png\"} className=\"active\"/>\r\n                      <div className=\"bar-line\"></div>\r\n                  </div>\r\n                  <div\r\n                      className=\"bar\"\r\n                      onClick={() => {\r\n                          handleColorChange(CAR_COLOR.OTHER)\r\n                      }}\r\n                  >\r\n                      <img src={__VITE_URL__ + \"/texture/123374379_p0_master1200.jpg\"} className=\"active\"/>\r\n                      <div className=\"bar-line\"></div>\r\n                  </div>\r\n                  <div\r\n                      className=\"line\"\r\n                      style={{left: `${getBottom(carColor)}vmin`}}\r\n                  ></div>\r\n              </div>)}\r\n              {sceneType===CAR_SCENE_TYPE.TECH && (\r\n                  <div className=\"bar-content\">\r\n                      <div\r\n                          className=\"bar\"\r\n                          title={\"影音娱乐\"}\r\n                          onClick={() => {\r\n                              handleTechTypeChange(CAR_TECH_TYPE.MEDEA)\r\n                          }}\r\n                      >\r\n                          <img src={__VITE_URL__ + \"/texture/多媒体 (1).png\"} className=\"active\"/>\r\n                          <div className=\"bar-line\"></div>\r\n                      </div>\r\n                      <div\r\n                          className=\"line\"\r\n                          style={{left: `${getBottom(techType)}vmin`}}\r\n                      ></div>\r\n                      <div\r\n                          className=\"bar\"\r\n                          title={\"空气动力\"}\r\n                          onClick={() => {\r\n                              handleTechTypeChange(CAR_TECH_TYPE.FLOW)\r\n                          }}\r\n                      >\r\n                          <img src={ __VITE_URL__ + \"/texture/wind-flow-2--wind-flow-weather.png\"} className=\"active\"/>\r\n                          <div className=\"bar-line\"></div>\r\n                      </div>\r\n                      <div\r\n                          className=\"bar\"\r\n                          title={\"智驾辅助\"}\r\n                          onClick={() => {\r\n                              handleTechTypeChange(CAR_TECH_TYPE.LD)\r\n                          }}\r\n                      >\r\n                          <img src={__VITE_URL__ + \"/texture/雷达.png\"} className=\"active\"/>\r\n                          <div className=\"bar-line\"></div>\r\n                      </div>\r\n                  </div>\r\n              )}\r\n          </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MaxWellHome;\r\n","\r\nimport { useState } from \"react\";\r\nimport { MaxWellContext } from \"./context/maxwell-car-context\";\r\nimport MaxWellCarThree from \"./maxwell-car-three/maxwell-car-three\";\r\nimport \"./maxwell-car.less\";\r\nimport MaxWellHome from \"./views/maxwell-home/maxwell-home\";\r\nimport {CAR_SCENE_TYPE, CAR_TECH_TYPE} from \"./enum/enum\";\r\nimport { CAR_COLOR } from \"./enum/enum\";\r\nfunction MaxWellCar() {\r\n  // const [carStore,setCarStore]=useState({\r\n  //   sceneType:CAR_SCENE_TYPE.SHOWROOM,\r\n  //   carColor:CAR_COLOR.BLUE\r\n  // })\r\n  const [sceneType, setSceneType] = useState(CAR_SCENE_TYPE.SHOWROOM);\r\n  const [carColor, setCarColor] = useState(CAR_COLOR.BLUE);\r\n  const [techType, setTechType] = useState(CAR_TECH_TYPE.MEDEA);\r\n  return (\r\n    <>\r\n      <div className=\"maxwell-car\">\r\n        <MaxWellContext.Provider \r\n        value={{ sceneType, carColor, techType,setSceneType, setCarColor ,setTechType}}\r\n        >\r\n          <MaxWellHome handleSceneChange={(val)=>{\r\n            setSceneType(val)\r\n          }}\r\n          handleColorChange={\r\n            (val)=>{\r\n              setCarColor(val)\r\n            }\r\n          }\r\n                       handleTechTypeChange= {(val)=>{setTechType(val)}}\r\n          />\r\n          <MaxWellCarThree />\r\n        </MaxWellContext.Provider>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nexport default MaxWellCar;\r\n"],"names":["webGL2Available","isWebGL2Available","_a","gl","canvas","u8","u16","u32","fleb","fdeb","clim","freb","eb","start","b","i","r","j","fl","revfl","_b","fd","rev","x","hMap","cd","mb","s","l","le","co","rvb","sv","r_1","v","m","flt","fdt","flrm","fdrm","max","a","bits","d","p","o","bits16","shft","slc","e","n","inflt","dat","buf","st","sl","noBuf","noSt","cbuf","bl","nbuf","final","pos","bt","lm","dm","lbt","dbt","tbts","type","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","c","lt","dt","t","lms","dms","lpos","sym","add","dsym","end","et","zlv","unzlibSync","data","out","td","tds","isCubeTexture","def","GroundProjectedEnv","Mesh","texture","options","isCubeMap","cubeSize","_lodMax","_cubeSize","width","height","defines","vertexShader","fragmentShader","REVISION","uniforms","geometry","IcosahedronGeometry","material","ShaderMaterial","DoubleSide","radius","retarget","target","source","Vector3","quat","Quaternion","scale","bindBoneMatrix","Matrix4","relativeMatrix","globalMatrix","sourceBones","getBones","bones","bindBones","bone","name","boneTo","bonesPosition","getBoneByName","boneIndex","wBindMatrix","retargetClip","clip","getHelperFromSkeleton","numFrames","delta","convertedTracks","mixer","AnimationMixer","boneDatas","positionOffset","boneData","time","VectorKeyframeTrack","QuaternionKeyframeTrack","AnimationClip","clone","sourceLookup","cloneLookup","clone2","parallelTraverse","sourceNode","clonedNode","node","clonedMesh","sourceMesh","skeleton","SkeletonHelper","callback","SkeletonUtils","RGBELoader","DataTextureLoader","manager","HalfFloatType","buffer","rgbe_error","rgbe_error_code","msg","NEWLINE","fgets","buffer2","lineLimit","consume","len","chunk","RGBE_ReadHeader","magic_token_re","gamma_re","exposure_re","format_re","dimensions_re","header","line","match","RGBE_ReadPixels_RLE","w2","h2","scanline_width","data_rgba","offset","ptr_end","rgbeStart","scanline_buffer","num_scanlines","ptr","count","isEncodedRun","byteValue","off","RGBEByteToRGBFloat","sourceArray","sourceOffset","destArray","destOffset","RGBEByteToRGBHalf","DataUtils","byteArray","rgbe_header_info","w","h","image_rgba_data","numElements","FloatType","floatArray","halfArray","value","url","onLoad","onProgress","onError","onLoadCallback","texData","LinearFilter","hasColorSpace","Texture","EXRLoader","logBase","reverseLutFromBitmap","bitmap","lut","k","hufClearDecTable","hdec","getBitsReturn","getBits","nBits","lc","uInt8Array2","inOffset","parseUint8Array","hufTableBuffer","hufCanonicalCodeTable","hcode","nc","hufUnpackEncTable","inDataView","ni","im","iM","zerun","hufLength","code","hufCode","hufBuildDecTable","hdecod","pl","plOffset","getCharReturn","getChar","getCodeReturn","getCode","po","rlc","outBuffer","outBufferOffset","outBufferEndOffset","cs","UInt16","Int16","ref","wdec14Return","wdec14","ls","hs","hi","ai","as","bs","wdec16","bb","aa","wav2Decode","nx","ox","ny","oy","mx","w14","p2","py","ey","oy1","oy2","ox1","ox2","i00","i01","i10","i11","px","ex","p01","p10","p11","hufDecode","encodingTable","decodingTable","no","outOffset","inOffsetEnd","index","hufUncompress","nCompressed","nRaw","initialInOffset","parseUint32","freq","applyLut","nData","predictor","interleaveScalar","t1","t2","stop","decodeRunLength","size","reader","lossyDctDecode","cscSet","rowPtrs","channelData","acBuffer","dcBuffer","dataView","numComp","numFullBlocksX","numBlocksX","numBlocksY","leftoverX","leftoverY","currAcComp","currDcComp","dctData","halfZigBlock","rowBlock","rowOffsets","comp2","blocky","maxY","maxX","blockx","unRleAC","unZigZag","dctInverse","csc709Inverse","convertToHalf","offset2","type2","y2","src","offset3","x2","halfRow","comp","y","decodeFloat16","acValue","dctComp","dst","f","g","alpha","beta","theta","gamma","row","rowPtr","column","cb","cr","idx","toLinear","float","uncompressRAW","info","uncompressRLE","compressed","rawBuffer","tmpBuffer","uncompressZIP","uncompressPIZ","outBufferEnd","pizChannelData","minNonZero","parseUint16","maxNonZero","parseUint8","maxValue","length","tmpOffset2","cp","uncompressPXR","sz","tmpBufferEnd","writePtr","pixel","diff","uncompressDWA","dwaHeader","parseInt64","EXRHeader","channelRules","ruleSize","parseNullTerminatedString","compression","csc","channels","channel","rule","zlibInfo","rleBuffer","chan","rleOffset","rowOffsetBytes","byte","uintBuffer","endOffset","stringValue","parseFixedLengthString","parseRational","parseInt32","parseTimecode","Int32","Uint32","Uint8","int","parseFloat32","decodeFloat32","binary","exponent","fraction","Uint16","parseFloat16","parseChlist","startOffset","pixelType","pLinear","xSampling","ySampling","parseChromaticities","redX","redY","greenX","greenY","blueX","blueY","whiteX","whiteY","parseCompression","compressionCodes","parseBox2i","xMin","yMin","xMax","yMax","parseLineOrder","lineOrders","lineOrder","parseV2f","parseV3f","z","parseValue","parseHeader","EXRHeader2","spec","keepReading","attributeName","attributeType","attributeSize","attributeValue","setupDecoder","outputType","EXRDecoder2","RGBAFormat","RedFormat","bufferDataView","uInt8Array","EXRDecoder","tmpOffset","channelOffsets","scanlineBlockIdx","viewer","line_y","true_y","channelID","cOff","outIndex","getVersion","version","createSpread","child","keys","deep","inject","castShadow","receiveShadow","spread","key","React.isValidElement","THREE.Mesh","Clone","React.forwardRef","isChild","object","children","props","forwardRef","config","React.useMemo","isSkinned","React.createElement","_extends","injectChildren","Element","useCubeCamera","resolution","near","far","envMap","fog","useThree","scene","fbo","useMemo","WebGLCubeRenderTarget","useEffect","camera","THREE.CubeCamera","originalFog","originalBackground","update","React.useCallback","module","this","u","q","useEffectfulState","fn","deps","state","set","React.useState","React.useLayoutEffect","Stats","showPanel","className","parent","stats","StatsImpl","React.useEffect","classNames","cls","begin","addEffect","addAfterEffect","ConvolutionMaterial","THREE.ShaderMaterial","texelSize","THREE.Vector2","THREE.Uniform","THREE.NoBlending","BlurPass","minDepthThreshold","maxDepthThreshold","depthScale","depthToBlurRatioBias","WebGLRenderTarget","Vector2","Scene","Camera","vertices","uvs","BufferGeometry","BufferAttribute","renderer","inputBuffer","outputBuffer","renderTargetA","renderTargetB","kernel","lastRT","destRT","MeshStandardMaterial","parameters","shader","_shader$defines","MeshReflectorMaterial","mixBlur","mixStrength","blur","mirror","distortion","mixContrast","distortionMap","reflectorOffset","extend","MeshReflectorMaterial$1","hasBlur","materialRef","React.useRef","React.useImperativeHandle","reflectorPlane","Plane","normal","reflectorWorldPosition","cameraWorldPosition","rotationMatrix","lookAtPosition","clipPlane","Vector4","view","textureMatrix","virtualCamera","PerspectiveCamera","beforeRender","_materialRef$current","projectionMatrix","fbo1","fbo2","blurpass","reflectorProps","DepthTexture","DepthFormat","UnsignedShortType","useFrame","_materialRef$current2","currentXrEnabled","currentShadowAutoUpdate","getBufferForType","UnsignedByteType","UnsignedIntType","ByteType","ShortType","IntType","_canReadPixelsResult","canReadPixels","renderTargetOptions","testRT","mesh","PlaneGeometry","MeshBasicMaterial","QuadRenderer","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","rtOptions","ClampToEdgeWrapping","OrthographicCamera","alternativeType","UVMapping","WebGLRenderer","returnValue","DataTexture","LinearSRGBColorSpace","disposeRenderTarget","GainMapDecoderMaterial","offsetHdr","offsetSdr","gainMapMin","gainMapMax","maxDisplayBoost","hdrCapacityMin","hdrCapacityMax","sdr","gainMap","NoBlending","val","GainMapNotFoundError","XMPMetadataNotFoundError","getAttribute","description","defaultValue","parsedValue","values","extractXMP","input","str","parser","xmpBlock","offsetSDR","offsetHDR","MPFExtractor","imageArrayBuffer","resolve","reject","debug","loops","marker","formatPt","tiffOffset","bigEnd","firstIFDOffset","dirStart","entriesStart","numberOfImages","MPImageListValPt","images","image","bufferBlob","imgs","imageBlob","extractGainmapFromJPEG","jpegFile","metadata","getHTMLImageFromBlob","blob","img","LoaderBase","Loader","LoadingManager","quadRenderer","sdrBuffer","gainMapBuffer","gainMapBlob","sdrBlob","sdrImage","gainMapImage","needsFlip","res","LinearMipMapLinearFilter","SRGBColorSpace","GainMapLoader","sdrUrl","gainMapUrl","metadataUrl","loadCheck","error","sdrLengthComputable","sdrTotal","sdrLoaded","gainMapLengthComputable","gainMapTotal","gainMapLoaded","metadataLengthComputable","metadataTotal","metadataLoaded","progressHandler","total","loaded","lengthComputable","sdrLoader","FileLoader","gainMapLoader","metadataLoader","json","HDRJPGLoader","loader","jpeg","jpegBuffer","sdrJPEG","gainMapJPEG","extractionResult","presetsObj","CUBEMAP_ROOT","isArray","arr","defaultFiles","useEnvironment","files","path","preset","encoding","extensions","multiFile","validatePreset","extension","isCubemap","getExtension","getLoader","useLayoutEffect","clearGainmapTexture","useLoader","loaderResult","_renderTarget","CubeReflectionMapping","EquirectangularReflectionMapping","sRGBEncoding","LinearEncoding","preloadDefaultOptions","preloadOptions","clearDefaultOptins","clearOptions","_firstEntry$split$pop","isGainmap","file","firstEntry","CubeTextureLoader","isRef","obj","resolveScene","setEnvProps","background","defaultScene","sceneProps","_target$backgroundRot","_target$backgroundRot2","_target$environmentRo","_target$environmentRo2","oldbg","oldenv","oldSceneProps","applyProps","EnvironmentMap","map","EnvironmentCube","backgroundBlurriness","backgroundIntensity","backgroundRotation","environmentIntensity","environmentRotation","rest","EnvironmentPortal","frames","virtualScene","autoClear","React.Fragment","createPortal","EnvironmentGround","_props$ground","_props$ground2","_scale","_props$ground3","textureDefault","args","Environment","Lightformer","light","toneMapped","color","Form","intensity","THREE.Vector3","THREE.DoubleSide","CAR_SCENE_TYPE","CAR_COLOR","CAR_TECH_TYPE","MaxWellContext","createContext","MaxWellCarBaeEnv","controls","useRef","useState","THREE.BoxGeometry","sceneType","techType","useContext","TWEEN","jsxs","Fragment","jsx","OrbitControls","adaptive_luminance_default","common_default","AdaptiveLuminanceMaterial","Uniform","BlendFunction","EffectAttribute","EffectShaderSection","KernelSize","LUTOperation","ToneMappingMode","VignetteTechnique","convolution_kawase_default","convolution_kawase_default2","kernelPresets","KawaseBlurMaterial","ShaderMaterial5","Uniform5","NoBlending5","copy_default","CopyMaterial","ShaderMaterial6","Uniform6","NoBlending6","depth_downsampling_default","depth_downsampling_default2","DepthDownsamplingMaterial","ShaderMaterial9","Uniform9","Vector24","NoBlending9","depthPacking","BasicDepthPacking3","convolution_downsampling_default","convolution_downsampling_default2","DownsamplingMaterial","ShaderMaterial11","Uniform11","Vector26","NoBlending11","effect_default","effect_default2","EffectMaterial","ShaderMaterial13","shaderParts","dithering","REVISION4","Uniform13","Vector28","NoBlending13","BasicDepthPacking6","entry","PerspectiveCamera5","luminance_default","LuminanceMaterial","ShaderMaterial16","colorOutput","luminanceRange","REVISION5","Uniform16","NoBlending16","convolution_upsampling_default","convolution_upsampling_default2","UpsamplingMaterial","ShaderMaterial21","Uniform22","Vector214","NoBlending21","dummyCamera","getFullscreenTriangle","Pass","screen","depthTexture","BasicDepthPacking8","deltaTime","stencilTest","frameBufferType","property","Material","CopyPass","renderTarget","autoResize","WebGLRenderTarget2","UnsignedByteType3","sRGBEncoding2","AdaptiveLuminancePass","luminanceBuffer","minLuminance","adaptationRate","WebGLRenderTarget3","NearestFilter","ClearMaskPass","stencil","Color","ClearPass","color2","depth","overrideClearColor","overrideClearAlpha","clearAlpha","hasOverrideClearColor","hasOverrideClearAlpha","AUTO_SIZE","Resolution","EventDispatcher","resizable","Vector215","base","preferred","effective","workaroundEnabled","OverrideMaterialManager","materials","BackSide","m2","FrontSide","c2","shadowMapEnabled","originalMaterials","overrideMaterial","RenderPass","selection","mask","shadowMapAutoUpdate","DepthDownsamplingPass","normalBuffer","resolutionScale","resolutionX","resolutionY","WebGLRenderTarget6","NearestFilter3","BasicDepthPacking10","prefixSubstrings","prefix","substrings","strings","substring","prefixed","regExp","integrateEffect","effect","mainImageExists","mainUvExists","functionRegExp","fragmentHead","fragmentMainUv","fragmentMainImage","vertexHead","vertexMainSupport","varyings","names","needsUv","shaders","blendMode","sRGBEncoding4","depthParamRegExp","blendOpacity","EffectPass","effects","event","EffectShaderData","id","blendRegExp","BasicDepthPacking12","UnsignedByteType6","KawaseBlurPass","kernelSize","WebGLRenderTarget9","kernelSequence","previousBuffer","UnsignedByteType8","sRGBEncoding6","LuminancePass","WebGLRenderTarget10","UnsignedByteType9","MaskPass","context","buffers","clearPass","writeValue","clearValue","MipmapBlurPass","WebGLRenderTarget11","Vector216","mipmap","downsamplingMaterial","upsamplingMaterial","downsamplingMipmaps","upsamplingMipmaps","mipmaps","UnsignedByteType10","sRGBEncoding7","NormalPass","MeshNormalMaterial","renderPass","Color3","WebGLRenderTarget12","NearestFilter5","MILLISECONDS_TO_SECONDS","SECONDS_TO_MILLISECONDS","Timer","timestamp","EffectComposer","depthBuffer","stencilBuffer","multisampling","Vector217","UnsignedByteType12","sRGBEncoding8","pass","updateDOM","oldRenderer","DepthStencilFormat","UnsignedInt248Type","LinearFilter2","REVISION6","WebGLMultisampleRenderTarget","WebGLRenderTarget13","passes","drawingBufferSize","reducer","copyPass","updateStyle","currentSize","autoReset","LinearEncoding2","add_default","alpha_default","average_default","color_default","color_burn_default","color_dodge_default","darken_default","difference_default","divide_default","exclusion_default","hard_light_default","hard_mix_default","hue_default","invert_default","invert_rgb_default","lighten_default","linear_burn_default","linear_dodge_default","linear_light_default","luminosity_default","multiply_default","negation_default","normal_default","overlay_default","pin_light_default","reflect_default","saturation_default","screen_default","soft_light_default","src_default","subtract_default","vivid_light_default","blendFunctions","BlendMode","EventDispatcher2","blendFunction","opacity","Uniform23","Effect","EventDispatcher3","attributes","LinearEncoding3","BasicDepthPacking13","WebGLRenderTarget14","Material2","Texture2","bloom_default","BloomEffect","luminanceThreshold","luminanceSmoothing","mipmapBlur","levels","Uniform24","WebGLRenderTarget15","luminancePass","sRGBEncoding9","brightness_contrast_default","BrightnessContrastEffect","brightness","contrast","Uniform26","sRGBEncoding10","color_depth_default","ColorDepthEffect","Uniform27","depth_default","DepthEffect","inverted","dot_screen_default","DotScreenEffect","angle","Uniform30","Vector219","Matrix42","hue_saturation_default","HueSaturationEffect","hue","saturation","Uniform35","Vector32","createCanvas","imageData","RawImageData","worker_default","Color5","LookupTexture","DataTexture3D","FloatType5","RGBAFormat4","LinearEncoding4","LinearFilter3","Vector33","transferData","promise","workerURL","worker","transferList","img0","img1","size0","size1","data0","data1","sizeSq","i4","iRGB","floatData","uint8Data","UnsignedByteType15","sRGBEncoding13","DataTexture2","j4","noise_default","NoiseEffect","premultiply","scanlines_default","ScanlineEffect","density","scrollSpeed","Uniform41","Vector224","shock_wave_default","shock_wave_default2","HALF_PI","v2","Vector35","ab","ShockWaveEffect","position","speed","maxRadius","waveSize","amplitude","Uniform42","Vector225","uActive","sepia_default","SepiaEffect","Uniform43","Vector36","tone_mapping_default","ToneMappingEffect","adaptive","mode","maxLuminance","whitePoint","middleGrey","averageLuminance","Uniform48","WebGLRenderTarget23","LinearMipmapLinearFilter","vignette_default","VignetteEffect","technique","eskil","darkness","Uniform49","LUTCubeLoader","Loader2","externalManager","internalManager","LoadingManager4","FileLoader2","url2","result","regExpTitle","regExpSize","regExpDomainMin","regExpDomainMax","regExpDataPoints","title","domainMin","Vector37","domainMax","wrapEffect","effectImpl","defaultBlendMode","_ref","invalidate","React","Bloom","EffectComposerContext","enabled","renderPriority","disableNormalPass","defaultCamera","composer","normalPass","downSamplingPass","effectComposer","EffectComposer$1","_","group","effectPass","useImperativeHandle","MaxwellEffects","_taskCache","DRACOLoader","workerLimit","attributeIDs","attributeTypes","taskConfig","taskKey","cachedTask","taskID","taskCost","geometryPending","_worker","message","geometryData","attribute","array","itemSize","responseType","useJS","librariesPending","libraries","jsContent","DRACOWorker","body","decoderConfig","decoderPending","draco","decoder","decoderBuffer","decodeGeometry","attr","dracoGeometry","decodingStatus","geometryType","attributeID","decodeAttribute","decodeIndex","numIndices","byteLength","numComponents","numValues","dataType","getDracoDataType","GLTFLoader","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFMaterialsSheenExtension","GLTFMaterialsTransmissionExtension","GLTFMaterialsVolumeExtension","GLTFMaterialsIorExtension","GLTFMaterialsEmissiveStrengthExtension","GLTFMaterialsSpecularExtension","GLTFMaterialsIridescenceExtension","GLTFLightsExtension","GLTFMeshoptCompression","GLTFMeshGpuInstancing","scope","resourcePath","LoaderUtils","_onError","gltf","dracoLoader","ktx2Loader","meshoptDecoder","plugins","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","GLTFBinaryExtension","GLTFParser","plugin","extensionName","extensionsRequired","GLTFMaterialsUnlitExtension","GLTFDracoMeshCompressionExtension","GLTFTextureTransformExtension","GLTFMeshQuantizationExtension","GLTFRegistry","objects","nodeDefs","nodeIndex","nodeLength","nodeDef","lightIndex","cacheKey","dependency","lightDef","lightNode","range","DirectionalLight","PointLight","SpotLight","assignExtrasToUserData","self","materialParams","materialDef","pending","metallicRoughness","materialIndex","emissiveStrength","MeshPhysicalMaterial","colorArray","textureIndex","textureDef","handler","isSupported","bufferView","extensionDef","byteOffset","stride","meshDef","primitive","WEBGL_CONSTANTS","attributesDef","accessor","results","nodeObject","meshes","instancedMeshes","instancedMesh","InstancedMesh","Object3D","BINARY_EXTENSION_HEADER_LENGTH","BINARY_EXTENSION_CHUNK_TYPES","headerView","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","threeAttributeName","ATTRIBUTES","accessorDef","componentType","WEBGL_COMPONENT_TYPES","normalized","transform","GLTFCubicSplineInterpolant","Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","valueSize","i1","t0","stride2","stride3","pp","ppp","offset1","offset0","s2","s3","s0","s1","p0","m0","p1","m1","GLTFCubicSplineQuaternionInterpolant","WEBGL_FILTERS","NearestMipmapNearestFilter","LinearMipmapNearestFilter","NearestMipmapLinearFilter","WEBGL_WRAPPINGS","MirroredRepeatWrapping","RepeatWrapping","WEBGL_TYPE_SIZES","PATH_PROPERTIES","INTERPOLATION","InterpolateLinear","InterpolateDiscrete","ALPHA_MODES","createDefaultMaterial","cache","addUnknownExtensionsToUserData","knownExtensions","objectDef","gltfDef","addMorphTargets","targets","hasMorphPosition","hasMorphNormal","hasMorphColor","il","pendingPositionAccessors","pendingNormalAccessors","pendingColorAccessors","pendingAccessor","accessors","morphPositions","morphNormals","morphColors","updateMorphTargets","targetNames","createPrimitiveKey","primitiveDef","dracoExtension","geometryKey","createAttributesKey","attributesKey","getNormalizedComponentScale","constructor","getImageURIMimeType","uri","_identityMatrix","isSafari","isFirefox","firefoxVersion","TextureLoader","ImageBitmapLoader","ext","dependencies","skinDefs","meshDefs","skinIndex","skinLength","joints","updateMappings","original","mappings","func","defs","bufferIndex","bufferDef","bufferViewDef","accessorIndex","TypedArray","pendingBufferViews","bufferViews","elementBytes","itemBytes","byteStride","bufferAttribute","ibSlice","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","sourceIndex","sourceDef","sampler","URL","sourceURI","isObjectURL","imageBitmap","mapName","mapDef","gltfReference","useDerivativeTangents","useVertexColors","useFlatShading","pointsMaterial","PointsMaterial","lineMaterial","LineBasicMaterial","cachedMaterial","materialType","materialExtensions","kmuExtension","alphaMode","originalName","sanitizedName","PropertyBinding","primitives","createDracoPrimitive","addPrimitiveAttributes","cached","geometryPromise","meshIndex","geometries","SkinnedMesh","toTrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LineSegments","Line","LineLoop","Points","Group","cameraIndex","cameraDef","params","MathUtils","skinDef","inverseBindMatrices","jointNodes","boneInverses","jointNode","mat","Skeleton","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","output","nodes","inputAccessors","outputAccessors","samplers","tracks","inputAccessor","outputAccessor","TypedKeyframeTrack","NumberKeyframeTrack","targetName","interpolation","outputArray","scaled","jl","track","interpolantType","nodeName","objectPending","meshPromise","childPending","childrenDef","skeletonPending","Bone","matrix","sceneIndex","sceneDef","nodeIds","reduceAssociations","reducedAssociations","computeBounds","box","Box3","min","boxScale","maxDisplacement","vector","sphere","Sphere","assignAttributeAccessor","gltfAttributeName","drawMode","indices","numberOfTriangles","newIndices","newGeometry","loadingMaterial_fs_default","loadingMaterial_vs_default","LoadingMaterial","CustomShaderMaterial","THREE.MeshBasicMaterial","THREE.AdditiveBlending","THREE.Color","vs","fs","useProcessModelShaders","model","shaderLogicQueue","setShaderLogicQueue","registerShaderLogic","applyShaderLogic","prevQueue","item","computeModelSize","boundingBox","THREE.Box3","itemBoundingBox","loadTexture","THREE.TextureLoader","pointsTexture","MaxWellParticleAggregation","hoda","isInit","setIsInit","pointTransitionTime","initialModelTransitionTime","targetModelTransitionTime","createPointsMaterial","box3","initialModelMaxValue","initialModelMinValue","THREE.PointsMaterial","listLengthAlignment","list","maxLength","alignmentList","remainder","assembleVertexData","offsetVector","scaleVector","vertexList","i3","item2","targetBox3","sourceBox3","targetSize","planeGeometry","THREE.PlaneGeometry","posArray","uvArray","offsetHight","i2","uv","THREE.BufferAttribute","targetVertexList","sourceVertexList","THREE.BufferGeometry","totalTime","ponits","THREE.Points","tween1","tween2","tween3","applyParticleAnimation","materail","useDynamicLightformers","baseEnvMap","cubeCamera","dynamicEnvMap","MaxWellMixEnvMap","applyDynamicEnvMap","Model","rotation","carColor","scaleNum","setHoda","otherColor","useTexture","THREE.RGBAFormat","THREE.UnsignedByteType","sliverColor","defalutColor","frontWheelRef","fontWheel","rearWeel","meshList","distance","maxwellMixEnvMap","MaxwellMixEnvMap","maxwellParticleAggregation","MaxwellParticleAggregation","THREE.SRGBColorSpace","MaxwellHoda","Suspense","MaxwellLightformers","positions","layers","runState","setSpeed","isShow","street","setStreet","viseabk","setViseabk","cloneStreet1","setCloneStreet1","cloneStreet2","setCloneStreet2","setSize","bakedImg","getGroupBox3","childBoundingBox","item1","reset","tween","seconds","materialsName","setMaterialsOpacity","MaxWellRoadScene","MaxWellGround","scuffed_cement_disp_1k","scuffed_cement_diff_1k","MaxwellText","uProgress","textRef","text","setText","perlinTexture","help","THREE.Box3Helper","aUv","shaderCallback","MaxWellRoomScene","maxWellGround","MaxwellCarFlow","MaxwellCircleWave","innerRadius","uTime","initGeometry","curve","THREE.EllipseCurve","pointsPos","singleNum","aIndex","geoPosList","aNormals","points","MaxwellRaDa","rada","setRada","radaRadius","otherCarScene","setOtherCarScene","otherCarScene1","setOtherCarScene1","otherCarScene2","setOtherCarScene2","carScanMaterail","updateCar","carScene","worldPos","pos3","carMaterials","radaShader","MaxwellTechScene","MaxwellSceneManager","setRunState","MaxWellCarThree","Canvas","MaxWellHome","handleSceneChange","handleColorChange","handleTechTypeChange","getIndex","getBottom","resetTechTye","MaxWellCar","setSceneType","setCarColor","setTechType"],"mappings":"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,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,CAAC,CAAC,EAC9BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,CAAC,CAAC,EAC9BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,CAAC,CAAC,EAC9BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,EAAIH,EAAcN,EAAI,EAAE,CAAC,EAC/BS,EAAI,EAAE,E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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,25,26,28,29]}